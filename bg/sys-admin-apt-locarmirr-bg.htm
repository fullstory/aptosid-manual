<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
   "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
	<title>sidux Manuals - Local Archive Mirror</title>
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
	<style type="text/css" media="all">@import url("../lib/css-js/content.css");</style>
        <style type="text/css" media="all">@import url("../lib/css-js/menu.css");</style>
        <style type="text/css" media="print">@import url("../lib/css-js/print.css");</style>
        <link rel ="shortcut icon" href="../lib/favicon/manual.ico" />
        <script type="text/javascript" src="../lib/css-js/menu2.js"></script>
        <!--[if lt IE 8]>
        <link rel="stylesheet" type="text/css" href="../lib/css-js/ie_5-7_override.css">
        <![endif]-->
        <!--[if lt IE 7]>
        <link rel="stylesheet" type="text/css" href="../lib/css-js/ie_5-6_override.css">
        <![endif]-->
</head>
<body>
<div id="menu"> <!-- menu starts here bg lang maintainer manul-->
<!--sidux-manual Operating System Manual menu-version-02.03.2010.02.19 -->
<!-- menu last updated by bluewater 2010.02.19 1100 hrs UTC -->
	<div id="menu-header">
<a href="http://sidux.com/"><img src="../lib/logos/manual-sidux-logo.png" title="Главна страница на sidux.com, форуми и вики" alt="sidux.com лого" /></a>
	</div>
	<ul id="top-list">
		<li><a href="manual-search-bg.htm#search-on"> <img src="../lib/logos/manual-search-22x22.png" title="Търсене в ръководството" alt="Търсене" />Търсене</a> </li>
		<li><a href="http://manual.sidux.com/meta-manual">Community Software Selections</a></li>
	</ul>
	<div id="flags-2">
			<a href="../flag-index.html"><img src="../lib/logos/sidux-lang-100x64.png" title="Избор на друг език - choose another language" alt="превключване на езика" /></a>
	</div>
	<ul>
		<li  onmouseover="showHide( 1 );" onmouseout="startTime();" ><a href="welcome-bg.htm">Ръководство за sidux</a>
			<ul class="sub-menu" id="sm1">
				<li><a href="welcome-bg.htm#welcome-gen">Добре дошли!</a></li>
				<li><a href="welcome-bg.htm#how-to">Как да използваме ръководството</a></li>
				<li><a href="welcome-bg.htm#table-contents">Съдържание</a></li>
				<li><a href="help-bg.htm#help-gen">Къде да получим помощ</a></li>
				<li><a href="help-bg.htm#paste">IRC !paste</a></li>
				<li><a href="credits-bg.htm#cred-team">Благодарности</a></li>
				<li><a href="wel-quickstart-bg.htm#welcome-quick">Кратко ръководство за sidux</a></li>
			</ul>
		</li>
		<li  onmouseover="showHide( 2 );" onmouseout="startTime();" ><a href="cd-dl-burning-bg.htm">ISO Content, Releases, Download Mirrors and Burning</a>
			<ul class="sub-menu" id="sm2">
				<li><a href="cd-content-bg.htm#cd-content">ISO Content and system requirements</a></li>
				<li><a href="sys-admin-release-bg.htm#rolling">Забележки (Release Notes)</a></li>
				<li><a href="cd-dl-burning-bg.htm#download-sidux">Сървъри на sidux, сваляне на образа и създаване на инсталационно CD</a></li>
				<li><a href="cd-dl-burning-bg.htm#md5">Контролна сума md5</a></li>
				<li><a href="cd-dl-burning-bg.htm#burn-nero">Създаване на инсталационно CD в Windows</a></li>
				<li><a href="cd-dl-burning-bg.htm#burn-linux">Създаване на инсталационно CD в Linux</a></li>
				<li><a href="cd-no-gui-burn-bg.htm#burning-bg-gui">Скрипт burniso за създаване на инсталационно CD</a></li>
				<li><a href="cd-no-gui-burn-bg.htm#burning-no-gui">Създаване на инсталационно CD в терминален режим</a></li>
			</ul>
		</li>
		<li  onmouseover="showHide( 3 );" onmouseout="startTime();" ><a href="live-mode-bg.htm">Режим LiveCD</a>
			<ul class="sub-menu" id="sm3">
				<li><a href="live-mode-bg.htm#rootpw">root парола в LiveCD режим</a></li>
				<li><a href="live-mode-bg.htm#live-cd-installsoft">Инсталиране на софтуер в LiveCD режим</a></li>
				<li><a href="live-mode-bg.htm#ntfs-3g">Достъп към NTFS-форматирани раздели: ntfs-3g</a></li>
			</ul>
		</li>
		<li  onmouseover="showHide( 4 );" onmouseout="startTime();" ><a href="term-konsole-bg.htm">Терминал (Конзола)</a>
			<ul class="sub-menu" id="sm4">
				<li><a href="term-konsole-bg.htm#sux">Командата  sux / sudo</a></li>
				<li><a href="term-konsole-bg.htm#term-kon">Терминал (Конзола)</a></li>
				<li><a href="term-konsole-bg.htm#cli-help">Помощ в терминален режим</a></li>
				<li><a href="help-bg.htm#init3-tools">Tools to know in text mode (tty) - init 3</a></li>
				<li><a href="term-konsole-bg.htm#term-cmds">Команди в терминален режим</a></li>
				<li><a href="term-konsole-bg.htm#shell-scripts">Скриптове</a></li>
			</ul>
		</li>
		<li  onmouseover="showHide( 5 );" onmouseout="startTime();" ><a href="cheatcodes-bg.htm">Опции при стартиране</a>
			<ul class="sub-menu" id="sm5">
				<li><a href="cheatcodes-bg.htm#cheatcodes">Специфични за sidux LiveCD опции при стартиране на системата</a></li>
				<li><a href="cheatcodes-bg.htm#cheatcodes-linux">Общи за Linux опции при стартиране на системата</a></li>
				<li><a href="cheatcodes-vga-bg.htm#vga">VGA опции при стартиране</a></li>
			</ul>
		</li>
		<li  onmouseover="showHide( 6 );" onmouseout="startTime();" ><a href="part-gparted-bg.htm">Разделяне на диска</a>
			<ul class="sub-menu" id="sm6">
				<li><a href="part-gparted-bg.htm#partition">Разделяне на хард-диска с помощта на GParted</a></li>
				<li><a href="part-gparted-bg.htm#ntfs">Промяна на размерите на NTFS-раздели с GParted</a></li>
				<li><a href="part-uuid-bg.htm#uuid">Раздели: идентификатори и псевдоними, файл fstab</a></li>
				<li><a href="part-cfdisk-bg.htm#disknames">Конвенция за имената на дисковете в Linux</a></li>
				<li><a href="part-cfdisk-bg.htm#partition">Разделяне на хард-диска с помощта на cfdisk</a></li>
				<li><a href="part-cfdisk-bg.htm#formating">Форматиране на разделите с помощта на cfdisk след разделяне</a></li>
				<li><a href="part-size-examp-bg.htm#part-example">Примери за разделяне на хард-диска</a></li>
			</ul>
		</li>
		<li  onmouseover="showHide( 7 );" onmouseout="startTime();" ><a href="hd-install-bg.htm">Инсталиране на sidux</a>
			<ul class="sub-menu" id="sm7">
				<li><a href="hd-install-bg.htm#Inst-prep">Подготовка</a></li>
				<li><a href="hd-install-bg.htm#Installation">Инсталиране върху хард-диска</a></li>
				<li><a href="hd-install-bg.htm#first-hd-boot">Първо стартиране на системата</a></li>
				<li><a href="hd-install-opts-bg.htm#fromiso">Стартиране от iso-образ - Overview</a></li>
				<li><a href="hd-install-opts-bg.htm#fromiso-grub-leg">Booting 'fromiso' with grub-legacy</a></li>
				<li><a href="hd-install-opts-bg.htm#grub2-fromiso">Booting 'fromiso' with Grub 2</a></li>
				<li><a href="hd-install-opts-bg.htm#fromiso-persist">Методи fromiso и persist</a></li>
				<li><a href="hd-install-opts-bg.htm#usb-hd">Инсталиране върху USB-диск (флаш) - sidux specific - sidux-on-stick</a></li>
				<li><a href="hd-ins-opts-oos-bg.htm#raw-usb">Writing sidux to a USB/SSD stick with any Linux, MS Windows or Mac OS X system</a></li>
				<li><a href="nbdboot-bg.htm#nbd1">Booting sidux over a network</a></li>
				<li><a href="hd-install-opts-bg.htm#vtbox">Инсталиране на sidux във VirtualBox среда</a></li>
				<li><a href="hd-install-opts-bg.htm#qemu">Инсталиране на sidux в QEMU среда</a></li>
			</ul>
		</li>
		<li  onmouseover="showHide( 8 );" onmouseout="startTime();" ><a href="hw-dev-hw-dri-bg.htm">Видеокарти, монитори, Xorg и други драйвери</a>
			<ul class="sub-menu" id="sm8">
				<li><a href="hw-dev-hw-dri-bg.htm#hd-ntfs3g">Достъп към NTFS-форматирани раздели: ntfs-3g</a></li>
				<li><a href="hw-dev-mon-bg.htm#mon-res">Разделителна способност на екрана и монитори</a></li>
				<li><a href="hw-dev-mon-bg.htm#xrandr">Двумониторен режим и xrandr</a></li>
				<li><a href="hw-dev-mon-bg.htm#mon-binary">Двумониторен режим (несвободни драйвери)</a></li>
				<li><a href="hw-dev-hw-dri-bg.htm#non-free-3d">Несвободни бинарни драйвери за Nvidia  видеокарти &amp; xorg.conf</a></li>
				<li><a href="hw-dev-hw-dri-bg.htm#non-free-3d-2">non-free drivers for ATI, Radeon and others</a></li>
				<li><a href="hw-dev-hw-dri-bg.htm#non-free-firmware">Hardware needing non-free firmware drivers</a></li>
				<li><a href="hw-dev-hw-dri-bg.htm#non-free">Adding non-free to Sources List</a></li>
				<li><a href="hw-dev-hw-dri-bg.htm#native-nv-ati">FOSS xorg drivers for nVidia, ATI, Radeon, Intel &amp; xorg.conf</a></li>
			</ul>
		</li>
		<li  onmouseover="showHide( 9 );" onmouseout="startTime();" ><a href="wm-kde-bg.htm">Прозоречни мениджъри</a>
			<ul class="sub-menu" id="sm9">
				<li><a href="wm-xfce-bg.htm#xfce-notes">Полезни съвети за Xfce</a></li>
				<li><a href="wm-kde-bg.htm#install-add">Полезни съвети за KDE</a></li>
				<li><a href="wm-kde-bg.htm#desk-freeze">KDE "зависва"</a></li>
				<li><a href="wm-kde-bg.htm#kde-login">Проблеми с логване в KDE</a></li>
				<li><a href="wm-kde-bg.htm#ch-th">Сменяне на темите</a></li>
				<li><a href="wm-kde-bg.htm#dm">Display Managers - dm</a></li>
			</ul>
		</li>
		<li  onmouseover="showHide( 10 );" onmouseout="startTime();" ><a href="lamp-apache-bg.htm">Програмен комплекс LAMP в sidux</a>
			<ul class="sub-menu" id="sm10">
				<li><a href="lamp-apache-bg.htm#serv-apache">Какво е LAMP</a></li>
				<li><a href="lamp-apache-bg.htm#serv-ftp">FTP клиенти</a></li>
				<li><a href="lamp-apache-bg.htm#serv-sec">Защитени протоколи</a></li>
				<li><a href="lamp-apache-bg.htm#serv-ssl">SSL</a></li>
				<li><a href="lamp-sql-bg.htm#serv-mysql">MySQL настройка</a></li>
				<li><a href="lamp-ppp-bg.htm#serv-php">PHP и Apache</a></li>
				<li><a href="ntp-server-bg.htm#ntp-server">Синхронизация на времето</a></li>
			</ul>
		</li>
		<li  onmouseover="showHide( 11 );" onmouseout="startTime();" ><a href="internet-connecting-bg.htm">Интернет и Мрежи</a>
			<ul class="sub-menu" id="sm11">
				<li><a href="tor-privoxy-bg.htm#tor">Анонимизиращ маршрутизатор Tor</a></li>
				<li><a href="tor-privoxy-bg.htm#privoxy">Прокси Privoxy</a></li>
				<li><a href="internet-connecting-bg.htm#firewalls">Защитна стена (firewall)</a></li>
				<li><a href="samba-bg.htm#configure">Интеграция в Windows мрежа</a></li>
				<li><a href="samba-bg.htm#setup">Мрежов сървър Samba - настройки</a></li>
				<li><a href="ssh-bg.htm#ssh-fs">Монтиране през мрежата чрез SSH</a></li>
				<li><a href="ssh-bg.htm#ssh-x">Десктоп програми през мрежата чрез SSH</a></li>
				<li><a href="ssh-bg.htm#ssh-f">SSH и Konqueror</a></li>
				<li><a href="ssh-bg.htm#ssh-w">SSH десктоп-пренасочване към Windows-PC</a></li>
				<li><a href="ssh-bg.htm#ssh">SSH и безопасност</a></li>
				<li><a href="internet-connecting-bg.htm#dial-mod">56k модеми</a></li>
				<li><a href="inet-wpagui-bg.htm#wpa-roaming-gui">WiFi - WPA_GUI</a></li>
				<li><a href="inet-setup-bg.htm#net-set1">WiFi - Setting up for WiFi Roaming</a></li>
				<li><a href="internet-connecting-wpa-bg.htm#wpa">WiFi - wpasupplicant</a></li>
				<li><a href="inet-ifplug-bg.htm#hotswitch">Network switching between WiFi and Cable</a></li>
				<li><a href="internet-connecting-bg.htm#netcardconfig">Включване към интернет - Ceni</a></li>
			</ul>
		</li>
		<li  onmouseover="showHide( 12 );" onmouseout="startTime();" ><a href="sys-admin-apt-bg.htm">Инсталиране на програми и обновяване на системата</a>
			<ul class="sub-menu" id="sm12">
				<li><a href="sys-admin-apt-bg.htm#apt-cook">APT, хранилища и указатели към хранилищата</a></li>
				<li><a href="sys-admin-apt-bg.htm#apt-install">Инсталиране на нови пакети</a></li>
				<li><a href="sys-admin-apt-bg.htm#apt-delete">Премахване на пакети</a></li>
				<li><a href="sys-admin-apt-bg.htm#apt-downgrade">Забрана за обновяване на пакети, понижаване на версия</a></li>
				<li><a href="sys-admin-apt-bg.htm#apt-cache">Търсене в пакетите с apt-cache</a></li>
				<li><a href="sys-admin-apt-bg.htm#gui-pacsea">GUI Package searching</a></li>
				<li><a href="sys-admin-upgrade-bg.htm#live-cd-upgrade">Обновяване от Live-CD</a></li>
				<li><a href="sys-admin-apt-locarmirr-bg.htm#approx">dist-upgrade of multiple PCs on a LAN</a></li>
				<li><a href="sys-admin-kern-upg-bg.htm#kern-upgrade">Обновяване на ядрото</a></li>
				<li><a href="sys-admin-kern-upg-bg.htm#dmakms">Installing kernel modules dynamically with dmakms</a></li>
				<li><a href="sys-admin-apt-bg.htm#apt-upgrade">Обновяване на инсталирана система - dist-upgrade - Overview</a></li>
				<li><a href="sys-admin-apt-bg.htm#du-st">Обновяване на инсталирана система -  dist-upgrade - The Steps</a></li>
			</ul>
		</li>
		<li  onmouseover="showHide( 13 );" onmouseout="startTime();" ><a href="sys-admin-gen-bg.htm">Системно  администриране</a>
			<ul class="sub-menu" id="sm13">
				<li><a href="hd-install-bg.htm#adduser">Adding a new user</a></li>
				<li><a href="home-bg.htm#home-bu">Преместване на /home</a></li>
				<li><a href="sys-admin-rdiff-bg.htm#rdiff">Резервни копия - rdiff</a></li>
				<li><a href="sys-admin-rsync-bg.htm#rsync">Резервни копия - rsync</a></li>
				<li><a href="vir-rkits-bg.htm#virus-rkits">Скeнери за вируси и вредоносен софтуер</a></li>
				<li><a href="sys-admin-gen-bg.htm#start-services">Демони (фонови програми) - включване и изключване</a></li>
				<li><a href="sys-admin-gen-bg.htm#pw-lost">Забравена root парола</a></li>
				<li><a href="sys-admin-gen-bg.htm#fonts">Шрифтове</a></li>
				<li><a href="sys-admin-gen-bg.htm#cups">CUPS (принтери)</a></li>
				<li><a href="sys-admin-gen-bg.htm#sound">Sound Mixers</a></li>
				<li><a href="sys-admin-gen-bg.htm#init">sidux нива на работа - init</a></li>
				<li><a href="bios-freedos-bg.htm#bois-prep">Обновяване на BIOS-а през FreeDOS</a></li>
				<li><a href="sys-admin-grub-bootman2-bg.htm#boot-grub-floppy">Създаване на стартиращ флопи-диск</a></li>
				<li><a href="sys-admin-grub-bootman2-bg.htm#mbr-grub-boot">Grub1 - Възстановяване на стартиращия сектор MBR</a></li>
				<li><a href="sys-admin-grub-bootman2-bg.htm#dual-boot">Grub1 - Две и повече операционни системи</a></li>
				<li><a href="sys-admin-grub-bootman2-bg.htm#remove-grub">Премахване на grub от MBR</a></li>
				<li><a href="sys-admin-grub-bootman2-bg.htm#what-is-grub">Стартиращ мениджър grub</a></li>
				<li><a href="sys-admin-grub2-bg.htm#mbr-over-grub2">Grub2 - MBR Overwritten</a></li>
				<li><a href="sys-admin-grub2-bg.htm#multi-os">Grub2 - Dual and Multibooting</a></li>
				<li><a href="sys-admin-grub2-bg.htm#grub1-grub2">Grub2 -Upgrading from Grub1</a></li>
				<li><a href="sys-admin-grub2-bg.htm#grub2">Grub2 - Overview</a></li>
			</ul>
		</li>
	</ul>
<!-- menu ends here --> </div>
<div id="main-page">
	<div class="divider" id="approx">
		<h2 id="top-header">dist-upgrade of PCs where bandwidth/speed is a problem</h2>

							<p>For users that have more than 1 PC, or those who have more than 1 PC and face bandwidth restrictions, or those who need to get a PC up to date when there are ISP speed restrictions and/or mixed with bandwidth restrictions, there are solutions to help keep all the PCs maintained to an 'up to date' state, whether its on a permanent or temporary LAN.</p>

							<p>The solution is to use a local archive mirror on one of the PCs in which other PCs on the LAN can use to dist-upgrade with thus conserving bandwidth usage for really important day to day activities.</p>

							<!--<p>There are various caching solutions to suit your needs: approx, apt-cacher, and squid to name just 3. sidux recommends approx.</p>-->

				 <h3>Prerequisites</h3>
							<p>Ensure that you have 6 gig of freespace available for the cache.</p>

		<h2>Using approx as a local archive mirror</h2>
							<p>When the client PC asks for files it will provide cached ones, provided you have run <span class="highlight-3">apt-get update</span>, <span class="highlight-3">dist-upgrade -d</span> or <span class="highlight-3">dist-upgrade</span> on the PC that is hosting an <span class="highlight-3">approx server</span>.</p>

				<h4>Step 1: Configuring the Server for Clients to use approx</h4>
<pre>
apt-get install approx
</pre>

<pre>
mcedit /etc/approx/approx.conf
</pre>
							<p>Enable the <span class="highlight-3">approx.conf</span> file to use the online mirrors:</p>
<pre>
# Here are some examples of remote repository mappings.
# See http://www.debian.org/mirror/list for mirror sites.

debian http://ftp.iinet.net.au/debian/ <span class="highlight-3">&lt;&lt; change to your local debian mirror</span>
sidux http://sidux.net/debian/
</pre>
							<p><span class="highlight-3"> Apply the same style of syntax to other repositories that you want locally mirror.</span></p>

							<p>Start the approx server with:</p>
<pre>
update-inetd --enable approx
</pre>
							<p>If it fails to work, reboot the PC that you have installed approx on to act as a server as approx is known to be stubborn to start.</p>

							<p>After the reboot run <span class="highlight-3">apt-get update</span> and <span class="highlight-3">dist-upgrade</span> or <span class="highlight-3">dist-upgrade -d</span>. This will ensure that approx can access the latest packages for your client PCs unless there are some packages installed on the client PCs that are not on the host server. Should this be the case approx will go and get the appropriate packages.</p>

							<p>The packages accumulate in <span class="highlight-3">/var/cache/approx</span> which is populated after the first run of the clients.</p>

				  <h4>Step 2: Configuring the Clients to use the approx Server</h4>

							<p>First: alter <span class="highlight-3">/etc/apt/sources.list.d/*.list</span> files to use approx as your debian and sidux mirrors.</p>

 <!--<h6>This para is most likely complete and utter rubbish, but put here as a reminder maybe better adding an approx.list and renaming the debian and sidux .lists </h6>
<p></p>-->
							<p>With mcedit, comment out your current direct link URLs (place a <span class="highlight-3">#</span> in front of them) and add the following lines and save the changes, for example:</p>

					  <h6>Debian sources list</h6>
<pre>
mcedit /etc/apt/sources.list.d/debian.list
</pre>

<pre>
#deb your current debian mirror

deb http://approx:9999/debian/ sid main contrib non-free
</pre>

					  <h6>sidux sources list</h6>
<pre>
mcedit /etc/apt/sources.list.d/sidux.list
</pre>

<pre>
#deb your current sidux mirror

deb http://approx:9999/sidux/ sid main fix.main
</pre>
					  <h6>Other sources lists</h6>
						      <p>Apply the same style of syntax reflecting other sources.list files as required.</p>

					  <h6>Proxy Hosts</h6>
						      <p>Next edit <span class="highlight-3">/etc/hosts</span> to add the local proxy to access the IP address of your server:</p>

<pre>
mcedit /etc/hosts
</pre>

<pre>
10.1.1.X approx
</pre>

						      <p>Now run <span class="highlight-3">apt-get update</span> and <span class="highlight-3">dist-upgrade</span> or <span class="highlight-3">dist-upgrade -d</span>.  The first run on each of your client PCs will be slow and may even time out, so try it again. Subsequent runs should provide you with the long term gains you are looking for.</p>



	      </div>
		<!--<div class="divider" id="apt-cache2">
		    <h2>Apt-cacher</h2>
							<p> </p>


	</div>
	<div class="divider" id="apt-cache3">
		    <h2>Squid</h2>
							<p> </p>
	</div>-->

			<div id="rev">Content last revised 15/10/2009 1240 UTC</div>
</div>
</body>
</html>
