<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
   "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
	<title>sidux Manuals - VM Installation Options</title>
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
	<style type="text/css" media="all">@import url("../lib/css-js/content.css");</style>
        <style type="text/css" media="all">@import url("../lib/css-js/menu.css");</style>
        <style type="text/css" media="print">@import url("../lib/css-js/print.css");</style>
        <link rel ="shortcut icon" href="../lib/favicon/manual.ico" />
        <script type="text/javascript" src="../lib/css-js/menu2.js"></script>
        <!--[if lt IE 8]>
        <link rel="stylesheet" type="text/css" href="../lib/css-js/ie_5-7_override.css">
        <![endif]-->
        <!--[if lt IE 7]>
        <link rel="stylesheet" type="text/css" href="../lib/css-js/ie_5-6_override.css">
        <![endif]-->
</head>
<body>
<!-- Last translation revision by bluewater 22/04/2009 1350hrs UTC -->
<div id="menu"> <!-- menu starts here da lang maintainer zonker -->
<!--sidux-manual Operating System Manual menu-version-02.05.2010.04.10 -->
<!-- menu last updated by bluewater 2010.04.10 1300 hrs UTC -->
	<div id="menu-header">
	      <a href="http://sidux.com/"><img src="../lib/logos/manual-sidux-logo.png" title="To sidux.com forums and wiki" alt="sidux.com logo" /></a>
	</div>
	<ul id="top-list">
		<li><a href="manual-search-da.htm#search-on"> <img src="../lib/logos/manual-search-22x22.png" title="Search Manual" alt="Search" />Søg online - offline</a> </li>
		<li><a href="http://manual.sidux.com/meta-manual">Community Software Selections</a></li>
	</ul>
	<div id="flags-2">
			<a href="../flag-index.html"><img src="../lib/logos/sidux-lang-100x64.png" title="Choose another language" alt="lang-switch" /></a>
	</div>
	<ul>
		<li  onmouseover="showHide( 1 );" onmouseout="startTime();" ><a href="welcome-da.htm">sidux OS Manual</a>
			<ul class="sub-menu" id="sm1">
				<li><a href="welcome-da.htm#welcome-gen">sidux OS Manual</a></li>
				<li><a href="welcome-da.htm#how-to">Anvendelse af manualen</a></li>
				<li><a href="welcome-da.htm#table-contents">Index</a></li>
				<li><a href="help-da.htm#help-gen">Hvor finder du hjælp</a></li>
				<li><a href="help-da.htm#paste">IRC !paste</a></li>
				<li><a href="credits-da.htm#cred-team">Tak til</a></li>
				<li><a href="wel-quickstart-da.htm#welcome-quick">sidux Kvik Start Guide</a></li>
			</ul>
		</li>
		<li  onmouseover="showHide( 2 );" onmouseout="startTime();" ><a href="cd-dl-burning-da.htm">ISO Content, Releases, Download Mirrors and Burning</a>
			<ul class="sub-menu" id="sm2">
				<li><a href="cd-content-da.htm#cd-content">ISO Content and system requirements</a></li>
				<li><a href="sys-admin-release-da.htm#rolling">Release Notes</a></li>
				<li><a href="cd-dl-burning-da.htm#download-sidux">sidux fil-spejle, Download og Br&#230;nd ISO'en</a></li>
				<li><a href="cd-dl-burning-da.htm#md5">md5 Checksum</a></li>
				<li><a href="cd-dl-burning-da.htm#burn-nero">Br&#230;nd i windows</a></li>
				<li><a href="cd-dl-burning-da.htm#burn-linux">Br&#230;nd i Linux</a></li>
				<li><a href="cd-no-gui-burn-da.htm#burning-no-gui">burniso script</a></li>
				<li><a href="cd-no-gui-burn-da.htm#burn-no-gui-gen">Br&#230;nd uden GUI</a></li>
			</ul>
		</li>
		<li  onmouseover="showHide( 3 );" onmouseout="startTime();" ><a href="live-mode-da.htm">Live Mode</a>
			<ul class="sub-menu" id="sm3">
				<li><a href="live-mode-da.htm#rootpw">Root-password p&#229; sidux-Live ISO'en?</a></li>
				<li><a href="live-mode-da.htm#live-cd-installsoft">Installering af software med Live- ISO'en</a></li>
				<li><a href="live-mode-da.htm#ntfs-3g">Skriv til NTFS-partitioner med ntfs-3g</a></li>
			</ul>
		</li>
		<li  onmouseover="showHide( 4 );" onmouseout="startTime();" ><a href="term-konsole-da.htm">Terminalen/Konsollen</a>
			<ul class="sub-menu" id="sm4">
				<li><a href="term-konsole-da.htm#sux"> sux / sudo</a></li>
				<li><a href="term-konsole-da.htm#term-kon"> Terminalen/Konsollen</a></li>
				<li><a href="term-konsole-da.htm#cli-help">Kommando Linie Hj&#230;lp</a></li>
				<li><a href="help-da.htm#init3-tools">Tools to know in text mode (tty) - init 3</a></li>
				<li><a href="term-konsole-da.htm#term-cmds">liste over Linux Terminal Kommandoer</a></li>
				<li><a href="term-konsole-da.htm#shell-scripts">Installering af Scripts.sh</a></li>
			</ul>
		</li>
		<li  onmouseover="showHide( 5 );" onmouseout="startTime();" ><a href="cheatcodes-da.htm">CheatCodes</a>
			<ul class="sub-menu" id="sm5">
				<li><a href="cheatcodes-da.htm#cheatcodes">sidux specifikke Live- ISO Cheatcodes</a></li>
				<li><a href="cheatcodes-da.htm#cheatcodes-linux">Linux generic Cheatcodes</a></li>
				<li><a href="cheatcodes-vga-da.htm#vga">VGA Codes</a></li>
			</ul>
		</li>
		<li  onmouseover="showHide( 6 );" onmouseout="startTime();" ><a href="part-gparted-da.htm">Partitionering af harddiske</a>
			<ul class="sub-menu" id="sm6">
				<li><a href="part-gparted-da.htm#partition">Partitioner harddiske med GParted</a></li>
				<li><a href="part-gparted-da.htm#ntfs">&#198;ndre st&#248;rrelse p&#229; NTFS partitioner med GParted</a></li>
				<li><a href="part-uuid-da.htm#uuid">UUID, Partitions betegndlser og fstab</a></li>
				<li><a href="part-cfdisk-da.htm#disknames">Kort om disk navngivning</a></li>
				<li><a href="part-cfdisk-da.htm#partition">Partitioner harddiske med cfdisk</a></li>
				<li><a href="part-cfdisk-da.htm#formating">Formater partitioner efter partitionering med cfdisk</a></li>
				<li><a href="part-size-examp-da.htm#part-example">Eksempler p&#229; partitions st&#248;rrelser</a></li>
			</ul>
		</li>
		<li  onmouseover="showHide( 7 );" onmouseout="startTime();" ><a href="hd-install-da.htm">Installations valg</a>
			<ul class="sub-menu" id="sm7">
				<li><a href="hd-install-da.htm#Inst-prep">Installations forberedelser</a></li>
				<li><a href="hd-install-da.htm#Installation">Installer til harddisk</a></li>
				<li><a href="hd-install-da.htm#first-hd-boot">F&#248;rste opstart</a></li>
				<li><a href="hd-install-opts-da.htm#fromiso">Opstart 'fromiso' - Overview</a></li>
				<li><a href="hd-install-opts-da.htm#fromiso-grub-leg">Booting 'fromiso' with grub-legacy</a></li>
				<li><a href="hd-install-opts-da.htm#grub2-fromiso">Booting 'fromiso' with Grub 2</a></li>
				<li><a href="hd-install-opts-da.htm#fromiso-persist">fromiso og persist</a></li>
				<li><a href="hd-install-opts-da.htm#usb-hd">Installering p&#229; en USB-HD - sidux specific - sidux-on-stick</a></li>
				<li><a href="hd-ins-opts-oos-da.htm#raw-usb">Writing sidux to a USB/SSD stick with any Linux, MS Windows or Mac OS X system</a></li>
				<li><a href="nbdboot-da.htm#nbd1">Booting sidux over a network</a></li>
				<li><a href="hd-install-vmopts-da.htm#vm">Virtual Machine installation options</a></li>
			</ul>
		</li>
		<li  onmouseover="showHide( 8 );" onmouseout="startTime();" ><a href="hw-dev-hw-dri-da.htm">Grafikkort, Hardware Enheder, Xorg &amp; Drivere</a>
			<ul class="sub-menu" id="sm8">
				<li><a href="hw-dev-hw-dri-da.htm#hd-ntfs3g">Skriv til NTFS-partitioner med ntfs-3g</a></li>
				<li><a href="hw-dev-mon-da.htm#mon-res">Skærmopløsning og Monitors</a></li>
				<li><a href="hw-dev-mon-da.htm#xrandr">Dual Monitors og xrandr</a></li>
				<li><a href="hw-dev-mon-da.htm#mon-binary">Dual Monitors (med binære)</a></li>
				<li><a href="hw-dev-hw-dri-da.htm#non-free-3d">Binære, non-free drivere til: Nvidia &amp; xorg.conf</a></li>
				<li><a href="hw-dev-hw-dri-da.htm#non-free-3d-2">non-free drivers for ATI, Radeon and others</a></li>
				<li><a href="hw-dev-hw-dri-da.htm#non-free-firmware">Hardware needing non-free firmware drivers</a></li>
				<li><a href="hw-dev-hw-dri-da.htm#non-free">Adding non-free to Sources List</a></li>
				<li><a href="hw-dev-hw-dri-da.htm#native-nv-ati">FOSS xorg drivers for nVidia, ATI, Radeon, Intel &amp; xorg.conf</a></li>
			</ul>
		</li>
		<li  onmouseover="showHide( 9 );" onmouseout="startTime();" ><a href="wm-kde-da.htm">Window Managers</a>
			<ul class="sub-menu" id="sm9">
				<li><a href="wm-xfce-da.htm#xfce-notes">Nyttige Xfce extras</a></li>
				<li><a href="wm-kde-da.htm#install-add">Nyttige extra KDE programmer</a></li>
				<li><a href="wm-kde-da.htm#desk-freeze">Hvis skrivebordet fryser</a></li>
				<li><a href="wm-kde-da.htm#kde-login">Hvis du ikke kan logge ind i KDE</a></li>
				<li><a href="wm-kde-da.htm#ch-th">&#198;ndre Themes</a></li>
				<li><a href="wm-kde-da.htm#dm">Display Managers - dm</a></li>
			</ul>
		</li>
		<li  onmouseover="showHide( 10 );" onmouseout="startTime();" ><a href="lamp-apache-da.htm">sidux LAMP Stack</a>
			<ul class="sub-menu" id="sm10">
				<li><a href="lamp-apache-da.htm#serv-apache">sidux LAMP Stack</a></li>
				<li><a href="lamp-apache-da.htm#serv-ftp">FTP Klienter</a></li>
				<li><a href="lamp-apache-da.htm#serv-sec">Sikkerhedsprotokoller</a></li>
				<li><a href="lamp-apache-da.htm#serv-ssl">SSL</a></li>
				<li><a href="lamp-sql-da.htm#serv-mysql">MySQL Opsætning</a></li>
				<li><a href="lamp-ppp-da.htm#serv-php">PHP i Apache</a></li>
				<li><a href="ntp-server-da.htm#ntp-server">Ops&#230;tning af Timeserver</a></li>
			</ul>
		</li>
		<li  onmouseover="showHide(11 );" onmouseout="startTime();" ><a href="internet-connecting-da.htm">Internet og Netv&#230;rk</a>
			<ul class="sub-menu" id="sm11">
				<li><a href="tor-privoxy-da.htm#tor">Tor</a></li>
				<li><a href="tor-privoxy-da.htm#privoxy">Privoxy</a></li>
				<li><a href="internet-connecting-da.htm#firewalls">Firewalls</a></li>
				<li><a href="samba-da.htm#configure">Konfigurer SAMBA (Windows)</a></li>
				<li><a href="samba-da.htm#setup">Ops&#230;tning af Samba-Server</a></li>
				<li><a href="ssh-da.htm#ssh-fs">SSH og Fjern-montering</a></li>
				<li><a href="ssh-da.htm#ssh-x">X Window programmer via SSH</a></li>
				<li><a href="ssh-da.htm#ssh-f">GUI SSH med Konqueror</a></li>
				<li><a href="ssh-da.htm#ssh-w">SSH X-Forwarding fra Windows-PC</a></li>
				<li><a href="ssh-da.htm#ssh-s">SSH Sikkerhed</a></li>
				<li><a href="internet-connecting-da.htm#dial-mod">56k Modems</a></li>
				<li><a href="inet-wpagui-da.htm#wpa-roaming-gui">WiFi - WPA_GUI</a></li>
				<li><a href="inet-setup-da.htm#net-set1">WiFi - Setting up for WiFi Roaming</a></li>
				<li><a href="internet-connecting-wpa-da.htm#wpa">WiFi - wpasupplicant</a></li>
				<li><a href="inet-ifplug-da.htm#hotswitch">Network switching between WiFi and Cable</a></li>
				<li><a href="internet-connecting-da.htm#netcardconfig">Kom Online - Ceni</a></li>
			</ul>
		</li>
		<li  onmouseover="showHide( 12 );" onmouseout="startTime();" ><a href="sys-admin-apt-da.htm">dist-upgrade and package management</a>
			<ul class="sub-menu" id="sm12">
				<li><a href="sys-admin-apt-da.htm#apt-cook">APT-Guide og Sources List</a></li>
				<li><a href="sys-admin-apt-da.htm#apt-install">Installere nye pakker</a></li>
				<li><a href="sys-admin-apt-da.htm#apt-delete">Afinstallere pakker</a></li>
				<li><a href="sys-admin-apt-da.htm#apt-downgrade">Nedgradere eller 'Hold' en pakke</a></li>
				<li><a href="sys-admin-apt-da.htm#apt-cache">Søgning efter pakker med apt-cache</a></li>
				<li><a href="sys-admin-apt-da.htm#gui-pacsea">GUI Package searching</a></li>
				<li><a href="sys-admin-upgrade-da.htm#live-cd-upgrade">Opgradering med Live- ISO</a></li>
				<li><a href="sys-admin-apt-locarmirr-da.htm#approx">dist-upgrade of multiple PCs on a LAN</a></li>
				<li><a href="sys-admin-kern-upg-da.htm#kern-upgrade">Opgradere kernel</a></li>
				<li><a href="sys-admin-kern-upg-da.htm#dmakms">Installing kernel modules dynamically with dmakms</a></li>
				<li><a href="sys-admin-apt-da.htm#apt-upgrade">Opgradering af Systemet - dist-upgrade - Overview</a></li>
				<li><a href="sys-admin-apt-da.htm#du-st">Opgradering af Systemet - dist-upgrade -  dist-upgrade - The Steps</a></li>
			</ul>
		</li>
		<li  onmouseover="showHide( 13 );" onmouseout="startTime();" ><a href="sys-admin-gen-da.htm">System Administration</a>
			<ul class="sub-menu" id="sm13">
				<li><a href="hd-install-da.htm#adduser">Adding a new user</a></li>
				<li><a href="home-da.htm#home-bu">Moving /home</a></li>
				<li><a href="sys-admin-rdiff-da.htm#rdiff">Sikkerhedskopiering med rdiff</a></li>
				<li><a href="sys-admin-rsync-da.htm#rsync">Sikkerhedskopiering med rsync</a></li>
				<li><a href="vir-rkits-da.htm#virus-rkits">Virus og Rootkit skannere</a></li>
				<li><a href="sys-admin-gen-da.htm#start-services">Aktiver/ deaktiver tjenester</a></li>
				<li><a href="sys-admin-gen-da.htm#pw-lost">Mistet root password</a></li>
				<li><a href="sys-admin-gen-da.htm#fonts">Fonte</a></li>
				<li><a href="sys-admin-gen-da.htm#cups">CUPS - Printing System</a></li>
				<li><a href="sys-admin-gen-da.htm#sound">Sound Mixers</a></li>
				<li><a href="sys-admin-gen-da.htm#init">sidux runlevels - init</a></li>
				<li><a href="bios-freedos-da.htm#bois-prep">Upgradering af BIOS under FreeDOS</a></li>
				<li><a href="sys-admin-grub-bootman2-da.htm#boot-grub-floppy">Skriv en Boot-Floppy</a></li>
				<li><a href="sys-admin-grub-bootman2-da.htm#mbr-grub-boot">Grub1 - MBR Overskrevet bootsector</a></li>
				<li><a href="sys-admin-grub-bootman2-da.htm#dual-boot">Grub1 - Dual og Multiple Booting</a></li>
				<li><a href="sys-admin-grub-bootman2-da.htm#remove-grub">Fjern grub fra MBR</a></li>
				<li><a href="sys-admin-grub-bootman2-da.htm#what-is-grub">Grub; bootmanageren</a></li>
				<li><a href="sys-admin-grub2-da.htm#mbr-over-grub2">Grub2 - MBR Overwritten</a></li>
				<li><a href="sys-admin-grub2-da.htm#multi-os">Grub2 - Dual and Multibooting</a></li>
				<li><a href="sys-admin-grub2-da.htm#grub1-grub2">Grub2 -Upgrading from Grub1</a></li>
				<li><a href="sys-admin-grub2-da.htm#grub2">Grub2 - Overview</a></li>
			</ul>
		</li>
	</ul>
<!-- menu ends here --> </div>
<div id="main-page">
		<div class="divider" id="vmopts">
				<h2 id="top-header">Virtual Machine options</h2>

						<ul>
							<li><a href="hd-install-vmopts-da.htm#kvm">KVM for Intel VT or AMD-V</a></li>
							<li><a href="hd-install-vmopts-da.htm#vbox">Virtualbox</a></li>
							<li><a href="hd-install-vmopts-da.htm#qemu">QEMU</a></li>

						</ul>
		      </div>
		      <div class="divider" id="kvm">
				<h2>Booting and installing sidux to a KVM Virtual Machine</h2>
							<p>KVM is a full virtualisation solution for Linux on x86 hardware containing virtualisation extensions (Intel VT or AMD-V).</p>

				      <h3>Prerequisites</h3>

							<p>To ascertain whether your hardware supports KVM, ensure that KVM is enabled in the BIOS (in some cases on an Intel VT or AMD-V system it may not evident as to where the switch is, therefore assume that it is in a KVM state). The way to check is in a console run:</p>
<pre>
cat /proc/cpuinfo | egrep --color=always 'vmx|smx'
</pre>
							<p>If you see <span class="highlight-3">smx</span> or <span class="highlight-3">vmx</span> in the cpu flags field, your system supports KVM. (Otherwise go back to the BIOS if you believe it is supported and check again, else search the internet as to where in the BIOS menus KVM 'enable' could be hiding).</p>

							<p>Should your BIOS not support KVM refer to <a href="hd-install-vmopts-da.htm#vbox">Virtualbox</a>
							 or <a href="hd-install-vmopts-da.htm#qemu">QEMU</a></p>

							<p>To install and run KVM, firstly ensure that Virtualbox modules are not loaded, (--purge them is the best option), then depending on your chipset:</p>

							<p>For <span class="highlight-3">vmx</span>:</p>
<pre>
apt-get install qemu-kvm
modprobe kvm_intel
</pre>
							<p>For <span class="highlight-3">smx</span>:</p>
<pre>
apt-get install qemu-kvm
modprobe kvm_amd
</pre>
							 <p>Another option is reboot as the qemu-kvm initscripts will take care of loading the modules.</p>

					  <h4>Using KVM to boot a sidux-*.iso</h4>

							<p><span class="highlight-2">As user:</span></p>
<pre>
$ kvm -net nic,model=virtio -net user -soundhw ac97 -m 512 -monitor stdio -cdrom &lt;sidux.iso&gt;
</pre>

				<h5>Installing a sidux-*.iso to a KVM image</h5>
							<p>First create a hard disk image, (this image will be minimal and only grow as required due to qcow2 compression ratios):</p>
<pre>
$ qemu-img create -f qcow2 sidux-2010-*-.img 12G
</pre>

							<p>Boot the sidux-*.iso with the following parameters to enable KVM to recognise that there is an QEMU hard disk image available:</p>
<pre>
$ kvm -net nic,model=virtio -net user -soundhw ac97 -m 512 -monitor stdio -cdrom &lt;/path/to/sidux.iso&gt; -boot d &lt;/path/to/sidux-20xx-*-.img&gt;
</pre>

							<p>Once the cdrom has booted up click on the sidux installer icon to activate the installer, (or use the menu), click on the Partitioning tab and you should see on the left hand side a box that has a disk ready for partitioning and formatting, most likely noted as <span class="highlight-3"> /dev/sda</span>. Underneath that are the options for partitioning, choose gparted.</p>

	<div class="screenshot"><img src="../lib/images-common/images-vm/kvm-gparted02.png" title="gparted kvm hard disk naming" alt="gparted kvm hard disk naming" /></div>
	<div class="spacer02"></div>

							<p>In the Gparted menu you can confirm that Gparted sees the image with <span class="highlight-3">View>Device Information</span> which should state it is a <span class="highlight-3">ATA QEMU Harddisk</span> and most likely noted as <span class="highlight-3"> /dev/sda</span>,(in this example), as this will be crucial when moving back to the installer and choosing where to put Grub, as it needs to go to <span class="highlight-3"> /dev/sda</span>.</p>

							<p>Next, in the <span class="highlight-3">Partition</span> menu choose <span class="highlight-3"> Device>Create Partiton Table</span> and create the partition table. </p>

							<p>Then format the partition table with ext4 and also include a swap of 2 gig. The formatting will take time so be patient.</p>

							<p>After formatting has completed, click OK to be returned to the installer and proceed as if you are performing a standard install, (again, be patient). <span class="highlight-2">Note: Install the Grub to /dev/sda</span>.</p>

							<p>You now have a sidux-*-VM ready for use:</p>

<pre>
$ kvm -net nic,model=virtio -net user -soundhw ac97 -m 512 -monitor stdio -drive if=virtio,boot=on,file=&lt;absolute/path/to/sidux-20xx-*.img&gt;
</pre>

							<p>If the guest does not support virtio, or you do not specify an absolute path,  use:</p>
<pre>
$ kvm -net nic,model=virtio -net user -soundhw ac97 -m 512 -monitor stdio -hda &lt;/path/to/sidux-20xx-*.img&gt;
</pre>
							<p>See also:</p>
<pre>
$ man kvm
</pre>
				<h5>Managing your KVM virtual machine installations</h5>
<pre>
apt-get install aqemu
</pre>
							<p>When using AQEMU ensure that you choose the KVM mode from the drop down box for 'Emulator Type' in the 'General' tab. (Documentation for AQEMU is basically non existent, therefore a few 'trials by error' will be required to figure out the easy to use GUI, however a good start is to use first use the 'VM' menu followed by the 'General' tab.</p>

	</div>
	<div class="divider" id="vbox">
		<h2>Booting and installing sidux to a VirtualBox Virtual Machine</h2>
							<p>The Steps:</p>
						<ul>
 							<li>1. opret et harddiskimage til VirtualBox</li>
 							<li>2. boot iso'en med VirtualBox</li>
 							<li>3. installer på harddiskimaget</li>
						</ul>

				<h4>Systemkrav</h4>
							<p><span class="highlight-3">Anbefalet RAM: 1 gig </span>: Ideelt 512 MB til gæsteen og 512 MB til værten (det kan køre med mindre RAm men forvent ikke nogen fantastisk ydelse).</p>

							<p><span class="highlight-3">Harddisk plads:</span> VirtualBox selv tager ikke meget mere end ca 30 mb, men de virtuelle maskiner kræver ret store filer til at repræsentere deres harddisk plads. For at installere for eksempel MS Windows XP (TM), får du brug for en fil der nemt kan vokse til flere GB i størrelse. For at installere sidux i VirtualBox skal du allokere cirka 5 gb og en yderligere plads til swap.</p>

				<h3>Installation:</h3>

<pre>
apt-get update
apt-get install virtualbox-ose-qt virtualbox-ose-source dmakms module-assistant
</pre>
							<p>Then prepare the module:</p>
<pre>
m-a prepare
m-a a-i virtualbox-ose-source
</pre>
							<p>Then activate Dynamic Module-Assistant Kernel Module Support for virtualbox, so that the next time the Linux kernel is updated a virtualbox module is prepared for it too, without manual intervention. To do that, add <span class="highlight-3">virtualbox-ose-source</span> to the <span class="highlight-3">/etc/default/dmakms </span>configuration file. </p>
<pre>
mcedit /etc/default/dmakms
virtualbox-ose-source
</pre>

							<p>Then reboot the computer.</p>

							<p><a href="sys-admin-kern-upg-da.htm#dmakms">This is essential reading on dmakms</a></p>

					<h3>Installering af sidux i virtual machine</h3>
							<p>Brug virtualbox's wizard til at oprette en ny virtuel maskine til sidux, og følg så instruktionerne som for en regulær sidux installetion.</p>

							<p><a href="http://www.virtualbox.org/">VirtualBox har en omfattende PDF Hjælp som du kan hente.</a> </p>

	</div>
	<div class="divider" id="qemu">
		<h2>Booting and installing sidux to a QEMU Virtual Machine</h2>

		<ul>
 			<li>1. Opret et harddisk-image til qemu</li>
 			<li>2. Boot iso'en med qemu</li>
 			<li>3. Installer på image'et</li>

		</ul>

							<p>A QT GUI tool is available to help you configure QEMU:</p>
<pre>
apt-get install qtemu
</pre>

 				<h4>Oprettelse af harddisk-image</h4>

							<p>For at køre qemu skal du sandsynligvis bruge et harddisk image. Dette er en fil der gemmer indholdet på den emulerede harddisk.</p>

				<p>Brug kommandoen:</p>
<pre>
qemu-img create -f qcow sidux.qcow 3G
</pre>
							<p>For at oprette image filen med navnet "sidux.qcow". "3G" parameteren definerer størrelsen af disken - i dette tilfælde 3 GB. Du kan bruge suffixet M for megabytes (for eksempel "256M"). Du bør ikke bekymre dig for meget om størrelsen af disken -qcow formatet komprimerer image'et således at den tomme plads ikke regnes med i størrelsen af filen.</p>


			<h4>Installering af operativ systemet</h4>

							<p>Dette er den første gang du skal starte emulatoren. En ting der er værd at bide mærke i er at når du klikker inde i qemu vinduet så "gribes" musens cursor. For at frigive den igen skal du trykke Ctrl+Alt.</p>

							<p>Hvis du har brug for en opstarts floppy kører du Qemu med:</p>
<pre>
qemu -floppy sidux.iso -net nic -net user -m 512 -boot d sidux.qcow
</pre>
							<p>Hvis din CD-ROM er i stand til at boote, kør Qemu med:</p>
<pre>
qemu -cdrom sidux.iso -net nic -net user -m 512 -boot d sidux.qcow
</pre>
							<p>Nu installerer du sidux som hvis du installerede til en almindelig harddisk</p>


			<h4>Kørsel af systemet</h4>

							<p>For at starte systemet skriver du blot:</p>
<pre>
qemu [hd_image]
</pre>
							<p>Det er en god ide at anvende "overlay images". Anvender du dette kan du oprette harddisk image'et én gang, og få qemu til at gemme alle ændringer i en ekstern fil. Du sikrer dig mod ustabilitet fordi det er meget nemt at gå tilbage til en tidligere system tilstand.</p>

							<p>For at oprette et overlay image, skriv:</p>
<pre>
qemu-img create -b [[base''image]] -f qcow [[overlay''image]]
</pre>
							<p>Erstat harddisk image med base_image (i dette eksempel sidux.qcow). Efter dette kan du køre qemu med:</p>
<pre>
qemu [overlay_image]
</pre>
							<p>Det originale image vil forblive urørt. En faldgrube er at base image ikke kan omdøbes eller flyttes, eftersom overlay husker base's fulde sti.</p>


			<h4>Hvordan man anvender en rigtig partition som den primære partition i et harddisk image</h4>

							<p>Det kan hænde at du ønsker at anvende enaf dine system partitioner fra inde i qemu (for eksempel hvis du vil boot både din rigtige maskine eller qemu med en given apartition som root). Du kan opnå dette ved at anvende software RAID i linear mode (du skal bruge kernel driveren linear.ko) og en loopback enhed: tricket består i at "dynamically prepend a master boot record (MBR) to the real partition you wish to embed in a qemu raw disk image."(###)</p>

							<p>Antag at du har en almindelig, umonteret /dev/sdaN partition med et filsystem på, som du vil gøre til del af en qemu disk image. Først opretter du en lille fil til at indeholde MBR:</p>
<pre>
dd if=/dev/zero of=/sti/til/mbr count=32
</pre>
							<p>Her bliver en 16 KB (32 * 512 bytes) fil dannet. Det er vigtigt ikke at lave filen for lille (selv om MBR kun skal bruge en enkelt 512 bytes block), eftersom des mindre den er, jo mindre skal software raid enhedens chunk size være, og dette kan påvirke ydelsen. Dernæst opsætter du en loopback enhed til MBR filen:</p>
<pre>
losetup -f /path/to/mbr
</pre>
							<p>Lad os antage at den resulterende enhed er /dev/loop0, for vi ville ikke allerede have brugt andre loopbacks. Næste trin er at oprette det "sammensmeltede" MBR + /dev/sdaN disk image med software RAID:</p>
<pre>
 modprobe linear
 mdadm --build --verbose /dev/md0 --chunk=16 --level=linear --raid-devices=2 /dev/loop0 /dev/sdaN
</pre>
						      <p>Det resulterende /dev/md0 er havd du anvender som qemu raw disk image (glem ikke at sætte rettighederne så emulatoren kan få adgang). Det sidste, lettere spegede trick er at sætte disk konfigurationen (disk geometry og partitions table) således at den primære partitions start point i MBR matcher det fra /dev/sdaN inde i /dev/md0 (et offset på præcist 16 * 512 = 16384 bytes i dette eksempel). Gør dette med fdisk på værtsmaskinen, ikke i emulatoren: standard raw disc detection routinen fra qemu resulterer ofte i ikke kilobyte-afrundbare offsets (såsom 31.5 KB, som i den forrige sektion) som ikke kan håndteres af software RAID programmet. Derfor, fra værten:</p>
<pre>
 fdisk /dev/md0
</pre>
						      <p>Sådan, opret en enkelt primær partition korresponderende til /dev/sdaN, og leg med 's'ector kommanden fra 'x'pert menuen indtil den første cylinder (hvor den første partition starter) matcher størrelsen af MBR. Slutteligt, 'w'rite resultatet til filen: Du er nu færdig. Du har nu en partition der kan monteres direkte på din vært og som såvel er et qemu disk image:</p>
<pre>
 qemu -hdc /dev/md0 [...]
</pre>
						      <p>Du kan selvfølgelig helt sikkert sætte en hvilken som helst bootloader på dette qemu diskimage, forudsat at den originale /boot/sdaN partition indeholder de nødvendige værktøjer.</p>

			<h4>Anvendelse af QEMU Accelerator Module</h4>

						      <p>Udviklerne af qemu har skabt et optional kernel module til at accelerere qemu til næsten native hastighed. Dette bør indlæses med parametren</p>
<pre>
major=0
</pre>
						      <p>for at automatisere oprettelsen af den nødvendige /dev/kqemu enhed. Følgende kommando</p>
<pre>
echo "options kqemu major=0" >> /etc/modprobe.conf
</pre>
						      <p>Dette retter modprobe.conf således at parameteren tilføjes hver gang modulet bliver indlæst.</p>

<pre>
qemu [...] -kernel-kqemu
</pre>
						      <p>Dette aktiverer fuld virtualization og øger hastigheden betydeligt.</p>

			<h4>For at aktivere qemu:</h4>
<pre>
qemu -cdrom /tmp/pkg/sidux-debug.iso -net nic -net user -m 512
</pre>
						      <p><a href="http://www.nongnu.org/qemu/user-doc.html">Den officielle dokumentation for QEMU Project </a> </p>

						      <p><a href="http://wiki.archlinux.org/index.php/Qemu">Noget indhold om QEMU til sidux-manualen stammer fra denne side under GNU Free Documentation License 1.2 og er blevet modificeret til sidux-manualen</a> </p>

	</div>
	<div id="rev">Page last revised 13/04/2010 1450 UTC</div>

</div>
</body>
</html>
