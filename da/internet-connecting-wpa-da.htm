<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
   "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="dk">
<head>
	<title>sidux Manuals - Internet/Network WPA-Supplicant</title>
	<meta http-equiv="content-type" content="text/html; charset=utf-8" />
	<style type="text/css" media="all">@import url("../lib/css-js/content.css");</style>
        <style type="text/css" media="all">@import url("../lib/css-js/menu.css");</style>
        <style type="text/css" media="print">@import url("../lib/css-js/print.css");</style>
        <link rel ="shortcut icon" href="../lib/favicon/manual.ico" />
        <script type="text/javascript" src="../lib/css-js/menu2.js"></script>
        <!--[if lt IE 8]>
        <link rel="stylesheet" type="text/css" href="../lib/css-js/ie_5-7_override.css">
        <![endif]-->
        <!--[if lt IE 7]>
        <link rel="stylesheet" type="text/css" href="../lib/css-js/ie_5-6_override.css">
        <![endif]-->
</head>
<body id="cheatcodes">
<div id="menu"> <!-- menu starts here dk lang maintainer zonker -->
<!--Welcome to the  sidux-manual Operating System version 01.40-2007-09-24   -->
<!-- menu last updated by bluewater 24/09/2007 1300 hrs AEST 24/09/2007 0300hrs UTC -->
<img src="../lib/logos/sidux-logo.png" alt="logo" id="menu-header" />
	<ul id="top-list">
		<li><a href="http://sidux.com/">To sidux.com</a></li>
		<li><a href="http://manual.sidux.com/meta-manual">sidux Meta-Manual</a></li>
	</ul>
	<div id="flags-2">
			<a href="../flag-index.html"><img src="../lib/logos/sidux-lang-50.png" title="Choose another language" alt="lang-switch" /></a>
	</div>
	<ul>
		<li  onmouseover="showHide( 1 );" onmouseout="startTime();" ><a href="welcome-da.htm">sidux OS Manual</a>
			<ul class="sub-menu" id="sm1">
				<li><a href="welcome-da.htm#welcome-gen">sidux OS Manual</a></li>
				<li><a href="welcome-da.htm#how-to">Anvendelse af manualen</a></li>
				<li><a href="welcome-da.htm#table-contents">Index</a></li>
				<li><a href="help-da.htm#help-gen">Hvor finder du hjælp</a></li>
				<li><a href="help-da.htm#paste">IRC !paste</a></li>
				<li><a href="credits-da.htm#cred-team">Tak til</a></li>
			</ul>
		</li>
		<li  onmouseover="showHide( 2 );" onmouseout="startTime();" ><a href="cd-content-da.htm">Indholdet på Live CD'en</a>
			<ul class="sub-menu" id="sm2">
				<li><a href="cd-content-da.htm#cd-content">CD Indhold</a></li>
			</ul>
		</li>
		<li  onmouseover="showHide( 3 );" onmouseout="startTime();" ><a href="cd-dl-burning-da.htm">Download og br&#230;nd CD'en</a>
			<ul class="sub-menu" id="sm3">
				<li><a href="cd-dl-burning-da.htm#download-sidux">sidux Mirrors, Download og Br&#230;nd CD'en</a></li>
				<li><a href="cd-dl-burning-da.htm#md5">md5 Checksum</a></li>
				<li><a href="cd-dl-burning-da.htm#burn-nero">Br&#230;nd i windows</a></li>
				<li><a href="cd-dl-burning-da.htm#burn-linux">Br&#230;nd i Linux</a></li>
				<li><a href="cd-dl-burning-da.htm#xdelta">xdelta Patching</a></li>
				<li><a href="cd-no-gui-burn-da.htm">Br&#230;nd uden GUI</a></li>
			</ul>
		</li>
		<li  onmouseover="showHide( 4 );" onmouseout="startTime();" ><a href="live-mode-da.htm">Live Mode</a>
			<ul class="sub-menu" id="sm4">
				<li><a href="live-mode-da.htm#rootpw">Root-password p&#229; sidux-LiveCD'en?</a></li>
				<li><a href="live-mode-da.htm#live-cd-installsoft">Installering af software med Live-CD'en</a></li>
				<li><a href="live-mode-da.htm#ntfs-3g">Skriv til NTFS-partitioner med ntfs-3g</a></li>
			</ul>
		</li>
		<li  onmouseover="showHide( 5 );" onmouseout="startTime();" ><a href="term-konsole-da.htm">Terminalen/Konsollen</a>
			<ul class="sub-menu" id="sm5">
				<li><a href="term-konsole-da.htm#sux"> sux</a></li>
				<li><a href="term-konsole-da.htm#term-kon"> Terminalen/Konsollen</a></li>
				<li><a href="term-konsole-da.htm#cli-help">Kommando Linie Hj&#230;lp</a></li>
				<li><a href="term-konsole-da.htm#term-cmds">Linux Terminal Commands List</a></li>
				<li><a href="term-konsole-da.htm#shell-scripts">Installering af Scripts.sh</a></li>
			</ul>
		</li>
		<li  onmouseover="showHide( 6 );" onmouseout="startTime();" ><a href="cheatcodes-da.htm">CheatCodes</a>
			<ul class="sub-menu" id="sm6">
				<li><a href="cheatcodes-da.htm#cheatcodes">Cheatcodes</a></li>
				<li><a href="cheatcodes-vga-da.htm#vga">VGA Codes</a></li>
			</ul>
		</li>
		<li  onmouseover="showHide( 7 );" onmouseout="startTime();" ><a href="part-gparted-da.htm">Partitionering af harddiske</a>
			<ul class="sub-menu" id="sm7">
				<li><a href="part-gparted-da.htm#partition">Partitioner harddiske med GParted</a></li>
				<li><a href="part-gparted-da.htm#ntfs">&#198;ndre st&#248;rrelse p&#229; NTFS partitioner med GParted</a></li>
				<li><a href="part-uuid-da.htm#uuid">UUID, Partitions betegndlser og fstab</a></li>
				<li><a href="part-cfdisk-da.htm#disknames">Kort om disk navngivning</a></li>
				<li><a href="part-cfdisk-da.htm#partition">Partitioner harddiske med cfdisk</a></li>
				<li><a href="part-cfdisk-da.htm#formating">Formater partitioner efter partitionering med cfdisk</a></li>
				<li><a href="part-size-examp-da.htm#part-example">Eksempler p&#229; partitions st&#248;rrelser</a></li>
			</ul>
		</li>
		<li  onmouseover="showHide( 8 );" onmouseout="startTime();" ><a href="hd-install-da.htm">Installations valg</a>
			<ul class="sub-menu" id="sm8">
				<li><a href="hd-install-da.htm#Inst-prep">Installations forberedelser</a></li>
				<li><a href="hd-install-da.htm#Installation">Installer til harddisk</a></li>
				<li><a href="hd-install-da.htm#first-hd-boot">F&#248;rste opstart</a></li>
				<li><a href="hd-install-opts-da.htm#fromiso">Opstart 'fromiso'</a></li>
				<li><a href="hd-install-opts-da.htm#usb-hd">Installering p&#229; en USB-HD</a></li>
				<li><a href="hd-install-opts-da.htm#vtbox">Installering af sidux med VirtualBox</a></li>
				<li><a href="hd-install-opts-da.htm#qemu">Installering af sidux med QEMU</a></li>
			</ul>
		</li>
		<li  onmouseover="showHide( 9 );" onmouseout="startTime();" ><a href="hw-dev-hw-dri-da.htm">Grafikkort, Hardware Enheder og Drivere</a>
			<ul class="sub-menu" id="sm9">
				<li><a href="hw-dev-hw-dri-da.htm#hd-ntfs3g">Skriv til NTFS</a></li>
				<li><a href="hw-dev-hw-dri-da.htm#mon-res">Sk&#230;rm opl&#248;sning</a></li>
				<li><a href="hw-dev-hw-dri-da.htm#non-free-3d">Binære, non-free drivere til: Nvidia / ATI</a></li>
				<li><a href="hw-dev-hw-dri-da.htm#native-nv-ati">Free xorg drivere til nVidia, ATI, Radeon, Intel</a></li>
				<li><a href="hw-dev-hw-dri-da.htm#non-free">Hardware med non-free behov</a></li>
			</ul>
		</li>
		<li  onmouseover="showHide( 10 );" onmouseout="startTime();" ><a href="wm-kde-da.htm">Window Managers</a>
			<ul class="sub-menu" id="sm10">
				<li><a href="wm-kde-da.htm#desk-freeze">KDE Desktop Fryser</a></li>
				<li><a href="wm-kde-da.htm#kde-login">Kan ikke logge ind i KDE</a></li>
				<li><a href="wm-kde-da.htm#ch-th">&#198;ndre Themes</a></li>
			</ul>
		</li>
		<li  onmouseover="showHide( 11 );" onmouseout="startTime();" ><a href="lamp-apache-da.htm">sidux LAMP Stack</a>
			<ul class="sub-menu" id="sm11">
				<li><a href="lamp-apache-da.htm#serv-apache">sidux LAMP Stack</a></li>
				<li><a href="lamp-apache-da.htm#serv-ftp">FTP Klienter</a></li>
				<li><a href="lamp-apache-da.htm#serv-sec">Sikkerhedsprotokoller</a></li>
				<li><a href="lamp-apache-da.htm#serv-ssl">SSL</a></li>
				<li><a href="lamp-sql-da.htm#serv-mysql">MySQL Opsætning</a></li>
				<li><a href="lamp-ppp-da.htm#serv-php">PHP i Apache</a></li>
			</ul>
		</li>
		<li  onmouseover="showHide(12 );" onmouseout="startTime();" ><a href="internet-connecting-da.htm">Internet og Netv&#230;rk</a>
			<ul class="sub-menu" id="sm12">
				<li><a href="ntp-server-da.htm#ntp-server">Ops&#230;tning af Timeserver</a></li>
				<li><a href="tor-privoxy-da.htm#tor">Tor</a></li>
				<li><a href="tor-privoxy-da.htm#privoxy">Privoxy</a></li>
				<li><a href="internet-connecting-da.htm#firewalls">Firewalls</a></li>
				<li><a href="samba-da.htm#configure">Konfigurer SAMBA (Windows)</a></li>
				<li><a href="samba-da.htm#setup">Ops&#230;tning af Samba-Server</a></li>
				<li><a href="ssh-da.htm#ssh-fs">SSH Remote Mounting</a></li>
				<li><a href="ssh-da.htm#ssh-x">X Window programmer via SSH</a></li>
				<li><a href="ssh-da.htm#ssh-f">GUI SSH med Konqueror</a></li>
				<li><a href="ssh-da.htm#ssh-w">SSH X-Forwarding fra Windows-PC</a></li>
				<li><a href="ssh-da.htm#ssh-s">SSH Security</a></li>
				<li><a href="internet-connecting-da.htm#dial-mod">56k Modems</a></li>
				<li><a href="internet-connecting-ndis-da.htm#ndiswrapper-basic">Aktiver Ndiswrapper</a></li>
				<li><a href="internet-connecting-ndis-da.htm#ndiswrapper-advanced">Aktiver Ndiswrapper -  Advanced</a></li>
				<li><a href="internet-connecting-wpa-da.htm#wpa">WIFI-WLAN</a></li>
				<li><a href="internet-connecting-da.htm#internetsharing">Delt internetforbindelse</a></li>
				<li><a href="internet-connecting-da.htm#netcardconfig">Kom Online</a></li>
			</ul>
		</li>
		<li  onmouseover="showHide( 13 );" onmouseout="startTime();" ><a href="sys-admin-apt-da.htm">Installere nye pakker/Afinstallere pakker</a>
			<ul class="sub-menu" id="sm13">
				<li><a href="sys-admin-apt-da.htm#apt-cook">APT-Guide og Sources List</a></li>
				<li><a href="sys-admin-meta-da.htm#meta-pack">Installere Meta-Pakker </a></li>
				<li><a href="sys-admin-meta-da.htm#meta-proxy">Meta-Pakker og Proxies</a></li>
				<li><a href="sys-admin-apt-da.htm#apt-install">Installere nye pakker</a></li>
				<li><a href="sys-admin-apt-da.htm#apt-delete">Afinstallere pakker</a></li>
				<li><a href="sys-admin-apt-da.htm#apt-downgrade">Nedgradere en pakke</a></li>
				<li><a href="sys-admin-apt-da.htm#apt-cache">Søgning efter pakker med apt-cache</a></li>
				<li><a href="sys-admin-apt-da.htm#apt-kio">Søgning efter pakker med kio-apt</a></li>
			</ul>
		</li>
		<li  onmouseover="showHide( 14 );" onmouseout="startTime();" ><a href="sys-admin-apt-da.htm">System Administration</a>
			<ul class="sub-menu" id="sm14">
				<li><a href="sm-siduxcc-da.htm#sm">smxi Syntax Command Sets</a></li>
				<li><a href="sm-siduxcc-da.htm#siduxcc">siduxcc</a></li>
				<li><a href="sys-admin-apt-da.htm#apt-upgrade">Opgradering af Systemet</a></li>
				<li><a href="sys-admin-upgrade-da.htm#live-cd-upgrade">Opgradering med Live-CD</a></li>
				<li><a href="sys-admin-kern-upg-da.htm#kern-upgrade">Opgradere kernel</a></li>
				<li><a href="sys-admin-rdiff-da.htm#rdiff">Sikkerhedskopiering med rdiff</a></li>
				<li><a href="sys-admin-rsync-da.htm#rsync">Sikkerhedskopiering med rsync</a></li>
				<li><a href="vir-rkits-da.htm#virus-rkits">Virus og Rootkit skannere</a></li>
				<li><a href="sys-admin-gen-da.htm#start-services">Ops&#230;tning af tjenester i sidux</a></li>
				<li><a href="sys-admin-gen-da.htm#pw-lost">Mistet root password</a></li>
				<li><a href="sys-admin-gen-da.htm#fonts">Fonts</a></li>
				<li><a href="sys-admin-gen-da.htm#cups">CUPS</a></li>
				<li><a href="sys-admin-gen-da.htm#init">sidux runlevels - init</a></li>
				<li><a href="sys-admin-grub-bootman2-da.htm#mbr-grub-boot">MBR Overskrevet bootsector</a></li>
				<li><a href="sys-admin-grub-bootman2-da.htm#dual-boot">Dual og Multiple Booting</a></li>
				<li><a href="sys-admin-grub-bootman2-da.htm#boot-grub-floppy">Skriv en Boot-Floppy</a></li>
				<li><a href="sys-admin-grub-bootman2-da.htm#remove-grub">Fjern grub fra MBR</a></li>
				<li><a href="sys-admin-grub-bootman2-da.htm#what-is-grub">Grub; bootmanageren</a></li>
			</ul>
		</li>
	</ul>
<!-- menu ends here --> </div>
<div id="main-page">
	<div class="divider" id="wpa">
		<h2 id="top-header">Funktionerne af wpasupplicant i Debian</h2>
				<p class="highlight-3">Af juridiske årsager stiller sidux udelukkende dfsg-free software til rådighed, <a href="hw-dev-hw-dri-da.htm#non-free">følg venligst dette link for yderligere information om non-free sources for firmware</a></p>

			<p>Debian wpasupplicant pakken understøtter to metoder som begge er tæt integrerede med kernen i netværk infrastrukturen ( ifupdown).</p>


		<h4>Indhold</h4>

<h6>1.  Specificer backend til wpa_supplicant driveren</h6>
          <p>* Tabel over understøttede drivere<br />
         * Almene driver anbefalinger </p>
<h6>2. Mode #1: Managed Mode</h6>
          <p>* Eksempler<br />
          * Tabel over almindelige valgmuligheder<br />
          * Vigtige noter om Managed Mode<br />
          * Hvordan det gøres </p>
<h6>3. Mode #2: Roaming Mode</h6>
          <p>* wpa_supplicant.conf<br />
          * /etc/network/interfaces<br />
          * Kontroller Roaming Daemon med wpa_action<br />
          * Finindstilling af Roaming opsætning<br />
          * Logfilen<br />
          * Anvendelse af eksterne Mapping Scripts (f.eks. guessnet)<br />
          * /etc/network/interfaces med ekstern mapping</p> 
<h6>4. Fejlfinding</h6>
          <p>* Skjulte ssids</p>
<h6>5. Sikkerhedsovervejelser</h6>
          <p>* Konfiguration af fil-rettigheder</p> 

		<h3>1. Specificer backend til wpa_supplicant driveren</h3>

			<p>Hvis der ikke eksplicit bliver valgt en en anden driver med "wpa_driver" vil wext driveren blive anvendt. Anvender man 2.4 kernel eller 2.6 kernels under 2.6.14 <b>skal</b> man definere wpa driveren under alle omstændigheder.</p>

	</div>	

	
		<h3>Understøttede drivere</h3>

	<div>
		<table>
			<tbody>
				<tr>
					<th>Driver</th>
					<th>Beskrivelse</th>
				</tr>

				<tr>
					<td>wext</td>
					<td>Linux wireless extensions (generic)</td>
				</tr>
				<tr>

			</tbody>
		</table>
	</div>

	<div class="spacer05"></div>
		<h3>Almene driver anbefalinger</h3>

			<p>Intel Pro Wireless adapters (ipw2100, ipw2200 and ipw3945) anvender allesammen 'wext' backend, medmindre din kernel er ældre end 2.6.14</p>

			<p>Madwifi understøtter både 'wext' og 'madwifi' driver backends. 'wext' foretrækkes, men 'madwifi' kan i nogle tilfælde vise sig at fungerer bedre.</p>

			<p>Ndiswrapper <b>UNDERSTØTTER IKKE LÆNGERE</b> 'ndiswrapper' driver backend fra og med version 1.16. Derfor skal 'wext' anvendes (medmindre du bruger en gammel version af ndiswrapper).</p>

			<p>Definer drivertypen med parameteren 'wpa_driver' i /etc/network/interfaces. For eksempel:</p>

<pre>
iface eth0 inet dhcp
	wpa-driver wext
	. . . . . flere valg
</pre>

			<h2>2. Mode #1: Managed Mode</h2>

			<p>Managed mode tillader at etablere forbindelse via wpa_supplicant til et kendt netværk. Det fungerer på samme måde som wireless-tools pakken. Ethvert element, der er nødvendig for at oprette forbindelsen via wpa_supplicant, skal have præfikset 'wpa-' og efterfølges af den værdi der skal bruges for elementet.</p>

		<h6>Eksempler på Mode #1 wpa.conf fil - Eksempel 1.</h6>
<pre>
Eksempler på Mode #1 wpa.conf fil - Eksempel 1.
BEMÆRK: 'wpa-psk' værdien er kun gyldig hvis:

   1. Det er plaintext (ascii) streng på mellem 8 og 63 anslag, eller
   2. Det er en hexadecimal streng på 64 anslag 

# Forbind til access point med ssid 'NETBEER'
# med kryptering af typen WPA-PSK/WPA2-PSK. 
# det antages at driveren vil anvende 'wext' driver backend for wpa_supplicant fordi 
#ingen anden wpa-driver værdi er defineret. 
# passphrase gives som ASCII (plaintext) streng. 
# DHCP anvendes til at få tildelt en netværksadresse.
#
iface wlan0 inet dhcp

        wpa-ssid NETBEER
        # plaintext passphrase
        wpa-psk PlainTextSecret
</pre>
		<h6>Eksempler på Mode #1 wpa.conf fil - Eksempel 2.</h6>
<pre>
# Forbind til access point med ssid 'homezone'
# Anvend kryptering type WPA-PSK/WPA2-PSK, 
# Anvend 'wext' driver backend for wpa_supplicant. 
# psk (personal key) indgives som hexadecimal string. 
# DHCP is used to obtain # a network address.
#
iface wlan0 inet dhcp
wpa-driver wext
wpa-ssid homezone
# hexadecimal psk is encoded from a plaintext passphrase
wpa-psk 000102030405060708090a0b0c0d0e0f101112131415161718191a1b1c1d1e1f
</pre>
		<h6>Eksempler på Mode #1 wpa.conf fil - Eksempel 3.</h6>
<pre>
# Forbind til et access point med ssid 'HotSpot1' og bssid '00:1a:2b:3c:4d:5e'
# anvend kryptering type WPA-PSK/WPA2-PSK, 
# anvend 'madwifi' driver backend for wpa_supplicant.
# passphrase indgives som plaintext streng 
# Static network address assignment anvendes
#
iface ath0 inet static

        wpa-driver madwifi
        wpa-ssid HotSpot1
        wpa-bssid 00:1a:2b:3c:4d:5e
        # plaintext passphrase
        wpa-psk madhotspot
        wpa-key-mgmt WPA-PSK
        wpa-pairwise TKIP CCMP
        wpa-group TKIP CCMP
        wpa-proto WPA RSN
        # static ip settings
        address 192.168.0.100
        netmask 255.255.255.0
        network 192.168.0.0
        broadcast 192.168.0.255
        gateway 192.168.0.1
</pre>
		<h6>Eksempler på Mode #1 wpa.conf fil - Eksempel 4.</h6>
<pre>
# Bruger oprettet wpa_supplicant.conf anvendes for eth1. 
# Alt netværk information finde i denne wpa_supplicant.conf. 
# Ingen wpa-driver type speciferes, hvorfor 'wext' vil blive brugt
# DHCP anvendes til at få tildelt netværksadresse
#
iface eth1 inet dhcp

wpa-conf /sti/til/wpa_supplicant.conf
</pre>


	<div class="divider" id="wpa1">
		<h2>Tabel over almindelige valgmuligheder</h2>

			<p>En kort oversigt over de mest almindelige 'wpa-' options der kan bruges i /etc/network/interfaces. De skal stå i WLAN enhedens afsnittet. Se 'Vigtige noter til Managed Mode' sektionen for information om gyldige og ugyldige 'wpa-' værdier.</p>

			<p class="highlight-2">OBS: Alle værdier er CASE SeNsItIvE!</p>

<pre>
Valgmulighed	Eksempel på værdi	Beskrivelse
=======         =============           ===========
wpa-ssid        plaintextstring         definerer dit netværks ssid
wpa-bssid       00:1a:2b:3c:4d:5e       dit access point bssid
wpa-psk         0123456789......        din preshared wpa key. Anvend
                                        wpa_passphrase(8) for at generere din psk
                                        fra et passphrase / ssid par
wpa-key-mgmt    NONE, WPA-PSK, WPA-EAP, liste over accepterede "authenticated key
                IEEE8021X               management protocols"
wpa-group       CCMP, TKIP, WEP104,     liste over "accepted group ciphers for WPA"
                WEP40
wpa-pairwise    CCMP, TKIP, NONE        liste over "accepted pairwise ciphers for
                                        WPA"
wpa-auth-alg    OPEN, SHARED, LEAP      liste over "allowed IEEE 802.11
                                        authentication algorithms"
wpa-proto       WPA, RSN                liste over accepterede protokoller
wpa-identity    myplaintextname         administrator provided username
                                        (EAP authentication)
wpa-password    myplaintextpassword     dit password (EAP authentication)
wpa-scan-ssid   0 or 1                  toggles scanning of ssid with specific
                                        Probe Request frames
wpa-ap-scan     0 or 1 or 2             adjusts the scanning logic of
                                        wpa_supplicant

</pre>
			<p>Den komplette funktionalitet af wpa_cli(8) skulle være implementeret. En fejlende programfunktion anses for værende en bug og skal rapporteres som sådan. Patches er altid velkomne.</p>


			<h2>Vigtige noter til Managed Mode</h2>

			<p>Næsten alle 'wpa-' indstillinger kræver at de i det mindste er speciferet et ssid. Kun en lille del af indstillingerne har global effekt, disse er: 'wpa-ap-scan' og 'wpa-preauthenticate'.</p>

			<p>Enhver 'wpa-' indstilling der er defineret for en enhed (i interfaces(5) filen), er tilstrækkelig til at starte wpa_supplicant daemon'en op.</p>

			<p>'wpasupplicant ifupdown' script'et foretager antagelser (gætter) omkring input typen, der er gyldig for enhver indstilling. For eksempel antager den at nogle værdier er plaintext og sætter citationstegn omkring dette input før det bliver sendt videre til wpa_cli. wpa_cli føjer så dette til den 'network block' der dannes via 'wpa_supplicant ctrl_interface socket'.</p>

			<p>Hvis du afvikler ifup manuelt med '--verbose' option vil du kunne se alle de kommandoer der danner 'network block' via wpa_cli. Hvis nogen af de værdier du har skrevet i wpa-* indstillingerne i /etc/network/interfaces er omgivet af dobbelt citationstegn, er det fordi det er blevet antaget at dit input var "plaintext" eller "ascii".</p>

			<p>Nogle værdier antages automatisk at være hexadecimale strenge (f.eks. wpa-wep-key*). Værdi-'typen' af wpa-psk bliver dog bestemt ved at der søges efter ikke-hexadecimale tegn.</p>

			<h2>Hvordan wpa_supplicant fungerer</h2>

			<p>Som tidligere nævnt bliver ethvert 'wpa_supplicant'-specifikt element kaldt med præfikset 'wpa-'. Hvert element korrelerer med en 'wpa-supplicant'-egeneskab som er beskrevet i wpa_supplicant.conf(5), wpa_supplicant(8) og wpa_cli(8) manpages.</p>

			<p>Supplicant'en kaldes uden nogen form for pre-konfigurering overhovedet, og wpa_cli bygger netværks-konfigurationen ud fra værdierne i 'wpa-*' linerne. Til at starte med indstiller wpa_supplicant/wpa_cli ikke direkte egenskaberne for enheder (som for eksempel hvis du sætter et essid med iwconfig), men informerer enheden om hvilket access point der er egnet til en forbindelse. Først når enheden har skannet området og fundet at det af 'supplicant' angivne access point er til rådighed sættes enheden om med egenskaberne.</p>

			<p>Scriptet, der udfører alt dette, findes her:</p>

<pre> 
/etc/wpa_supplicant/ifupdown.sh
</pre>

			<p>Det bliver eksekveret af 'run-parts', der igen bliver 'invoked' af ifupdown i 'pre-up', 'pre-down' og 'post-down' faserne.</p>


			<p>I 'pre-up' fasen bliver en wpa_supplicant daemon startet, fulgt af en serie af wpa_cli kommandoer, der indstiller en netværks konfiguration i henhold til værdierne i 'wpa-' parametrene som er indført i /etc/network/interfaces for den fysiske enhed.</p>

			<p>Hvis der anvendes wpa-roam, startes en wpa_cli daemon i 'post-up' fasen.</p>

			<p>I 'pre-down' fasen bliver wpa_cli daemon dræbt (stoppet) hvis den findes.</p>

			<p>I 'post-down' fasen bliver wpa_supplicant daemon dræbt hvis den findes.</p>

			<h2>3. Mode #2: Roaming Mode</h2>

			<p>Pakken 'wpa_supplicant' indeholder en simpel roaming-mekanisme i sig selv; den findes i form af et wpa_cli-action-script (findes her: /sbin/wpa_action). Ved aktivering overtager dette script kontrollen med ifupdown. De tekniske detaljer omkring dette er beskrevet i wpa_action(8) manpage.</p>

			<p>For at aktivere dette roaming-interface, tilpas det følgende interfaces(5)-eksempel:</p>

<pre>
iface eth1 inet manual
	wpa-driver wext
        wpa-roam /sti/til/wpa_supplicant.conf
</pre>

			<p>To daemons startes med ovenstående eksempel; wpa_supplicant og wpa_cli. En wpa_supplicant.conf-fil er nødvendigt hvis dette skal virke. Du kan bruge eksempel-konfigurations-filen som du kan kopiere til /etc med følgende:</p>

<pre>
cp /usr/share/doc/wpasupplicant/examples/wpa_supplicant.conf.template \
 /etc/wpa_supplicant/wpa_supplicant.conf
</pre>


			<p>Det er nødvendigt at redigere denne konfigurationsfil, og tilføje 'network blocks' for alle kendte netværk. Hvis du ikke forstår hvad dette betyder, kan du begynde at læse manpage for wpa_supplicant.conf(5) nu.</p>

			<p>For hvert netværk kan der defineres en 'id_str'. Den bør defineres som en simpel text-streng. Denne text-streng danner basis for netværksprofilen; som korrelere til en logisk interface (som defineret i interfaces(5) filen). Hvis ingen 'id_str' angives for et netværk, vil wpa_action antage at den skal anvende standard ('default') logisk interface. Denne 'default' interface kan ydermere defineres via værdien for 'wpa-default-iface'.</p>

			<p>Hvad alt dette betyder kan vi kigge på med følgende eksempel, taget fra wpa_action(8) manpage.</p>

		<h6>wpa_supplicant.conf eksempel</h6>			
<pre>wpa_supplicant.conf example:
network={

        ssid="foo"
        # den følgende streng kalder, via /sbin/wpa_action, 'ifup uni' op
        id_str="uni"
        key_mgmt=NONE
}

network={

        ssid="bar"
        # den følgende streng kalder. via /sbin/wpa_action 'ifup home_static' op
        id_str="home_static"
        psk=123456789...

}


network={

        ssid=""
        # ingen 'id_str' angives, /sbin/wpa_action kalder 'ifup default'
        key_mgmt=NONE

}
</pre>
</div>
	<div class="divider" id="wpa2">
		<h6>/etc/network/interfaces eksempler</h6>
<pre>
/etc/network/interfaces (eksempel):
# roaming-interface SKAL bruge den manuelle inet metode
# 'allow-hotplug' eller 'auto' sikrer at daemon'en starter automatisk
allow-hotplug eth1
iface eth1 inet manual

        wpa-driver wext
        wpa-roam /etc/wpa_supplicant/wpa_supplicant.conf

 
# no id_str, 'default' bruges som fallback mapping target
iface default inet dhcp


# id_str="uni"
iface uni inet dhcp

# id_str="home_static"
iface home_static inet static

        address 192.168.0.20
        netmask 255.255.255.0
        network 192.168.0.0

        broadcast 192.168.0.255
        gateway 192.168.0.1
</pre>

			<p>Et logisk interface bringes op via ifup, og stoppes via ifdown, når wpa_supplicant henholdsvis associerer og de-associerer med det netværk, der er defineret i 'id_str' i /etc/wpa_supplicant.conf.</p>

			<p>En log over aktiviteterne af /sbin/wpa_action bliver oprettet i /var/log/wpa_action.log, venligst vedhæft denne hvis du rapporterer om problemer.</p>

		<h2>Kontrol over Roaming-Daemon gennem wpa_action</h2>

			<p>Når først roaming daemon'en starter, overtager den kontrollen med ifupdown. Det vil sige; wpa_cli kalder ifup når wpa_supplicant har oprettet en forbindelse med et access point, og kalder ifdown når forbindelsen afbrydes eller termineres. Når  roaming daemon'en er aktiv, bør ifupdown ikke kontrolleres direkte med manuelle kommandoer, anvend i stedet /sbin/wpa_action til at stoppe og genindlæse roaming daemon'en. For eksempel; for at stoppe romaing daemon'en på enheden 'eth1':</p>

<pre>
wpa_action eth1 stop
</pre>


			<p>Hvis det er nødvendigt at opdatere roaming daemon'en med nye netværks detaljer, kan dette gøres uden at stoppe den. Rediger wpa_supplicant.conf filen der bliver anvendt af daemon'en med de nye detaljer, tilføj eventuelle specifikke netværk indstillinger til /etc/network/interfaces (associeret via 'id_str') og genindlæs daemon'en sådan her:</p>

<pre>wpa_action eth1 reload</pre>

			<p>Omfattende tekniske detaljer om wpa_action findes i wpa_action(8) manpage.</p>

</div>
	<div class="divider" id="wpa3">
		<h2>Fin indstilling af Roaming opsætning</h2>

			<p>Du kan stå i en situation hvor flere kendte access points er aktive i dine nærmeste omgivelser. Du kan vælge hvilket du foretrækker manuelt, med enten wpa_cli eller wpa_gui, eller du kan tildele hvert netværk dets egen prioritet. Den sidste funktion anvendes via 'priority' parameteren i wpa_supplicant.conf.</p>

</div>
	<div class="divider" id="wpa4">
		<h2>Logfilen</h2>

			<p>Aktiviteten fra roaming dameon'en logges til /var/log/wpa_action.log. Den følgende information findes i logfilen:</p>

		<p>*time and date<br />
		*interface name and action event<br />
		*values of enviromental variables (WPA_ID, WPA_ID_STR, WPA_CTRL_DIR)<br />
		*ifupdown command executed<br />
		*wpa_cli status (based on WPA-PSK, network may display different info)<br />
		*bssid<br />
		*ssid<br />
		*id<br />
		*id_str<br />
		*pairwise_cipher<br />
		*group_cipher<br />
		*key_mgmt<br />
		*wpa_state<br />
		*ip_address</p>
	
	
</div>
	<div class="divider" id="wpa5">	
		<h2>Anvendelse af eksterne mapping-scripts (f.eks. guessnet)</h2>

			<p>I tillæg til den interne mapping af logiske interfaces via 'id_str', kan wpa_action ogdå kalde eksterne mapping scripts. Et mapping script burde returnere navnet på det logiske interface som skal kaldes op. Ethvert mapping script der virker fra ifupdown's mapping mekanisme (se man interfaces) bør også fungere når det bliver kaldt fra wpa_action.</p>

			<p>For at kalde et mapping script skal du tilføje en linie 'wpa-mapping-script name-of-the-script' til 'interfaces stanza' for den fysiske roaming-device. (Det kan være at du skal specificere den absolutte sti til mapping script.)</p>


			<p>Indholdet i linierne der starter med wpa-map sendes videre til mapping script'ets stdin. Siden ifupdown kun tillader en wpa-map linie kan du tilføje numre til wpa-map for at få flere linier. For eksempel:</p>

<pre>
iface wlan0 inet manual
        wpa-driver wext
        wpa-roam /etc/wpa_supplicant/wpa_supplicant.conf
        wpa-mapping-script guessnet-ifupdown
        wpa-map0 home
        wpa-map1 work
        wpa-map2 school
        # ... flere wpa-mapX linier efter behov
</pre>
			<p>Som standard vil mapping script'et kun blive brugt når der ike er nogen 'id_str' tilgængelig for det aktuelle netværk. Hvis du vil deaktivere brugen af 'id_str' matching og kun anvende ekstern mapping script kan du bruge 'wpa-mapping-script-priority 1' muligheden for at overtrumfe standard adfærden.</p>

			<p>I det tilfælde at mapping script returnerer en tom streng vil  wpa_action falde tilbage til 'default' interface, medmindre et alternativ er defineret i 'wpa-roam-default-iface' parameteren.</p>

			<p>Nedenunder er et avanceret eksempel der anvender guessnet-ifupdown som ekstern mapping script.</p>

		<h6>/etc/network/interfaces med ekestern mapping eksempel</h6>
<pre>
/etc/network/interfaces med ekestern mapping eksempe:
allow-hotplug wlan0
iface wlan0 inet manual

        wpa-driver wext
        wpa-roam /etc/wpa_supplicant/wpa_supplicant.conf
        wpa-roam-default-iface default-wparoam
        wpa-mapping-script guessnet-ifupdown
        wpa-map default: default-guessnet
        wpa-map0 home_static
        wpa-map1 work_static


# school can only be chosen via 'id_str' matching
iface school inet dhcp

        # resolvconf
        dns-nameservers 11.22.33.44 55.66.77.88

iface home_static inet static

        address 192.168.0.20
        netmask 255.255.255.0

        network 192.168.0.0
        broadcast 192.168.0.255
        gateway 192.168.0.1
        test peer address 192.168.0.1 mac 00:01:02:03:04:05


iface work_static inet static

        address 192.168.3.200
        netmask 255.255.255.0
        network 192.168.3.0
        broadcast 192.168.3.255

        gateway 192.168.3.1
        test peer address 192.168.3.1 mac 00:01:02:03:04:05

iface default-guessnet inet dhcp

iface default-wparoam inet dhcp
</pre>

			<p>I dette eksempel vil wpa_action kun bruge guessnet for at vælge et egnet logisk interface, når der ikke er defineret nogen 'id_str' for det aktuelle netværk i wpa_supplicant.conf.</p>

			<p>'wpa-map' linerne giver guessnet navnene på de logiske interfaces der skal testes, såvel som standard ('default') interface der skal bruges hvis alle tests fejler.'test' linierne for hvert logisk interface bruges af guessnet til at afgøre om der aktuelt er forbindelse til dette netværk. For eksempel vil guessnet vælge det logiske interface 'home_static' hvis der er en enhed med IP addressen 192.168.0.1 og MAC adressen 00:01:02:03:04:05 på det aktuelle netværk. Hvis alle tests fejler vil 'default-guessnet' interface blive konfigureret.</p>


			<p>Venligst læs guessnet(8) manpage for yderligere information.</p>

			<h2>4. Fejlfinding</h2>

			<p>For at debugge forbindelses-, associations- og "authentication"-problemer, anbefaler vi at du starter 'wpa_cli -i &lt;interface&gt;' i et andet konsolvindue før du starter interface. Brug kommandoen 'level 0' først, for at få alle debug messages. Brug så 'ifup --verbose &lt;interface&gt;' for at få verbose debug messages fra script'et der starter wpasupplicant.</p>

	<div class="divider" id="wpa6">
		<h2>Skjulte ssid'er</h2>

			<p>For referencer, se #358137. For at oprette forbindelser til skjulte ssid'er, skal du indstille parameteren 'ap_scan=1' i global section, og  'scan_ssid=1' i din 'network block' sektion af din wpa_supplicant.conf fil. Hvis du bruger netværket i managed mode kan du gøre dette ved hjælp af følgende parametere:</p>

<pre>
iface eth1 inet dhcp
wpa-conf managed
wpa-ap-scan 1
wpa-scan-ssid 1
# ... additional options for your setup
</pre>

			<p>I følge #368770, kan oprettelsen af forbindelser der benytter WEP tage enddog meget lang tid. I nogle tilfælde kan indføjelse af parameteren 'ap_scan=2' i konfigurationsfilen hjælpe på dette (eller anvend den ekvivalente 'wpa-ap-scan 2' parameter).</p>

			<h2>5. Sikkerheds overvejelser</h2>

	<div class="divider" id="wpa7">
		<h2>Configuration File Permissions</h2>
			<p>Det er vigtigt at holde PSK's og andet sensitivt information om dine netværk indstillinger privat, derfor skal du sikre dig at konfigurations-filer der indeholder den slags information kun er læsbare af deres ejer. For eksempel:</p>

<pre>
chmod 0600 /etc/network/interfaces
# substituer stien med den til din egen wpa_supplicant.conf fil
chmod 0600 /etc/wpa_supplicant/wpa_supplicant.conf
</pre>
			<p>I standard opsætningen er /etc/network/interfaces læsbar for alle brugere (world readable), og den er derfor uegnet til at opbevare hemmelige passwords og nøgler (keys) i.</p>


	</div>
	<div class="spacer05"></div>
</div>
			<div id="rev">Page last revised 14/09/2007 1500 UTC</div>
</div>
</div>
</body>
</html>
