<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
   "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="dk">
<head>
	<title>sidux Manuals - RSYNC</title>
	<meta http-equiv="content-type" content="text/html; charset=utf-8" />
	<style type="text/css" media="all">@import url("../lib/css-js/content.css");</style>
        <style type="text/css" media="all">@import url("../lib/css-js/menu.css");</style>
        <style type="text/css" media="print">@import url("../lib/css-js/print.css");</style>
        <link rel ="shortcut icon" href="../lib/favicon/manual.ico" />
        <script type="text/javascript" src="../lib/css-js/menu2.js"></script>
        <!--[if lt IE 8]>
        <link rel="stylesheet" type="text/css" href="../lib/css-js/ie_5-7_override.css">
        <![endif]-->
        <!--[if lt IE 7]>
        <link rel="stylesheet" type="text/css" href="../lib/css-js/ie_5-6_override.css">
        <![endif]-->
</head>
<body id="welcome">
<!-- Last translation revision by zonker 26/11/2007 1515 UTC -->
<div id="menu"> <!-- menu starts here dk lang maintainer zonker -->
<!--Welcome to the  sidux-manual Operating System Manual version-01.63.2008.01.12 -->
<!-- menu last updated by bluewater 11/01/2008 2300 hrs AEST 10/01/2008 1200 hrs UTC -->
<img src="../lib/logos/sidux-logo.png" alt="logo" id="menu-header" />
	<ul id="top-list">
		<li><a href="http://sidux.com/">To sidux.com</a></li>
		<li><a href="http://manual.sidux.com/meta-manual">sidux Meta-Manual</a></li>
	</ul>
	<div id="flags-2">
			<a href="../flag-index.html"><img src="../lib/logos/sidux-lang-50.png" title="Choose another language" alt="lang-switch" /></a>
	</div>
	<ul>
		<li  onmouseover="showHide( 1 );" onmouseout="startTime();" ><a href="welcome-da.htm">sidux OS Manual</a>
			<ul class="sub-menu" id="sm1">
				<li><a href="welcome-da.htm#welcome-gen">sidux OS Manual</a></li>
				<li><a href="welcome-da.htm#how-to">Anvendelse af manualen</a></li>
				<li><a href="welcome-da.htm#table-contents">Index</a></li>
				<li><a href="help-da.htm#help-gen">Hvor finder du hjælp</a></li>
				<li><a href="help-da.htm#paste">IRC !paste</a></li>
				<li><a href="credits-da.htm#cred-team">Tak til</a></li>
			</ul>
		</li>
		<li  onmouseover="showHide( 2 );" onmouseout="startTime();" ><a href="cd-content-da.htm">Indholdet på Live CD'en</a>
			<ul class="sub-menu" id="sm2">
				<li><a href="cd-content-da.htm#cd-content">CD Indhold</a></li>
			</ul>
		</li>
		<li  onmouseover="showHide( 3 );" onmouseout="startTime();" ><a href="cd-dl-burning-da.htm">Download og br&#230;nd CD'en</a>
			<ul class="sub-menu" id="sm3">
				<li><a href="cd-dl-burning-da.htm#download-sidux">sidux fil-spejle, Download og Br&#230;nd CD'en</a></li>
				<li><a href="cd-dl-burning-da.htm#md5">md5 Checksum</a></li>
				<li><a href="cd-dl-burning-da.htm#burn-nero">Br&#230;nd i windows</a></li>
				<li><a href="cd-dl-burning-da.htm#burn-linux">Br&#230;nd i Linux</a></li>
				<li><a href="cd-dl-burning-da.htm#xdelta">xdelta Patching</a></li>
				<li><a href="cd-no-gui-burn-da.htm">Br&#230;nd uden GUI</a></li>
			</ul>
		</li>
		<li  onmouseover="showHide( 4 );" onmouseout="startTime();" ><a href="live-mode-da.htm">Live Mode</a>
			<ul class="sub-menu" id="sm4">
				<li><a href="live-mode-da.htm#rootpw">Root-password p&#229; sidux-LiveCD'en?</a></li>
				<li><a href="live-mode-da.htm#live-cd-installsoft">Installering af software med Live-CD'en</a></li>
				<li><a href="live-mode-da.htm#ntfs-3g">Skriv til NTFS-partitioner med ntfs-3g</a></li>
			</ul>
		</li>
		<li  onmouseover="showHide( 5 );" onmouseout="startTime();" ><a href="term-konsole-da.htm">Terminalen/Konsollen</a>
			<ul class="sub-menu" id="sm5">
				<li><a href="term-konsole-da.htm#sux"> sux</a></li>
				<li><a href="term-konsole-da.htm#term-kon"> Terminalen/Konsollen</a></li>
				<li><a href="term-konsole-da.htm#cli-help">Kommando Linie Hj&#230;lp</a></li>
				<li><a href="term-konsole-da.htm#term-cmds">liste over Linux Terminal Kommandoer</a></li>
				<li><a href="term-konsole-da.htm#shell-scripts">Installering af Scripts.sh</a></li>
			</ul>
		</li>
		<li  onmouseover="showHide( 6 );" onmouseout="startTime();" ><a href="cheatcodes-da.htm">CheatCodes</a>
			<ul class="sub-menu" id="sm6">
				<li><a href="cheatcodes-da.htm#cheatcodes">sidux specifikke Live-CD Cheatcodes</a></li>
				<li><a href="cheatcodes-da.htm#cheatcodes-linux">Linux generic Cheatcodes</a></li>
				<li><a href="cheatcodes-vga-da.htm#vga">VGA Codes</a></li>
			</ul>
		</li>
		<li  onmouseover="showHide( 7 );" onmouseout="startTime();" ><a href="part-gparted-da.htm">Partitionering af harddiske</a>
			<ul class="sub-menu" id="sm7">
				<li><a href="part-gparted-da.htm#partition">Partitioner harddiske med GParted</a></li>
				<li><a href="part-gparted-da.htm#ntfs">&#198;ndre st&#248;rrelse p&#229; NTFS partitioner med GParted</a></li>
				<li><a href="part-uuid-da.htm#uuid">UUID, Partitions betegndlser og fstab</a></li>
				<li><a href="part-cfdisk-da.htm#disknames">Kort om disk navngivning</a></li>
				<li><a href="part-cfdisk-da.htm#partition">Partitioner harddiske med cfdisk</a></li>
				<li><a href="part-cfdisk-da.htm#formating">Formater partitioner efter partitionering med cfdisk</a></li>
				<li><a href="part-size-examp-da.htm#part-example">Eksempler p&#229; partitions st&#248;rrelser</a></li>
			</ul>
		</li>
		<li  onmouseover="showHide( 8 );" onmouseout="startTime();" ><a href="hd-install-da.htm">Installations valg</a>
			<ul class="sub-menu" id="sm8">
				<li><a href="hd-install-da.htm#Inst-prep">Installations forberedelser</a></li>
				<li><a href="hd-install-da.htm#Installation">Installer til harddisk</a></li>
				<li><a href="hd-install-da.htm#first-hd-boot">F&#248;rste opstart</a></li>
				<li><a href="hd-install-opts-da.htm#fromiso">Opstart 'fromiso'</a></li>
				<li><a href="hd-install-opts-da.htm#fromiso-persist">fromiso og persist</a></li>
				<li><a href="hd-install-opts-da.htm#usb-hd">Installering p&#229; en USB-HD</a></li>
				<li><a href="hd-install-opts-da.htm#vtbox">Installering af sidux med VirtualBox</a></li>
				<li><a href="hd-install-opts-da.htm#qemu">Installering af sidux med QEMU</a></li>
			</ul>
		</li>
		<li  onmouseover="showHide( 9 );" onmouseout="startTime();" ><a href="hw-dev-hw-dri-da.htm">Grafikkort, Hardware Enheder og Drivere</a>
			<ul class="sub-menu" id="sm9">
				<li><a href="hw-dev-hw-dri-da.htm#hd-ntfs3g">Skriv til NTFS</a></li>
				<li><a href="hw-dev-hw-dri-da.htm#mon-res">Sk&#230;rm opl&#248;sning</a></li>
				<li><a href="hw-dev-hw-dri-da.htm#non-free-3d">Binære, non-free drivere til: Nvidia / ATI</a></li>
				<li><a href="hw-dev-hw-dri-da.htm#native-nv-ati">Free xorg drivere til nVidia, ATI, Radeon, Intel</a></li>
				<li><a href="hw-dev-hw-dri-da.htm#non-free">Hardware med non-free behov</a></li>
			</ul>
		</li>
		<li  onmouseover="showHide( 10 );" onmouseout="startTime();" ><a href="wm-kde-da.htm">Window Managers</a>
			<ul class="sub-menu" id="sm10">
				<li><a href="wm-kde-da.htm#desk-freeze">KDE Desktop Fryser</a></li>
				<li><a href="wm-kde-da.htm#kde-login">Kan ikke logge ind i KDE</a></li>
				<li><a href="wm-kde-da.htm#ch-th">&#198;ndre Themes</a></li>
			</ul>
		</li>
		<li  onmouseover="showHide( 11 );" onmouseout="startTime();" ><a href="lamp-apache-da.htm">sidux LAMP Stack</a>
			<ul class="sub-menu" id="sm11">
				<li><a href="lamp-apache-da.htm#serv-apache">sidux LAMP Stack</a></li>
				<li><a href="lamp-apache-da.htm#serv-ftp">FTP Klienter</a></li>
				<li><a href="lamp-apache-da.htm#serv-sec">Sikkerhedsprotokoller</a></li>
				<li><a href="lamp-apache-da.htm#serv-ssl">SSL</a></li>
				<li><a href="lamp-sql-da.htm#serv-mysql">MySQL Opsætning</a></li>
				<li><a href="lamp-ppp-da.htm#serv-php">PHP i Apache</a></li>
				<li><a href="ntp-server-da.htm#ntp-server">Ops&#230;tning af Timeserver</a></li>
			</ul>
		</li>
		<li  onmouseover="showHide(12 );" onmouseout="startTime();" ><a href="internet-connecting-da.htm">Internet og Netv&#230;rk</a>
			<ul class="sub-menu" id="sm12">
				<li><a href="tor-privoxy-da.htm#tor">Tor</a></li>
				<li><a href="tor-privoxy-da.htm#privoxy">Privoxy</a></li>
				<li><a href="internet-connecting-da.htm#firewalls">Firewalls</a></li>
				<li><a href="samba-da.htm#configure">Konfigurer SAMBA (Windows)</a></li>
				<li><a href="samba-da.htm#setup">Ops&#230;tning af Samba-Server</a></li>
				<li><a href="ssh-da.htm#ssh-fs">SSH og Fjern-montering</a></li>
				<li><a href="ssh-da.htm#ssh-x">X Window programmer via SSH</a></li>
				<li><a href="ssh-da.htm#ssh-f">GUI SSH med Konqueror</a></li>
				<li><a href="ssh-da.htm#ssh-w">SSH X-Forwarding fra Windows-PC</a></li>
				<li><a href="ssh-da.htm#ssh-s">SSH Sikkerhed</a></li>
				<li><a href="internet-connecting-da.htm#dial-mod">56k Modems</a></li>
				<li><a href="internet-connecting-ndis-da.htm#ndiswrapper-basic">Aktiver Ndiswrapper</a></li>
				<li><a href="internet-connecting-ndis-da.htm#ndiswrapper-advanced">Aktiver Ndiswrapper - Udvidet</a></li>
				<li><a href="internet-connecting-wpa-da.htm#wpa">WIFI-WLAN</a></li>
				<li><a href="internet-connecting-da.htm#netcardconfig">Kom Online</a></li>
			</ul>
		</li>
		<li  onmouseover="showHide( 13 );" onmouseout="startTime();" ><a href="sys-admin-apt-da.htm">Installere nye pakker/Afinstallere pakker</a>
			<ul class="sub-menu" id="sm13">
				<li><a href="sys-admin-apt-da.htm#apt-cook">APT-Guide og Sources List</a></li>
				<li><a href="sys-admin-meta-da.htm#meta-pack">Installere Meta-Pakker </a></li>
				<li><a href="sys-admin-meta-da.htm#meta-proxy">Meta-Pakker og Proxies</a></li>
				<li><a href="sys-admin-apt-da.htm#apt-install">Installere nye pakker</a></li>
				<li><a href="sys-admin-apt-da.htm#apt-delete">Afinstallere pakker</a></li>
				<li><a href="sys-admin-apt-da.htm#apt-downgrade">Nedgradere eller 'Hold' en pakke</a></li>
				<li><a href="sys-admin-apt-da.htm#apt-cache">Søgning efter pakker med apt-cache</a></li>
				<li><a href="sys-admin-apt-da.htm#apt-kio">Søgning efter pakker med kio-apt</a></li>
				<li><a href="sm-siduxcc-da.htm#sm">smxi Syntax Command Sets</a></li>
				<li><a href="sm-siduxcc-da.htm#siduxcc">siduxcc</a></li>
				<li><a href="sys-admin-apt-da.htm#apt-upgrade">Opgradering af Systemet - dist-upgrade</a></li>
			</ul>
		</li>
		<li  onmouseover="showHide( 14 );" onmouseout="startTime();" ><a href="sm-siduxcc-da.htm">System Administration</a>
			<ul class="sub-menu" id="sm14">
				<li><a href="sm-siduxcc-da.htm#sm">smxi Syntax Command Sets</a></li>
				<li><a href="sm-siduxcc-da.htm#siduxcc">siduxcc</a></li>
				<li><a href="sys-admin-apt-da.htm#apt-upgrade">Opgradering af Systemet - dist-upgrade</a></li>
				<li><a href="sys-admin-upgrade-da.htm#live-cd-upgrade">Opgradering med Live-CD</a></li>
				<li><a href="sys-admin-kern-upg-da.htm#kern-upgrade">Opgradere kernel</a></li>
				<li><a href="sys-admin-rdiff-da.htm#rdiff">Sikkerhedskopiering med rdiff</a></li>
				<li><a href="sys-admin-rsync-da.htm#rsync">Sikkerhedskopiering med rsync</a></li>
				<li><a href="vir-rkits-da.htm#virus-rkits">Virus og Rootkit skannere</a></li>
				<li><a href="sys-admin-gen-da.htm#start-services">Services enable/disable</a></li>
				<li><a href="sys-admin-gen-da.htm#pw-lost">Mistet root password</a></li>
				<li><a href="sys-admin-gen-da.htm#fonts">Fonte</a></li>
				<li><a href="sys-admin-gen-da.htm#cups">CUPS</a></li>
				<li><a href="sys-admin-gen-da.htm#init">sidux runlevels - init</a></li>
				<li><a href="sys-admin-grub-bootman2-da.htm#mbr-grub-boot">MBR Overskrevet bootsector</a></li>
				<li><a href="sys-admin-grub-bootman2-da.htm#dual-boot">Dual og Multiple Booting</a></li>
				<li><a href="sys-admin-grub-bootman2-da.htm#boot-grub-floppy">Skriv en Boot-Floppy</a></li>
				<li><a href="sys-admin-grub-bootman2-da.htm#remove-grub">Fjern grub fra MBR</a></li>
				<li><a href="sys-admin-grub-bootman2-da.htm#what-is-grub">Grub; bootmanageren</a></li>
			</ul>
		</li>
	</ul>
<!-- menu ends here --> </div>
<div id="main-page">
	<div class="divider" id="rsync">
			<h2 id="top-header">Sikkerhedskopiering med rsync</h2>
				<p>Det følgende vil give dig noget praktisk anvendelig information om hvad rsync kan gøre, samt give dig nogle eksempler på kode som du kan bruge i dit eget sikkerhedskopierings-script.</p>

				<p>rsync er et letanvendeligt sikkerhedskopierings program, det kan osse sikkerhedskopiere filer og mapper meget hurtigt. rsync opnår dette ved at anvende en meget smart rutine hvor den kontrollerer hvilke filer der er blevet ændret, således at kun filer med ændringer selekteres til kopiering. rsync anvender også et kompressions værktøj til at øge hastigheden på kopierings processen <span class=" highlight-3">(når denne mulighed er valgt eksplicit med -z parametren)</span>. Dette kan forklares meget simpelt:</p>

				<p>rsync programmet detekterer filer og mapper der skal kopieres fordi en eller flere af deres attributter er blevet ændret (for eksempel dato/tid for sidste ændring, eller størrelsen af filen), i begge tilfælde en ændring siden sidste sikkerhedskopiering. Denne selektionsproces er meget hurtig at udføre.</p>

				<p>Når rsync først har bygget listen over det den vil kopiere, går selve kopieringen meget hurtigt idet kompressions værktøjet anvendes herunder.  rsync komprimerer før filerne afsendes til bestemmelsesstedet, derefter afkomprimeres de “on the fly”.</p>

				<p>rsync kan kopiere filer fra:<br />
				* lokal system til lokal system,<br />
 				* lokal system til remote system,<br />
				* remote system til lokal system.</p>
				<p>Der envendes enten en standard <a href="ssh-en.htm">ssh</a> klient, eller en rsync daemon på både kilde- og mål-systemet. Man siderne for rsync slår fast at hvis du er i stand til at ssh til et system, så kan rsync også ssh til det.</p>

				<p class="highlight-3">En begrænsning i rsync er at programmet ikke er i stand til at kopiere fra remote- til remote-system!. Hvis du vil gøre dette med rsync skal du kopiere et af remote-systemerne til et lokalt system, og så kopiere fra det lokale til det andet remote-system.</p>

				<p>For at vise dette med et eksempel, forestiller vi os tre systemer;</p>
<pre>
neo – et lokalt system
morpheus – et remote system
trinity – et remote system
</pre>
				<p>Hvis du vil anvende rsync til at kopiere, eller sync, mapperne /home/[user]/Data fra lle systemer ne til hinanden. Hvert system "ejes" af en specifik bruger, med andre ord, hvert specifikke system har en specifik bruger, og derfor bør ethvert af systemerne bruges som "kilden" til de andre to systemer. Du kan udelukkende køre kommandoen rsync fra den lokale maskine (det er neo):</p>
<pre>
brugeren af neo hedder cuddles,
brugeren af morpheus hedder tartie, og
brugeren af trinity hedder taylar.
</pre>
				<p>Det du altså vil gøre er at sikkerhedskopiere (synkronisere) følgende:</p>

<pre>
neo's /home/cuddles/Data area til morpheus og trinity,
morpheus's /home/tartie/Data area til neo og trinity,
trinity's /home/taylar/Data area til neo og morpheus.
</pre>

				<p>Problemet med at rsync ikke kan kopiere fra remote til remote betyder nu at i dette eksempel støder vi ind i problemer med at hopeiere fra trinity til morpheus, og fra morpheus til trinity (både kilde og mål er remote) i.e.</p>

				
<pre>
neo --> morpheus – fint, local til remote
neo --> trinity – fint, local til remote
morpheus --> neo – fint, remote til local
trinity --> neo – fint, remote til local
morpheus --> trinity – remote til remote – virker ikke
trinity --> morpheus – remote til remote – virker ikke
</pre>
				<p>For at arbejde dig rundt om denne begrænsning kan du ændre din metode til det følgende;</p>
<pre>
morpheus --> trinity – gøres ved: morpheus --> neo &amp; neo --> trinity
trinity --> morpheus – gøres ved: trinity --> neo &amp; neo --> morpheus
</pre>
				<p>Det kræver altså lidt ekstra arbejde at gøre dette, men eftersom du også ønsker at kopiere filerne til neo er det i realiteten bare en ændring af kilden du foretager, resultatet bliver det ønskede. Forudsat dine sikkerhedskopieringer er vellykkede og intet mangler.</p>

				<p class="highlight-3">Denne begrænsning i rsync skal du tage med i dine overvejelser når du designer dine sikkerhedskopierings procedurer.</p>

				<h5>Anvendelse af hostnames med hostnames i rsync</h5>

				<p>Anvendelse af IP-adresser på neo, morpheus og trinity kan gøre kopieringsprocessen mere gennemskuelig og dermed nemmere.</p>

				<p>Du skal redigere filen /etc/hosts, og tilføje dine hostnames og IP-addresserne som de skal oversættes til. Her er en lille snip af en /etc/hosts fil, så du kan se hvordan det skal se ud:</p>
<pre>
192.168.1.15	 neo
192.168.1.16	 morpheus
192.168.1.17	 trinity
</pre>
				<p>Den føste linie oversætter IP-adressen 192.168.1.15 til navnet “neo”, den anden 192.168.1.16 til “morpheus”, og den sidste IP-Addressen 192.168.1.17 til navnet “trinity”. Efter tilføjelse af dine skal du gemme /etc/hosts filen, og du kan så anvende navnet i stedet for IP-adressen, eller du kan fortsætte med at anvende IP-addressen. Dette er specielt nyttigt når/ hvis systemer ændrer deres IP-adresse, du skal så bare ændre din /etc/hosts fil, og ikke alle dine scripts. For eksempel hvis neo ændrer IP-addresse fra 192.168.1.15 til 192.168.1.25:</p>

				<p>Hvis du har skrevet alle dine scripts med ip-adresser i skal du finde dem alle og redigere dem til den nye adresse. Men hvis du anvender hostnames, så er det eneste du skal redigere /etc/hosts filen, og så virker alle dine scripts igen. Metoden med at anvende hostnames gør også hele processen mere gennemskuelig idet genkendelige navne sikkert vil sige dig mere end ip-adresser om hvilken maskine det er du arbejder med.</p>

				<h4>rsync, og de to måder du kan anvende det på.</h4>

				<p>En måde er at <b>“skubbe”</b> filer til et givent mål, og den anden måde er at <b>“trække”</b> filerne fra en given kilden. Hver metode har deres fordele, og nogle ulemper. Lad os se på dem hver især (for denne del lad os antage at en af dine systemer er lokal og det andet er remote. På den måde er det nemmere at få fat i terminologien).</p>

				<p><b>“skubbe”</b> - lokal systemet har kilde filerne og mapperne liggende, og målet er en remote maskine. rsync kommandoen afvikles på lokal systemet, og  “skubber” filerne til mål systemet (remote systemet).</p>

				<p>Fordele:<br />
				* Du kan have mere end et system der sikkerhedskopierer sig selv til et enkelt mål system.<br />
				* Sikkerhedskopieringsprocessen fordeles over dit totale computer system, og tynger ikke blot en enkelt maskine.<br />
				* Hvis et system er hurtigere end de andre kan det afslutte før de andre og bruges til andre formål.</p>

				<p>Ulemper:<br />
				* Hvis du anvender et script, og planlægger dem med cron, så kræver det opdatering og ændring af adskillige crontabs på hvert system, ligesom opdatering af adskillige versioner af dit script.<br />
				* Din sikkerhedskopi kan ikke kontrollere om mål systemets har mål-partitionen monteret, og du kan derfor risikere at du laver en sikkerhedskopi til ingenting på mål systemet.</p>

				<p><b>“trække”</b> - fjernsystemet har kilde filerne og mapperne liggende, og målet er lokal systemet. rsync kommandoen afvikles på lokal systemet, og “trækker” filerne over fra kilde systemet (remote systemet).</p>

				<p>Fordele:<br />
				* Et system er serveren der kontrollerer alle sikkerhedskopieringer for alle de andre systemer. Centraliseret sikkerhedskopiering.<br />
				* Anvender du scripts findes disse udelukkende på et enkelt system. Og du har kun brug for et enkelt script hvad der gør opdatering og ændringer meget nemt at udføre. Det tillader dig også at have bare en crontab fil til at planlægge script'et.<br />
				* Dit script kan kontrollere, og montere (om nødvendigt) mål partitionen.</p>

				<h6>Syntaksen for rsync, som du finder den i man siderne:</h6>
<pre>
       rsync [OPTION]... SRC [SRC]... DEST

       rsync [OPTION]... SRC [SRC]... [USER@]HOST:DEST

       rsync [OPTION]... SRC [SRC]... [USER@]HOST::DEST

       rsync [OPTION]... SRC [SRC]... rsync://[USER@]HOST[:PORT]/DEST

       rsync [OPTION]... SRC

       rsync [OPTION]... [USER@]HOST:SRC [DEST]

       rsync [OPTION]... [USER@]HOST::SRC [DEST]

       rsync [OPTION]... rsync://[USER@]HOST[:PORT]/SRC [DEST]
</pre>
				<h5>Eksempler på rsync kommandoer:</h5>
<pre>
rsync -agEvz --delete-after --exclude=”*~” morpheus:/home/tartie /media/hda7/SysBackups/morpheus/home
</pre>
				<p>Lad os kigge nærmere på dele af denne kommando:</p>
<pre>
kilde stien/ filen er: morpheus:/home/tartie
og målet er: /media/hda7/SysBackups/morpheus/home
</pre>
				<p>alt fra /home/tartie... vil blive sikkerhedskopieret til /media/hda7/SysBackups/morpheus/home som vil se ud som følger:</p>
<pre>
/media/hda7/SysBackups/morpheus/home/tartie...
</pre>
				<p>Det skal bemærkes at den eneste grund til at /tartie er under /home er på grund af MÅL-designationen (TARGET designation), og IKKE kilden (SOURCE). Kilden (source) selekterer kun hvor filerne kommer fra, ikke hvorhen de bliver sendt. "Målet" (target) er det der fortæller rsync hvor filerne, som kommer fra kilden, skal placeres. Se det følgende eksempel:</p>
<pre>
rsync [...] /home/user/data/files /media/hda7/SysBackups/neo
</pre>
				<p>I den ovenstående kommando bliver kun kilde mappen /files, og alt hvad der ligger under dette, blive kopieret til mål mappen /neo – og altså ikke denne del /media/hda7/SysBackups/neo/home/user/data/files</p>

				<p>Husk at tage dette med i dine overvejelser når du designer dine kommandoer til sikkerhedskopiering med rsync.</p>

				<h5>Forklaring af parametrene:</h5>
<pre>
-a is used for archive mode. From the man page, it explains this option as “in simple terms,
 a way to backup recursively, and to preserve 'almost' everything”. It does mention that t
his format does not preserve hardlinks due to the complexity of processing. 
The -a option is stated as being equivalent to the following: -rlptgoD which means this:
  -r = recursive – process sub-folders and files found in our “source” location.
  -l = links – when symlinks are encountered, recreate them on the target location.
  -p = permissions – tells rsync to set target permissions the same as source.
  -t = times – tells rsync to set target times the same as source.
  -q = quiet – tells rsync to keep its output minimal, though we add a level of 
verbose with the command -v right after this. To make the process complete “quiet”, 
remove the “v” in the above command.
  -o = owner – tells rsync that if it's run as root, set the target files owner the same as source.
-D = this is equivalent to using these two commands: --devices --specials
 --devices = causes rsync to transfer character and block device files to
the remote system to recreate these devices. Unfortunately, if you do not
also include --super in the same command, this has no effect.
 --specials = causes rsync to transfer special files such as named sockets
and fifos.
-g is used to preserve “group” of the source file to the target.
-E is used to preserve “executable” of the source file to the target.
-v is used to increase the verbosity that is displayed. After we are sure we are 
backing up what we want, the “v” can be removed. I have left it in, because I 
run this process from a cron job, and prefer to “see” what it did. 
I leave it up to the individual to decide.
-z is used to compress the data it needs to “transfer” or copy, this makes the copy 
process take less time, because the data being transferred is smaller in size than its real size.
--delete-after = target files/folders that are no longer on the source are
deleted after transfer, not before. This “after” is used in case of problems
or a crash, and the “delete” is used to keep target files that no longer
exist on source system from hanging around and not cleaned up on our target
location.
--exclude = a pattern used to exclude files or folders with. In the
example, --exclude=“*~” would exclude ANY and ALL files or folders ending
with the “~” character from being backed up. Only one pattern can be supplied
with the --exclude option, so if more than one is needed, you need to supply
additional exclude lines on the command line.
</pre>
				<p>I tillæg findes disse parametre du kan anvende:</p>
<pre>
-c – which will add another level of checks into the source being compared to the target after the copy process, 
but it adds more time to the copy process, and rsync already does comparisons of the source and target files 
during its processing, so this option was not included for the simple fact it slows the complete process down, 
and is only a form of redundancy, which is not needed.
--super – which, as the man page describes it, the receiver, or target system,
will attempt super-user activities
--dry-run – which will show what would have been transferred. This is kind of
like using the -s option with apt-get install, or apt-get dist-upgrade.
</pre>
				<p>Resten af vores kommandoe er kilde-filen/mappen, og dernæst den mappe der er vores mål.</p>

				<h5>Kommando eksempler:</h5>
<pre>
rsync -agEvz --delete-after --exclude=”*~” morpheus:/home/tartie /media/hda7/SysBackups/morpheus/home
</pre>
				<p>Denne kommando kopierer all filerne og mapperne under /home/tartie på systemet der oversættes af navnet “morpheus”, og placere dem i /media/hda7/SysBackups/morpheus/home mappen – bevarende mappestrukturen fra tartie mappen og udad.</p>
<pre>
rsync -agEvz --delete-after --exclude=”*~” /home/tartie neo:/media/hda7/SysBackups/morpheus/home
</pre>
				<p>Denne kommando er den modsatte af den forrige, den vil “skubbe” /home/tartie mappen, dets indhold og undermapper over i systemet med navnet neo ind i den samme mappe – bemærk at et system opfattes som remote når det har “:” (kolon) foran navnet.</p>
<pre>
rsync -agEvz --delete-after --exclude=”*~” /home/cuddles /media/hda7/SysBackups/neo/home
</pre>
				<p>Denne kommando laver en lokal til lokal kopiering, bemærk fraværet af kolon i både kilde og mål destinationerne. Denne kommando kopierer lokalt /home/cuddles delen til det samme systems /media/hda7/SysBackups/neo/home destination.</p>

				<p>Lad os kigge på en multiple exclude rsync kommando:</p>
<pre>
rsync -agEvz --delete-after --exclude=”*~” --exclude=”*.c” --exclude=”*.o” "/*" /media/hda7/SysBackups/neo
</pre>
				<p>Ovenstående kommando vil sikkerhedskopiere ALT fra root på lokal systemet, og alle filerne og mapperne, placere dem i mål destinationen /media/hda7/SysBackups/neo – men nu vil kommandoen ekskluderer alle filer eller mapperr der ender med et “~”, eller et “.c”, eller et “.o”</p>

				<p class="highlight-2">Nedenunder er et eksempel på en rsync kommando der bør undgås; En kommando der beskriver en remote-til-remote kopiering:</p>
<pre>
rsync -agEvz --delete-after --exclude=”*~” morpheus:/home/tartie trinity:/home
</pre>
				<p class="highlight-2">Som tidligere nævnt er dette en begrænsning i rsync.</p>

				<p>En sidste kommando som eksempel. Lad os se på en remote til lokal rsync som den vil se ud hvis vi anvender ip-adresser istedet for hostnames.</p>

				<p>Den første kommando er med navne, den næste er den samme kommando, blot med ip-adressen istedet</p>
<pre>
rsync -agEvz --delete-after --exclude=”*~” morpheus:/home/tartie /media/hda7/SysBackups/morpheus/home
</pre>
<pre>
rsync -agEvz --delete-after --exclude=”*~” 192.168.1.16:/home/tartie /media/hda7/SysBackups/morpheus/home
</pre>
				<p>Som sagt skal du ikke bruge hostnames, men som du ser kan det øge dit overblik over hvad du foretager dig.</p>

				<p>Du bør nu være i stand til at designe dine egne simple kommandoer, enten ud fra eksemplerne vi her har givet, eller ved at sammensætte dine helt egne ud fra de anvendelige parametre.</p>
	</div>
			<div id="rev">Page last revised 30/08/2007 1200hrs UTC</div>


</div>
</body>
</html>
