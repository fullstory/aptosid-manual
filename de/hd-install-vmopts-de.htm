<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
   "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
	<title>aptosid Manuals - VM Installation Options</title>
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
	<style type="text/css" media="all">@import url("../lib/css-js/content.css");</style>
        <style type="text/css" media="all">@import url("../lib/css-js/menu.css");</style>
        <style type="text/css" media="print">@import url("../lib/css-js/print.css");</style>
        <link rel ="shortcut icon" href="../lib/favicon/manual.ico" />
        <script type="text/javascript" src="../lib/css-js/menu2.js"></script>
        <!--[if lt IE 8]>
        <link rel="stylesheet" type="text/css" href="../lib/css-js/ie_5-7_override.css">
        <![endif]-->
        <!--[if lt IE 7]>
        <link rel="stylesheet" type="text/css" href="../lib/css-js/ie_5-6_override.css">
        <![endif]-->
</head>
<body>
<!-- Last translation revision by hubi Sat, 09 Apr 2011 12:07:39 +0000 -->
<div id="menu"> <!-- menu starts here de lang maintained by hubi -->
<!--aptosid Operating System Manual menu-version-02.10.2011.03.14 REPO -->
<!-- menu last updated by bluewater 2011.03.14 0620 hrs UTC -->
	<div id="menu-header">
	      <a href="http://aptosid.com/"><img src="../lib/logos/manual-aptosid-logo.png" title="Zu aptosid.com (Forum und Wiki)" alt="aptosid.com logo" /></a>
	</div>
	<ul id="top-list">
		<li><a href="manual-search-de.htm#search-on"> <img src="../lib/logos/manual-search-22x22.png" title="Handbuch Suche" alt="Suche" />Suche online - offline</a> </li>
	</ul>
	<div id="flags-2">
			<a href="../flag-index.html"><img src="../lib/logos/aptosid-lang-100x64.png" title="Wählen Sie eine andere Sprache - Choose another language DE, EN" alt="lang-switch" /></a>
	</div>
	<ul>
<li onmouseover="showHide( 1 );" onmouseout="startTime();" ><a href="welcome-de.htm">aptosid-Handbuch</a>
			<ul class="sub-menu" id="sm1">
				<li><a href="welcome-de.htm#welcome-gen">aptosid-Handbuch &#8658;</a>
					<ul class="sub2-menu" id="sm1a">
					  <li><a href="credits-de.htm#cred-team">Das aptosid-Team</a></li>
					</ul>
					</li>
		<li><a href="welcome-de.htm#how-to">Über das Handbuch &#8658;</a>
					<ul class="sub2-menu" id="sm1b">
					  <li><a href="welcome-de.htm#how-to">Wie das Handbuch zu verwenden ist</a></li>
					  <li><a href="welcome-de.htm#table-contents">Inhalt</a></li>
					</ul>
					</li>
		<li><a href="help-de.htm#help-gen">Wo es Hilfe gibt &#8658;</a>
					<ul class="sub2-menu" id="sm1c">
					  <li><a href="help-de.htm#help-gen">Weitere Hilfe</a></li>
					  <li><a href="help-de.htm#paste">IRC und !paste</a></li>
					</ul>
					</li>
		<li><a href="wel-quickstart-de.htm#welcome-quick">aptosid Schnellstart</a></li>
		</ul>
		</li>
<li  onmouseover="showHide( 2 );" onmouseout="startTime();" ><a href="cd-dl-burning-de.htm">ISO: Inhalt, Veröffentlichungen, Download, Spiegelserver, Brennvorgang</a>
			   <ul class="sub-menu" id="sm2">
				<li><a href="cd-content-de.htm#cd-content">ISO: Inhalt und Systemanforderungen &#8658;</a>
					<ul class="sub2-menu" id="sm2a">
					  <li><a href="sys-admin-release-de.htm#rolling">Release Notes</a></li>
					</ul>
					</li>
		    <li><a href="cd-dl-burning-de.htm#download-aptosid">aptosid: Spiegelserver, Download, Brennvorgang &#8658;</a>
				<ul class="sub2-menu" id="sm2b">
					  <li><a href="cd-dl-burning-de.htm#md5">md5 Checksumme</a></li>
					  <li><a href="cd-dl-burning-de.htm#burn-nero">Brennen mit Windows</a></li>
					  <li><a href="cd-dl-burning-de.htm#burn-linux">Brennen mit Linux</a></li>
					  <li><a href="cd-no-gui-burn-de.htm#burning-no-gui">Das Skript burniso</a></li>
					  <li><a href="cd-no-gui-burn-de.htm#burn-no-gui-gen">Brennen ohne graphische Oberfläche</a>
					  </li><li><a href="cd-dl-burning-de.htm#download-aptosid">Spiegelserver zum Download</a></li>
					</ul>
					</li>
		      </ul>
		</li>
<li  onmouseover="showHide( 3 );" onmouseout="startTime();" ><a href="live-mode-de.htm">Live-Modus</a>
			<ul class="sub-menu" id="sm3">
				<li><a href="live-mode-de.htm#rootpw">Root-Passwort auf der Live-ISO</a></li>
				<li><a href="live-mode-de.htm#live-cd-installsoft">Software-Installation auf einer Live-ISO</a></li>
			</ul>
		</li>
<li  onmouseover="showHide( 4 );" onmouseout="startTime();" ><a href="term-konsole-de.htm">Terminal/Konsole</a>
			<ul class="sub-menu" id="sm4">
				<li><a href="term-konsole-de.htm#term-kon"> Terminal/Konsole &#8658;</a>
					<ul class="sub2-menu" id="sm4a">
					  <li><a href="term-konsole-de.htm#term-kon">Terminal/Konsole</a></li>
					  <li><a href="term-konsole-de.htm#colours">Farbige Prompts im Terminal</a></li>
					  <li><a href="term-konsole-de.htm#cli-help">Hilfe auf der Befehlszeile</a></li>
					  <li><a href="help-de.htm#init3-tools">Tools für den Textmodus (tty) - init 3</a></li>
					  <li><a href="term-konsole-de.htm#term-cmds">Linux-Befehlsliste am Terminal</a></li>
					</ul>
					</li>
			  <li><a href="term-konsole-de.htm#sux"> sux/sudo</a></li>
		    </ul>
		</li>
<li  onmouseover="showHide( 5 );" onmouseout="startTime();" ><a href="cheatcodes-de.htm">Bootoptionen (Cheatcodes)</a>
			<ul class="sub-menu" id="sm5">
				<li><a href="cheatcodes-de.htm#cheatcodes">Bootoptionen für die aptosid-Live-ISO</a></li>
				<li><a href="cheatcodes-de.htm#cheatcodes-linux">Bootoptionen für Linux</a></li>
				<li><a href="cheatcodes-vga-de.htm#vga">VGA-Codes</a></li>
			</ul>
		</li>
<li  onmouseover="showHide( 6 );" onmouseout="startTime();" ><a href="part-gparted-de.htm">Partitionieren der Festplatte</a>
		<ul class="sub-menu" id="sm6">
			<li><a href="part-gparted-de.htm#hd-ntfs3g">Schreiben auf NTFS Partitionen mit ntfs-3g</a></li>
			<li><a href="part-lvm-de.htm#part-lvm">Partitionierung mit LVM - Logical Volume Manager</a></li>
			<li><a href="part-gparted-de.htm#partition">Partitionieren mit GUI-Programmen &#8658;</a>
					<ul class="sub2-menu" id="sm6a">
					  <li><a href="part-gparted-de.htm#partition">Partitionieren mit GParted/KDE Partition Manager</a></li>
					  <li><a href="part-gparted-de.htm#ntfs">Größenänderung von NTFS-Partitionen mit GParted/KDE Partition Manager</a></li>
					</ul>
					</li>
		<li><a href="part-cfdisk-de.htm#partition">Partitionieren im Terminal &#8658;</a>
					 <ul class="sub2-menu" id="sm6b">
					    <li><a href="part-cfdisk-de.htm#partition">Partitionieren mit cfdisk</a></li>
					    <li><a href="part-cfdisk-de.htm#formating">Formatieren</a></li>
					</ul>
					</li>
		<li><a href="part-size-examp-de.htm#part-example">Grundlagen für die Partitionierung &#8658;</a>
					<ul class="sub2-menu" id="sm6c">
					  <li><a href="part-size-examp-de.htm#part-example">Partitionierungsbeispiele</a></li>
					  <li><a href="part-uuid-de.htm#uuid">UUID, Anpassung der fstab und Erstellung neuer Einhängepunkte</a></li>
					  <li><a href="part-cfdisk-de.htm#disknames">Kurzanleitung zur Benennung von Partitionen</a></li>
					</ul>
					</li>
		      </ul>
		</li>
<li  onmouseover="showHide( 7 );" onmouseout="startTime();" ><a href="hd-install-de.htm">Installationsoptionen - HD, USB, VM und Cryptroot</a>
		<ul class="sub-menu" id="sm7">
		  <li><a href="hd-install-de.htm#Inst-prep">Vorbereitung einer Installation &#8658;</a>
					<ul class="sub2-menu" id="sm7a">
					  <li><a href="hd-install-de.htm#Inst-prep">Installationsvorbereitung </a></li>
					  <li><a href="hd-install-de.htm#Installation">Installation auf einer Festplatte</a></li>
					  <li><a href="hd-install-de.htm#first-hd-boot">Der erste Start des Systems</a></li>
					</ul>
					</li>
		<li><a href="hd-install-opts-de.htm#fromiso">fromiso &#8658;</a>
					<ul class="sub2-menu" id="sm7b">
					  <li><a href="hd-install-opts-de.htm#fromiso">fromiso - Überblick</a></li>
					  <li><a href="hd-install-opts-de.htm#fromiso-grub-leg">fromiso mit grub-legacy</a></li>
					  <li><a href="hd-install-opts-de.htm#grub2-fromiso">fromiso mit Grub 2</a></li>
					  <li><a href="hd-install-opts-de.htm#fromiso-persist">fromiso und persist</a></li>
					</ul>
					</li>
		<li><a href="hd-install-opts-de.htm#usb-hd">Installation auf USB-Geräte &#8658;</a>
					<ul class="sub2-menu" id="sm7c">
					  <li><a href="hd-install-opts-de.htm#usb-hd">Installation auf eine USB-Festplatte (Besonderheiten von aptosid, aptosid-on-stick)</a></li>
					  <li><a href="hd-ins-opts-oos-de.htm#raw-usb">Installation auf USB-Stick/SSD von einem anderen System (Linux. MS Windows, Mac OS X)</a></li>
					</ul>
					</li>
		  <li><a href="hd-install-crypt-de.htm#install-crypt">Installation auf verschlüsselte Partitionen - cryptroot</a></li>
		  <li><a href="nbdboot-de.htm#nbd1">Booten über ein Netzwerk</a></li>
		<li><a href="hd-install-vmopts-de.htm#vmopts">Installation auf virtuellen Maschinen</a></li>
		</ul>
		</li>
<li  onmouseover="showHide( 8 );" onmouseout="startTime();" ><a href="gpu-de.htm">Grafikkarten, Monitore, Xorg &amp; Treiber</a>
	<ul class="sub-menu" id="sm8">
		<li><a href="hw-dev-mon-de.htm#mon-res">Bildschirmauflösung und Monitore  &#8658;</a>
					<ul class="sub2-menu" id="sm8a">
					  <li><a href="hw-dev-mon-de.htm#mon-res">Bildschirmauflösung und Monitore</a></li>
					  <li><a href="hw-dev-mon-de.htm#xrandr">Dual-Monitore und xrandr</a></li>
					  <li><a href="hw-dev-mon-de.htm#mon-binary">Dual-Monitore (mit proprietären Treibern)</a></li>
					</ul>
					</li>
		<li><a href="gpu-de.htm#foss-xorg">Grafiktreiber &#8658;</a>
					<ul class="sub2-menu" id="sm8b">
					  <li><a href="gpu-de.htm#ati-3d">AMD/ATI 3D-Treiber</a></li>
					  <li><a href="gpu-de.htm#intel">Intel 2D- und 3D-Treiber</a></li>
					  <li><a href="gpu-de.htm#nvidia">Nvidia 3D-Treiber</a></li>
					  <li><a href="gpu-de.htm#foss-xorg">Open Source Xorg-Treiber</a></li>
					</ul>
					</li>
			  <li><a href="nf-firm-de.htm#fw-detect">Ermittlung von nicht freier Firmware</a></li>
			  <li><a href="nf-firm-de.htm#non-free-firmware">non-free der Sources List anfügen</a></li>
		</ul>
		</li>
<li  onmouseover="showHide( 9 );" onmouseout="startTime();" ><a href="wm-kde-de.htm">Fenstermanager</a>
		    <ul class="sub-menu" id="sm9">
			  <li><a href="wm-kde-de.htm">Window Managers &#8658;</a>
					  <ul class="sub2-menu" id="sm9a">
					    <li><a href="wm-xfce-de.htm#xfce-notes">Xfce-Extras</a></li>
					    <li><a href="wm-kde-de.htm#install-add">Zusätzliche KDE-Programme</a></li>
					    <li><a href="wm-kde-de.htm#desk-freeze">Wenn der Desktop einfriert</a></li>
					    <li><a href="wm-kde-de.htm#kde-login">Kein Login in KDE</a></li>
					    <li><a href="wm-kde-de.htm#ch-th">Grafik-Themen ändern</a></li>
					</ul>
					</li>
		      <li><a href="wm-kde-de.htm#dm">Sitzungsmanager - *dm</a></li>
		</ul>
		</li>
<li  onmouseover="showHide( 11 );" onmouseout="startTime();" ><a href="inet-ceni-de.htm">Internetverbindung: WiFi, LAN, sonstige Netzwerke </a>
		    <ul class="sub-menu" id="sm11">
			<li><a href="lamp-apache-de.htm">LAMP mit aptosid &#8658;</a>
					<ul class="sub2-menu" id="sm11a">
					    <li><a href="lamp-apache-de.htm#serv-apache">LAMP mit aptosid</a></li>
					    <li><a href="lamp-apache-de.htm#serv-ftp">FTP-Klienten</a></li>
					    <li><a href="lamp-apache-de.htm#serv-sec">Sicherheitsprotokolle</a></li>
					    <li><a href="lamp-apache-de.htm#serv-ssl">SSL</a></li>
					    <li><a href="lamp-sql-de.htm#serv-mysql">MySQL</a></li>
					    <li><a href="lamp-ppp-de.htm#serv-php">PHP und Apache</a></li>
					    <li><a href="ntp-server-de.htm#ntp-server">Zeitserver</a></li>
					</ul>
					</li>
		<li><a href="tor-privoxy-de.htm#tor">Firewalls und Datenschutz &#8658;</a>
					<ul class="sub2-menu" id="sm11b">
					    <li><a href="tor-privoxy-de.htm#tor">Tor</a></li>
					    <li><a href="tor-privoxy-de.htm#privoxy">Privoxy</a></li>
					    <li><a href="inet-ceni-de.htm#firewalls">Firewalls</a></li>
					</ul>
					</li>
		<li><a href="ssh-de.htm#ssh-x">SSH und Samba &#8658;</a>
					<ul class="sub2-menu" id="sm11c">
						  <li><a href="samba-de.htm#setup">Samba-Server</a></li>
						  <li><a href="samba-de.htm#configure">Konfiguration von SAMBA (Windows)</a></li>
						  <li><a href="ssh-de.htm#ssh-fs">SSH (Ferneinbindung)</a></li>
						  <li><a href="ssh-de.htm#ssh-x">SSH mit grafischen Programmen</a></li>
						  <li><a href="ssh-de.htm#ssh-f">SSH via Konqueror</a></li>
						  <li><a href="ssh-de.htm#ssh-w">SSH: Weiterleitung von grafischen Programmen von Windows</a></li>
						  <li><a href="ssh-de.htm#ssh">SSH und Sicherheit</a></li>
					</ul>
					</li>
		<li><a href="inet-ceni-de.htm#netcardconfig">WIFI-Verbindungen &#8658;</a>
						<ul class="sub2-menu" id="sm11d">
						    <li><a href="inet-ceni-de.htm#netcardconfig">Ceni (Erstellung einer Internetverbindung)</a></li>
						    <li><a href="inet-wpagui-de.htm#wpa-roaming-gui">WiFi: WPA_GUI</a></li>
						    <li><a href="inet-setup-de.htm#net-set1">WiFi: Roaming-Konfiguration</a></li>
						    <li><a href="inet-wpa-de.htm#wpa">WiFi und wpasupplicant</a></li>
						    <li><a href="inet-ifplug-de.htm#hotswitch">Wechsel zwischen WiFi und Kabel</a></li>
					</ul>
					</li>
		<li><a href="inet-ceni-de.htm#netcardconfig">Kabelverbindungen &#8658;</a>
						<ul class="sub2-menu" id="sm11e">
						    <li><a href="inet-ceni-de.htm#dial-mod">56k-Modems</a></li>
						    <li><a href="inet-ceni-de.htm#netcardconfig">Ceni (Erstellung einer Internetverbindung</a></li>
					</ul>
					</li>
				</ul>
			    </li>
<li  onmouseover="showHide( 12 );" onmouseout="startTime();" ><a href="sys-admin-apt-de.htm">Paketmanager und Systemaktualisierung</a>
	<ul class="sub-menu" id="sm12">
		<li><a href="sys-admin-apt-de.htm#apt-cook">APT-Rezepte und APT-Quelllisten &#8658;</a>
					<ul class="sub2-menu" id="sm12a">
					    <li><a href="sys-admin-apt-de.htm#apt-cook">APT-Grundlagen, sources.list.d/*.list</a></li>
					    <li><a href="sys-admin-apt-de.htm#apt-install">Installation von Programmpaketen</a></li>
					    <li><a href="sys-admin-apt-de.htm#apt-delete">Löschen eines Programmpakets</a></li>
					    <li><a href="sys-admin-apt-de.htm#apt-downgrade">Halten eines Programmpakets oder Ältere Version installieren</a></li>
					    <li><a href="sys-admin-apt-de.htm#apt-cache">Programmpaket mit apt-cache suchen</a></li>
					    <li><a href="sys-admin-apt-de.htm#gui-pacsea">Suchen eines Programmpakets mit grafischen Hilfsprogrammen</a></li>
					</ul>
				</li>
		<li><a href="sys-admin-kern-upg-de.htm#kern-upgrade">Kernelaktualisierung &#8658;</a>
					<ul class="sub2-menu" id="sm12b">
					    <li><a href="sys-admin-kern-upg-de.htm#kern-remove">Entfernen eines Kernels</a></li>
					    <li><a href="sys-admin-kern-upg-de.htm#kern-upgrade">Aktualisierung eines</a></li>
					    <li><a href="sys-admin-kern-upg-de.htm#dmakms">Automatische Installation von Kernelmodulen mit dmakms</a></li>
					</ul>
				</li>
		<li><a href="sys-admin-apt-de.htm#apt-upgrade">Aktualisierung eines installierten Systems &#8658;</a>
					<ul class="sub2-menu" id="sm12c">
					    <li><a href="sys-admin-upgrade-de.htm#live-cd-upgrade">Aktualisierung mittels einer Live-ISO</a></li>
					    <li><a href="sys-admin-apt-locarmirr-de.htm#approx">Aktualisierung mehrerer PCs via LAN</a></li>
					    <li><a href="sys-admin-apt-de.htm#apt-upgrade">Aktualisierung eines Systems: Grundlagen</a></li>
					    <li><a href="sys-admin-apt-de.htm#du-st">Aktualsierung eines Systems: die einzelnen Schritte</a></li>
					</ul>
				  </li>
			    </ul>
		</li>
<li  onmouseover="showHide( 13 );" onmouseout="startTime();" ><a href="sys-admin-gen-de.htm">Systemadministration</a>
	<ul class="sub-menu" id="sm13">
		<li><a href="bios-freedos-de.htm#bois-prep">Aktualisierung des BIOS mittels FreeDOS</a></li>
		<li><a href="vir-rkits-de.htm#virus-rkits">Virus- und Rootkit-Scanner</a></li>
		<li><a href="hd-install-de.htm#adduser">Hinzufügen von Benutzern, Passwortverwaltung &#8658;</a>
					<ul class="sub2-menu" id="sm13a">
					    <li><a href="hd-install-de.htm#adduser">Einen neuen Benutzer hinzufügen</a></li>
					    <li><a href="sys-admin-gen-de.htm#pw-lost">Vergessene Root-Passwörter - Erstellung neuer Passwörter</a></li>
					</ul>
					</li>
		<li><a href="sys-admin-gen-de.htm#start-services">Dienste und Runlevel &#8658;</a>
					<ul class="sub2-menu" id="sm13b">
					    <li><a href="sys-admin-gen-de.htm#start-services">Dienste aktivieren/deaktivieren</a></li>
					    <li><a href="sys-admin-gen-de.htm#init">Runlevel-Einstellungen von aptosid</a></li>
					</ul>
					</li>
		<li><a href="sys-admin-rsync-de.htm#rsync">Sicherung eines Systems &#8658;</a>
					  <ul class="sub2-menu" id="sm13c">
					    <li><a href="sys-admin-rdiff-de.htm#rdiff">Sicherung mit rdiff</a></li>
					    <li><a href="sys-admin-rsync-de.htm#rsync">Sicherung mit rsync</a></li>
					    <li><a href="home-de.htm#home-bu">Verschieben von /home</a></li>
					</ul>
					</li>
		<li><a href="sys-admin-gen-de.htm#fonts">CUPS, Schriften und Audio &#8658;</a>
					  <ul class="sub2-menu" id="sm13d">
					     <li><a href="sys-admin-gen-de.htm#fonts">Schriften</a></li>
					     <li><a href="sys-admin-gen-de.htm#cups">CUPS - Drucken mit aptosid</a></li>
					     <li><a href="sys-admin-gen-de.htm#sound">Audio-Mischpulte</a></li>
					</ul>
					</li>
		<li><a href="sys-admin-grub2-de.htm#grub2">Grub2 &#8658;</a>
					  <ul class="sub2-menu" id="sm13f">
					    <li><a href="sys-admin-grub2-de.htm#chroot">Grub2 - Wiederherstellung von Grub durch chroot</a></li>
					    <li><a href="sys-admin-grub2-de.htm#mbr-over-grub2">Grub2 - Falls der MBR-Bootsektor überschrieben wurde</a></li>
					    <li><a href="sys-admin-grub2-de.htm#multi-os">Grub2 - Dual- und Multibooting</a></li>
					    <li><a href="sys-admin-grub2-de.htm#grub1-grub2">Grub2 - Aktualisierung von Grub1</a></li>
					    <li><a href="sys-admin-grub2-de.htm#grub2">Grub2 - Überblick</a></li>
					</ul>
					</li>
			</ul>
		</li>
	</ul>
<!-- menu ends here --> </div>
<div id="main-page">
		<div class="divider" id="vmopts">
				<h2 id="top-header">Optionen für virtuelle Maschinen</h2>

						<ul>
							<li><a href="hd-install-vmopts-de.htm#kvm">KVM für Intel VT oder AMD-V</a></li>
							<li><a href="hd-install-vmopts-de.htm#vbox">Virtualbox</a></li>
							<li><a href="hd-install-vmopts-de.htm#qemu">QEMU</a></li>
							<li><a href="hd-install-vmopts-de.htm#oos">Installation anderer Distributionen auf ein Image</a></li>
						</ul>

							<p><span class="highlight-3">Die folgenden Beispiele verwenden aptosid. Ersetzen Sie aptosid gegebenenfalls mit der Distribution Ihrer Wahl.</span></p>
	</div>
	<div class="divider" id="oos">
			    <h2>Installation anderer Distributionen auf ein VM-Image</h2>
							<p>Anmerkung: Falls Sie auf ein Image einer virtuellen Maschine installieren wollen, benötigen die meisten Linuxdistributionen eine Zuordnung von nur 12GB. Für MS Windows in einer virtuellen Maschine werden ungefähr 30GB oder mehr benötigt. Letztlich hängt die Zuordnung der Größe jedoch von Ihren Anforderungen ab.</p>

							<p>Die einem Image zugeordnete Größe verbraucht keinen Speicherplatz auf der Festplatte, solange keine Daten im Image gespeichert sind. Auch dann wird der Speicherplatz dynamisch verwaltet und nur soviel verwendet, wie Daten im Image gespeichert sind. Dies wird durch qcow2 ermöglicht.</p>

		      </div>
		      <div class="divider" id="kvm">
				<h2>Aktivierung einer virtuellen Maschine mit KVM</h2>
							<p>KVM ist eine vollständige Virtualisierungslösung für Linux auf einer x86-Hardware mit Virtualisierungserweiterungen (Intel VT oder AMD-V).</p>

				      <h3>Voraussetzungen</h3>

							<p>Um zu ermitteln, ob die Hardware KVM unterstützt, muss festgestellt werden, ob diese im BIOS aktiviert ist (in manchen Fällen kann es auf einem Intel-VT- oder AMD-V-System nicht ersichtlich sein, wo die Option zur Aktivierung ist, in diesem Falle geht man davon aus, dass KVM aktiv ist). In der Konsole prüft man mit diesem Befehl:</p>
<pre>
cat /proc/cpuinfo | egrep --color=always 'vmx|svm'
</pre>
							<p>Falls <span class="highlight-3">svm</span> oder <span class="highlight-3">vmx</span> im Feld der CPU-Flags erscheint, unterstützt das System KVM. (Falls nicht, sollten die Einstellungen im BIOS nochmal überprüft werden, oder man sucht im Internet nach den Einstellungsoptionen des jeweiligen BIOS).</p>

							<p>Falls das BIOS KVM nicht unterstützt, empfehlen sich <a href="hd-install-vmopts-de.htm#vbox">Virtualbox</a>
							 oder <a href="hd-install-vmopts-de.htm#qemu">QEMU</a></p>

							<p>Um KVM zu installieren und starten, muss sichergegangen werden, dass keine Virtalbox-Module geladen sind (--purge ist die beste Option). Abhängig vom Chipset werden folgende Befehle durchgeführt:</p>

							<p>Für <span class="highlight-3">vmx</span>:</p>
<pre>
apt-get install qemu-kvm qemu-utils
modprobe kvm-intel
</pre>
							<p>Für <span class="highlight-3">svm</span>:</p>
<pre>
apt-get install qemu-kvm qemu-utils
modprobe kvm-amd
</pre>
							 <p>Eine andere Option ist ein Neustart, bei dem die Initskripte von qemu bzw. kvm die Module laden.</p>

					  <h4>KVM zum Booten einer aptosid-*.iso</h4>

							<p><span class="highlight-2">Als User:</span></p>
<pre>
$ kvm -net nic,model=virtio -net user -soundhw ac97 -m 512 -monitor stdio -cdrom &lt;aptosid.iso&gt;
</pre>

				<h5>Installieren einer aptosid-*.iso auf ein KVM-Image</h5>
							<p>Zuerst muss ein Festplatten-Image erstellt werden (dieses Image ist sehr klein und wächst nach Bedarf nach qcow2-Kompressionsverhältnissen):</p>
<pre>
$ qemu-img create -f qcow2 aptosid-2010-*-.img 12G
</pre>

							<p>Die aptosid-*.iso wird mit folgenden Parametern gebootet, um KVM die Möglichkeit zur Erkennung eines QEMU-Festplattenimages zu geben:</p>
<pre>
$ kvm -net nic,model=virtio -net user -soundhw ac97 -m 512 -monitor stdio -cdrom &lt;/path/to/aptosid.iso&gt; -boot d &lt;/path/to/aptosid-20xx-*-.img&gt;
</pre>

							<p>Sobald die CD-ROM gebootet hat, klickt man auf das aptosid-Installer-Ikon oder nutzt den Menü-Eintrag, um den Installer zu starten. Nach einem Klick auf den Partitionierungs-Reiter sollte auf der linken Seite ein Feld zu sehen sein, das die virtuelle Festplatte vorhanden und bereit für das Partitionieren und Formatieren ist. Die Benennung ist vermutlich <span class="highlight-3"> /dev/sda</span>. Darunter sind die Optionen zur Erstellung von Partitionen, es kann geparted oder partitionmanager gewählt werden. Auch wenn der KDE partionmanager eine andere Benutzerführung als gparted besitzt, ist die Benutzerführung selbsterklärend. Insofern können folgende Beispiele, die anhand von gparted vorgestellt werden, ohne Schwierigkeiten im KDE partitionmanager angewendet werden.</p>

	<div class="screenshot"><img src="../lib/images-common/images-vm/kvm-gparted02.png" title="gparted kvm hard disk naming" alt="gparted kvm hard disk naming" /></div>
	<div class="spacer02"></div>

							<p>Im Gparted-Menü kann mit <span class="highlight-3">View>Device Information</span> überprüft werden, ob die Abbilddatei vorhanden ist. Sie sollte mit <span class="highlight-3">ATA QEMU Harddisk</span> bezeichnet sein und die Benennung ist vermutlich <span class="highlight-3"> /dev/sda</span>. Letztere ist von zentraler Bedeutung, wenn man zurück zum Installer geht und auswählt, wohin Grub installiert werden soll. Grub muss in unserem Beispiel nach <span class="highlight-3">/dev/sda</span> installiert werden.</p>

							<p>Als nächstes wird im Menüpunkt <span class="highlight-3">Partition</span> <span class="highlight-3">Device>Create Partiton Table</span> ausgewählt und die Partitionierungstabelle gewählt.</p>

							<p>Die Partitionierungstabelle wird mit ext4 formatiert und auch 2GB Swap inkludieren. Die Formatierung benötigt etwas Zeit.</p>

							<p>Nach Beenden der Formatierung klickt man auf OK und wird zum Installer zurückgebracht. Dort setzt man wie bei einer Standardinstallation fort (diese benötigt etwas Zeit). <span class="highlight-2">Anmerkung: in userem Fall wird Grub nach /dev/sda installiert</span>.</p>

							<p>Eine aptosid-*-VM ist nun bereit, genutzt zu werden:</p>


<pre>
$ kvm -net nic,model=virtio -net user -soundhw ac97 -m 512 -monitor stdio -drive if=virtio,boot=on,file=&lt;absolute/path/to/aptosid-20xx-*.img&gt;
</pre>

							<p>Falls der Gast virtio nicht unterstützt oder kein absoluter Pfad angegeben wird, benutzt man disen Befehl:</p>
<pre>
$ kvm -net nic, -net user -soundhw ac97 -m 512 -monitor stdio -hda &lt;/path/to/aptosid-20xx-*.img&gt;
</pre>

							<p><span class="highlight-2">Eine wichtige Anmerkung bezüglich der Benennung von KVM-Partitionen:</span> Wenn ein KVM-Abbild installiert wird, ändert sich die Benennung einer Partition von <span class="highlight-3">sda</span> nach <span class="highlight-3">vda</span>. Falls das KVM-Abbild nicht bootet und stattdessen die busybox erscheint, versucht man am besten diesen Befehl:</p>
<pre>
kvm -m 512 -monitor stdio /media/diskxpartx/path/aptosid-*.img
</pre>
							<p>Wenn nun das Grub-Menü erscheint, tippt man <span class="highlight-2"> e </span> und ändert <span class="highlight-3">sda</span> nach <span class="highlight-3">vda</span> in der Kernel-Bootzeile. Nach Start des Systems kann diese Option permanent gesichert werden, indem folgende Zeile in <span class="highlight-3"> /etc/default/grub </span> mit der korrekten Syntax angepasst wird:</p>

<pre>
GRUB_CMD_LINE_LINUX=""
</pre>
							<p>Beispiele:</p>
<pre>
GRUB_CMD_LINE_LINUX="root=UUID=1234-5678-1234-13456 ro quiet"
</pre>
<pre>
GRUB_CMD_LINE_LINUX="root=/dev/vda3 ro quiet"
</pre>

							<p>UUIDs sind eine bessere Option, wenn traditionelle Partitionierungen verwendet werden.</p>

							<p>Im Anschluss wird grub.cfg mit diesem Befehl aktualisiert:</p>

<pre>
update-grub
</pre>

							<p>Das KVM-Abbild wird mit den angepassten Parametern gestartet.</p>

							<p>Weitere Informationen: <a href="http://www.linux-kvm.org/page/Main_Page">KVM-Dokumentation</a> (Englisch).</p>

				<h5>Verwaltung einer KVMInstallation</h5>
<pre>
apt-get install aqemu
</pre>
							<p>Beim Benutzen des (englischsprachigen) AQEMU wird im Reiter "General" bei "Emulator Type" im Drop-Down-Menü "KVM mode" gewählt. Für AQEMU gibt es praktisch keine Dokumentation, daher muss man sich selbst in der selbsterklärenden Benutzerführung zurechtfinden. Ein guter Startpunkt dabei sind der Menüpunkt "VM" und der Reiter "General".</p>

	</div>
	<div class="divider" id="vbox">
		<h2>Booten und Installierung in eine virtuelle Maschine mit VirtualBox</h2>
							<p>Die Schritte:</p>
						<ul>
 							<li>1. Erstellung eines Festplattenabbilds für VirtualBox</li>
 							<li>2. Booten der ISO mit VirtualBox</li>
 							<li>3. Installation auf dem Abbild</li>
						</ul>

				<h4>Voraussetzungen</h4>
							<p><span class="highlight-3">1 GB RAM ist empfohlen</span>, idealerweise 512 MB für das Gastsystem und 512 MB für das Hostsystem. Bei weniger RAM ist mit Verlust an Performanz zu rechnen.</p>

							<p><span class="highlight-3">Freier Festplattenplatz:</span> VirtualBox selbst ist sehr schlank (eine typische Installation benötigt etwa 30 MB Speicherplatz), benötigt aber sehr große Dateien auf der Festplatte, auf der das Gastsystem gespeichert ist. Für eine Installation von MS Windows XP (TM) wird eine Datei benötigt, die leicht auf etliche Gigabyte anwachsen kann. Um aptosid in VirtualBox verwenden zu können, sollte man ein fünf Gigabyte großes Image plus Platz für eine swap-Partition bereitstellen.</p>

				<h3>Installation:</h3>

<pre>
apt-get update
apt-get install virtualbox-ose-qt virtualbox-ose-source dmakms module-assistant
</pre>
							<p>Vorbereitung des Moduls:</p>
<pre>
m-a prepare
m-a a-i virtualbox-ose-source
</pre>
							<p>Im Anschluss wird die dmaks-Unterstützung (Dynamic Module-Assistant Kernel Module) für Virtualbox aktiviert, sodass nach der nächsten Kernelaktualisierung das Virtualbox-Modul automatisch und ohne Benutzereingriff vorbereitet wird. Dazu muss <span class="highlight-3">virtualbox-ose-source</span> in die Konfigurationsdatei <span class="highlight-3">/etc/default/dmakms</span> eingefügt werden:</p>
<pre>
mcedit /etc/default/dmakms
virtualbox-ose-source
</pre>

							<p>Der Computer muss nun neu gestartet werden.</p>

							<p><a href="sys-admin-kern-upg-de.htm#dmakms">Grundlegende Informationen zu  dmakms</a></p>

					<h3>Installation von aptosid auf der virtuellen Maschine:</h3>
							<p>Am besten werden die Assistenten von VirtualBox benutzt, um eine virtuelle Maschine für aptosid zu erzeugen. Danach wird den Anweisungen für eine reguläre Installation von aptosid gefolgt.</p>

							<p><a href="http://www.virtualbox.org/">VirtualBox hat auf seiner Homepage eine umfassende englischsprachige Bedienungsanleitung, die man als PDF herunterladen kann.</a> </p>

	</div>
	<div class="divider" id="qemu">
		<h2>>Booting and installing a QEMU Virtual Machine</h2>

		<ul>
 			<li>1. Erstellen eines Festplattenabbilds (iso) für QEMU</li>
 			<li>2. Booten der iso mit QEMU</li>
 			<li>3. Installation auf dem Image</li>

		</ul>

							<p>Ein grafisches Hilfsprogramm auf QT-Basis ist zur Unterstützung einer QEMU-Konfiguration installierbar:</p>
<pre>
apt-get install qtemu
</pre>

 				<h4>Erstellen eines Festplattenimages (iso)</h4>

							<p>Um  qemu laufen lassen zu können, braucht man ein Festplattenabbild. Das ist eine Datei, welche den Inhalt einer Partition oder Festplatte trägt.</p>

				<p>Man verwendet den Befehl:</p>
<pre>
qemu-img create -f qcow aptosid.qcow 3G
</pre>
							<p>Damit erstellt man eine Abbilddatei mit dem Namen "aptosid.qcow". Der Parameter "3G" spezifiziert die Größe der Platte, in diesem Fall 3 GB. Das Suffix M wird für Megabyte verwendet (zum Beispiel "256M"). Man muss sich über die Größe jedoch keine zu großen Gedanken machen - das Format qcow komprimiert das Abbild, sodass der unbenutzte Platz sich nicht auf die Größe der Datei aufaddiert.</p>


			<h4>Installation des Betriebssystems</h4>

							<p>Jetzt wird zum ersten Mal der Emulator gestartet. Eines muss dabei beachtet werden: wenn man innerhalb des qemu-Fensters mit der Maus klickt, wird der Mauszeiger "gefangen". Um ihn wieder frei zu geben, drückt man Ctrl+Alt.</p>

							<p>Falls man eine bootfähige Diskette benötigt, wird Qemu so gestartet:</p>
<pre>
qemu -floppy aptosid.iso -net nic -net user -m 512 -boot d aptosid.qcow
</pre>
							<p>Wenn die CD-ROM bootfähig ist, wird Qemu so gestartet:</p>
<pre>
qemu -cdrom aptosid.iso -net nic -net user -m 512 -boot d aptosid.qcow
</pre>
							<p>Nun kann aptosid wie auf eine reale Festplatte installiert werden.</p>


			<h4>Verwendung des Systems</h4>

							<p>Um das System zu starten, gibt man ein:</p>
<pre>
qemu [hd_image]
</pre>
							<p>Eine gute Idee ist die Verwendung von sog. "überlagerten Abbildern" (overlay images). Auf diese Weise muss ein Abbild nur einmal angelegt werden und Qemu speichert Änderungen außerhalb dieses Abbilds. Das System ist so stabiler, da es sehr einfach ist, auf einen früheren Installationsstand zurückzugreifen.</p>

							<p>Um ein "überlagertes Abbild" (overlay image) zu erstellen, gibt man ein:</p>
<pre>
qemu-img create -b [base_image] -f qcow [overlay_image]
</pre>
							<p>Das Festplattenabbild ersetzt nun das Basis-Abbild (base_image), in unserem Fall aptosid.qcow. Danach kann qemu gestartet werden:</p>
<pre>
qemu [overlay_image]
</pre>
							<p>Das originale Abbild bleibt unberührt. Es muss aber beachtet werden, dass das Basis-Abbild weder umbenannt noch verschoben werden darf, da das Overlay den genauen, absoluten Pfad des Basis-Abbilds benötigt.</p>


			<h4>Wie man jede echte Partition als primäre Partition eines Festplattenabbilds benutzen kann</h4>

							<p>Manchmal möchte man eine Systempartition aus qemu heraus benutzen (man möchte zum Beispiel sowohl die echte Installation wie auch die virtuelle qemu-Installation mit einer gegebenen Partition als root starten). Dies erfolgt durch ein Software-RAID im Linearmodus (dazu braucht man den linear.ko Kernel-Treiber) und ein Loopback-Gerät: der Trick dabei ist, dynamisch einen Master Boot Record (MBR) an den Beginn der realen Partition zu stellen, welche in das Raw-Disk-Image von qemu eingebettet werden soll.</p>

							 <p>Angenommen, man hat eine einfache, nicht eingebundene Partition /dev/sdaN mit einem Dateisystem, welche Teil eines qemu-Festplattenabbilds werden soll. Als erstes erstellt man eine kleine Datei, welche den MBR beinhalten soll:</p>
<pre>
dd if=/dev/zero of=/path/to/mbr count=32
</pre>
							<p>Hiermit wird eine 16 KB (32 * 512 bytes) große Datei erstellt. Es ist wichtig, diese Datei nicht zu klein zu veranschlagen (auch wenn der MBR nur einen einzelnen 512 Bytes großen Block benötigt), da die Chunk-Größe des Software-RAID-Geräts umso kleiner sein muss, je kleiner jene Datei ist, was wiederum einen Einfluss auf die Leistung haben wird. Danach kann ein Loopback-Gerät zum MBR-File aufgesetzt werden:</p>
<pre>
losetup -f /path/to/mbr
</pre>
							<p>Gehen wir davon aus, dass das Gerät /dev/loop0 heißt, da noch kein weiteres Loopback existiert. Nächster Schritt ist das Erstellen eines zusammengeführten Abbilds von MBR + /dev/sdaN unter Benutzung eines Software-RAIDS:</p>
<pre>
 modprobe linear
 mdadm --build --verbose /dev/md0 --chunk=16 --level=linear --raid-devices=2 /dev/loop0 /dev/sdaN
</pre>
							<p>Das daraus resultierende /dev/md0 wird als qemu-Raw-Diskimage benutzt (das Setzen der Berechtigungen nicht vergessen, damit der Emulator darauf zugreifen kann). Der letzte (und etwas heikle) Schritt ist die Erstellung der Festplattenkonfiguration (Plattengeometrie und Partitionstabellen), sodass der Startpunkt der primären Partition im MBR mit jenem von /dev/sdaN innerhalb von /dev/md0 übereinstimmt (ein Offset von genau 16 * 512 = 16384 Bytes in diesem Beispiel). Dazu wird fdisk auf der Host-Maschine benutzt, nicht auf dem Emulator: in den Grundeinstellungen resultiert die Raw-Disk-Erkennung von qemu oft in Offsets, die nicht auf Kilobyte gerundet werden können (wie 31.5 KB im vorangegangenen Abschnitt), was wiederum vom Code des Software-RAIDs nicht verstanden werden kann. Daher gibt man auf der Host-Maschine ein:</p>
<pre>
 fdisk /dev/md0
</pre>
							<p>Dort erstellt man eine primäre Partition entsprechend /dev/sdaN und spielt mit dem Befehl 's' (Sector) im Menü 'x' (Expert), bis der erste Zylinder (wo die erste Partition beginnt) genau zur Größe des MBR passt. Schließlich wird mit 'w' (write) das Ergebnis in den File geschrieben: damit ist die Arbeit abgeschlossen. Jetzt ist eine Partition vorhanden, welche sowohl direkt von der Host-Maschine eingebunden werden kann als auch vom qemu-Festplattenimage:</p>
<pre>
 qemu -hdc /dev/md0 [...]
</pre>
							<p>Natürlich kann gefahrlos jeder Bootloader auf das Festplattenabbild mit qemu geschrieben werden, vorausgesetzt, die originale Partition /boot/sdaN enthält die dafür notwendigen Anwendungen.</p>



			<h4>Das QEMU Beschleunigungs-Modul (Accelerator Module)</h4>

							<p>Die Entwickler von qemu haben ein optionales Kernelmodul erstellt, um qemu beinahe auf natives Niveau beschleunigen zu können. Dieses Modul sollte mit dieser Option geladen werden:</p>
<pre>
major=0
</pre>
							<p>Damit wird die Einrichtung des benötigten Geräts /dev/kqemu automatisiert. Weitere Befehle sind:</p>
<pre>
echo "options kqemu major=0" >> /etc/modules
</pre>
							<p>Dieser erweitert die Datei /etc/modules, um sicherzustellen, dass die Moduloption bei jedem Laden des Moduls aktiviert wird.</p>

<pre>
qemu [...] -kernel-kqemu
</pre>
							<p>Damit wird die volle Virtualisierung ermöglicht und die Geschwindigkeit beträchtlich erhöht.</p>

			<h4>Aktivierung von QEMU:</h4>
<pre>
qemu -cdrom /tmp/pkg/aptosid-debug.iso -net nic -net user -m 512
</pre>
		<p><a href="http://www.nongnu.org/qemu/user-doc.html">Die offizielle englischsprachige Dokumentation des QEMU-Projekts </a> </p>
		<p><a href="http://wiki.archlinux.org/index.php/Qemu">Einige Abschnitte für QEMU wurden für das aptosid-Handbuch  unter der GNU Free Documentation License 1.2 verwendet und für das aptosid-Handbuch angepasst. Die Übersetzung ins Deutsche erfolgte durch das aptosid-Team.</a> </p>

	</div>
	<div id="rev">Page last revised 08/04/2011 1205 UTC</div>

</div>
</body>
</html>
