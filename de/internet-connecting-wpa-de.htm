<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
   "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
	<title>sidux Manuals - Internet Connecting-de</title>
	<meta http-equiv="content-type" content="text/html; charset=utf-8" />
	<style type="text/css" media="all">@import url("../lib/css-js/content.css");</style>
	<style type="text/css" media="all">@import url("../lib/css-js/menu.css");</style>
	<style type="text/css" media="print">@import url("../lib/css-js/print.css");</style>
	<link rel ="shortcut icon" href="../lib/favicon/manual.ico" />
	<script type="text/javascript" src="../lib/css-js/menu2.js"></script>
</head>
<body>
<div id="menu"> <!-- menu starts here -->
<!--Welcome to the Official sidux-manual live-cd version tartaros 01.08-2007-05-25 de lang maintainer hubi-->
<!-- menu last updated by bluewater 25/05/2007 1100rs AEST 25/05/2007 0100hrs UTC -->
<img src="../lib/logos/sidux-logo.png" alt="logo" id="menu-header" />
	<ul id="top-list">
		<li><a href="http://sidux.com/">Zur&#252;ck zum sidux Hauptmen&#252;</a></li>
	</ul>
	<div id="flags-2">
			<a href="../flag-index.html"><img src="../lib/logos/sidux-lang-50.png" title="W&#228;hlen Sie eine andere Sprache" alt="lang-switch" /></a>
	</div>
	<ul>
		<li  onmouseover="showHide( 1 );" onmouseout="startTime();" ><a href="welcome-de.htm">Willkommen bei sidux</a>
			<ul class="sub-menu" id="sm1">
				<li><a href="welcome-de.htm#welcome-gen">Offizielles Handbuch</a></li>
				<li><a href="welcome-de.htm#how-to">Tipps zum Handbuch</a></li>
				<li><a href="welcome-de.htm#table-contents">Index</a></li>
				<li><a href="help-de.htm#help-gen">Wo es Hilfe gibt</a></li>
				<li><a href="credits-de.htm#cred-team">Danksagung</a></li>
			</ul>
		</li>
		<li  onmouseover="showHide( 2 );" onmouseout="startTime();" ><a href="cd-content-de.htm">CD-Inhalt</a>
			<ul class="sub-menu" id="sm2">
				<li><a href="cd-content-de.htm#cd-content">CD-Inhalt</a></li>
			</ul>
		</li>
		<li  onmouseover="showHide( 6 );" onmouseout="startTime();" ><a href="cd-dl-burning-de.htm">CD Herunterladen &amp; Brennen</a>
			<ul class="sub-menu" id="sm6">
				<li><a href="cd-dl-burning-de.htm#download-sidux">CD Herunterladen &amp; Brennen</a></li>
				<li><a href="cd-dl-burning-de.htm#md5">md5 Pr&#252;fsummen</a></li>
				<li><a href="cd-dl-burning-de.htm#burn-nero">Brennen in Windows</a></li>
				<li><a href="cd-dl-burning-de.htm#burn-linux">Brennen in Linux</a></li>
				<li><a href="cd-dl-burning-de.htm#xdelta">xdelta-Patches</a></li>
				<li><a href="cd-no-gui-burn-de.htm#burning-no-gui">Brennen ohne GUI</a></li>
			</ul>
		</li>
		<li  onmouseover="showHide( 4 );" onmouseout="startTime();" ><a href="live-mode-de.htm">Live-CD-Modus</a>
			<ul class="sub-menu" id="sm4">
				<li><a href="live-mode-de.htm#rootpw">Das Rootpasswort der sidux-Live-CD</a></li>
				<li><a href="live-mode-de.htm#live-cd-installsoft">Installieren von Software w&#228;hrend einer Live-CD Sitzung</a></li>
				<li><a href="live-mode-de.htm#ntfs-3g">Schreiben auf NTFS-Partitionen mit ntfs-3g</a></li>
			</ul>
		</li>
		<li  onmouseover="showHide( 9 );" onmouseout="startTime();" ><a href="term-konsole-de.htm">Das Terminal / Die Konsole</a>
			<ul class="sub-menu" id="sm9">
				<li><a href="term-konsole-de.htm#term-kon"> Terminal/Konsole</a></li>
				<li><a href="term-konsole-de.htm#cli-help">Kommadozeilenhilfe</a></li>
				<li><a href="term-konsole-de.htm#shell-scripts">Installation von Shellskripten</a></li>
			</ul>
		</li>
		<li  onmouseover="showHide( 7 );" onmouseout="startTime();" ><a href="cheatcodes-de.htm">Boot-Cheatcodes</a>
			<ul class="sub-menu" id="sm7">
				<li><a href="cheatcodes-de.htm#cheatcodes">Cheatcodes</a></li>
				<li><a href="cheatcodes-vga-de.htm#vga">VGA-Codes</a></li>
			</ul>
		</li>
		<li  onmouseover="showHide( 5 );" onmouseout="startTime();" ><a href="part-gparted-de.htm">Partitionieren der Festplatte</a>
			<ul class="sub-menu" id="sm5">
				<li><a href="part-gparted-de.htm#partition">mit GParted</a></li>
				<li><a href="part-gparted-de.htm#ntfs">NTFS-Partitionen mit GParted &#228;ndern</a></li>
				<li><a href="part-uuid-de.htm#uuid">UUID, Partitionsbezeichnung und fstab</a></li>
				<li><a href="part-cfdisk-de.htm#partition">mit cfdisk</a></li>
				<li><a href="part-cfdisk-de.htm#formating">Formatieren mit cfdisk</a></li>
				<li><a href="part-size-examp-de.htm#part-example">Partitionsgr&#246;&#223;en: Beispiele</a></li>
			</ul>
		</li>
		<li  onmouseover="showHide( 8 );" onmouseout="startTime();" ><a href="hd-install-de.htm">Installationsoptionen</a>
			<ul class="sub-menu" id="sm8">
				<li><a href="hd-install-de.htm#Inst-prep">Vorbereiten der Installation</a></li>
				<li><a href="hd-install-de.htm#Installation">Installation auf die Festplatte</a></li>
				<li><a href="hd-install-de.htm#first-hd-boot">Erstes Booten von der Festplatte</a></li>
				<li><a href="hd-install-opts-de.htm#fromiso">Booten 'fromiso'</a></li>
				<li><a href="hd-install-opts-de.htm#usb-hd">Installation auf eine USB-Festplatte</a></li>
				<li><a href="hd-install-opts-de.htm#qemu">Installation &#252;ber qemu</a></li>
			</ul>
		</li>
		<li  onmouseover="showHide( 10 );" onmouseout="startTime();" ><a href="hw-dev-hw-dri-de.htm">Graphikkarten, Hardware, Ger&#228;te und Treiber</a>
			<ul class="sub-menu" id="sm10">
				<li><a href="hw-dev-hw-dri-de.htm#hd-ntfs3g">Schreiben auf NTFS-Partitionen mit ntfs-3g</a></li>
				<li><a href="hw-dev-hw-dri-de.htm#mon-res">Bildschirmaufl&#246;sung und Monitoreinstellungen</a></li>
				<li><a href="hw-dev-hw-dri-de.htm#nvidia-3d">nVidia 3D</a></li>
				<li><a href="hw-dev-hw-dri-de.htm#ati-3d">ATI 3D</a></li>
				<li><a href="hw-dev-hw-dri-de.htm#native-nv">Natives nv</a></li>
				<li><a href="hw-dev-hw-dri-de.htm#native-ati">Natives ati</a></li>
				<li><a href="hw-dev-hw-dri-de.htm#non-free">Hardware mit propriet&#228;ren Anforderungen</a></li>
			</ul>
		</li>
		<li  onmouseover="showHide( 12 );" onmouseout="startTime();" ><a href="wm-kde-de.htm">Fenstermanager</a>
			<ul class="sub-menu" id="sm12">
				<li><a href="wm-kde-de.htm#desk-freeze">KDE-Desktop friert ein</a></li>
				<li><a href="wm-kde-de.htm#kde-login">Kein Login in KDE</a></li>
				<li><a href="wm-kde-de.htm#ch-th">Themes &#228;ndern</a></li>
			</ul>
		</li>
		<li  onmouseover="showHide( 14 );" onmouseout="startTime();" ><a href="lamp-apache-de.htm">sidux LAMP-Stack</a>
			<ul class="sub-menu" id="sm14">
				<li><a href="lamp-apache-de.htm#serv-apache">sidux LAMP-Paket</a></li>
				<li><a href="lamp-apache-de.htm#serv-ftp">FTP-Clients</a></li>
				<li><a href="lamp-apache-de.htm#serv-sec">Sichere Protokolle</a></li>
				<li><a href="lamp-apache-de.htm#serv-ssl">SSL</a></li>
				<li><a href="lamp-sql-de.htm#serv-mysql">MySQL-Setup</a></li>
				<li><a href="lamp-ppp-de.htm#serv-php">PHP in Apache</a></li>
			</ul>
		</li>
		<li  onmouseover="showHide( 3 );" onmouseout="startTime();" ><a href="internet-connecting-de.htm">Internet und Netzwerk</a>
			<ul class="sub-menu" id="sm3">
				<li><a href="ntp-server-de.htm#ntp-server">Zeitserver-Setup</a></li>
				<li><a href="internet-connecting-de.htm#firewalls">Mini-Firewall</a></li>
				<li><a href="ssh-de.htm#ssh-fs">SSH:Einbindung eines entfernten Computers</a></li>
				<li><a href="ssh-de.htm#ssh-x">X-Window-Programme via SSH verwenden</a></li>
				<li><a href="ssh-de.htm#ssh-f">SSH: GUI mit Konqueror</a></li>
				<li><a href="ssh-de.htm#ssh-w">SSH: X-Forwarding von Windows</a></li>
				<li><a href="ssh-de.htm#ssh">SSH: Sicherheit</a></li>
				<li><a href="samba-de.htm#configure">SAMBA: Windows-Freigaben nutzen</a></li>
				<li><a href="samba-de.htm#setup">Samba-Server aufsetzen</a></li>
				<li><a href="internet-connecting-de.htm#dial-mod">56k-Modems</a></li>
				<li><a href="internet-connecting-de.htm#ndiswrapper">Ndiswrapper</a></li>
				<li><a href="internet-connecting-wpa-de.htm#wpa">WIFI - WLAN</a></li>
				<li><a href="internet-connecting-de.htm#internetsharing">Internet teilen</a></li>
				<li><a href="internet-connecting-de.htm#netcardconfig">Internet &amp; Netzwerk</a></li>
			</ul>
		</li>
		<li  onmouseover="showHide( 11 );" onmouseout="startTime();" ><a href="sys-admin-apt-de.htm">Systemadministration</a>
			<ul class="sub-menu" id="sm11">
				<li><a href="sys-admin-apt-de.htm#apt-cook">APT-Kochbuch, sources.list</a></li>
				<li><a href="sys-admin-meta-de.htm#meta-pack">Meta-Pakete installieren</a></li>
				<li><a href="sys-admin-meta-de.htm#meta-proxy">Meta installieren und Proxies</a></li>
				<li><a href="sys-admin-apt-de.htm#apt-install">Neue Pakete installieren</a></li>
				<li><a href="sys-admin-apt-de.htm#apt-delete">Pakete l&#246;schen</a></li>
				<li><a href="sys-admin-apt-de.htm#apt-downgrade">Downgraden eines Pakets</a></li>
				<li><a href="sys-admin-apt-de.htm#apt-upgrade">Upgrade eines installierten Systems</a></li>
				<li><a href="sys-admin-upgrade-de.htm#live-cd-upgrade">Upgrade durch die Live-CD</a></li>
				<li><a href="sys-admin-kern-upg-de.htm#kern-upgrade">Upgrade des Kernels</a></li>
				<li><a href="sys-admin-rdiff-de.htm#rdiff">Backup mit rdiff</a></li>
				<li><a href="sys-admin-rsync-de.htm#rsync">Backup mit rsync</a></li>
				<li><a href="vir-rkits-de.htm#virus-rkits">Virus- und Rootkitscanner</a></li>
				<li><a href="sys-admin-gen-de.htm#start-services">Einen Dienst in sidux starten</a></li>
				<li><a href="sys-admin-gen-de.htm#pw-lost">Rootpasswort vergessen</a></li>
				<li><a href="sys-admin-gen-de.htm#fonts">Schriftarten</a></li>
				<li><a href="sys-admin-grub-bootman2-de.htm#mbr-grub-boot">MBR-Bootsektor &#252;berschrieben</a></li>
				<li><a href="sys-admin-grub-bootman2-de.htm#boot-grub-floppy">Eine Boot-Floppy erstellen</a></li>
				<li><a href="sys-admin-grub-bootman2-de.htm#remove-grub">Grub aus MBR entfernen</a></li>
				<li><a href="sys-admin-grub-bootman2-de.htm#what-is-grub">Grub: der Bootmanager</a></li>
			</ul>
		</li>
	</ul>
<!-- menu ends here --> </div>
<div id="main-page">
	<div class="divider" id="wpa">
		<h2 id="top-header">Arbeitweisen des wpasupplicant in Debian</h2>
				<p class="highlight-4">Auf Grund der Komplexitizit&#228;t der Gesetzgebung liefert sidux nur DFSG-Freie Software auf der LiveCD mit, n&#228;here Informationen, wie man unfreie Soft- bzw. Firmware installiert gibt es <a href="hw-dev-hw-dri-de.htm#non-free">hier</a>.</p>

			<p>Das Debian wpasupplicant-Paket unterst&#252;tzt zwei  Arbeitsweisen, die beide sehr nahe am Kern der Netzwerk-Infrastruktur (ifupdown) agieren.</p>

		<h4>Inhaltsangabe</h4>
<ol>
	<li><h6>Spezifizieren des wpa_supplicant Treiber-Backends</h6>
        	  <p>* Tabelle der unterst&#252;tzten Treiber<br />
	         * Treiberempfehlungen</p></li>
	<li><h6>Modus #1: Managed Mode</h6>
	          <p>* Beispiele<br />
	          * Tabelle der allgemeinen Optionen<br />
	          * Wichtige Anmerkungen zum Managed Mode<br />
	          * Wie man's macht</p></li>
	<li><h6>Mode #2: Roaming Mode</h6>
	          <p>* wpa_supplicant.conf<br />
	          * /etc/network/interfaces<br />
	          * Kontrolle des Roaming-Daemons mit wpa_action<br />
	          * Feineinstellung der Roaming-Konfiguration<br />
	          * Das Logfile<br />
	          * Nutzung von externen Mapping-Skripten (z.B. 	guessnet)<br />
	          * /etc/network/interfaces mit externem Mapping</p></li>
	<li><h6>Probleml&#246;sungen</h6>
        	  <p>* Versteckte Essids</p></li>
	<li><h6>Sicherheitserw&#228;gungen</h6>
        	  <p>* Konfiguration der Dateirechte</p></li>
</ol>

		<h4>1. Spezifikation des wpa_supplicant Treiber-Backends</h4>

			<p>Wird kein von der Karte ben&#246;tigter Treibertyp explizit per "wpa_driver" ausgew&#228;hlt, wird der 'wext' Treiber benutzt. Verwendet man einen 2.4er Kernel oder einen 2.6er Kernel kleiner 2.6.14, muss der wpa-Treibertyp definiert werden.</p>

	</div>	

	
		<h4>Tabelle der unterst&#252;tzten Treiber</h4>

			<p>Eine Zusammenfassung folgt weiter unten</p>

	<div>
		<table>
			<tbody>
				<tr>
					<th>Treiber</th>
					<th>Beschreibung</th>
				</tr>
				<tr>
					<td>hostap</td>
					<td>Host AP driver (Intersil Prism2/2.5/3)</td>
				</tr>
				<tr>
					<td>madwifi</td>
					<td>MADWIFI 802.11 support (Atheros, etc.)</td>
				</tr>
				<tr>
					<td>atmel</td>
					<td>ATMEL AT76C5XXx (USB, PCMCIA)</td>
				</tr>
				<tr>
					<td>wext</td>
					<td>Linux wireless extensions (generic)</td>
				</tr>
				<tr>
					<td>ndiswrapper</td>
					<td> Linux ndiswrapper</td>
				</tr>
				<tr>
					<td>ipw</td>
					<td>Intel ipw2100/2200 driver</td>
				</tr>
				<tr>
					<td>wired</td>
					<td>wired Ethernet driver</td>
				</tr>
				<tr>
					<td>test</td>
					<td>Test-Treiber</td>
				</tr>
			</tbody>
		</table>
	</div>

	<div class="spacer05"></div>
		<h4>Allgemeine Treiberempfehlung</h4>

			<p>Die Intel Pro Wireless Adapter (ipw2100, ipw2200 and ipw3945) benutzen alle das 'wext'-Backend, es sei denn, der Kernel ist &#228;lter als 2.6.14.</p>

			<p>Madwifi unterst&#252;tzt sowohl das 'wext' als auch das 'madwifi' Treiber-Backend. 'wext' wird empfohlen, wenn auch 'madwifi' unter Umst&#228;nden besser funktionieren mag.</p>

			<p>Ndiswrapper unterst&#252;tzt seit Version 1.16 das 'ndiswrapper' Treiber-Backend <b>nicht mehr</b>. Wenn man keine antiquierte ndiswrapper-Version verwendet, <b>muss der 'wext' Treiber f&#252;r ndiswrapper verwendet werden</b>.</p>

			<p>Die 'wpa_driver'-Option wird in der <span class="highlight-3">/etc/network/interfaces</span> im f&#252;r das Ger&#228;t verwendeten Abschnitt definiert, zum Beispiel:</p>

<pre>
<i>(...)</i>
iface eth0 inet dhcp
	wpa-driver wext
	<i>. . . . . andere Optionen</i>
<i>(...)</i>
</pre>

			<h2>2. Modus #1: Managed Mode</h2>

			<p>Dieser Modus bietet die M&#246;glichkeit, &#252;ber das 'wpa_supplicant' Verbindung zu einem bekannten Netzwerk herzustellen. Dies funktioniert &#228;hnlich wie mit dem Paket 'wireless tools'. Jedes Element, das ben&#246;tigt wird, um eine Verbindung herzustellen, wird mit dem Pr&#228;fix 'wpa-' in der <span class="highligh-3">/etc/network/interfaces</span> angef&#252;hrt. </p>

		<h6>Beispiel einer 'wpa.conf' f&#252;r 'Managed Mode' - Beispiel 1</h6>
<pre># Beispiel einer Mode #1 wpa.conf Datei - Beispiel 1.
# ACHTUNG: der Wert 'wpa-psk' ist nur g&#252;ltig, wenn:

#   1. er Klartext (ascii) und zwischen 8 und 63 Buchstaben oder
#   2. er Hexadezimal und 64 Buchstaben lang ist. 

# Verbindung mit dem Zugangsknoten (access point, 'ap') der ssid 'NETBEER' und der
# WPA-PSK/WPA2-PSK Verschl&#252;sselung. Das 'wext' Treiber-Backend von 'wpa_supplicant' wird
# verwendet, da kein 'wpa-driver' definiert wurde.
# Das Passwort (passphrase) wird als ASCII (Klartext, plaintext) eingegeben. DHCP wird verwendet 
# um eine Netzwerkadresse zu erhalten.
#
iface wlan0 inet dhcp

        wpa-ssid NETBEER
        # plaintext passphrase
        wpa-psk PlainTextSecret

# Verbindung mit dem access point der ssid 'homezone' . Verschl&#252;sselung
# WPA-PSK/WPA2-PSK, wpa_supplicant verwendet das 'wext' Treiber-Backend 
# Der psk (personal key) wird als verschl&#252;sselte hexadezimale Zeichenfolge eingegeben.
# DHCP wird verwendet, um eine Netzwerkadresse zu erhalten.
#
iface wlan0 inet dhcp

        wpa-driver wext
        wpa-ssid homezone
        # hexadecimal psk is encoded from a plaintext passphrase
        wpa-psk 000102030405060708090a0b0c0d0e0f101112131415161718191a1b1c1d1e1f

# Verbindung mit dem Access Point der ssid 'HotSpot1' und der 
# bssid  '00:1a:2b:3c:4d:5e'. Verschl&#252;sselung WPA-PSK/WPA2-PSK,
# Verwendung des 'madwifi' Treiber-Backends von wpa_supplicant.
# Die passphrase wird als plaintext-Zeichenfolge eingegeben.
# Eine statische Adresszuweisung wird verwendet. 
#
iface ath0 inet static

        wpa-driver madwifi
        wpa-ssid HotSpot1
        wpa-bssid 00:1a:2b:3c:4d:5e
        # plaintext passphrase
        wpa-psk madhotspot
        wpa-key-mgmt WPA-PSK
        wpa-pairwise TKIP CCMP
        wpa-group TKIP CCMP
        wpa-proto WPA RSN
        # static ip settings
        address 192.168.0.100
        netmask 255.255.255.0
        network 192.168.0.0
        broadcast 192.168.0.255
        gateway 192.168.0.1

# Eine vom Benutzer bereitgestellte wpa_supplicant.conf wird f&#252;r eth1 verwendet.
# Alle Netzwerkinformationen sind in der wpa_supplicant.conf enthalten.
# Kein wpa-driver Typ ist definiert, also wird wext verwendet.
# DHCP wird verwendet, um eine Netzwerkadresse zu erhalten.
#
iface eth1 inet dhcp

wpa-conf /path/to/wpa_supplicant.conf
</pre>


	<div class="divider" id="wpa1">
		<h2>Tabelle der allgemeinen Optionen</h2>

			<p>Es folgt nun eine kurze &#220;bersicht der am h&#228;ufigsten benutzten 'wpa-'Optionen, welche in der <span class="highlight-3">/etc/network/interfaces</span> g&#252;ltig sind. Sie m&#252;ssen im Abschnitt des WLAN-Ger&#228;tes stehen. Siehe auch 'Wichtige Anmerkungen zum Managed Mode', um Informationen &#252;ber g&#252;ltige und ung&#252;ltige Werte des 'wpa-'Pr&#228;fixes zu erhalten.</p>

			<p class="highlight-2">ACHTUNG: bei allen Werten die gRo&#223;- bzw. klEiNschreiBung beachten!</p>

<pre>
Element		Beispiel Wert		Berschreibung
=======         =============           ===========
wpa-ssid	plaintextstring		setzt das ssid des Netzwerks

wpa-bssid	00:1a:2b:3c:4d:5e	bssid des Access Points

wpa-psk		0123456789....		der preshared wpa key. Mit
					wpa_passphrase(8) kann der psk-Key
					aus einer Passphrase generiert werden

wpa-key-mgmt	NONE, WPA-PSK, WPA-EAP,	Liste der akzeptierten 
					IEEE 802.1X Authentifizierung
 					der Management-Protokolle

wpa-group	CCMP, TKIP, WEP104,	Liste der akzeptierten group 	
		WEP40			ciphers f&#252;r WPA

wpa-pairwise	CCMP, TKIP, NONE	Liste der paarweise akzeptierten
					ciphers f&#252;r WPA

wpa-auth-alg	OPEN, SHARED, LEAP	Liste der erlaubten IEEE 802.11
					Authentifizierungsalgorhithmen

wpa-proto	WPA, RSN		Liste akzeptierter Protokolle

wpa-identity	myplaintextname		durch den Administrator
					bestimmter Benutzername
					(EAP authentication)

wpa-password	myplaintextpassword	Benutzerpasswort 
					(EAP authentication)

wpa-scan-ssid	0 or 1			Umschalten des ssid-Scannens mit
					spezifischen "probe request frames"

wpa-ap-scan     0 or 1 or 2             Einstellen der wpa_supplicant-Scannerlogik
</pre>
			<p>Die gesamten Funktionen des wpa_cli(8) sollten integriert sein. Eine fehlende Funktion wird als Programmfehler (bug) angesehen und sollte als solcher berichtet werden. Patches sind immer willkommen.</p>


			<h2>Wichtige Anmerkungen zum Managed Mode</h2>

			<p>Fast alle 'wpa-'Optionen ben&#246;tigen zumindest eine definierte ssid. Nur zwei der Optionen haben einen globalen Effekt. Dies sind 'wpa-ap-scan' und 'wpa-preauthenticate'.</p>

			<p>Jede einem Ger&#228;t (Device) in der interfaces(5) gegebene 'wpa-'Option gen&#252;gt, den wpa_supplicant-Daemon aufzurufen.</p>

			<p>Das ifupdown-Skript von wpasupplicant macht Annahmen bez&#252;glich des 'Typs' der Eingabe, die f&#252;r jede Option g&#252;ltig ist. Es vermutet zum Beispiel, dass manche Eingaben Klartext sind und setzt sie in Anf&#252;hrungszeichen, bevor sie an wpa_cli weitergegeben werden. Dieser f&#252;gt die Eingabe dann dem Netzwerkblock durch das wpa_supplicant-ctrl_interface-socket hinzu.</p>

			<p>'ifup' mit der '--verbose' Option von Hand ausgef&#252;hrt zeigt alle Befehle (commands), die von wpa_cli verwendet werden, um den Netzwerkblock zu bilden. Ist der Wert einer in der <span class="highilght-3">/etc/network/interfaces</span> definierten 'wpa-'Option in Anf&#252;hrungszeichen gesetzt, wurde angenommen, dass es sich um "plaintext"- oder "ascii"-Eingaben handelt.</p>

			<p>Mancher Werte'typ' einer Option, wie z.B. 'wpa-wep-key', wird als hexadezimale Folge angenommen. Der Werte'typ' der 'wpa-psk'-Option wird jedoch durch eine simple Suche nach nichthexadezimalen Zeichen bestimmt.</p>

			<h2>Wie wpa_supplicant funktioniert</h2>

			<p>Wie bereits erw&#228;hnt, wird jedes 'wpa_supplicant'-spezifische Element mit dem Pr&#228;fix 'wpa-' aufgerufen. Jedes Element entspricht einer in den wpa_supplicant.conf(5), wpa_supplicant(8) und wpa_cli(8) man-pages beschriebenen Eigenschaft des 'wpa_supplicant'.</p>

			<p>Der supplicant (Bittsteller) wird ohne jede Vorkonfiguration aufgerufen und wpa_cli bildet die Netzwerkkonfiguration aus den bereitgestellten Eingaben der 'wpa-cli'-Zeilen. wpa_supplicant/wpa_cli legen nicht sofort Eigenschaften des Ger&#228;ts fest (wie iwconfig z. B.), sondern zeigt an, welcher Access Point f&#252;r eine Verbindung geeignet ist. Nachdem das Ger&#228;t die Gegend gescannt hat und der ap gefunden wurde, werden, wenn der ap bereit ist, diese Eigenschaften gesetzt.</p>

			<p>Das Skript, welches all dies macht, ist hier:</p>

<pre> /etc/wpa_supplicant/ifupdown.sh</pre>

			<p>Es wird von run-parts ausgef&#252;hrt, welches selbst von ifupdown w&#228;hrend der Phasen 'pre-up', 'pre-down' und 'post-down' aufgerufen wird.</p>


			<p>In der 'pre-up'-Phase wird ein wpa_supplicant-daemon gestartet, gefolgt von einer Serie von wpi_cli-Befehlen, die eine Netzwerkkonfiguration  entsprechend der in <span class="highlight-3">/etc/network/interfaces</span> genutzten 'wpa-'Optionen f&#252;r das Ger&#228;t aufsetzen.</p>

			<p>Wenn wpa-roam benutzt wird, wird ein wpa_cli-daemon in der 'post-up'-Phase gestartet.</p>

			<p>In der 'pre-down'-Phase wird der wpa_cli-daemon gestoppt (killed), so er vorhanden ist.</p>

			<p>In der 'post-down'-Phase wird der wpa_supplicant-daemon gestoppt (killed).</p>

			<h2>3. Modus #2: Roaming Mode</h2>

			<p>Das Paket (wpa_supplicant) enth&#228;lt einen in sich geschlossenen, simplen Roaming-Mechanismus in Form eines wpa_cli-action-Skripts, <span class="highlight-3">/sbin/wpa_action</span>. Bei Aktivierung vermutet wpa_action Kontrolle &#252;ber ifupdown. Die wpa_action(8)-manpage beschreibt die technischen Details eingehend.</p>

			<p>Um ein Roaming-Interface zu aktivieren, muss folgendes Beispiel f&#252;r die Datei interfaces(5) angepasst werden:</p>

<pre>
iface eth1 inet manual
	wpa-driver wext
        wpa-roam /path/to/wpa_supplicant.conf
</pre>

			<p>Zwei daemons werden durch obiges Beispiel gestartet: wpa_supplicant und wpa_cli. Eine <span class="highlight-3">/etc/wpa_supplicant.conf</span> ist notwendig. Einen guten Anfang bietet das Konfigurationsbeispiel, welches so nach <span class="highlight-3">/etc</span> kopiert werden kann:</p>

<pre>
cp /usr/share/doc/wpasupplicant/examples/wpa_supplicant.conf.template \
        /etc/wpa_supplicant/wpa_supplicant.conf
</pre>


			<p>Es ist notwendig, diese Konfigurationsdatei zu editieren und f&#252;r alle bekannten Netzwerke und Netzwerkbl&#246;cke hinzuzuf&#252;gen. Wer sich unsicher ist, was das bedeutet, sollte jetzt die manpage wpa_supplicant.conf(5) lesen.</p>

			<p>F&#252;r jedes Netzwerk kann eine eigene 'id_str' verwendet werden. Diese sollte eine simple Zeichenfolge sein. Diese Folge bildet die Basis der Netzwerkprofile; es entspricht einer logischen Schnittstelle (Interface), die in der Datei interfaces(5) definiert wurde. Wenn keine 'id_str' f&#252;r ein Netzwerk gegeben ist, wird von wpa_action das Interface 'default' benutzt. Das Interface 'default' kann durch die Option 'wpa-default-iface' definiert werden.</p>

			<p>Was all das bedeutet, wird mit folgendem (&#252;bersetzten) Beispiel aus der wpa_action(8) manpage illustriert:</p>

		<h6><span class="highligh-3">/etc/wpa_supplicant.conf</span> Beispiel</h6>			
<pre>wpa_supplicant.conf example:
network={

        ssid="foo"
        # der folgende id_str ruft mit /sbin/wpa_action 'ifup uni' auf
        id_str="uni"
        key_mgmt=NONE
}

network={

        ssid="bar"
        #der folgende id_str ruft mit /sbin/wpa_action 'ifup home_static' auf
        id_str="home_static"
        psk=123456789...

}


network={

        ssid=""
        # kein 'id_str' gegeben, /sbin/wpa_action ruft 'ifup default' auf
        key_mgmt=NONE

}
</pre>
</div>
	<div class="divider" id="wpa2">
		<h6><span class="highlight-3">/etc/network/interfaces</span> Beispiel</h6>
<pre>/etc/network/interfaces (Beispiel):
# das roaming-interface muss die manuelle inet-Methode nutzen
# 'allow-hotplug' oder 'auto' stellt sicher, dass der Daemon automatisch startet
allow-hotplug eth1
iface eth1 inet manual

        wpa-driver wext
        wpa-roam /etc/wpa_supplicant/wpa_supplicant.conf

 
# kein id_str, 'default' wird zur Absicherung als Mapping Target verwendet
iface default inet dhcp


# id_str="uni"
iface uni inet dhcp

# id_str="home_static"
iface home_static inet static

        address 192.168.0.20
        netmask 255.255.255.0
        network 192.168.0.0

        broadcast 192.168.0.255
        gateway 192.168.0.1
</pre>

			<p>Ein logisches Interface wird durch ifup gestartet (und durch ifdown gestoppt), wenn wpa_supplicant sich mit dem durch die 'id_str' in der <span class="highlight-3">/etc/wpa_supplicant.conf</span> zugeordneten Netzwerk verbindet (oder die Verbindung trennt).</p>

			<p>Ein Log der von /sbin/wpa_action durchgef&#252;hrten Aktionen wird als /var/log/wpa_action.log gespeichert, bitte an Problemberichte das Log anh&#228;ngen.</p>

<h2>Kontrolle des Roaming-Daemon durch wpa_action</h2>

			<p>Ist der roaming daemon gestartet, geht er von der Kontrolle von ifupdown aus. Das hei&#223;t, wpa_cli ruft ifup auf, wenn wpa_supplicant sich erfolgreich mit einem Access-Point verbunden hat, und ruft ifdown auf, wenn die Verbindung getrennt wurde oder verloren ging. Solange der roaming-daemon aktiv ist, sollte ifupdown nicht direkt &#252;ber manuelle Befehle angesprochen werden, sondern /sbin/wpa_action sollte verwendet werden, um den roaming-daemon zu stoppen oder neu zu laden. Um den roaming-daemon auf der Netzwerkkarte eth1 zu stoppen, wird folgender Befehl verwendet:</p>

<pre>wpa_action eth1 stop</pre>


			<p>Wenn der roaming-daemon mit neuen Netzwerkinformationen versorgt wird, muss er nicht angehalten werden. Dazu wird die Datei wpa_supplicant.conf editiert, welche der roaming-daemon nutzt, und die neuen Netzwerkdaten werden in diese Datei eingegeben. Optionale Netzwerkeinstellungen, welche f&#252;r das hinzugef&#252;gte Netzwerk spezifisch sind (gelinkt durch den 'id_str'), werden in /etc/network/interfaces eingetragen. Im Anschluss kann der roaming-daemon wie folgt neu geladen werden:</p>

<pre>wpa_action eth1 reload</pre>

			<p>Umfassende technische Einzelheiten, wozu wpa_action f&#228;hig ist, findet man auf der manpage wpa_action(8).</p>

</div>
	<div class="divider" id="wpa3">
		<h2>Fine-Tuning der Roaming-Einstellungen</h2>

			<p>Es ist durchaus m&#246;glich, dass in n&#228;herer Umgebung mehrere Access-Points aktiv sind. Der Access-Point kann manuell mittels wpa_cli oder wpa_gui ausgew&#228;hlt werden, oder jedem Access-Point bzw. Netzwerk kann seine eigene Priorit&#228;tsstufe gegeben werden. Letzteres geschieht durch die Option 'priority' in der wpa_supplicant.conf.</p>

</div>
	<div class="divider" id="wpa4">
		<h2>Die Protokolldatei (der Logfile)</h2>

			<p>Jede Aktivit&#228;t des roaming-daemons wird in /var/log/wpa_action.log protokolliert. Folgende Informationen sind darin enthalten:</p>

		<p>*time and date<br />
		*interface name and action event<br />
		*values of enviromental variables (WPA_ID, WPA_ID_STR, WPA_CTRL_DIR)<br />
		*ifupdown command executed<br />
		*wpa_cli status (based on WPA-PSK, network may display different info)<br />
		*bssid<br />
		*ssid<br />
		*id<br />
		*id_str<br />
		*pairwise_cipher<br />
		*group_cipher<br />
		*key_mgmt<br />
		*wpa_state<br />
		*ip_address</p>
	
	
</div>
	<div class="divider" id="wpa5">	
		<h2>Verwendung externer Mapping-Scripts (z. B. guessnet)</h2>

			<p>Zus&#228;tzlich zum internen Mapping von logischen Schnittstellen mittels 'id_str', kann wpa_action externe Mapping-Scripts aufrufen. Ein externes Mapping-Script sollte den Namen der logischen Schnittstelle &#252;bermitteln, welche aufgerufen werden soll. Jedes Mapping-Script sollte durch einen Aufruf von wpa_action funktionieren, wenn es mit dem ifupdown Mapping-Mechanismus arbeitet (siehe man interfaces).</p>

			<p>Um ein Mapping-Script aufzurufen, wird zu den Schnittstellen-Stanzen (interfaces stanza) des physischen Roaming-Ger&#228;ts (roaming device) eine Zeile mit der Syntax 'wpa-mapping-script name-of-the-script' angef&#252;gt. (Der absolute Pfad zu dem Mapping-Script kann erforderlich sein).</p>


			<p>Der Inhalt der Zeilen, welche mit wpa-map beginnen, wird zum stdin des Mapping-Scripts weiter geleitet. Da ifupdown nur eine 'wpa-map'-Zeile zul&#228;sst, k&#246;nnen beliebig viele Zeilen mit 'wpa-map' angeh&#228;ngt werden. Zum Beispiel:</p>

<pre>
iface wlan0 inet manual
        wpa-driver wext
        wpa-roam /etc/wpa_supplicant/wpa_supplicant.conf
        wpa-mapping-script guessnet-ifupdown
        wpa-map0 home
        wpa-map1 work
        wpa-map2 school
        # ... zus&#228;tzliche Zeilen mit wpa-mapX, wie ben&#246;tigt
</pre>
			<p>Per Default (Grundeinstellung) wird ein Mapping-Script nur verwendet, wenn kein 'id_str' f&#252;r das aktuelle Netzwerk angegeben ist. Wenn 'id_str' vollst&#228;ndig ignoriert und nur ein externes Mapping-Script verwendet werden soll, wird die Option 'wpa-mapping-script-priority 1' gesetzt, um das Default-Verhalten der Grundeinstellung zu &#252;berschreiben.</p>

			<p>Falls das Mapping-Script eine leere Zeichenfolge &#252;bermittelt, nutzt wpa_action die Basisschnittstelle (das Default-Device), solange keine Alternative durch die Option 'wpa-roam-default-iface' definiert ist.</p>

			<p>Es folgt ein ausf&#252;hrliches Beispiel, welches guessnet-ifupdown als externes Mapping-Script verwendet.</p>

		<h6>/etc/network/interfaces mit externem Mapping-Beispiel</h6>
<pre>/etc/network/interfaces mit externem Mapping-Beispiel:
allow-hotplug wlan0
iface wlan0 inet manual

        wpa-driver wext
        wpa-roam /etc/wpa_supplicant/wpa_supplicant.conf
        wpa-roam-default-iface default-wparoam
        wpa-mapping-script guessnet-ifupdown
        wpa-map default: default-guessnet
        wpa-map0 home_static
        wpa-map1 work_static


# school kann nur mittels 'id_str' gew&#228;hlt werden
iface school inet dhcp

        # resolvconf
        dns-nameservers 11.22.33.44 55.66.77.88

iface home_static inet static

        address 192.168.0.20
        netmask 255.255.255.0

        network 192.168.0.0
        broadcast 192.168.0.255
        gateway 192.168.0.1
        test peer address 192.168.0.1 mac 00:01:02:03:04:05


iface work_static inet static

        address 192.168.3.200
        netmask 255.255.255.0
        network 192.168.3.0
        broadcast 192.168.3.255

        gateway 192.168.3.1
        test peer address 192.168.3.1 mac 00:01:02:03:04:05

iface default-guessnet inet dhcp

iface default-wparoam inet dhcp
</pre>

			<p>In diesem Beispiel nutzt wpa_action das Script guessnet nur zur Wahl einer geeigneten logischen Schnittstelle, wenn keine Option 'id_str' f&#252;r das aktuelle Netzwerk in wpa_supplicant.conf gesetzt wurde.</p>

			<p>Die Zeilen mit 'wpa-map' statten guessnet mit den logischen Schnittstellen aus, welche gepr&#252;ft werden, und die Default-Schnittstelle wird verwendet, wenn mit keiner Schnittstelle aus 'wpa-map' eine Verbindung eingegangen werden konnte. Die "Test-Zeilen" einer jeden logischen Schnittstelle werden von guessnet genutzt, um zu ermitteln, ob eine Verbindung zu dem gegebenen Netzwerk hergestellt ist. guessnet w&#228;hlt zum Beispiel die logische Schnittstelle 'home_static', wenn ein Netzwerkger&#228;t mit einer IP-Adresse 192.168.0.1 und einer MAC mit 00:01:02:03:04:05 im aktuellen Netzwerk vorhanden ist. Wenn alle Tests erfolglos sind, wird die Schnittstelle 'default-guessnet' konfiguriert.</p>


			<p>Zur weiteren Information siehe die manpage guessnet(8).</p>

			<h2>4. Probleml&#246;sungen</h2>

			<p>Um Fehler bei Verbindung oder Authentifizierung ausfindig zu machen, schlagen wir vor, den Befehl `wpa_cli -i &lt;interface&gt;` in einer neu ge&#246;ffneten Konsole auszuf&#252;hren, bevor die Schnittstelle angesprochen wird. Zun&#228;chst wird der Befehl 'level 0' verwendet, um alle Fehlermeldungen zu erhalten. Im Anschluss daran erh&#228;lt man mit `ifup --verbose &lt;interface&gt;` ausf&#252;hrliche Fehlermeldungen von dem Script, welches wpasupplicant startet.</p>

	<div class="divider" id="wpa6">
		<h3>Versteckte ssids</h3>

			<p>Zur Referenz beachte #358137. Um sich mit versteckten ssids verbinden zu k&#246;nnen, soll die Option 'ap_scan=1' in der globalen Sektion (global section) und die Option 'scan_ssid=1' in der Sektion Netzwerkblock (network block section) der wpa_supplicant.conf eingetragen sein. Bei einem Netzwerk im Managed Mode (verwalteten Modus), geschieht dies durch folgende Stanzen (stanzas):</p>

<pre>
iface eth1 inet dhcp
wpa-conf managed
wpa-ap-scan 1
wpa-scan-ssid 1
# ... zus&#228;tzliche Einstellungsoptionen
</pre>

			<p>Laut #368770, kann die Verbindungsherstellung eine lange Zeit in Anspruch nehmen bei Netzwerken, welche mit WEP gesichert sind. In manchen F&#228;llen kann der Parameter 'ap_scan=2' in der Konfigurationsdatei (oder eine Stanze 'wpa-ap-scan 2', welche eine identische Funktion hat) eine gro&#223;e Hilfe f&#252;r eine schnellere Verbindungsherstellung bedeuten.</p>

			<h2>5. Sicherheits&#252;berlegungen</h2>

	<div class="divider" id="wpa7">
		<h3>Konfiguration der Dateiberechtigungen</h3>
			<p>Es ist wichtig, die PSK und andere sensible Daten, welche das Netzwerk betreffen, nicht &#246;ffentlich zug&#228;nglich zu machen. Daher muss sicher gestellt sein, dass Konfigurationsdateien, welche diese Informationen enthalten, nur vom Besitzer dieser Dateien lesbar (readable) sind. Zum Beispiel:</p>

<pre>
chmod 0600 /etc/network/interfaces
# w&#228;hle den Pfad zur eigenen Datei wpa_supplicant.conf
chmod 0600 /etc/wpa_supplicant/wpa_supplicant.conf
</pre>
			<p>In der Grundeinstellung ist /etc/network/interfaces f&#252;r alle lesbar (world readable). Dies ist nicht geeignet, um geheime Schl&#252;ssel und Passw&#246;rter in dieser Datei gespeichert zu haben.</p>


	</div>
	<div class="spacer05"></div>
</div>
</div>

</div>
</body>
</html>
