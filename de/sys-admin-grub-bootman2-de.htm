<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
   "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="de">
<head>
	<title>sidux Manuals - Grub-de</title>
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
	<style type="text/css" media="all">@import url("../lib/css-js/content.css");</style>
        <style type="text/css" media="all">@import url("../lib/css-js/menu.css");</style>
        <style type="text/css" media="print">@import url("../lib/css-js/print.css");</style>
        <link rel ="shortcut icon" href="../lib/favicon/manual.ico" />
        <script type="text/javascript" src="../lib/css-js/menu2.js"></script>
        <!--[if lt IE 8]>
        <link rel="stylesheet" type="text/css" href="../lib/css-js/ie_5-7_override.css">
        <![endif]-->
        <!--[if lt IE 7]>
        <link rel="stylesheet" type="text/css" href="../lib/css-js/ie_5-6_override.css">
        <![endif]-->
</head>
<body>
<!-- Last translation revision by hubi So 14. Sep 14:06:57 CEST 2008 -->
<div id="menu"> <!-- menu starts here de lang maintainers hubi -->
<!--Welcome to the  sidux-manual Operating System Manual version-01.80.2008.01.10 -->
<!-- menu last updated by bluewater 10/01/2009 10400 hrs UTC -->
<a href="http://sidux.com/"><img src="../lib/logos/sidux-logo.png" title="Zu sidux.com (Forum und Wiki)" alt="sidux.com logo" id="menu-header" /></a>
	<ul id="top-list">
		<li><a href="manual-search-de.htm#search-on"> <img src="../lib/logos/kappfinder.png" title="Handbuch Suche" alt="Suche" />Suche online - offline</a> </li>
		<li><a href="http://manual.sidux.com/meta-manual">sidux Meta-Manual</a></li>
	</ul>
	<div id="flags-2">
			<a href="../flag-index.html"><img src="../lib/logos/sidux-language-64.png" title="Wählen Sie eine andere Sprache - Choose another language" alt="lang-switch" /></a>
	</div>
	<ul>
		<li  onmouseover="showHide( 1 );" onmouseout="startTime();" ><a href="welcome-de.htm">Über das sidux-Handbuch</a>
			<ul class="sub-menu" id="sm1">
				<li><a href="welcome-de.htm#welcome-gen">Willkommen</a></li>
				<li><a href="welcome-de.htm#how-to">Tipps zum Handbuch</a></li>
				<li><a href="welcome-de.htm#table-contents">Index</a></li>
				<li><a href="help-de.htm#help-gen">Wo es Hilfe gibt</a></li>
				<li><a href="help-de.htm#paste">IRC !paste</a></li>
				<li><a href="credits-de.htm#cred-team">Danksagungen</a></li>
				<li><a href="wel-quickstart-de.htm#welcome-quick">sidux Kurzanleitung</a></li>
			</ul>
		</li>
		<li  onmouseover="showHide( 2 );" onmouseout="startTime();" ><a href="cd-content-de.htm">ISO - Infos zur aktuellen Version</a>
			<ul class="sub-menu" id="sm2">
				<li><a href="cd-content-de.htm#cd-content">ISOs und Systemanforderungen</a></li>
				<li><a href="sys-admin-release-de.htm#rolling">Aktuelle Hinweise zum Versionsupgrade</a></li>
			</ul>
		</li>
		<li  onmouseover="showHide( 3 );" onmouseout="startTime();" ><a href="cd-dl-burning-de.htm">Spiegelserver, ISO Herunterladen &amp; Brennen</a>
			<ul class="sub-menu" id="sm3">
				<li><a href="cd-dl-burning-de.htm#download-sidux">Spiegelserver, CD herunterladen</a></li>
				<li><a href="cd-dl-burning-de.htm#md5">md5-Prüfsummen</a></li>
				<li><a href="cd-dl-burning-de.htm#burn-nero">Brennen in Windows</a></li>
				<li><a href="cd-dl-burning-de.htm#burn-linux">Brennen in Linux</a></li>
				<li><a href="cd-dl-burning-de.htm#xdelta">xdelta-Patches</a></li>
				<li><a href="cd-no-gui-burn-de.htm#burning-no-gui">Brennen ohne GUI</a></li>
			</ul>
		</li>
		<li  onmouseover="showHide( 4 );" onmouseout="startTime();" ><a href="live-mode-de.htm">Live-CD-Modus</a>
			<ul class="sub-menu" id="sm4">
				<li><a href="live-mode-de.htm#rootpw">Das Rootpasswort der sidux-Live-CD</a></li>
				<li><a href="live-mode-de.htm#live-cd-installsoft">Installieren von Software während einer Live-ISO Sitzung</a></li>
				<li><a href="live-mode-de.htm#ntfs-3g">Schreiben auf NTFS-Partitionen mit ntfs-3g</a></li>
			</ul>
		</li>
		<li  onmouseover="showHide( 5 );" onmouseout="startTime();" ><a href="term-konsole-de.htm">Das Terminal / Die Konsole</a>
			<ul class="sub-menu" id="sm5">
				<li><a href="term-konsole-de.htm#sux"> sux</a></li>
				<li><a href="term-konsole-de.htm#term-kon"> Terminal/Konsole</a></li>
				<li><a href="term-konsole-de.htm#cli-help">Kommadozeilenhilfe</a></li>
				<li><a href="term-konsole-de.htm#term-cmds">Linux Konsolenbefehle</a></li>
				<li><a href="term-konsole-de.htm#shell-scripts">Installation von Shellskripten</a></li>
			</ul>
		</li>
		<li  onmouseover="showHide( 6 );" onmouseout="startTime();" ><a href="cheatcodes-de.htm">Boot-Cheatcodes</a>
			<ul class="sub-menu" id="sm6">
				<li><a href="cheatcodes-de.htm#cheatcodes">sidux spezifische Parameter (nur Live-CD)</a></li>
				<li><a href="cheatcodes-de.htm#cheatcodes-linux">Allgemeine Parameter des Linux-Kernel</a></li>
				<li><a href="cheatcodes-vga-de.htm#vga">VGA-Codes</a></li>
			</ul>
		</li>
		<li  onmouseover="showHide( 7 );" onmouseout="startTime();" ><a href="part-gparted-de.htm">Partitionieren der Festplatte</a>
			<ul class="sub-menu" id="sm7">
				<li><a href="part-gparted-de.htm#partition">mit GParted</a></li>
				<li><a href="part-gparted-de.htm#ntfs">NTFS-Partitionen mit GParted ändern</a></li>
				<li><a href="part-uuid-de.htm#uuid">UUID, Partitionsbezeichnung und fstab</a></li>
				<li><a href="part-cfdisk-de.htm#disknames">Bezeichnungsschema von Festplatten</a></li>
				<li><a href="part-cfdisk-de.htm#partition">Partitionieren mit cfdisk</a></li>
				<li><a href="part-cfdisk-de.htm#formating">Formatieren mit cfdisk</a></li>
				<li><a href="part-size-examp-de.htm#part-example">Beispiele für Partitionsgrößen</a></li>
			</ul>
		</li>
		<li  onmouseover="showHide( 8 );" onmouseout="startTime();" ><a href="hd-install-de.htm">Installationsoptionen</a>
			<ul class="sub-menu" id="sm8">
				<li><a href="hd-install-de.htm#Inst-prep">Vorbereiten der Installation</a></li>
				<li><a href="hd-install-de.htm#Installation">Installation auf die Festplatte</a></li>
				<li><a href="hd-install-de.htm#first-hd-boot">Erstes Booten von der Festplatte</a></li>
				<li><a href="hd-install-opts-de.htm#fromiso">Booten 'fromiso'</a></li>
				<li><a href="hd-install-opts-de.htm#fromiso-persist">fromiso und persist</a></li>
				<li><a href="hd-install-opts-de.htm#usb-hd">Installation auf eine USB-Festplatte</a></li>
				<li><a href="hd-install-opts-de.htm#vtbox">Installation sidux über VirtualBox</a></li>
				<li><a href="hd-install-opts-de.htm#qemu">Installation sidux über qemu</a></li>
			</ul>
		</li>
		<li  onmouseover="showHide( 9 );" onmouseout="startTime();" ><a href="hw-dev-hw-dri-de.htm">Grafikkarten, Hardware, Geräte &amp; verschiedene Treiber</a>
			<ul class="sub-menu" id="sm9">
				<li><a href="hw-dev-hw-dri-de.htm#hd-ntfs3g">Schreiben auf NTFS-Partitionen mit ntfs-3g</a></li>
				<li><a href="hw-dev-mon-de.htm#mon-res">Ändern der Bildschirmauflösung</a></li>
				<li><a href="hw-dev-mon-de.htm#xrandr">Zwei Monitore und xrandr</a></li>
				<li><a href="hw-dev-mon-de.htm#mon-binary">Zwei Monitore mit binären Grafiktreibern</a></li>
				<li><a href="hw-dev-hw-dri-de.htm#non-free-3d">Binäre, nicht freie Treiber für Nvidia und ATI</a></li>
				<li><a href="hw-dev-hw-dri-de.htm#native-nv-ati">Freie xorg-Treiber für nVidia, ATI, Radeon, Intel</a></li>
				<li><a href="hw-dev-hw-dri-de.htm#non-free">Hardware mit proprietären Anforderungen</a></li>
			</ul>
		</li>
		<li  onmouseover="showHide( 10 );" onmouseout="startTime();" ><a href="wm-kde-de.htm">Fenstermanager</a>
			<ul class="sub-menu" id="sm10">
				<li><a href="wm-kde-de.htm#desk-freeze">Falls der KDE-Desktop einfriert</a></li>
				<li><a href="wm-kde-de.htm#kde-login">Kein Login in KDE möglich</a></li>
				<li><a href="wm-kde-de.htm#ch-th">Themes ändern</a></li>
			</ul>
		</li>
		<li  onmouseover="showHide( 11 );" onmouseout="startTime();" ><a href="lamp-apache-de.htm">sidux LAMP-Stack</a>
			<ul class="sub-menu" id="sm11">
				<li><a href="lamp-apache-de.htm#serv-apache">sidux LAMP-Paket</a></li>
				<li><a href="lamp-apache-de.htm#serv-ftp">FTP-Clients</a></li>
				<li><a href="lamp-apache-de.htm#serv-sec">Sichere Protokolle</a></li>
				<li><a href="lamp-apache-de.htm#serv-ssl">SSL</a></li>
				<li><a href="lamp-sql-de.htm#serv-mysql">MySQL-Setup</a></li>
				<li><a href="lamp-ppp-de.htm#serv-php">PHP in Apache</a></li>
				<li><a href="ntp-server-de.htm#ntp-server">Zeitserver-Setup</a></li>
			</ul>
		</li>
		<li  onmouseover="showHide( 12 );" onmouseout="startTime();" ><a href="internet-connecting-de.htm">Internet und Netzwerk</a>
			<ul class="sub-menu" id="sm12">
				<li><a href="tor-privoxy-de.htm#tor">Tor</a></li>
				<li><a href="tor-privoxy-de.htm#privoxy">Privoxy</a></li>
				<li><a href="internet-connecting-de.htm#firewalls">Firewalls</a></li>
				<li><a href="samba-de.htm#configure">SAMBA: Windows-Freigaben nutzen</a></li>
				<li><a href="samba-de.htm#setup">Einen Samba-Server aufsetzen</a></li>
				<li><a href="ssh-de.htm#ssh-fs">SSH: Einbindung eines entfernten Computers</a></li>
				<li><a href="ssh-de.htm#ssh-x">X-Window-Programme via SSH verwenden</a></li>
				<li><a href="ssh-de.htm#ssh-f">SSH: GUI mit Konqueror</a></li>
				<li><a href="ssh-de.htm#ssh-w">SSH: X-Forwarding von Windows</a></li>
				<li><a href="ssh-de.htm#ssh">SSH: Sicherheit</a></li>
				<li><a href="internet-connecting-de.htm#dial-mod">56k-Modems</a></li>
				<li><a href="internet-connecting-ndis-de.htm#ndiswrapper-basic">Ndiswrapper aktivieren</a></li>
				<li><a href="internet-connecting-ndis-de.htm#ndiswrapper-advanced">Ndiswrapper aktivieren (ausführlicher)</a></li>
				<li><a href="internet-connecting-wpagui-de.htm#wpa-roaming-gui">WiFi-roaming, WPA-GUI</a></li>
				<li><a href="internet-connecting-wpa-de.htm#wpa-basic">WiFi - Aufsetzen einer WLAN-Verbindung</a></li>
				<li><a href="internet-connecting-wpa-de.htm#wpa">WiFi - wpasupplicant</a></li>
				<li><a href="internet-connecting-de.htm#netcardconfig">Internet &amp; Netzwerk - Ceni</a></li>
			</ul>
		</li>
		<li  onmouseover="showHide( 13 );" onmouseout="startTime();" ><a href="sys-admin-apt-de.htm">Paketverwaltung</a>
			<ul class="sub-menu" id="sm13">
				<li><a href="sys-admin-apt-de.htm#apt-cook">APT-Kochbuch, sources.list</a></li>
				<li><a href="sys-admin-meta-de.htm#meta-pack">Metapakete installieren</a></li>
				<li><a href="sys-admin-meta-de.htm#meta-proxy">Proxyserver für Metapaket-Installation</a></li>
				<li><a href="sys-admin-apt-de.htm#apt-install">Neue Pakete installieren</a></li>
				<li><a href="sys-admin-apt-de.htm#apt-delete">Pakete löschen</a></li>
				<li><a href="sys-admin-apt-de.htm#apt-downgrade">Downgraden bzw. "Hold" eines Pakets</a></li>
				<li><a href="sys-admin-apt-de.htm#apt-cache">Programmsuche mit apt-cache</a></li>
				<li><a href="sys-admin-apt-de.htm#apt-kio">Programmsuche mit kio-apt</a></li>
				<li><a href="sys-admin-apt-de.htm#apt-upgrade">Upgrade eines installierten Systems - dist-upgrade</a></li>
			</ul>
		</li>
		<li  onmouseover="showHide( 14 );" onmouseout="startTime();" ><a href="sys-admin-gen-de.htm">Systemadministration</a>
			<ul class="sub-menu" id="sm14">
				<li><a href="home-de.htm#home-bu">/home verschieben</a></li>
				<li><a href="siduxcc-de.htm#siduxcc">sidux Kontrollzentrum</a></li>
				<li><a href="sys-admin-apt-de.htm#apt-upgrade">Aktualisierung eines installierten Systems - dist-upgrade</a></li>
				<li><a href="sys-admin-upgrade-de.htm#live-cd-upgrade">Aktualisierung durch die Live-CD</a></li>
				<li><a href="sys-admin-kern-upg-de.htm#kern-upgrade">Aktualisierung des Kernels</a></li>
				<li><a href="sys-admin-rdiff-de.htm#rdiff">Backup mit rdiff</a></li>
				<li><a href="sys-admin-rsync-de.htm#rsync">Backup mit rsync</a></li>
				<li><a href="vir-rkits-de.htm#virus-rkits">Virus- und Rootkitscanner</a></li>
				<li><a href="sys-admin-gen-de.htm#start-services">Dienste starten und stoppen</a></li>
				<li><a href="sys-admin-gen-de.htm#pw-lost">Rootpasswort vergessen</a></li>
				<li><a href="sys-admin-gen-de.htm#fonts">Schriftarten</a></li>
				<li><a href="sys-admin-gen-de.htm#cups">CUPS</a></li>
				<li><a href="sys-admin-gen-de.htm#init">sidux-Runlevels - init</a></li>
				<li><a href="sys-admin-grub-bootman2-de.htm#mbr-grub-boot">MBR-Bootsektor überschreiben</a></li>
				<li><a href="sys-admin-grub-bootman2-de.htm#dual-boot">Dual- und Multibooting</a></li>
				<li><a href="bios-freedos-de.htm#bois-prep">Aktualisieren des BIOS mit FreeDOS</a></li>
				<li><a href="sys-admin-grub-bootman2-de.htm#boot-grub-floppy">Eine Boot-Floppy erstellen</a></li>
				<li><a href="sys-admin-grub-bootman2-de.htm#remove-grub">Grub aus MBR entfernen</a></li>
				<li><a href="sys-admin-grub-bootman2-de.htm#what-is-grub">Grub: der Bootmanager</a></li>
			</ul>
		</li>
	</ul>
<!-- menu ends here --> </div>
<div id="main-page">
	<div class="divider" id="mbr-grub-boot">

					<h2 id="top-header">Ersetzen einer Grub-Installation</h2>
						<p>Wenn Grub im MBR nur aktualisiert werden soll (mit einer neueren Version), wird dieser Befehl eingegeben:</p> 
<pre>
/usr/sbin/grub-install --recheck --no-floppy /dev/sda
</pre>
						<p>Eine Sicherheitsabfrage kann verlangen, dass dieser Befehl wiederholt wird.</p>

		<h2>Windows hat den Bootsektor überschrieben: Wiederherstellung von Grub</h2>

							<p>Um Grub neu in den MBR zu schreiben oder Grub generell wieder herzustellen, muss von der <span class="highlight-3">sidux Live-CD</span> gebootet werden.</p>
						<ol>
							<li>Um zu ermitteln, welche Partitionen vorhanden sind (zum Beispiel [h,s]d[a..]X), benötigt man root-Privilegien (#), die man so erhält:
<pre>
$ sux
</pre>
							</li>
							<li>Nun verwendet man folgende zwei Befehle, um die korrekten Bezeichnungen zu erhalten:
<pre>
fdisk -l
cat /etc/fstab
</pre>
							</li>		
							<li>Nach Ermittlung der Partitionsbezeichnungen, legt man einen Einhängepunkt (Mount-Point) an
<pre>
mkdir -p /media/[hdxx,sdxx,diskx]
</pre>				
							</li>
							<li>und bindet die Partition ins Filesystem ein:
<pre>
mount /dev/xdxx /media/xdxx
</pre>
							</li>

							<li>Nun kann Grub in den MBR der ersten (generischen) Festplatte geschrieben werden:
<pre>
/usr/sbin/grub-install --recheck --no-floppy --root-directory=/media/xdxx /dev/sda
</pre>
							</li>
						</ol>

					<h6>Beispiel:</h6>
<pre>
root@sidux:/home/sidux# fdisk -l
# fdisk -l
Disk /dev/sda: 115.9 GB, 115989736960 bytes
255 heads, 63 sectors/track, 14101 cylinders
Units = cylinders of 16065 * 512 = 8225280 bytes
Disk identifier: 0x40444044
   Device Boot      Start         End      Blocks   Id  System
/dev/sda1   *           1        3673    29503341    7  HPFS/NTFS
/dev/sda2            3674       14101    83762910    5  Extended
/dev/sda5            3674        7239    28641784+  83  Linux
/dev/sda6            7239       10842    28934104+  83  Linux
/dev/sda7           10843       14101    26177886    b  W95 FAT32
Disk /dev/sdb: 120.0 GB, 120034123776 bytes
255 heads, 63 sectors/track, 14593 cylinders
Units = cylinders of 16065 * 512 = 8225280 bytes
Disk identifier: 0xa41e667f
   Device Boot      Start         End      Blocks   Id  System
/dev/sdb1               1        3574    28708123+  83  Linux
/dev/sdb2            3575        7247    29503372+  83  Linux
/dev/sdb3            7248       10845    28900935   83  Linux
/dev/sdb4           10846       14593    30105810    5  Extended
/dev/sdb5   *       10846       14338    28057491   83  Linux
/dev/sdb6           14339       14593     2048256   82  Linux swap / Solaris
Disk /dev/sdc: 250.0 GB, 250059350016 bytes
255 heads, 63 sectors/track, 30401 cylinders
Units = cylinders of 16065 * 512 = 8225280 bytes
Disk identifier: 0x00077541
   Device Boot      Start         End      Blocks   Id  System
/dev/sdc1               1       30401   244196001   83  Linux
Disk /dev/sdd: 250.0 GB, 250059350016 bytes
255 heads, 63 sectors/track, 30401 cylinders
Units = cylinders of 16065 * 512 = 8225280 bytes
Disk identifier: 0x1c01ad92
   Device Boot      Start         End      Blocks   Id  System
/dev/sdd1               1       30401   244196001   83  Linux

root@sidux:/home/sidux# cat /etc/fstab
# /etc/fstab - static information about the filesystems - fstab(5)
#
# /etc/fstab is only read by programs, and not written; it is the duty of the
# system administrator to properly maintain this file.
#
# Instead  of giving the device explicitly, one may indicate the filesystem
# that is to be mounted by its UUID or VOLUME label. This will make the
# system more robust: adding or removing a disk changes the disk device name
# but not the filesystem UUID or VOLUME label.

# automatically added, ST3120026A-3LJ093B4-part1
/dev/sda1       /media/disk0    ntfs    noauto,users,exec,ro,dmask=0022,fmask=0133      0       0

# automatically added, ST3120026A-3LJ093B4-part5
/dev/sda5       /media/disk1    jfs     noauto,users,exec,noatime       0       2

# automatically added, ST3120026A-3LJ093B4-part6
/dev/sda6       /media/disk2    reiserfs        noauto,users,exec,noatime       0       2

# automatically added, ST3120026A-3LJ093B4-part7
/dev/sda7       /media/disk3    vfat    noauto,users,exec,shortname=lower,quiet,umask=000       0       0

# automatically added, ST3120026A-3LJ09RBF-part1
/dev/sdb1       /media/disk4    reiserfs        noauto,users,exec,noatime       0       2

# automatically added, ST3120026A-3LJ09RBF-part2
/dev/sdb2       /media/disk5    ext3    noauto,users,exec,noatime       0       2

# automatically added, ST3120026A-3LJ09RBF-part3
/dev/sdb3       /media/disk6    reiserfs        noauto,users,exec,noatime       0       2

# automatically added, ST3120026A-3LJ09RBF-part5
/dev/sdb5       /media/disk7    ext3    noauto,users,exec,noatime       0       2

# automatically added, ST3120026A-3LJ09RBF-part6
/dev/sdb6       none    swap    sw      0       0

# automatically added, ST3250824AS-4ND1V199-part1
/dev/sdc1       /media/disk9    ext3    noauto,users,exec,noatime       0       2

# automatically added, ST3250620AS-9QE13XVF-part1
/dev/sdd1       /media/disk10   ext3    noauto,users,exec,noatime       0       2

# automatically added, _NEC_DVD_RW_ND-4550A
/dev/cdrom      /media/cdrom    udf,iso9660     user,noauto     0       0

# automatically added, ASUS_DVD-ROM_DVD-E616P_0104
/dev/cdrom1     /media/cdrom1   udf,iso9660     user,noauto     0       0

# automatically added
/dev/fd0        /media/fd0      auto    rw,user,noauto  0       0

# temporary filesystem in virtual memory
#tmpfs  /tmp    tmpfs   defaults        0       0
</pre>
<pre>
## Root-Partition ist /dev/sdb1 und der MBR geht nach sda
mkdir -p /media/sdb1
mount /dev/sdb1 /media/sdb1
/usr/sbin/grub-install --recheck --no-floppy --root-directory=/media/sdb1 /dev/sda
</pre>


						<p>Auf älteren Linux-Systemen wurden IDE-Festplatten (PATA) mit der Bezeichnung <span class="highlight-3">hdaX</span> anstelle der modernen <span class="highlight-3"> sdaX</span> versehen.</p>


		
	</div>
	<div class="divider" id="boot-grub-floppy">
		<h2>Erstellen einer bootfähigen Diskette (Floppy)</h2>

							<p>Um eine bootfähige Diskette zu erstellen, verwendet man am besten die Mittel, die von  <a href="http://www.ultimatebootcd.com/">UBCD (Ultimate Boot Disk CD)</a> bereit gestellt werden.</p>
			
	</div>
	<div class="divider" id="remove-grub">
		<h2>Grub aus dem MBR entfernen</h2>

							<p>Dies ist sehr einfach: als Root</p>
<pre>
lilo -M /dev/hda -s /dev/null
</pre>
							<p>in eine Konsole eingeben.</p>

	</div>
	<div class="divider" id="what-is-grub">
		<h2>GRUB-Bootmanager - was ist das?</h2>
<pre>
<span class="highlight-3">Achtung: Grub für Kernel ab Version 2.6.22 verwendet als Festplattenbezeichnung sdax
und die Zeile
initrd (hd0,x)/sidux/miniroot.gz
wurde geändert zu:
initrd		/boot/initrd.img-2.6.xx.x-slh-smp-x</span>
</pre>
					<h3>Allgemeines</h3>

							<p>Grub ist ein Bootmanager, der geeignet ist, Betriebssysteme von verschiedenen Partitionen zu starten. Grub ist nicht auf Blocklisten zum Finden der Dateien für den Systemstart angewiesen und kann eine ganze Reihe von Dateisystemen direkt lesen: ext2, ext3, reiserfs (Linux), Fat32, Fat16 (Windows), UFS (BSD), Minix und viele andere.</p>

							<p>Grub beherrscht BIOS-Erweiterungen (kann also Partitionen oberhalb der 8  GByte booten!) und kennt keine 1024-Zylindergrenze. Grub ist es ziemlich egal, wo der Kernel liegt, er braucht nur die  Angabe der Partition und den Pfad des zu bootenden Kernels (dies kann auch ein Symlink sein). Nach Änderung der Konfiguration (also der menu.lst) ist kein Programmaufruf wie bei Lilo nötig, die  neue Konfiguration wird beim nächsten Booten eingelesen.</p>

                					<p>sidux verwendet Grub beim Booten von CD, und bei einer Festplatten-Installation wird als Standard Grub verwendet. Grub kann aber auch problemlos nachträglich installiert werden und wird mit  folgendem Befehl aus einer Root-Konsole in den MBR installiert:</p>

<pre>
grub-install --root-directory=/media/hdaX /dev/hdY
</pre>

							<p>/media/hdaX steht hierbei für die schreibend gemountete Partition, auf der im Verzeichnis <i>/boot/grub</i> die benötigten Dateien (stage2, stage1_5xxx) abgelegt werden.<br /> Die Konfigurationsdatei menu.lst muss ebenfalls in diesem Verzeichnis erstellt werden. /dev/hdY ist die Platte, in deren MBR Grub installiert wird, normalerweise /dev/hda.</p>

					<h3>Festplattenbezeichner/Geräte-Namen</h3>

							<p><span class="highlight-2">Zur Beachtung: </span><span class="highlight-3">hda</span> ist ab Kernel 2.6.22 (und höher) obsolet, und <span class="highlight-3">hda</span> muss durch <span class="highlight-3">sda</span> ersetzt werden.</p>

							<p>Grub unterscheidet nicht zwischen SCSI- und IDE-Festplatten. (hd0) ist immer die erste Festplatte, die in der Bootreihenfolge (Einstellung im BIOS) auch die erste ist, egal ob nun IDE oder SCSI. Ungewöhnlich ist die Zählweise, die 1. Partition auf der ersten Festplatte heißt (hd0,0). Die primären Partitionen haben die Ziffernfolge von 0-3 und die logischen Partitionen zählen dann ab 4 aufwärts.</p>

		<table>
			<tbody>
				<tr>
					<th><b>Grub</b></th>
					<th><b>Linux</b></th>
					<th><b>Label</b></th>
				</tr>
				<tr>
					<td>(fd0)</td>
					<td>/dev/fd0</td>
					<td>Floppy (unter Windows)</td>
				</tr>
				<tr>
					<td>(hda0)</td>
					<td>/dev/hda</td>
					<td>erste hd</td>	
				</tr>
				<tr>
					<td>(hd0,0)</td>
					<td>/dev/hda1</td>
					<td>Part.1 auf hd1</td>	
				</tr>
				<tr>
					<td>(hd0,5)</td>
					<td>/dev/hda6</td>
					<td>Erweiterte Part. auf hd 1</td>	
				</tr>
			</tbody>
		</table>
	<div class="spacer05"></div>
							<p>Alle Bezeichnungen für Geräte werden für Grub in Klammern () gesetzt. Man beachte jedoch die Einträge hinter dem Kernel, im Gegensatz zu Grub benötigt der Kernel die Angaben in der für Linux üblichen Art. Die Einträge im folgenden Beispiel zeigen beide auf die gleiche Partition, nämlich die vierte auf der ersten Platte. Der obere Eintrag in der Grub-Schreibweise, der untere in der für Linux typischen Art:</p>
<pre>
root (hd0,3)
kernel          /boot/vmlinuz root=UUID=bf955abf-ce1f-45a3-9ee5-93b5c5dc4fe0 ro quiet vga=791
initrd          /boot/initrd.img
</pre>

					<h3>Befehls-Modus (Grub-Shell)</h3>

							<p>Ein besonders angenehmes Feature von Grub ist der Befehls-Modus. Er	wird mit "<b>c</b>" aufgerufen, es erscheint die Grub-Shell. Damit ist man in der Lage, auch bei einer fehlerhaften menu.lst verschiedene Systeme und Dateien (z. B. den Kernel) zu finden und zu booten.</p>

							<p>Um ein wenig zu testen, kann Grub auch aus einem gebooteten sidux in einer Root-Shell mit <span># grub</span> gestartet werden. In der Grub-Shell kann man sich mit "<b>help</b>" alle verfügbaren Befehle anzeigen lassen. Detaillierte Hilfe zu jedem Befehl gibt es mit "<b>help befehl</b>", zur Linux-Shell kehrt man mit "<b>quit</b>" zurück (die Grub-Shell wird beendet). In der Grub-Shell funktioniert die Tabulatortaste ähnlich wie in der Linux-Shell, das ist eine sehr große Erleichterung. Befehle, Laufwerksbezeichnungen und Dateinamen lassen sich mit der TAB-Taste automatisch vervollständigen.</p>

							<p>Grub bietet hierbei z. B. die Möglichkeit, die Lage des Kernels und der initrd noch vor dem eigentlichen Booten mittels "<b>find</b>" festzustellen, z. B. gibt Grub auf den Befehl</p>
<pre>
find /boot/vmlinuz
</pre>

							<p>die Partitionen aus, die einen Kernel mit dem Namen <i>vmlinuz</i> im Verzeichnis <i>/boot</i> enthalten:</p>

<pre>
(hd0,3) (hd1,0)
</pre>

							<p>Die verfügbaren Partitionen kann man mit dem Befehl "<b>geometry</b>" feststellen, ein</p>

<pre>
geometry (hd0)
</pre>

							<p>zeigt Folgendes:</p>
<pre>
"drive 0x80: C/H/S = 3648/255/63, The number of sectors = 58605120, /dev/hda Partition num: 0,
		Filesystem type is fat, partition type 0xb Partition num: 1,
		Filesystem type is fat, partition type 0xb Partition num: 2,
		Filesystem type is fat, partition type 0xc Partition num: 4,
		Filesystem type is ext2fs, partition type 0x83 Partition num: 5,
		Filesystem type unknown, partition type 0x82 Partition num: 6,
		Filesystem type is fat, partition type 0xb"
</pre>

							<p>Nachdem der Kernel und eine eventuell vorhandene <i>initrd</i> (oder auch <i>miniroot.gz</i>) gefunden wurde, kann mit <b>boot</b> gestartet werden.</p>


					<h3>Edit-Modus</h3>

							<p>Dieser Modus ermöglicht es, die Einträge der Datei <i>menu.lst</i> während des Bootens zu ändern. Dies geht auch, wenn Grub von CD gebootet wird und die Datei schreibgeschützt ist. Dazu muss zuerst die <b>ESC</b>-Taste gedrückt werden. Im Anschluss wird mit <b>Enter</b> bestätigt und die Taste "e" gedrückt. Die Parameter werden dann einfach ans Ende der Zeile geschrieben oder man bewegt sich in der Zeile mit den Cursor-Tasten.</p>

				<h3>menu.lst (Beispiele für mögliche Einträge)</h3>

							<p>Kommentarzeilen werden mit # eingeleitet und stören den Bootvorgang nicht, sie können also in der Datei verbleiben.</p>

<pre>
# Example /boot/grub/menu.lst
################################################
# setkey changes the keyboardlayout to german (as an example)
setkey y z
setkey z y
setkey Y Z
setkey Z Y
setkey equal parenright
setkey parenright parenleft
setkey parenleft asterisk
setkey doublequote at
setkey plus bracketright
setkey minus slash
setkey slash ampersand
setkey ampersand percent
setkey percent caret
setkey underscore question
setkey question underscore
setkey semicolon less
setkey less numbersign
setkey numbersign backslash
setkey colon greater
setkey greater bar
setkey asterisk braceright
# menu.lst - See: grub(8), info grub, update-grub(8)
#            grub-install(8), grub-floppy(8),
#            grub-md5-crypt, /usr/share/doc/grub
#            and /usr/share/doc/grub-doc/.

## default num
# Set the default entry to the entry number NUM. Numbering starts from 0, and
# the entry number 0 is the default if the command is not used.
default		0

## timeout sec
# Set a timeout, in SEC seconds, before automatically booting the default entry
# (normally the first entry defined).
timeout		5

# Pretty colours
color cyan/blue white/blue
gfxmenu (hd0,5)/boot/message

## password ['--md5'] passwd
# If used in the first section of a menu file, disable all interactive editing
# control (menu entry editor and command-line)  and entries protected by the
# command 'lock'
# e.g. password topsecret
#      password --md5 $1$gLhU0/$aW78kHK1QfV3P2b2znUoe/
# password topsecret

#
# examples
#
# title		Windows 95/98/NT/2000
# root		(hd0,0)
# makeactive
# chainloader	+1
#
# title		Linux
# root		(hd0,1)
# kernel	/vmlinuz root=/dev/hda2 ro
#

#
# Put static boot stanzas before and/or after AUTOMAGIC KERNEL LIST

### BEGIN AUTOMAGIC KERNELS LIST
## lines between the AUTOMAGIC KERNELS LIST markers will be modified
## by the debian update-grub script except for the default options below

## DO NOT UNCOMMENT THEM, Just edit them to your needs

## ## Start Default Options ##
## default kernel options
## default kernel options for automagic boot options
## If you want special options for specific kernels use kopt_x_y_z
## where x.y.z is kernel version. Minor versions can be omitted.
## e.g. kopt=root=/dev/hda1 ro
##      kopt_2_6_8=root=/dev/hdc1 ro
##      kopt_2_6_8_2_686=root=/dev/hdc2 ro
# kopt=root=UUID=1885d68b-cc9c-49f8-9f98-a6874e7b3e7e ro  quiet vga=791

## default grub root device
## e.g. groot=(hd0,0)
# groot=(hd0,5)

## should update-grub create alternative automagic boot options
## e.g. alternative=true
##      alternative=false
# alternative=false

## should update-grub lock alternative automagic boot options
## e.g. lockalternative=true
##      lockalternative=false
# lockalternative=false

## additional options to use with the default boot option, but not with the
## alternatives
## e.g. defoptions=vga=791 resume=/dev/hda5
# defoptions=

## should update-grub lock old automagic boot options
## e.g. lockold=false
##      lockold=true
# lockold=false

## Xen hypervisor options to use with the default Xen boot option
# xenhopt=

## Xen Linux kernel options to use with the default Xen boot option
# xenkopt=console=tty0

## altoption boot targets option
## multiple altoptions lines are allowed
## e.g. altoptions=(extra menu suffix) extra boot options
##      altoptions=(single-user) single
# altoptions=(single-user mode) single

## controls how many kernels should be put into the menu.lst
## only counts the first occurence of a kernel, not the
## alternative kernel options
## e.g. howmany=all
##      howmany=7
# howmany=all

## should update-grub create memtest86 boot option
## e.g. memtest86=true
##      memtest86=false
# memtest86=true

## should update-grub adjust the value of the default booted system
## can be true or false
# updatedefaultentry=false

## ## End Default Options ##

title		Debian GNU/Linux, kernel 2.6.22.1-slh-smp-7
root		(hd0,5)
kernel		/boot/vmlinuz-2.6.22.1-slh-smp-7 root=UUID=1885d68b-cc9c-49f8-9f98-a6874e7b3e7e ro  quiet vga=791 
initrd		/boot/initrd.img-2.6.22.1-slh-smp-7

title		Debian GNU/Linux, kernel 2.6.22.1-slh-smp-7 (single-user mode)
root		(hd0,5)
kernel		/boot/vmlinuz-2.6.22.1-slh-smp-7 root=UUID=1885d68b-cc9c-49f8-9f98-a6874e7b3e7e ro  quiet vga=791 single
initrd		/boot/initrd.img-2.6.22.1-slh-smp-7

### END DEBIAN AUTOMAGIC KERNELS LIST

#### MS (TM)
title Windows 2K/XP/2003 (hda1)
chainloader (hd0,0)+1

### ISO boot
title sidux 32bit from gaiaISO
kernel (hd0,3)/sidux3/vmlinuz-2.6.22.1-slh-smp-7 boot=fll quiet vga=791 fromiso=/sidux3/siduxgaia.iso
initrd (hd0,3)/sidux3/initrd.img-2.6.22.1-slh-smp-7


title Debian GNU/Linux, kernel 2.6.18-1-686 (hda5)
root (hd0,4)
kernel (hd0,4)/boot/vmlinuz-2.6.18-1-686 root=/dev/hda5 ro vga=791
initrd (hd0,4)/boot/initrd.img-2.6.18-1-686
savedefault
</pre>

	</div>
	<div class="divider" id="dual-boot">
			<h2>Mehrere Systeme in Grub eintragen (Dual- und Multi-Boot)</h2>
<pre>
<span class="highlight-3">Achtung: Grub für Kernel ab Version 2.6.22 verwendet als Festplattenbezeichnung sdax
und die Zeile
initrd (hd0,x)/sidux/miniroot.gz
wurde geändert zu:
initrd (hd0,x)/sidux/initrd.img-2.6.22.x-slh-smp-x</span>
</pre>
							<p>Mit Hilfe von "chainloading" ist es sehr einfach, das Grub-Auswahlmenü mit anderen Betriebssystemen zu erweitern. Wenn man zum Beispiel die Möglichkeit haben möchte, die Systeme MS Windows (TM) und Debian Etch zusammen mit einer sidux 'fromiso'-Installation zu starten, muss man Grub nur ein wenig anpassen. Hierzu öffnet man die Datei <span class="highlight-3">/boot/grub/menu.lst </span>als Root mit einem Editor und fügt die folgenden Zeilen nach dem Hinweis <span class="highlight-3">### END DEBIAN AUTOMAGIC KERNELS LIST</span> hinzu:</p>


<pre>
####MS Windows Vista (TM)
Title Windows Vista
rootnoverify (hd0,1)
makeactive
chainloader +1

### Debian Etch
title Debian Etch
kernel (hd0,3)/debian/vmlinuz root=/dev/hda4 ro	(Oder was auch immer)
initrd (hd0,3)/debian/miniroot.gz		(hier stehen soll)

### ISO boot
title sidux 32bit from gaiaISO
kernel (hd0,3)/sidux3/vmlinuz-2.6.22.1-slh-smp-7 boot=fll quiet vga=791 fromiso=/sidux3/siduxgaia.iso
initrd (hd0,3)/sidux3/initrd.img-2.6.22.1-slh-smp-7
</pre>


		<h3>Von sekundärer Platte booten (z. B. mehrere Windows-Installationen)</h3>

							<p>Manche Leute brauchen/wollen mehrere Windows-Installationen. Windows will aber immer von der 1. Platte starten. Wir müssen also eine Partition verstecken und eine andere aktivieren. Die folgenden Befehle sollte man in der GRUB-Befehlszeile eingeben und bei Erfolg in die menu.lst eintragen. Das sollte dann für jede Windows-Partition geschehen. Backup nicht vergessen!</p>

<pre>
hide (hd0,0) # versteckt Partition 1 der Platte 1
unhide (hd0,1) # macht Partition 2 der Platte 1 sichtbar
rootnoverify (hd0,1) # macht Partition 2 der Platte 1 zum Root-FS 
makeactive # macht Partition 2 der Platte 1 aktiv
chainloader +1 # zeigt auf den ersten Sektor der Start-Partition
boot # bootet das Betriebssystem
</pre>

							<p>Wenn man von Platte 2 ein zweites Windows starten will, vertauscht man virtuell Platte 1 und 2. Dadurch wird Windows eine erste Platte vorgetäuscht:</p>

<pre>
map (hd0) (hd1)
map (hd1) (hd0)
</pre>


				<h3>Stolperfallen</h3>

							<p>Grub kennt zwar keine 1024 Zylindergrenze und kann Systeme oberhalb von 1024 Zylindern booten, <b>aber</b> /boot/grub/stage2 muss durch das Bios erreichbar sein (also davor liegen). stage2 darf nach der Installation weder verschoben noch in seiner Lage verändert werden (z. B. könnte Defrag sowas versuchen). Die Setup-Daten würden nicht mehr stimmen. Es ist daher sinnvoll, stage2 mit einem Schreibschutz zu versehen (man muss sich im aktuellen Verzeichnis befinden):</p>
<pre>
Dos: attrib +r +s stage2
LINUX: # chmod a -w ./stage2
</pre>


					<h3>Wo kann man mehr erfahren?</h3>



							<p>Umfangreiche Informationen gibt es in der <a href="http://www.gnu.org/software/grub/grub-faq.de.html">offiziellen FAQ zu Grub</a>.</p>

							<p>Sofern man eine unterstützte Netzwerkkarte besitzt, kann Grub auch über das Netzwerk booten. Eine entsprechende <a href="http://os.inf.tu-dresden.de/%7Efm3/grub.html">Boot-Disk kann man sich hier</a> erstellen lassen und anschließend downloaden (allerdings mit einer älteren Version von Grub).</p>
		
	</div>
	<div id="rev">Content last revised 13/09/2008 1200 UTC</div>

</div>
</body>
</html>
