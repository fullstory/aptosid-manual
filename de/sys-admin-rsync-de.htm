<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
   "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
	<title>sidux Manuals - RSYNC</title>
	<meta http-equiv="content-type" content="text/html; charset=utf-8" />
	<style type="text/css" media="all">@import url("../lib/css-js/content.css");</style>
	<style type="text/css" media="all">@import url("../lib/css-js/menu.css");</style>
	<style type="text/css" media="print">@import url("../lib/css-js/print.css");</style>
	<link rel ="shortcut icon" href="../lib/favicon/manual.ico" />
	<script type="text/javascript" src="../lib/css-js/menu2.js"></script>
</head>
<body id="welcome">
<div id="menu"> <!-- menu starts here -->
<!--Welcome to the Official sidux-manual 01.05-2007-05-22 de lang maintainer hubi-->
<!-- menu last updated by bluewater 22/05/2007 1400rs AEST 22/05/2007 0400hrs UTC -->
<img src="../lib/logos/sidux-logo.png" alt="logo" id="menu-header" />
	<ul id="top-list">
		<li><a href="http://sidux.com/">Zur&#252;ck zum sidux Hauptmen&#252;</a></li>
	</ul>
	<div id="flags-2">
			<a href="../flag-index.html"><img src="../lib/logos/sidux-lang-50.png" title="W&#228;hlen Sie eine andere Sprache" alt="lang-switch" /></a>
	</div>
	<ul>
		<li  onmouseover="showHide( 1 );" onmouseout="startTime();" ><a href="welcome-de.htm">Willkommen bei sidux</a>
			<ul class="sub-menu" id="sm1">
				<li><a href="welcome-de.htm#welcome-gen">Offizielles Handbuch</a></li>
				<li><a href="welcome-de.htm#how-to">Tipps zum Handbuch</a></li>
				<li><a href="welcome-de.htm#table-contents">Index</a></li>
				<li><a href="help-de.htm#help-gen">Wo es Hilfe gibt</a></li>
				<li><a href="credits-de.htm#cred-team">Danksagung</a></li>
			</ul>
		</li>
		<li  onmouseover="showHide( 2 );" onmouseout="startTime();" ><a href="cd-content-de.htm">CD-Inhalt</a>
			<ul class="sub-menu" id="sm2">
				<li><a href="cd-content-de.htm#cd-content">CD-Inhalt</a></li>
			</ul>
		</li>
		<li  onmouseover="showHide( 6 );" onmouseout="startTime();" ><a href="cd-dl-burning-de.htm">CD Herunterladen &amp; Brennen</a>
			<ul class="sub-menu" id="sm6">
				<li><a href="cd-dl-burning-de.htm#download-sidux">CD Herunterladen &amp; Brennen</a></li>
				<li><a href="cd-dl-burning-de.htm#md5">md5 Pr&#252;fsummen</a></li>
				<li><a href="cd-dl-burning-de.htm#burn-nero">Brennen in Windows</a></li>
				<li><a href="cd-dl-burning-de.htm#burn-linux">Brennen in Linux</a></li>
				<li><a href="cd-dl-burning-de.htm#xdelta">xdelta-Patches</a></li>
				<li><a href="cd-no-gui-burn-de.htm#burning-no-gui">Brennen ohne GUI</a></li>
			</ul>
		</li>
		<li  onmouseover="showHide( 4 );" onmouseout="startTime();" ><a href="live-mode-de.htm">Live-CD-Modus</a>
			<ul class="sub-menu" id="sm4">
				<li><a href="live-mode-de.htm#rootpw">Das Rootpasswort der sidux-Live-CD</a></li>
				<li><a href="live-mode-de.htm#live-cd-installsoft">Installieren von Software w&#228;hrend einer Live-CD Sitzung</a></li>
				<li><a href="live-mode-de.htm#ntfs-3g">Schreiben auf NTFS-Partitionen mit ntfs-3g</a></li>
			</ul>
		</li>
		<li  onmouseover="showHide( 9 );" onmouseout="startTime();" ><a href="term-konsole-de.htm">Das Terminal / Die Konsole</a>
			<ul class="sub-menu" id="sm9">
				<li><a href="term-konsole-de.htm#term-kon"> Terminal/Konsole</a></li>
				<li><a href="term-konsole-de.htm#cli-help">Kommadozeilenhilfe</a></li>
				<li><a href="term-konsole-de.htm#shell-scripts">Installation von Shellskripten</a></li>
			</ul>
		</li>
		<li  onmouseover="showHide( 7 );" onmouseout="startTime();" ><a href="cheatcodes-de.htm">Boot-Cheatcodes</a>
			<ul class="sub-menu" id="sm7">
				<li><a href="cheatcodes-de.htm#cheatcodes">Cheatcodes</a></li>
				<li><a href="cheatcodes-vga-de.htm#vga">VGA-Codes</a></li>
			</ul>
		</li>
		<li  onmouseover="showHide( 5 );" onmouseout="startTime();" ><a href="part-gparted-de.htm">Partitionieren der Festplatte</a>
			<ul class="sub-menu" id="sm5">
				<li><a href="part-gparted-de.htm#partition">mit GParted</a></li>
				<li><a href="part-gparted-de.htm#ntfs">NTFS-Partitionen mit GParted &#228;ndern</a></li>
				<li><a href="part-uuid-de.htm#uuid">Re-building fstab</a></li>
				<li><a href="part-uuid-de.htm#uuid">UUID, Partitionsbezeichnung und fstab</a></li>
				<li><a href="part-cfdisk-de.htm#partition">mit cfdisk</a></li>
				<li><a href="part-cfdisk-de.htm#formating">Formatieren mit cfdisk</a></li>
				<li><a href="part-size-examp-de.htm#part-example">Partitionsgr&#246;&#223;en: Beispiele</a></li>
			</ul>
		</li>
		<li  onmouseover="showHide( 8 );" onmouseout="startTime();" ><a href="hd-install-de.htm">Installationsoptionen</a>
			<ul class="sub-menu" id="sm8">
				<li><a href="hd-install-de.htm#Inst-prep">Vorbereiten der Installation</a></li>
				<li><a href="hd-install-de.htm#Installation">Installation auf die Festplatte</a></li>
				<li><a href="hd-install-de.htm#first-hd-boot">Erstes Booten von der Festplatte</a></li>
				<li><a href="hd-install-opts-de.htm#fromiso">Booten 'fromiso'</a></li>
				<li><a href="hd-install-opts-de.htm#usb-hd">Installation auf eine USB-Festplatte</a></li>
				<li><a href="hd-install-opts-de.htm#qemu">Installation &#252;ber qemu</a></li>
			</ul>
		</li>
		<li  onmouseover="showHide( 10 );" onmouseout="startTime();" ><a href="hw-dev-hw-dri-de.htm">Graphikkarten, Hardware, Ger&#228;te und Treiber</a>
			<ul class="sub-menu" id="sm10">
				<li><a href="hw-dev-hw-dri-de.htm#hd-ntfs3g">Schreiben auf NTFS-Partitionen mit ntfs-3g</a></li>
				<li><a href="hw-dev-hw-dri-de.htm#mon-res">Bildschirmaufl&#246;sung und Monitoreinstellungen</a></li>
				<li><a href="hw-dev-hw-dri-de.htm#nvidia-3d">nVidia 3D</a></li>
				<li><a href="hw-dev-hw-dri-de.htm#ati-3d">ATI 3D</a></li>
				<li><a href="hw-dev-hw-dri-de.htm#native-nv">Natives nv</a></li>
				<li><a href="hw-dev-hw-dri-de.htm#native-ati">Natives ati</a></li>
				<li><a href="hw-dev-hw-dri-de.htm#non-free">Hardware mit propriet&#228;ren Anforderungen</a></li>
			</ul>
		</li>
		<li  onmouseover="showHide( 12 );" onmouseout="startTime();" ><a href="wm-kde-de.htm">Fenstermanager</a>
			<ul class="sub-menu" id="sm12">
				<li><a href="wm-kde-de.htm#desk-freeze">KDE-Desktop friert ein</a></li>
				<li><a href="wm-kde-de.htm#kde-login">Kein Login in KDE</a></li>
				<li><a href="wm-kde-de.htm#ch-th">Themes &#228;ndern</a></li>
			</ul>
		</li>
		<li  onmouseover="showHide( 14 );" onmouseout="startTime();" ><a href="lamp-apache-de.htm">sidux LAMP-Stack</a>
			<ul class="sub-menu" id="sm14">
				<li><a href="lamp-apache-de.htm#serv-apache">sidux LAMP-Paket</a></li>
				<li><a href="lamp-apache-de.htm#serv-ftp">FTP-Clients</a></li>
				<li><a href="lamp-apache-de.htm#serv-sec">Sichere Protokolle</a></li>
				<li><a href="lamp-apache-de.htm#serv-ssl">SSL</a></li>
				<li><a href="lamp-sql-de.htm#serv-mysql">MySQL-Setup</a></li>
				<li><a href="lamp-ppp-de.htm#serv-php">PHP in Apache</a></li>
			</ul>
		</li>
		<li  onmouseover="showHide( 3 );" onmouseout="startTime();" ><a href="internet-connecting-de.htm">Internet und Netzwerk</a>
			<ul class="sub-menu" id="sm3">
				<li><a href="ntp-server-de.htm#ntp-server">Zeitserver-Setup</a></li>
				<li><a href="internet-connecting-de.htm#firewalls">Mini-Firewall</a></li>
				<li><a href="ssh-de.htm#ssh-fs">SSH:Einbindung eines entfernten Computers</a></li>
				<li><a href="ssh-de.htm#ssh-x">X-Window-Programme via SSH verwenden</a></li>
				<li><a href="ssh-de.htm#ssh-f">SSH: GUI mit Konqueror</a></li>
				<li><a href="ssh-de.htm#ssh-w">SSH: X-Forwarding von Windows</a></li>
				<li><a href="ssh-de.htm#ssh">SSH: Sicherheit</a></li>
				<li><a href="samba-de.htm#configure">SAMBA: Windows-Freigaben nutzen</a></li>
				<li><a href="samba-de.htm#setup">Samba-Server aufsetzen</a></li>
				<li><a href="internet-connecting-de.htm#dial-mod">56k-Modems</a></li>
				<li><a href="internet-connecting-de.htm#ndiswrapper">Ndiswrapper</a></li>
				<li><a href="internet-connecting-wpa-de.htm#wpa">WIFI - WLAN</a></li>
				<li><a href="internet-connecting-de.htm#internetsharing">Internet teilen</a></li>
				<li><a href="internet-connecting-de.htm#netcardconfig">Internet &amp; Netzwerk</a></li>
			</ul>
		</li>
		<li  onmouseover="showHide( 11 );" onmouseout="startTime();" ><a href="sys-admin-apt-de.htm">Systemadministration</a>
			<ul class="sub-menu" id="sm11">
				<li><a href="sys-admin-apt-de.htm#apt-cook">APT-Kochbuch, sources.list</a></li>
				<li><a href="sys-admin-meta-de.htm#meta-pack">Meta-Pakete installieren</a></li>
				<li><a href="sys-admin-meta-de.htm#meta-proxy">Meta installieren und Proxies</a></li>
				<li><a href="sys-admin-apt-de.htm#apt-install">Neue Pakete installieren</a></li>
				<li><a href="sys-admin-apt-de.htm#apt-delete">Pakete l&#246;schen</a></li>
				<li><a href="sys-admin-apt-de.htm#apt-downgrade">Downgraden eines Pakets</a></li>
				<li><a href="sys-admin-apt-de.htm#apt-upgrade">Upgrade eines installierten Systems</a></li>
				<li><a href="sys-admin-upgrade-de.htm#live-cd-upgrade">Upgrade durch die Live-CD</a></li>
				<li><a href="sys-admin-kern-upg-de.htm#kern-upgrade">Upgrade des Kernels</a></li>
				<li><a href="sys-admin-rdiff-de.htm#rdiff">Backup mit rdiff</a></li>
				<li><a href="sys-admin-rsync-de.htm#rsync">Backup mit rsync</a></li>
				<li><a href="vir-rkits-de.htm#virus-rkits">Virus- und Rootkitscanner</a></li>
				<li><a href="sys-admin-gen-de.htm#start-services">Einen Dienst in sidux starten</a></li>
				<li><a href="sys-admin-gen-de.htm#pw-lost">Rootpasswort vergessen</a></li>
				<li><a href="sys-admin-gen-de.htm#fonts">Schriftarten</a></li>
				<li><a href="sys-admin-grub-bootman2-de.htm#mbr-grub-boot">MBR-Bootsektor &#252;berschrieben</a></li>
				<li><a href="sys-admin-grub-bootman2-de.htm#boot-grub-floppy">Eine Boot-Floppy erstellen</a></li>
				<li><a href="sys-admin-grub-bootman2-de.htm#remove-grub">Grub aus MBR entfernen</a></li>
				<li><a href="sys-admin-grub-bootman2-de.htm#what-is-grub">Grub: der Bootmanager</a></li>
			</ul>
		</li>
	</ul>
<!-- menu ends here --> </div>
<div id="main-page">
	<div class="divider" id="rsync">
			<h2 id="top-header">Backup mit rsync</h2>
				<p>Im folgenden Abschnitt stellen wir rsync vor, was f&#252;r M&#246;glichkeiten mit diesem Programm gegeben sind und einige Beispiele, wie man rsync f&#252;r ein eigenes Backup-Skript verwenden kann.</p>

				<p>rsync ist ein einfach zu bedienendes Programm zum schnellen Erstellen von Backups von Verzeichnissen und Dateien. Es zeichnet sich durch ein intelligentes Verfahren aus, womit ge&#228;nderte Dateien erkannt werden, sodass nur diese f&#252;r den Kopiervorgang ausgew&#228;hlt werden.</p>

				<p>rsync kann weiters einen Komprimierungsalgorithmus verwenden, womit der Kopiervorgang beschleunigt wird. Dieser muss jedoch durch die Option -z explizit gesetzt werden, dessen Vewendung von unserer Seite jedoch sehr empfohlen ist. rsync ermittelt dabei ge&#228;nderte Dateien und Verzeichnisse anhand von Attributen wie Gr&#246;&#223;e oder Datum/Zeitpunkt, wodurch es sehr schnell selektieren kann.</p>

				<p>Nach Auswahl der Verzeichnis- und Dateiliste ist wegen eines Komprimierungsverfahrens auch der Kopiervorgang schneller im Vergleich zu einem traditionellen Kopiervorgang. rsync komprimiert die Daten vor dem Kopiervorgang und entpackt sie am Zielort.</p>

				<p>rsync kann Daten kopieren von:<br />
				* lokalen System zu einem lokalen System,<br />
 				* lokalen System zu einem enfernten (remote) System,<br />
				* von einem entfernten (remote) System zu einem lokalen System.</p>
				<p>Dabei wird entweder der <a href="ssh-de.htm">ssh</a>-Client (Grundeinstellung) oder ein rsync-daemon, der auf Quell- und Zielsystem l&#228;uft, benutzt. Die manpages f&#252;r rsync besagen, wenn Systeme mit ssh verbunden werden k&#246;nnen, kann rsync auch ssh nutzen.</p>

				<p class="highlight-3">Eine Beschr&#228;nkung von rsync ist, dass Daten NICHT zwischen zwei entfernten (remote) Systemen kopiert werden k&#246;nnen. Der Workaround w&#228;re, dass die Daten eines entfernten System auf den lokalen Rechner kopiert werden m&#252;ssen, um dann mit rsync die Daten des zweiten entfernten Rechner abgleichen zu k&#246;nnen.</p>

				<p>Um dies zu verdeutlichen, gehen wir im folgenden Beispiel von drei Rechnern aus:</p>
<pre>
neo – das lokale System
morpheus – ein entferntes System
trinity – ein entferntes System
</pre>
				<p>Jeder User hat einen anderen Nutzernamen, und rsync l&#228;uft ausschlie&#223;lich auf neo, dem lokalen System:</p>
<pre>
Nutzername auf neo ist cuddles,
Nutzername auf morpheus ist tartie,
Nutzername auf trinity ist taylar.
</pre>
				<p>Ziel ist der Abgleich der Verzeichnisse/home/$user/Daten:</p>

<pre>
neo: /home/cuddles/Daten nach morpheus und trinity,
morpheus: /home/tartie/Daten nach neo und trinity,
trinity: /home/taylar/Daten nach neo und morpheus.
</pre>

				<p>Nun steht man vor dem Problem, dass rsync nicht zwischen zwei entfernten Rechnern eingesetzt werden kann:</p>

				
<pre>
neo --> morpheus – ok, von lokal nach entfernt
neo --> trinity – ok, von lokal nach entfernt
morpheus --> neo – ok, von entfernt nach lokal
trinity --> neo – ok, von entfernt nach lokal
morpheus --> trinity – geht nicht, von entfernt nach entfernt
trinity --> morpheus – geht nicht, von entfernt nach entfernt
</pre>
				<p>Um diese Beschr&#228;nkung aufzul&#246;sen, muss die Verfahrensweise wie folgt angepasst werden:</p>
<pre>
morpheus --> trinity – wird zu: morpheus --> neo &amp; neo --> trinity
trinity --> morpheus – wird zu: trinity --> neo &amp; neo --> morpheus
</pre>
				<p>Dieser zus&#228;tzliche Schritt &#228;ndert nichts am Endresultat, welches erreicht werden soll. Dennoch sei darauf hingewiesen:</p>

				<p class="highlight-3">Diese Beschr&#228;nkung von rsync muss bei der Planung eines Backup-Prozesses bedacht werden.</p>

				<h5>Verwendung von Hostnamen mit Hostnamen in rsync.</h5>

				<p>Die Verwendung der IP-Adressen von neo, morpheus, und trinity kann den Kopiervorgang transparenter und daher einfacher gestalten.</p>

				<p>Dazu m&#252;ssen /etc/hosts editiert und die Hostnamen wie die dazu geh&#246;rigen IP-Adressen eingef&#252;gt werden. So hat /etc/hosts in unserem Beispiel auszusehen:</p>
<pre>
192.168.1.15	 neo
192.168.1.16	 morpheus
192.168.1.17	 trinity
</pre>
				<p>Die erste Zeile &#252;bersetzt die IP-Adresse 192.168.1.15 mit “neo”, die zweite 192.168.1.16 mit “morpheus” und die dritte 192.168.1.17 mit “trinity”. Nach Abspeicherung kann der Hostname zus&#228;tzlich anstelle der IP-Adresse verwendet werden. Ganz besonders praktisch ist dieses Verfahren, wenn die zugeordneten IP-Adressen ge&#228;ndert werden, zum Beispiel bei "neo" von 192.168.1.15 auf 192.168.1.25</p>

				<p>Besonders erleichtert dies die Arbeit mit Skripten, da diese im Falle einer &#196;nderung der IP-Adressen nicht angepasst werden m&#252;ssen, sondern nur ddie Datei /etc/hosts. Auch sind Skripte auf Basis der "Hostnamen-Methode" transparenter gestaltet.</p>

				<h4>Zwei M&#246;glichkeiten, rsync zu nutzen.</h4>

				<p>Eine M&#246;glichkeit ist, die Daten ins Ziel zu <b>“schieben (push)”</b> die andere, die Daten von der Quelle zu <b>“ziehen (pull)”</b>. Jede Methode hat seine Vor- und Nachteile, welche jetzt erkl&#228;rt werden, wobei in unserem Beispiel ein lokales und ein entferntes System verwendet werden, um die Terminologie deutlicher erkl&#228;ren zu k&#246;nnen.</p>

				<p><b>“push”</b> - das lokale System tr&#228;gt die Quellverzeichnisse und Quelldateien, Ziel ist das entfernte System. Der Befehl rsync wird auf dem lokalen System gestartet und “schiebt” die Daten ins Zielsystem.</p>

				<p>Vorteile:<br />
				* Mehr als ein System kann auf dem Zielsystem sein Backup haben.<br />
				* Der Backup-Prozess kann &#252;ber das gesamte System verteilt werden.<br />
				* Wenn ein System schneller den Backupvorgang beendet, kann es die Ressourcen f&#252;r andere Aufgaben nutzen.</p>

				<p>Nachteile:<br />
				* Wenn ein Skript &#252;ber eine Zeitsteuerung (cron) genutzt wird, m&#252;ssen verschiedene crontabs auf jedem System erstellt werden. Bei Modifikation des Skriptes muss jedes Skript auf jedem System ge&#228;ndert werden, bei &#196;nderungen des Zeitplans muss jede crontab auf jedem Rechner ge&#228;ndert werden. Dadurch wird eine administrative Wartung sehr komplex und un&#252;bersichtlich.<br />
				* Der Backupprozess kann nicht pr&#252;fen, ob das Zielsystem die Zielpartiton eingebunden hat. Wenn diese nicht eingebunden ist, wird kein Backup erstellt.</p>

				<p><b>“pull”</b> - das entfernte System tr&#228;gt die Quellverzeichnisse und Quelldateien, Ziel ist das lokale System. Der Befehl rsync wird auf dem lokalen System gestartet und “zieht” die Daten aus dem Quellsystem.</p>

				<p>Vorteile:<br />
				* Ein System wird zum Server, welcher alle Backupprozesse aller anderen Systeme steuert. Die Backupprozesse werden zentralisiert.<br />
				* Bei Verwendung eines Skripts, muss sich dieses nur auf einem System befinden, was Modifikationen sehr einfach gestaltet. Bei &#196;nderung des Zeitplans muss nur eine crontab ge&#228;ndert werden.<br />
				* Das Skript kann pr&#252;fen, ob die Zielpartition eingebunden ist und gegebenenfalls diese einbinden.</p>

				<h5>Syntax von rsync (Auszug aus "man rsync"):</h5>
<pre>
       rsync [OPTION]... SRC [SRC]... DEST

       rsync [OPTION]... SRC [SRC]... [USER@]HOST:DEST

       rsync [OPTION]... SRC [SRC]... [USER@]HOST::DEST

       rsync [OPTION]... SRC [SRC]... rsync://[USER@]HOST[:PORT]/DEST

       rsync [OPTION]... SRC

       rsync [OPTION]... [USER@]HOST:SRC [DEST]

       rsync [OPTION]... [USER@]HOST::SRC [DEST]

       rsync [OPTION]... rsync://[USER@]HOST[:PORT]/SRC [DEST]
</pre>
				<h5>Arbeitsbeispiele von Befehlen mit rsync:</h5>
<pre>
rsync -agEvz --delete-after --exclude=”*~” "morpheus:/home/tartie" "/media/hda7/SysBackups/morpheus/home"
</pre>
				<p>Erkl&#228;rung der einzelnen Bestandteile dieses Befehls:</p>
<pre>
Die Quelle Pfad/Datei ist: “morpheus:/home/tartie”,
das Ziel ist: “/media/hda7/SysBackups/morpheus/home”
</pre>
				<p>Das Verzeichnis /home/tartie (inklusive Unterverzeichnisse) wird in /media/hda7/SysBackups/morpheus/home gesichert, was nach dem rsync so aussieht:</p>
<pre>
“/media/hda7/SysBackups/morpheus/home/tartie”
</pre>
				<p>Die &#252;bergeordnete Verzeichnisstruktur wird nicht &#252;bernommen, der ZIELORT bestimmt die Einbindung in das Zielsystem, nicht die Verzeichnisstruktur der Quelle. Darum kann /tartie sich in /home befinden. Die "Quelle" w&#228;hlt nur, woher die Daten kommen, nicht wohin sie transferiert werden. Das “Ziel” befiehlt rsync, wohin die Daten aus der "Quelle" kopiert werden sollen. Hier ein Beispiel:</p>
<pre>
rsync [...] “/home/user/data/files” “/media/hda7/SysBackups/neo”
</pre>
				<p>Hier werden nur das Quellverzeichnis /files und alle sich darin befindlichen Verzeichnisse und Dateien in den Zielordner /neo kopiert – und nicht die komplette Verzeichnisstruktur /media/hda7/SysBackups/neo/home/user/data/files</p>

				<p>Dies sollte bei Erstellung von Backupbefehlen mit rsync beachtet werden.</p>

				<h5>Erkl&#228;rung der Optionen (Roh&#252;bersetzung aus dem englischsprachigen "man rsync"):</h5>
<pre>
-a Archiv-Modus. Die manpage dazu: “einfach gesagt, eine Methode, um ein rekursives Backup zu erstellen und beinahe alle Attribute zu bewahren. Nicht bewahrt werden Hardlinks aufgrund der Komplexit&#228;t des Verfahrens. Die Option -a entspricht: -rlptgoD, was dies bedeutet:
  -r = rekursiv – Unterverzeichnisse und darin befindliche Dateien aus dem "Quellort".
  -l = Links – symlinks werden am Zielort wieder hergestellt.
  -p = Berechtigungen – die Berechtigungen sind identisch mit jenen am Quellort.
  -t = Zeitstempel – der Zeitstempel ist identisch mit jenem am Quellort.
  -q = quiet – minimale R&#252;ckmeldung. Mehr R&#252;ckmeldungen erh&#228;lt man mit der Option -v right nach der Option -a. Abl&#228;ufe ohne jegliche R&#252;ckmeldung werden ohne Setzung der Option -v erreicht.
  -o = Besitzer – wenn rsync als Root durchgef&#252;hrt wird, bleiben die Besitzer entsprechend der Quelldateien erhalten.
-D = entspricht diesen beiden Befehlen: --devices --specials
 --devices = Zeichen- und Blockger&#228;tdateien werden ins entfernte System Kopiert, um wiederhergestellt zu werden. Zu beachten ist, dass ohne die Option --super die Option --devices nicht arbeitet.
 --specials = rsync kopiert spezielle Dateien wie sockets und fifos.
-g: die Gruppen bleiben entsprechend der Quelldateien erhalten.
-E: das Attribut “ausf&#252;hrbar” bleibt erhalten.
-v: f&#252;r eine umfassende R&#252;ckmeldung. Wenn der Kopiervorgang bekannt ist, kann diese Option entfernt werden. Wenn jedoch beobachtet werden soll, was durchgef&#252;hrt werden soll, ist diese Option sehr n&#252;tzlich.
-z: zu kopierende Daten werden komprimiert, was den Kopiervorgang beschleunigt, da die transferierte Datenmenge geringer ist.
--delete-after = Zielverzeichnisse oder Zieldateien, die in der Quelle nicht mehr vorhanden sind, werden nach dem Transfer gel&#246;scht, nicht vor dem Transfer. “after” wird im Falle von Problemen oder eines Absturzes verwendet, "delete” verhindert, dass nicht mehr ben&#246;tigte Dateien und Verzeichnisse am Zielort Platz verschwenden.
--exclude = mit dieser Option werden Dateien oder Verzeichnisse vom Kopiervorgang ausgeschlossen. Im Beispiel, --exclude=“*~” w&#252;rden ALLE Dateien mit der Endung “~” vom Backupvorgang ausgeschlossen. Mit einer Option --exclude kann nur ein Muster &#252;bergeben werden, bei mehreren Ausschlie&#223;ungsmustern m&#252;ssen mehrere Optionen --exclude gesetzt werden.
</pre>
				<h5>Weitere n&#252;tzliche Befehlsoptionen:</h5>
<pre>
-c – f&#252;hrt weitere Vergleichspr&#252;fungen durch, was jedoch mehr Zeit beansprucht. Da rsync bereits Vergleichspr&#252;fungen durchf&#252;hrt, wurde dieser Befehl nicht in -a integriert, um den Zeitaufwand durch eine redundante Option nicht zu erh&#246;hen. Diese Option wird im Regelfall nicht ben&#246;tigt.
--super – das Zielsystem versucht Super-User- (Root-)Aktivit&#228;ten durchzuf&#252;hren (siehe manpage)
--dry-run – Testlauf: zeigt, was kopiert w&#252;rde. Keine Dateien werden kopiert.
</pre>
				<p>Die letzten beiden Elemente unseres Befehls sind das Quellverzeichnis und schlie&#223;lich das Zielverzeichnis.</p>

				<h5>Beispielsbefehle:</h5>
<pre>
rsync -agEvz --delete-after --exclude=”*~” "morpheus:/home/tartie" "/media/hda7/SysBackups/morpheus/home"
</pre>
				<p>Dieser Befehl kopiert alle Verzeichnisse und Dateien unterhalb von /home/tartie auf das System “morpheus” und platziert diese in das Verzeichnis /media/hda7/SysBackups/morpheus/home. Die Verzeichnisstruktur von tartie bleibt erhalten.</p>
<pre>
rsync -agEvz --delete-after --exclude=”*~” "/home/tartie" "neo:/media/hda7/SysBackups/morpheus/home"
</pre>
				<p>Dies ist der umgekehrte Befehl des ersten Beispiels. Er "schiebt" das Verzeichnis /home/tartie und seinen Inhalt in das angegebene Verzeichnis des Systems "neo" – beachtet muss werden, dass ein System als "entfernt (remote)" angesehen wird, wenn ein Doppelpunkt “:” vor dem Pfad gesetzt wird.</p>
<pre>
rsync -agEvz --delete-after --exclude=”*~” "/home/cuddles" "/media/hda7/SysBackups/neo/home"
</pre>
				<p>Dies ist ein Backupvorgang auf dem lokalen Rechner. Zu beachten ist, dass hier kein Doppelpunkt gesetzt ist. Das lokale Verzeichnis /home/cuddles wird nach /media/hda7/SysBackups/neo/home auf dem selben lokalen Rechner kopiert.</p>

				<h5>rsync mit mehrfachen Optionen --exclude:</h5>
<pre>
rsync -agEvz --delete-after --exclude=”*~” --exclude=”*.c” --exclude=”*.o” "/*" "/media/hda7/SysBackups/neo"
</pre>
				<p>Dieser Befehl kopiert ALLES aus dem Root-Verzeichnis des lokalen Systems (alle Verzeichnisse und Dateien) nach /media/hda7/SysBackups/neo – ausgeschlossen davon sind alle Dateien und Verzeichnisse, die auf “~”, “.c” oder “.o” enden.</p>

				<h5>Ersetzung von Hostnamen mit der IP-Adresse:</h5>

				<p>Der erste Befehl ist mit der Hostnamen-Methode gesetzt, der zweite mit der IP-Adressen-Methode. Beide Befehle sind in ihrer Ausf&#252;hrung identisch:</p>
<pre>
rsync -agEvz --delete-after --exclude=”*~” "morpheus:/home/tartie" "/media/hda7/SysBackups/morpheus/home"
</pre>
<pre>
rsync -agEvz --delete-after --exclude=”*~” "192.168.1.16:/home/tartie" "/media/hda7/SysBackups/morpheus/home"
</pre>
				<p>Die Hostnamen-Methode muss nicht angewendet werden, aber unserer Meinung nach vereinfacht sie Backups mit rsync in Netzwerken.</p>

				<h5 class="highlight-2">Ein unm&#246;glicher Befehl:</h5>
<pre>
rsync -agEvz --delete-after --exclude=”*~” "morpheus:/home/tartie" "trinity:/home"
</pre>
				
				<p class="highlight-2">Wie gesagt, eine Einschr&#228;nkung von rsync ist, dass der Befehl nicht zwischen zwei entfernten Rechnern kopieren kann. Darauf m&#246;chten wir am Ende dieses Abschnitts noch einmal explizit hingewiesen haben.</p>

				<p>Wir hoffen, mit dieser kleinen Anleitung Anregungen zum eigenen, produktiven Gebrauch von rsync als hoch anpassungsf&#228;higem Backupprogramm gegeben zu haben.</p>
	</div>
			<div id="rev">Page last revised 08/02/2007 0900 UTC</div>


</div>
</body>
</html>
