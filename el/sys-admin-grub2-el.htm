<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
   "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
	<title>sidux Manuals - Grub2</title>
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
	<style type="text/css" media="all">@import url("../lib/css-js/content.css");</style>
        <style type="text/css" media="all">@import url("../lib/css-js/menu.css");</style>
        <style type="text/css" media="print">@import url("../lib/css-js/print.css");</style>
        <link rel ="shortcut icon" href="../lib/favicon/manual.ico" />
        <script type="text/javascript" src="../lib/css-js/menu2.js"></script>
        <!--[if lt IE 8]>
        <link rel="stylesheet" type="text/css" href="../lib/css-js/ie_5-7_override.css">
        <![endif]-->
        <!--[if lt IE 7]>
        <link rel="stylesheet" type="text/css" href="../lib/css-js/ie_5-6_override.css">
        <![endif]-->
</head>
<body>
<!-- Last translation revision by bluewater 22/04/2009 1350hrs UTC -->
<div id="menu"> <!-- menu starts here el lang maintainer edhunter-->
<!--sidux-manual Operating System Manual menu-version-01.98.2009.12.07 -->
<!-- menu last updated by bluewater 2009.12.18 0515 hrs UTC -->
	<div id="menu-header">
	      <a href="http://sidux.com/"><img src="../lib/logos/manual-sidux-logo.png" title="To sidux.com forums and wiki" alt="sidux.com logo" /></a>
	</div>
	<ul id="top-list">
		<li><a href="manual-search-el.htm#search-on"> <img src="../lib/logos/manual-search-22x22.png" title="Search Manual" alt="Search" />Αναζήτηση Online - Offline </a> </li>
		<li><a href="http://manual.sidux.com/meta-manual">Πακέτα Επιλεγμένα από την Κοινότητα</a></li>
	</ul>
	<div id="flags-2">
			<a href="../flag-index.html"><img src="../lib/logos/sidux-lang-100x64.png" title="Eπιλέξτε άλλη γλώσσα - Choose another language" alt="lang-switch" /></a>
	</div>
	<ul>
		<li  onmouseover="showHide( 1 );" onmouseout="startTime();" ><a href="welcome-el.htm">Εγχειρίδιο ΛΣ sidux</a>
			<ul class="sub-menu" id="sm1">
				<li><a href="welcome-el.htm#welcome-gen">Εγχειρίδιο ΛΣ sidux</a></li>
				<li><a href="welcome-el.htm#how-to">Πως να χρησιμοποιήσετε αυτό το εγχειρίδιο</a></li>
				<li><a href="welcome-el.htm#table-contents">Πίνακας περιεχομένων</a></li>
				<li><a href="help-el.htm#help-gen">Που να βρείτε βοήθεια</a></li>
				<li><a href="help-el.htm#paste">IRC !paste</a></li>
				<li><a href="credits-el.htm#cred-team">Συντελεστές</a></li>
				<li><a href="wel-quickstart-el.htm#welcome-quick">sidux Οδηγός Γρήγορης Αναφοράς (Quick Start Guide)</a></li>
			</ul>
		</li>
		<li  onmouseover="showHide( 2 );" onmouseout="startTime();" ><a href="cd-dl-burning-el.htm">Περιεχόμενα ISO, Εκδόσεις, Κατέβασμα και Εγγραφή</a>
			<ul class="sub-menu" id="sm2">
				<li><a href="cd-content-el.htm#cd-content">Περιεχόμενα ISO και απαιτήσεις συστήματος</a></li>
				<li><a href="sys-admin-release-el.htm#rolling">Ρέουσες (rolling) Σημειώσεις</a></li>
				<li><a href="cd-dl-burning-el.htm#download-sidux">Mirrors, Κατέβασμα και Εγγραφή ISO</a></li>
				<li><a href="cd-dl-burning-el.htm#md5">md5 Checksum</a></li>
 				<li><a href="cd-dl-burning-el.htm#burn-nero">Γράφοντας το ISO στα Windows</a></li>
				<li><a href="cd-dl-burning-el.htm#burn-linux">Γράφοντας το ISO στο Linux</a></li>
				<li><a href="cd-no-gui-burn-el.htm#burning-no-gui">burniso script</a></li>
				<li><a href="cd-no-gui-burn-el.htm#burning-no-gen">Εγγραφή χωρίς γραφικό περιβάλλον</a></li>
			</ul>
		</li>
		<li  onmouseover="showHide( 3 );" onmouseout="startTime();" ><a href="live-mode-el.htm">Live Mode</a>
			<ul class="sub-menu" id="sm3">
				<li><a href="live-mode-el.htm#rootpw">Κωδικός υπερχρήστη (root) στο sidux-Live ISO</a></li>
				<li><a href="live-mode-el.htm#live-cd-installsoft">Εγκατάσταση προγραμμάτων σε περιβάλλον Live- ISO</a></li>
				<li><a href="live-mode-el.htm#ntfs-3g">Γράφοντας σε NTFS κατατμήσεις με το ntfs-3g</a></li>
			</ul>
		</li>
		<li  onmouseover="showHide( 4 );" onmouseout="startTime();" ><a href="term-konsole-el.htm">Το Tερματικό/Κονσόλα</a>
			<ul class="sub-menu" id="sm4">
				<li><a href="term-konsole-el.htm#sux">  sux / sudo</a></li>
				<li><a href="term-konsole-el.htm#term-kon"> Τερματικό/Κονσόλα</a></li>
				<li><a href="term-konsole-el.htm#cli-help">Βοήθεια από την γραμμή εντολών</a></li>
				<li><a href="help-el.htm#init3-tools">Εργαλεία να ξέρετε για text mode (tty) - init 3</a></li>
				<li><a href="term-konsole-el.htm#term-cmds">Λίστα εντολών του Linux</a></li>
				<li><a href="term-konsole-el.htm#shell-scripts">Εγκαθιστώντας Scripts.sh</a></li>
			</ul>
		</li>
		<li  onmouseover="showHide( 5 );" onmouseout="startTime();" ><a href="cheatcodes-el.htm">CheatCodes</a>
			<ul class="sub-menu" id="sm5">
				<li><a href="cheatcodes-el.htm#cheatcodes">Cheatcodes αποκλειστικά για το sidux Live-ISO</a></li>
				<li><a href="cheatcodes-el.htm#cheatcodes-linux">Cheatcodes γενικά για το Linux</a></li>
				<li><a href="cheatcodes-vga-el.htm#vga">Κωδικοί VGA</a></li>
			</ul>
		</li>
		<li  onmouseover="showHide( 6 );" onmouseout="startTime();" ><a href="part-gparted-el.htm">Δημιουργία κατατμήσεων στον δίσκο</a>
			<ul class="sub-menu" id="sm6">
				<li><a href="part-gparted-el.htm#partition">Δημιουργία κατατμήσεων στον δίσκο χρησιμοποιώντας το GParted</a></li>
				<li><a href="part-gparted-el.htm#ntfs">Αλλαγή μεγέθους σε NTFS κατάτμηση χρησιμοποιώντας το GParted</a></li>
				<li><a href="part-uuid-el.htm#uuid">UUID, ετικέτες κατατμήσεων και fstab</a></li>
				<li><a href="part-cfdisk-el.htm#disknames">Ονομασία δίσκων εν συντομία</a></li>
				<li><a href="part-cfdisk-el.htm#partition">Δημιουργία κατατμήσεων στον σκληρό δίσκο χρησιμοποιώντας το cfdisk</a></li>
				<li><a href="part-cfdisk-el.htm#formating">Διαμόρφωση (format) μετά την δημιουργία κατάτμησης, με το cfdisk</a></li>
				<li><a href="part-size-examp-el.htm#part-example">Παραδείγματα για το μέγεθος των κατατμήσεων</a></li>
			</ul>
		</li>
		<li  onmouseover="showHide( 7 );" onmouseout="startTime();" ><a href="hd-install-el.htm">Επιλογές Εγκατάστασης</a>
			<ul class="sub-menu" id="sm7">
				<li><a href="hd-install-el.htm#Inst-prep">Προετοιμασία Εγκατάστασης</a></li>
				<li><a href="hd-install-el.htm#Installation">Εγκατάσταση στον σκληρό δίσκο</a></li>
				<li><a href="hd-install-el.htm#first-hd-boot">Πρώτη εκκίνηση</a></li>
				<li><a href="hd-install-opts-el.htm#fromiso">Εκκίνηση από το iso - Overview</a></li>
				<li><a href="hd-install-opts-el.htm#fromiso-grub-leg">Booting 'fromiso' with grub-legacy</a></li>
				<li><a href="hd-install-opts-el.htm#grub2-fromiso">Booting 'fromiso' with Grub 2</a></li>
				<li><a href="hd-install-opts-el.htm#fromiso-persist">fromiso και persist</a></li>
				<li><a href="hd-install-opts-el.htm#usb-hd">Eγκατάσταση σε USB σκληρό δίσκο</a></li>
				<li><a href="hd-install-opts-el.htm#vtbox">Εγκατάσταση του sidux με VirtualBox</a></li>
				<li><a href="hd-install-opts-el.htm#qemu">Εγκατάσταση μέσω QEMU</a></li>
			</ul>
		</li>
		<li  onmouseover="showHide( 8 );" onmouseout="startTime();" ><a href="hw-dev-hw-dri-el.htm">Κάρτες Γραφικών, Xorg, Υλικό και Οδηγοί </a>
			<ul class="sub-menu" id="sm8">
				<li><a href="hw-dev-hw-dri-el.htm#hd-ntfs3g">Γράφοντας σε NTFS κατάτμηση με το ntfs-3g</a></li>
				<li><a href="hw-dev-mon-el.htm#mon-res">Ανάλυση Οθόνης (screen) και Οθόνες (monitor)</a></li>
				<li><a href="hw-dev-mon-el.htm#xrandr">Δύο Οθόνες (Dual Monitors) και xrandr</a></li>
				<li><a href="hw-dev-mon-el.htm#mon-binary">Δύο Οθόνες (με χρήση binaries)</a></li>
				<li><a href="hw-dev-hw-dri-el.htm#non-free-3d">Binary, μη ελεύθεροι οδηγοί για: Nvidia &amp; xorg.conf</a></li>
				<li><a href="hw-dev-hw-dri-el.htm#non-free-3d-2">μη-ελεύθεροι οδηγοί για ATI, Radeon και άλλα</a></li>
				<li><a href="hw-dev-hw-dri-el.htm#non-free-firmware">Υλικό που χρειάζεται μη-ελεύθερους firmware οδηγούς</a></li>
				<li><a href="hw-dev-hw-dri-el.htm#non-free">Πρόσθεση μη-ελεύθερων (non-free) πηγών στην λίστα πηγών (Sources List)</a></li>
				<li><a href="hw-dev-hw-dri-el.htm#native-nv-ati">FOSS xorg οδηγούς για nVidia, ATI, Radeon, Intel &amp; xorg.conf</a></li>
			</ul>
		</li>
		<li  onmouseover="showHide( 9 );" onmouseout="startTime();" ><a href="wm-kde-el.htm">Διαχείριστες Παραθύρων</a>
			<ul class="sub-menu" id="sm9">
				<li><a href="wm-xfce-el.htm#xfce-notes">Χρήσιμα extras για Xfce</a></li>
				<li><a href="wm-kde-el.htm#install-add">Χρήσιμα extras για KDE</a></li>
				<li><a href="wm-kde-el.htm#desk-freeze">Κόλλημα επιφάνειας εργασίας</a></li>
				<li><a href="wm-kde-el.htm#kde-login">Δεν μπορώ να εισέλθω στο KDE</a></li>
				<li><a href="wm-kde-el.htm#ch-th">Aλλάζοντας Θέματα (Themes)</a></li>
			</ul>
		</li>
		<li  onmouseover="showHide( 10 );" onmouseout="startTime();" ><a href="lamp-apache-el.htm">sidux LAMP Stack</a>
			<ul class="sub-menu" id="sm10">
				<li><a href="lamp-apache-el.htm#serv-apache">sidux LAMP Stack</a></li>
				<li><a href="lamp-apache-el.htm#serv-ftp">FTP Clients</a></li>
				<li><a href="lamp-apache-el.htm#serv-sec">Πρωτόκολλα Ασφαλείας</a></li>
				<li><a href="lamp-apache-el.htm#serv-ssl">SSL</a></li>
				<li><a href="lamp-sql-el.htm#serv-mysql">Εγκατάσταση MySQL</a></li>
				<li><a href="lamp-ppp-el.htm#serv-php">PHP στον Apache</a></li>
				<li><a href="ntp-server-el.htm#ntp-server">Eγκατάσταση Timeserver</a></li>
			</ul>
		</li>
		<li  onmouseover="showHide( 11 );" onmouseout="startTime();" ><a href="internet-connecting-el.htm">Διαδίκτυο και Δικτύωση</a>
			<ul class="sub-menu" id="sm11">
				<li><a href="tor-privoxy-el.htm#tor">Tor</a></li>
				<li><a href="tor-privoxy-el.htm#privoxy">Privoxy</a></li>
				<li><a href="internet-connecting-el.htm#firewalls">Firewall</a></li>
				<li><a href="samba-el.htm#configure">Ρύθμιση Samba (Windows)</a></li>
				<li><a href="samba-el.htm#setup">Εγκατάσταση Samba-Server </a></li>
				<li><a href="ssh-el.htm#ssh-fs">Απομακρυσμένο mounting με SSH</a></li>
				<li><a href="ssh-el.htm#ssh-x">Παραθυρικές Eφαρμογές μέσω SSH</a></li>
				<li><a href="ssh-el.htm#ssh-f">SSH από γραφικό περιβάλλον με τον Konqueror</a></li>
				<li><a href="ssh-el.htm#ssh-w">SSH X-Forwarding από ένα Windows-PC</a></li>
				<li><a href="ssh-el.htm#ssh">SSH και Ασφάλεια</a></li>
				<li><a href="internet-connecting-el.htm#dial-mod">56k Modems</a></li>
				<li><a href="internet-connecting-wpagui-el.htm#wpa-roaming-gui">WiFi - roaming WPA-GUI</a></li>
				<li><a href="internet-connecting-wpa-el.htm#wpa-basic">WiFi - Οδηγός Βασικών Ρυθμίσεων</a></li>
				<li><a href="internet-connecting-wpa-el.htm#wpa">WiFi - wpasupplicant</a></li>
				<li><a href="internet-connecting-el.htm#netcardconfig">Mπαίνοντας στο Δίκτυο - Ceni</a></li>
			</ul>
		</li>
		<li  onmouseover="showHide( 12 );" onmouseout="startTime();" ><a href="sys-admin-apt-el.htm">dist-upgrade και διαχείριση πακέτων</a>
			<ul class="sub-menu" id="sm12">
				<li><a href="sys-admin-apt-el.htm#apt-cook">APT-Οδηγός και το sources.list</a></li>
				<li><a href="sys-admin-apt-el.htm#apt-install">Εγκαθιστώντας ένα νέο πακέτο</a></li>
				<li><a href="sys-admin-apt-el.htm#apt-delete">Διαγράφοντας ένα πακέτο</a></li>
				<li><a href="sys-admin-apt-el.htm#apt-downgrade">Υποβαθμίζοντας / Κρατώντας (Hold) ένα πακέτο</a></li>
				<li><a href="sys-admin-apt-el.htm#apt-cache">Αναζήτηση πακέτων με apt-cache</a></li>
				<li><a href="sys-admin-apt-el.htm#gui-pacsea">GUI Package searching</a></li>
				<li><a href="siduxcc-el.htm#hermes">sidux-hermes</a></li>
				<li><a href="sys-admin-upgrade-el.htm#live-cd-upgrade">Αναβαθμίζοντας χρησιμοποιώντας το Live-ISO</a></li>
				<li><a href="sys-admin-apt-locarmirr-el.htm#approx">dist-upgrade πολλαπλών PC σε ένα LAN</a></li>
				<li><a href="sys-admin-kern-upg-el.htm#kern-upgrade">Αναβαθμίζοντας τον πυρήνα</a></li>
				<li><a href="sys-admin-apt-el.htm#apt-upgrade">Aναβάθμιση σε ένα Εγκατεστημένο Σύστημα - dist-upgrade - Γενικά</a></li>
				<li><a href="sys-admin-apt-el.htm#du-st">Aναβάθμιση σε ένα Εγκατεστημένο Σύστημα -  dist-upgrade - Τα βήματα</a></li>
			</ul>
		</li>
		<li  onmouseover="showHide( 13 );" onmouseout="startTime();" ><a href="sys-admin-gen-el.htm">Διαχείριση Συστήματος</a>
			<ul class="sub-menu" id="sm13">
				<li><a href="hd-install-el.htm#adduser">Προσθήκη ενός νέου χρήστη</a></li>
				<li><a href="home-el.htm#home-bu">Μεταφορά του /home</a></li>
				<li><a href="siduxcc-el.htm#siduxcc">sidux Κέντρο Ελέγχου</a></li>
				<li><a href="sys-admin-rdiff-el.htm#rdiff">Backup με το rdiff</a></li>
				<li><a href="sys-admin-rsync-el.htm#rsync">Backup με το rsync</a></li>
				<li><a href="vir-rkits-el.htm#virus-rkits">Ανιχνευτές Iών και Rootkits</a></li>
				<li><a href="sys-admin-gen-el.htm#start-services">Ενεργοποίηση / Απενεργοποίηση Υπηρεσιών (Services)</a></li>
				<li><a href="sys-admin-gen-el.htm#pw-lost">Έχασα τον κωδικό διαχειριστή (root)</a></li>
				<li><a href="sys-admin-gen-el.htm#Fonts">Γραμματοσειρές (Fonts)</a></li>
				<li><a href="sys-admin-gen-el.htm#cups">CUPS - Σύστημα Εκτύπωσης</a></li>
				<li><a href="sys-admin-gen-el.htm#sound">Mixers Ήχου</a></li>
				<li><a href="sys-admin-gen-el.htm#init">sidux Επίπεδα εκτέλεσης (runlevels) - init</a></li>
				<li><a href="bios-freedos-el.htm#bois-prep">Αναβάθμιση του BIOS με το FreeDOS</a></li>
				<li><a href="sys-admin-grub-bootman2-el.htm#boot-grub-floppy">Δημιουργία Δισκέττας Εκκίνησης</a></li>
				<li><a href="sys-admin-grub-bootman2-el.htm#mbr-grub-boot">Grub1 - MBR Overwritten bootsector</a></li>
				<li><a href="sys-admin-grub-bootman2-el.htm#dual-boot">Grub1 - Dual και Multibooting</a></li>
				<li><a href="sys-admin-grub-bootman2-el.htm#remove-grub">Απεγκατάσταση του grub από το MBR</a></li>
				<li><a href="sys-admin-grub-bootman2-el.htm#what-is-grub">O διαχειριστής εκκίνησης Grub </a></li>
				<li><a href="sys-admin-grub2-el.htm#mbr-over-grub2">Grub2 - MBR Overwritten</a></li>
				<li><a href="sys-admin-grub2-el.htm#multi-os">Grub2 - Dual and Multibooting</a></li>
				<li><a href="sys-admin-grub2-el.htm#grub1-grub2">Grub2 -Upgrading from Grub1</a></li>
				<li><a href="sys-admin-grub2-el.htm#grub2">Grub2 - Overview</a></li>
			</ul>
		</li>
	</ul>
<!-- menu ends here --> </div>
<div id="main-page">
		<div class="divider" id="grub2">
			<h2 id="top-header">GRUB 2</h2>
				<h6>Basic summary of the major differences going from GRUB 1 (now known as grub-legacy) to GRUB 2:</h6>

					<ul>
						  	<li><span class="highlight-3">The menu.lst no longer exists.</span></li>

							<li>A file called <span class="highlight-3">grub.cfg</span> is now in control of the Grub Screen.</li>

							<li>grub.cfg is automatically generated by the scripts in <span class="highlight-3"> /etc/grub.d</span>.</li>

							<li>The partition numbering is also different. Partitions are numbered from 1 instead of 0 (drives are still numbered from 0):
<pre>
Linux      grub1     grub2
/dev/sda1  (hd0,0)   (hd0,1)
/dev/sda2  (hd0,1)   (hd0,2)
/dev/sda3  (hd0,2)   (hd0,3)

/dev/sdb1  (hd1,0)   (hd1,1)
/dev/sdb2  (hd1,1)   (hd1,2)
/dev/sdb3  (hd1,2)   (hd1,3)
</pre>
							</li>

							<li>Stanzas in grub.cfg are phrased slightly differently compared with the menu.lst and can't be copied directly from the Grub 1 menu.lst to the Grub 2 grub.cfg as the grub.cfg file is the 'result' file. <span class="highlight-2">The grub.cfg file should never be altered manually. </span></li>

					 </ul>

					 <h4> The Grub 2 default config file</h4>
							<p>The <span class="highlight-3">/etc/default/grub</span> file contains the grub2 variable settings. For instance, timeout on menu, default entries in the menu to be activated, kernel parameters, the use of grub graphics and so forth.</p>

					 <h4> The Grub 2 script files</h4>
							<p><span class="highlight-3"> /etc/grub.d</span> files control the 'result' file called <span class="highlight-3"> grub.cfg</span>, which is found in <span class="highlight-3"> /boot/grub/</span>.</p>

							<p><span class="highlight-2">The grub.cfg file should never be altered manually. </span>All alterations are to be done with one or all of the following script files located in <span class="highlight-3"> /etc/grub.d</span>:</p>
<pre>
00_header:
05_debian_theme: Sets background, text colors, themes
10_hurd: Locates Hurd kernels
10_linux: Locates Linux kernels based on results of the lsb_release command.
20_memtest86+: If the file /boot/memtest86+.bin exists, it is included in the boot menu.
30_os-prober: Searches for Linux and other OS's on all partitions; includes them in the boot menu.
40_custom: A template for adding custom boot menu entries for other Operating Systems.
60_fll-fromiso: A template for adding custom boot menu entries for fromiso to a USB-stick/SSD-card.
</pre>
							<p>After an alteration is made, grub.cfg needs to know about the changes. In the case of sidux kernel upgrades, the update command is automatically run. In the case of a manual alteration made by you as the system administrator to any of the above files, you need to run: </p>

<pre>
update-grub
</pre>

							<p><span class="highlight-3">The Debian Grub2 deb package is designed so that a manual alteration by you would be rarely needed.</span></p>
		</div>
		<div class="divider" id="grub1-grub2">
				<h2>Upgrading from Grub Legacy to Grub 2</h2>
							<p><span class="highlight-2">We recommend to upgrade to Grub 2 cleanly and remove Grub 1 totally</span>. You should be aware that you can mess everything up so be very careful.</p>

						<h6>Step 1: </h6>
							<p>Ensure that your system is fully <span class="highlight-3">dist-upgraded in init 3. </span></p>
<pre>
apt-get update
Ctrl+alt+F1
init 3
apt-get dist-upgrade
init 5 &amp;&amp; exit
</pre>
						<h6>Step 2:</h6>
							<p>Remove Grub 1 totally:</p>
<pre>
rm -rf /boot/grub
apt-get purge grub-gfxboot
</pre>
							<p>The result will be that <span class="highlight-3">fll-iso2usb* grub-gfxboot* install-usb-gui* </span> will be removed.  Type <span class="highlight-3">Y</span> to confirm.</p>

						<h6>Step 3:</h6>

<pre>
apt-get install grub2
</pre>

<div class="screenshot"><img src="../lib/images-common/images-grub2/grub2-2.png" title="Grub2" alt="Grub2" /></div>
							<p>Use the tab key to select OK</p>

<div class="screenshot"><img src="../lib/images-common/images-grub2/grub2-3.png" title="Grub2" alt="Grub2" /></div>
							<p>Use the tab key to select OK</p>

<div class="screenshot"><img src="../lib/images-common/images-grub2/grub2-convert-1.png" title="Grub2-conversion 1" alt="Grub2-conversion 1" /></div>

							<p>Use the keyboard arrow and space bar to place an <span class="highlight-3">* (asterisk) </span> to select what hard drive MBR Grub2 is going to write to. <i>(This example to installing to a USB drive)</i>.</p>

						<h6>Step 4:</h6>
<pre>
update-grub
</pre>


						<h6>Step 5:</h6>
<pre>
apt-get install install-usb-gui fll-iso2usb
</pre>

						<h6>Step 6:</h6>
							<p> Reboot your PC and the menu.cfg will display the kernel and Operating System list like this:</p>
<div class="screenshot"><img src="../lib/images-common/images-grub2/grub2-os-list.jpg" title="Grub2-OS list" alt="Grub2-OS list" /></div>

							<p>Should there be a corruption or something go wrong refer to <a href="sys-admin-grub2-en.htm#chroot">Overwritten or corrupted Grub2 in the MBR</a> </p>


	      </div>
		<div class="divider" id="multi-os">
				<h2>Dual and multi booting with Grub 2</h2>

							<p>As Grub2 is modular in configuration, it allows a simple command to seek out any newly installed operating systems and if one is found, it tries to implement the change to update the menu.cfg. The simple command is:</p>
<pre>
update-grub
</pre>

							<p>Should it complain that does not know the grub device of a disk, it means that the devicemap must be regenerated.</p>

							<p><span class="highlight-3">Ensure that you choose the partition not the MBR when installing the other operating system:</span></p>

<pre>
grub-mkdevicemap --no-floppy
update-grub
</pre>
							<p>Warnings can be safely ignored.</p>

							<p>Should you make a mistake, the update will probably overwrite your MBR and you will need to fix it with <a href="sys-admin-grub2-en.htm#mbr-over-grub2">Grub2 - MBR Overwritten</a>.</p>
</div>
	<div class="divider" id="mbr-over-grub2">

					<h2>To only re-write grub2 to MBR from the hard drive:</h2>

<pre>
/usr/sbin/grub-install --recheck --no-floppy /dev/sda
</pre>
						<p>This line may need to be run more than once, until its convinced you really mean it.</p>

		<h2>MBR Bootsector overwritten by Windows, a corrupted and /or to recover Grub2</h2>
							<p><span class="highlight-2">NOTE: to restore a Grub2 bootloader you need to have a 2009-04 (moros) sidux.iso or later.</span> <a href="sys-admin-grub2-el.htm#chroot">Alternatively use chroot with any live.iso</a>.</p>

							<p> To rewrite the grub2 to the MBR and/or to recover grub 2 in general, you will need boot up a <span class="highlight-3">sidux.iso</span>:</p>
						<ol>
							<li>To identify and confirm your partitions (e.g. [h,s]d[a..]X) all the following actions need root privileges, so to get root (#):
<pre>
$ sux
</pre>
							</li>
							<li>When in root type in:
<pre>
fdisk -l
cat /etc/fstab
</pre>
							This is to get the correct names.
							</li>
							<li>When you have acertained the correct partition, create the mount point:
<pre>
mkdir -p /media/[hdxx,sdxx,diskx]
</pre>
							</li>
							<li>Mount it:
<pre>
mount /dev/xdxx /media/xdxx
</pre>
							</li>

							<li>Now rewrite Grub to MBR of the first harddisk (generic):
<pre>
/usr/sbin/grub-install --recheck --no-floppy --root-directory=/media/xdxx /dev/sda
</pre>
							</li>
						</ol>
	      </div>
		<div class="divider" id="chroot">
		      <h3>Using chroot to recover an overwritten or corrupted Grub2 in the MBR</h3>

							<p>To recover Grub 2, if it has been overwritten or corrupted in the MBR, set up a <span class="highlight-3">chroot</span> environment. <span class="highlight-3">Any live.iso will suffice</span>.</p>

							<p>Boot up a live sidux.iso that is appropriate for your system (32 or 64 bit CD, DVD, USB stick or an SSD card) and open the konsole. Type in <span class="highlight-3">sux</span> and press enter to give you root permissions.</p>

							<p>Using <span class="highlight-3">fdisk -l or blkid</span>, ascertain which partition is the boot partition and get the correct names. If you prefer a GUI use <span class="highlight-3">Gparted</span>:</p>
<pre>
blkid
</pre>
							<p>and to check that fstab matches the output of the blkid:</p>
<pre>
cat /etc/fstab
</pre>
							<p>Let's assume your root filesystem is on <span class="highlight-3">/dev/sda2</span></p>
<pre>
mkdir /mnt/sidux-chroot
mount /dev/sda2 /mnt/sidux-chroot
</pre>

							<p>Next, you need to mount /proc and /dev as follows:</p>
<pre>
mount -t proc proc /mnt/sidux-chroot/proc
mount -o bind /dev /mnt/sidux-chroot/dev
</pre>

							<p>Your chroot environment is now set up, access it with:</p>
<pre>
chroot /mnt/sidux-chroot /bin/bash
</pre>

							<p>Now you are able to use apt's local cache or alter files that you need to fix as if you were properly booted to the OS, in this case to fix Grub2 back onto the MBR:</p>

<pre>
apt-get install --reinstall grub2
</pre>
							<p>Follow the installers instructions.</p>

							<p>To release the chroot:</p>
<pre>
Ctrl+d
</pre>
							<p>Reboot your PC.</p>





	</div>
	<div id="rev">Page last revised 19/12/2009 0630 UTC</div>

</div>
</body>
</html>
