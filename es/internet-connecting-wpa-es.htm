<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
   "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="es">
<head>
	<title>Manual de Sidux - Internet/Redes WPA -Supplicant (Wi-Fi Acceso Protegido)</title>
	<meta http-equiv="content-type" content="text/html; charset=utf-8" />
	<style type="text/css" media="all">@import url("../lib/css-js/content.css");</style>
	<style type="text/css" media="all">@import url("../lib/css-js/menu.css");</style>
	<style type="text/css" media="print">@import url("../lib/css-js/print.css");</style>
	<link rel ="shortcut icon" href="../lib/favicon/manual.ico" />
	<script type="text/javascript" src="../lib/css-js/menu2.js"></script>
</head>
<body id="welcome">
<div id="menu"> <!-- menu starts here -->
<!--Welcome to the Official sidux-manual  01.12-2007-06-03 es lang maintainer Richard-->
<!-- menu last updated by bluewater 03/06/2007 1500rs AEST 03/06/2007 0500hrs UTC -->
<img src="../lib/logos/sidux-logo.png" alt="logo" id="menu-header" />
	<ul id="top-list">
		<li><a href="http://sidux.com/">Regresa al menú principal de sidux</a></li>
	</ul>
	<div id="flags-2">
			<a href="../flag-index.html"><img src="../lib/logos/sidux-lang-50.png" title="Seleccione otra idioma." alt="lang-switch" /></a>
	</div>
	<ul>
		<li  onmouseover="showHide( 1 );" onmouseout="startTime();" ><a href="welcome-es.htm">Bienvenido al Manual Oficial de sidux</a>
			<ul class="sub-menu" id="sm1">
				<li><a href="welcome-es.htm#welcome-gen">Manual Oficial</a></li>
				<li><a href="welcome-es.htm#how-to">¿Cómo utilizar el manual?</a></li>
				<li><a href="welcome-es.htm#table-contents">Indice</a></li>
				<li><a href="help-es.htm#help-gen">¿Dónde conseguir ayuda?</a></li>
				<li><a href="credits-es.htm#cred-team">Créditos</a></li>
			</ul>
		</li>
		<li  onmouseover="showHide( 2 );" onmouseout="startTime();" ><a href="cd-content-es.htm">Contenido del CD</a>
			<ul class="sub-menu" id="sm2">
				<li><a href="cd-content-es.htm#cd-content">Contenido del CD</a></li>
			</ul>
		</li>
		<li  onmouseover="showHide( 6 );" onmouseout="startTime();" ><a href="cd-dl-burning-es.htm">Bajar y Quemar</a>
			<ul class="sub-menu" id="sm6">
				<li><a href="cd-dl-burning-es.htm#download-sidux">Bajar y Quemar</a></li>
				<li><a href="cd-dl-burning-es.htm#md5">Suma de verificación, md5</a></li>
				<li><a href="cd-dl-burning-es.htm#burn-nero">Quemando en Windows</a></li>
				<li><a href="cd-dl-burning-es.htm#burn-linux">Quemando en Linux</a></li>
				<li><a href="cd-dl-burning-es.htm#xdelta">Parches con xdelta</a></li>
				<li><a href="cd-no-gui-burn-es.htm">Quemando sin GUI</a></li>
			</ul>
		</li>
		<li  onmouseover="showHide( 4 );" onmouseout="startTime();" ><a href="live-mode-es.htm">LiveCD: el Modo en Vivo</a>
			<ul class="sub-menu" id="sm4">
				<li><a href="live-mode-es.htm#rootpw">Clave root del LiveCD de sidux</a></li>
				<li><a href="live-mode-es.htm#live-cd-installsoft">Instalar software usando el Live-CD</a></li>
				<li><a href="live-mode-es.htm#ntfs-3g">ntfs-3g-Escribir en particiones NTFS</a></li>
			</ul>
		</li>
		<li  onmouseover="showHide( 9 );" onmouseout="startTime();" ><a href="term-konsole-es.htm">Terminal/Consola</a>
			<ul class="sub-menu" id="sm9">
				<li><a href="term-konsole-es.htm#term-kon">Terminal/Consola</a></li>
				<li><a href="term-konsole-es.htm#cli-help">Ayuda en la línea de comando</a></li>
				<li><a href="term-konsole-es.htm#term-cmds">Linux Terminal Commands List</a></li>
				<li><a href="term-konsole-es.htm#shell-scripts">Instalando Scripts.sh</a></li>
			</ul>
		</li>
		<li  onmouseover="showHide( 7 );" onmouseout="startTime();" ><a href="cheatcodes-es.htm">CheatCodes</a>
			<ul class="sub-menu" id="sm7">
				<li><a href="cheatcodes-es.htm#cheatcodes">Cheatcodes</a></li>
				<li><a href="cheatcodes-vga-es.htm#vga">Códigos VGA</a></li>
			</ul>
		</li>
		<li  onmouseover="showHide( 5 );" onmouseout="startTime();" ><a href="part-gparted-es.htm">Particionando el Disco Duro</a>
			<ul class="sub-menu" id="sm5">
				<li><a href="part-gparted-es.htm#partition">Particionando el DD usando GParted</a></li>
				<li><a href="part-gparted-es.htm#ntfs">Redimensionar una partición NTFS utilizando GParted</a></li>
				<li><a href="part-uuid-es.htm#uuid">UUID, Label de Partición y fstab</a></li>
				<li><a href="part-cfdisk-es.htm#partition">Particionando el DD con cfdisk</a></li>
				<li><a href="part-cfdisk-es.htm#formating">Reformatear particiones después de particionar con cfdisk</a></li>
				<li><a href="part-size-examp-es.htm#part-example">Ejemplos de dimensiones de particiones</a></li>
			</ul>
		</li>
		<li  onmouseover="showHide( 8 );" onmouseout="startTime();" ><a href="hd-install-es.htm">Opciones de la Instalación</a>
			<ul class="sub-menu" id="sm8">
				<li><a href="hd-install-es.htm#Inst-prep">Preparación para la instalación</a></li>
				<li><a href="hd-install-es.htm#Installation">Instalando al DD</a></li>
				<li><a href="hd-install-es.htm#first-hd-boot">Primer Arranque</a></li>
				<li><a href="hd-install-opts-es.htm#fromiso">Arrancando "fromiso"</a></li>
				<li><a href="hd-install-opts-es.htm#usb-hd">Instalando en un USB-DD</a></li>
				<li><a href="hd-install-opts-es.htm#qemu">Instalando a través de QEMU</a></li>
			</ul>
		</li>
		<li  onmouseover="showHide( 10 );" onmouseout="startTime();" ><a href="hw-dev-hw-dri-es.htm">Tarjetas Gráficas, Hardware y Drivers</a>
			<ul class="sub-menu" id="sm10">
				<li><a href="hw-dev-hw-dri-es.htm#hd-ntfs3g">Escribiendo en NTFS</a></li>
				<li><a href="hw-dev-hw-dri-es.htm#non-free-3d">Binary, non-free drivers for: Nvidia / ATI</a></li>
				<li><a href="hw-dev-hw-dri-es.htm#native-nv-ati">Free xorg drivers for nVidia, ATI, Radeon, Intel</a></li>
				<li><a href="hw-dev-hw-dri-es.htm#mon-res">Resoluciones y Monitores </a></li>
				<li><a href="hw-dev-hw-dri-es.htm#non-free">Hardware con necesidades no-libre</a></li>
			</ul>
		</li>
		<li  onmouseover="showHide( 12 );" onmouseout="startTime();" ><a href="wm-kde-es.htm">Gestor de Ventanas</a>
			<ul class="sub-menu" id="sm12">
				<li><a href="wm-kde-es.htm#desk-freeze">El escritorio de KDE se traba</a></li>
				<li><a href="wm-kde-es.htm#kde-login">No puedo hacer login en KDE</a></li>
				<li><a href="wm-kde-es.htm#ch-th">Cambiando temas</a></li>
			</ul>
		</li>
		<li  onmouseover="showHide( 14 );" onmouseout="startTime();" ><a href="lamp-apache-es.htm">sidux LAMP Stack</a>
			<ul class="sub-menu" id="sm14">
				<li><a href="lamp-apache-es.htm#serv-apache">sidux LAMP Stack</a></li>
				<li><a href="lamp-apache-es.htm#serv-ftp">Clientes FTP</a></li>
				<li><a href="lamp-apache-es.htm#serv-sec">Protocolos de seguridad</a></li>
				<li><a href="lamp-apache-es.htm#serv-ssl">SSL</a></li>
				<li><a href="lamp-sql-es.htm#serv-mysql">Configuración MySQL</a></li>
				<li><a href="lamp-ppp-es.htm#serv-php">PHP en Apache</a></li>
			</ul>
		</li>
		<li  onmouseover="showHide( 3 );" onmouseout="startTime();" ><a href="internet-connecting-es.htm">El Internet y Redes</a>
			<ul class="sub-menu" id="sm3">
				<li><a href="ntp-server-es.htm#ntp-server">Configurar un servidor horario</a></li>
				<li><a href="internet-connecting-es.htm#firewalls">Mini-Firewall</a></li>
				<li><a href="samba-es.htm#configure">Configurar SAMBA-Win</a></li>
				<li><a href="samba-es.htm#setup">Configurar Samba</a></li>
				<li><a href="ssh-es.htm#ssh-fs">Montar con SSH</a></li>
				<li><a href="ssh-es.htm#ssh-x">Aplicaciones X Window via SSH</a></li>
				<li><a href="ssh-es.htm#ssh-f">SSH con Konqueror</a></li>
				<li><a href="ssh-es.htm#ssh-w">Adelanto-X con SSH desde Win-PC</a></li>
				<li><a href="ssh-es.htm#ssh-s">SSH: Seguridad</a></li>
				<li><a href="internet-connecting-es.htm#dial-mod">Módems de 56k</a></li>
				<li><a href="internet-connecting-es.htm#ndiswrapper">Activando Ndiswrapper</a></li>
				<li><a href="internet-connecting-wpa-es.htm#wpa">WIFI-WLAN</a></li>
				<li><a href="internet-connecting-es.htm#internetsharing">Compartir Internet</a></li>
				<li><a href="internet-connecting-es.htm#netcardconfig">Conectándose en línea</a></li>
			</ul>
		</li>
		<li  onmouseover="showHide( 15 );" onmouseout="startTime();" ><a href="sys-admin-apt-es.htm">Instalar /Remover y Desactualizando un paquete</a>
			<ul class="sub-menu" id="sm15">
				<li><a href="sys-admin-apt-es.htm#apt-cook">APT y sources.list</a></li>
				<li><a href="sys-admin-meta-es.htm#meta-pack">Meta-Paquetes</a></li>
				<li><a href="sys-admin-meta-es.htm#meta-proxy">Meta-Instalador y Proxies</a></li>
				<li><a href="sys-admin-apt-es.htm#apt-install">Instalar paquete</a></li>
				<li><a href="sys-admin-apt-es.htm#apt-delete">Remover paquete</a></li>
				<li><a href="sys-admin-apt-es.htm#apt-downgrade">Desactualizando un paquete</a></li>
			</ul>
		</li>
		<li  onmouseover="showHide( 11 );" onmouseout="startTime();" ><a href="sys-admin-apt-es.htm">Administración del Sistema</a>
			<ul class="sub-menu" id="sm11">
				<li><a href="sys-admin-apt-es.htm#apt-upgrade">Actualizar Sistema Instalada</a></li>
				<li><a href="sys-admin-upgrade-es.htm#live-cd-upgrade">Actualizar con Live-CD</a></li>
				<li><a href="sys-admin-kern-upg-es.htm#kern-upgrade">Actualizar el Kernel</a></li>
				<li><a href="sys-admin-rdiff-es.htm#rdiff">Respaldar con rdiff</a></li>
				<li><a href="sys-admin-rsync-es.htm#rsync">Respaldar con rsync</a></li>
				<li><a href="vir-rkits-es.htm#virus-rkits">Virus y Rootkit</a></li>
				<li><a href="sys-admin-gen-es.htm#start-services">Activar servicios</a></li>
				<li><a href="sys-admin-gen-es.htm#pw-lost">Clave root perdida</a></li>
				<li><a href="sys-admin-gen-es.htm#fonts"> Fuentes</a></li>
				<li><a href="sys-admin-grub-bootman2-es.htm#mbr-grub-boot">Sobre-escribir el MBR</a></li>
				<li><a href="sys-admin-grub-bootman2-es.htm#boot-grub-floppy">Floppy del Sistema</a></li>
				<li><a href="sys-admin-grub-bootman2-es.htm#remove-grub">Remover Grub del MBR</a></li>
				<li><a href="sys-admin-grub-bootman2-es.htm#what-is-grub">Grub: inicializador</a></li>
			</ul>
		</li>
	</ul>
<!-- menu ends here --> </div>
<div id="main-page">
	<div class="divider" id="wpa">
		<h2 id="top-header">Modos de Operación en wpasupplicant para Debian</h2>
				<p class="highlight-3">Debido a la complejidad de la ley, sidux solamente proveerá software dfsg-free en el liveCD, <a href="hw-dev-hw-dri-es.htm#non-free">por favor verifica este enlace para información adicional sobre fuentes no-libres de firmware</a></p>

			<p>El paquete Debian wpasupplicant provee dos (2) modos convenientes de funcionamiento que están bien integrado al núcleo de la infraestructura de la red; "ifupdown".</p>


		<h4>¿Qué esta cubierto?</h4>

<h6>1. Especificando el administrador del intérprete wpasupplicant</h6>
          <p>* Tabla de intérpretes (Drivers) apoyados<br /> * Recomendaciones Común de Interpretes</p>
<h6>2. Modo #1: Modo Administrado</h6>
          <p>* Ejemplos<br /> * Tabla de opciones comunes<br />   * Notas importantes acerca de modos administrado<br /> * Como lo funciona</p>
<h6>3. Modo #2: Modo Roaming</h6>
          <p>* wpa_supplicant.conf<br /> * /etc/network/interfaces<br /> * Controlando el Daemon Roaming con  wpa_action<br /> * Afinando la configuración Roaming<br /> * El afiche del registro<br /> * Usando los scripts de Mapping ExternalScripts (por ejemplo, guessnet)<br /> * /etc/network/interfaces con mapeo externo</p> 
<h6>4. Búsqueda de averías</h6>
          <p>* ssids escondido</p>
<h6>5. Consideraciones de seguridad</h6>
          <p>* Configuración de permiso de archivos</p> 

		<h3>1. Especificando el administrador del intérprete wpasupplicant</h3>

			<p>El intérprete administrador wext, será usado para todo tipo de interfaz que no explícitamente configura el 'wpa-driver' como el tipo de intérprete requerido para este intérprete. Usuarios de Linux kernels 2.4 ó 2.6, menor que el 2.6.14 sera requerido de especificar un tipo de intérprete-wpa.</p>

	</div>	

	
		<h3>Tabla de intérpretes apoyados</h3>

			<p>Un resumen de intérpretes apoyados le sigue:</p>

	<div>
		<table>
			<tbody>
				<tr>
					<th>intérprete</th>
					<th>Descripción</th>
				</tr>
				<tr>
					<td>hostap</td>
					<td>Interprete AP anfitrión (Intersil Prism2/2.5/3)</td>
				</tr>
				<tr>
					<td>madwifi</td>
					<td>MADWIFI 802.11 apoyo (Atheros, etc.)</td>
				</tr>
				<tr>
					<td>atmel</td>
					<td>ATMEL AT76C5XXx (USB, PCMCIA)</td>
				</tr>
				<tr>
					<td>wext</td>
					<td>Linux extensiones inalámbrica (genérica)</td>
				</tr>
				<tr>
					<td>ndiswrapper</td>
					<td> Linux ndiswrapper</td>
				</tr>
				<tr>
					<td>ipw</td>
					<td>Intel intérprete ipw2100/2200</td>
				</tr>
				<tr>
					<td>alámbrico</td>
					<td>intérprete alámbrico Ethernet</td>
				</tr>
				<tr>
					<td>prueba</td>
					<td>intérprete de prueba</td>
				</tr>
			</tbody>
		</table>
	</div>

	<div class="spacer05"></div>
		<h3>Recomendaciones de intérpretes comunes</h3>

			<p>El adaptador Intel Pro Inalámbrico (ipw2100, ipw2200 y ipw3945) todos usa el administrador 'wext', a menos que el kernel es mayor que el 2.6.14</p>

			<p>Madwifi apoya tanto los intérpretes 'wext' y 'madwifi' administrador. 'wext' es preferido, sin embardo, 'madwifi' puede funciona mejor en algunas circunstancias.</p>

			<p>Ndiswrapper YA NO SOPORTA el intérprete administrador 'ndiswrapper' desde la versión 1.16. Entonces, 'wext' tiene que ser usado a meno que usas una versión antigua de ndiswrapper.</p>

			<p>Fija el tipo del intérprete en la estrofa interfaces(5) para su dispositivo con la opción 'wpa-driver'. Por ejemplo:</p>

<pre>
iface eth0 inet dhcp
	wpa-driver wext
	. . . . . Más opciones
</pre>

			<h2>2. Modo #1: Modo Administrado</h2>

			<p>Este modo provee la habilidad de establecer una conexión a través del wpa_supplicant a un red conocido. Funciona similarmente como una paquete de herramienta inalámbrica. Cada elemento requerido para establecer una conexión via wpa_supplicant es prefijado con 'wpa-' y seguido por el valor que sera utilizado para este elemento.</p>

		<h6>Ejemplo de un wpa.conf file de Modo #1 - Ejemplo 1.</h6>
<pre>Ejemplo de un wpa.conf file de Modo #1  - Ejemplo 1.
NOTA: el valor 'wpa-psk' es solamente valido si:

   1. Es una cadena de texto (ascii) entre 8 y 63 caracteres en largo
   2. Si es una cadena hexadecimal de 64 caracteres. 

# Conecta a la punto de acceso del ssid 'NETBEER' con un tipo de encriptación de # WPA-PSK/WPA2-PSK. Asume que el intérprete usará el trasera del intérprete 'wext'  # de wpa_supplicant porque ningún opción del intérprete-wpa ha sido especificado. # El pase (passphrase) es dado como una cadena de texto ASCII. Se usa DHCP para # obtener una dirección de red.
#
iface wlan0 inet dhcp

        wpa-ssid NETBEER
        # pase (passphrase) en texto puro
        wpa-psk Secreto_Texto_Puro

# Conecta a un punto de acceso de ssid 'homezone' con un tipo de encartación # EPA-PSI/EPA2-PSI, utilizando el intérprete trasera del 'ext' del epa_supleción. # El psi es dado como una cadena encarpetado en hexadecimal. Se usa DHCP para # obtener una dirección de red.
#
afiche Wlan0 net DHCP

        epa-driver ext
        epa-sid comezón
        # El psi en hexadecimal es encarpetado de un pase (passphrase) en texto ASCII.
        wpa-psk 000102030405060708090a0b0c0d0e0f101112131415161718191a1b1c1d1e1f

# Conecta a un punto de acceso de ssid 'HotSpot1' y bssid del '00:1a:2b:3c:4d:5e' # con un tipo de encriptación de WPA-PSK/WPA2-PSK, utilizando el intérprete 'madwifi' # como trasera del wpa_supplicant. El pase (passphrase) es dado como una cadena en puro texto. # Una dirección estático de red esta utilizado. #
iface ath0 inet static

        wpa-driver madwifi
        wpa-ssid HotSpot1
        wpa-bssid 00:1a:2b:3c:4d:5e
        # pase (passphrase) en texto puro
        wpa-psk madhotspot
        wpa-key-mgmt WPA-PSK
        wpa-pairwise TKIP CCMP
        wpa-group TKIP CCMP
        wpa-proto WPA RSN
        # configuraciones estático de ip
        address 192.168.0.100
        netmask 255.255.255.0
        network 192.168.0.0
        broadcast 192.168.0.255
        gateway 192.168.0.1

# Suministrado por el usuario, wpa_supplicant.conf esta usado por eth1. Todo información # esta contenido dentro del wpa_supplicant.conf suministrado por el usuario. Ningún tipo de wpa-driver # es especificado, entonces el wext es utilizado. Se usa DHCP para obtener una dirección de red. #
iface eth1 inet dhcp

wpa-conf /path/to/wpa_supplicant.conf
</pre>


	<div class="divider" id="wpa1">
		<h2>Tabla de opciones comúnes</h2>

			<p>Un breve resumen de opciones 'wpa-' comunes, que puede ser utilizado en la estrofa de /etc/network/interfaces para un dispositivo inalámbrico. Ver la sección de los 'Notas Importantes acerca del Modo Gerenciada para información acerca de valores valido y invalido de 'wpa-'.</p>

			<p class="highlight-2">NOTA:  TODOS los valores distinguen entre mayúsculas y minúsculas; están "Case SeNsITiVe"</p>

<pre>
Elemento        Valor Ejemplo          Descripción
=======         =============          ===========
wpa-ssid        plaintextstring        fjia el ssid de su red
wpa-bssid       00:1a:2b:3c:4d:5e      el bssid de su AP
wpa-psk         0123456789......       su clave pre-definido wpa. Usa:
                                        wpa_passphrase(8) para generar su psk
                                        de una phrase (passphrase) y pareja ssid 
wpa-key-mgmt    NONE, WPA-PSK, WPA-EAP, lista de claves autenticados y aceptados
                IEEE8021X               protocolos de manejar
wpa-group       CCMP, TKIP, WEP104,     lista de cifras de grupo aceptado para WPA
                WEP40
wpa-pairwise    CCMP, TKIP, NONE        lista de cifras de pares aceptados para WPA
wpa-auth-alg    OPEN, SHARED, LEAP      lista de algoritmos permitido por IEEE 802.11
wpa-proto       WPA, RSN                lista de protocolos aceptados
wpa-identity    myplaintextname         claves de usuario provisto por el administrador
          (EAP authentication)
wpa-password    myplaintextpassword     clave personal (autenticación EAP)
wpa-scan-ssid   0 or 1                  Conmutar el escaneo de ssid con marcos especifica de Probe Request
wpa-ap-scan     0 or 1 or 2             ajusta la lógica de escaneo de wpa_supplicant
</pre>

			<p>La completa funcionalidad del wpa_cli(8) debe ser implementado. Cualquier cosa que falta se considera un error y debe ser reportado como tal. Parches siempre están bien recibidos.</p>


			<h2>Notas Importantes acerca del Modo Gerenciado</h2>

			<p>Casi todos los opciones de 'wpa-' requiere que por lo menos hay una ssid especificado. Solamente unas pocos opciones tiene un efecto global. Estos son: 'wpa-ap-scan' y 'wpa-preauthenticate'.</p>

			<p>Cualquier opción 'wpa-' dado por una dispositivo en el archivo interfaces(5) es suficiente de llamar en acción el wpa_supplicant daemon.</p>

			<p>El script ifupdown de wpasupplicant hace un suposición acerca de tipo de entrada que es valido para cada opción. Por ejemplo, el asume que algunas entradas están en texto puro y lo encero con comillas antes de pasarlo a wpa_cli, lo cual agregue la entrada al bloque de la red siendo formado via el socket wpa_supplicant ctrl_interfaz.</p>

			<p>Ejecutando el ifup manualmente con la opción '--verbose' se muestra todos los comandos utilizados para formar el bloque de la red via wpa_cli. Si el valor que pusiste para cualquier opción wpa-* en /etc/network/interfaces es encerrado por comillas dobles, entonces las entradas están asumidos de ser de puro texto o de tipo "ascii".</p>

			<p>Algunas entradas están asumido de ser una cadena en hexadecimal (por ejemplo,  wpa-wep-key*). Sin embargo, el tipo de valor del opción wpa-psk es determinado a través de un simple verificación para más de una carácter que no es hexadecimal.</p>

			<h2>Como lo funciona</h2>

			<p>Como mencionarán, cada elemento especifico de wpa_supplicant se prefija con 'wpa-'. Cada elemento esta correlacionado a un propiedad de wpa_supplicant como descrito en los páginas man de wpa_supplicant.conf(5), wpa_supplicant(8) y wpa_cli(8).</p>

			<p>El supplicant esta lanzada sin cualquier pre-configuración, y el wpa_cli se forma una configuración en red desde la entrada proviso por los líneas de 'wpa-*'. Inicialmente, el wpa_supplicant/wpa_cli no se fija directamente las propiedades del dispositivo (como especificar un essid con iwconfig, por ejemplo), sino se informa el dispositivo de cuales puntos de accesos son apropiado con que asociar. Una vez que el dispositivo ha escaneado la área, y encontrado que el punto apropiado de acceso está disponible para su uso, estos propiedades están fijados.</p>

			<p>El script que hace todo el trabajo está ubicado en:</p>

<pre> /etc/wpa_supplicant/ifupdown.sh</pre>

			<p>Este está ejecutado por run-parts, lo cual, a su vez, es invocado por ifupdown durante los fases 'pre-up', 'pre-down' y 'post-down'.</p>


			<p>En el fase 'pre-up', un daemon de wpa_supplicant es lanzado, seguido por una series de comandos wpa_cli que configura una red según los opciones 'wpa-' estaban utilizados en /etc/network/interfaces para el dispositivo físico.</p>

			<p>Si el wpa-roam esta utilizado, un daemon de wpa_cli esta lanzada en el fase 'post-up'.</p>

			<p>En el fase 'pre-down', el daemon wpa_cli esta terminado, si está activo.</p>

			<p>En el fase 'post-down', el daemon wpa_supplicant daemon está terminado, esta terminada.</p>

			<h2>3. Modo #2: Modo Roaming</h2>

			<p>Un mecanismo roaming, auto suficiente y sencillo esta provisto por este paquete. Esta en la forma de un script de acción wpa_cli, /sbin/wpa_action, y se asuma el control de ifupdown una vez activado. El página man wpa_action(8) describe los detallas técnicas muy a fondo.</p>

			<p>Para activar un interfaz roaming, adapta el siguiente estrofa como ejemplo del interfaces(5):</p>

<pre>
iface eth1 inet manual
	wpa-driver wext
        wpa-roam /path/to/wpa_supplicant.conf
</pre>

			<p>Dos daemones están creado del ejemplo arriba wpa_supplicant y wpa_cli. Es una requerimiento de proveer el wpa_supplicant.conf. Un buen punto de comienzo está suministrado por el archivo ejemplo de configuración:</p>

<pre>cp /usr/share/doc/wpasupplicant/examples/wpa_supplicant.conf.template \
        /etc/wpa_supplicant/wpa_supplicant.conf
</pre>


			<p>Es requerido editar esta archivo de configuración, y agregue los bloques de redes para todos los redes conocidos. Si no entiende lo que esta significa, empezar ahora leyendo la página man wpa_supplicant.conf(5).</p>

			<p>Para cada red, puede especificar una opción especial, 'id_str'. Este debe ser una sencilla cadena de texto. Este cadena de texto forma la bases para perfilar la red; se correlaciona al interfaz lógica definido en el archivo interfaces(5). Cuando ningún 'id_str' es dado por un red, wpa_action asume que debe usar el interfaz lógica pre-seleccionada en su lugar. El interfaz pre-seleccionada puede ser escogida a través de la opción 'wpa-default-iface'.</p>

			<p>¿Entonces qué quiere decir todo esto? Vamos a ilustrar con una pequeño ejemplo tomado de la página man de wpa_action(8).</p>

		<h6>wpa_supplicant.conf ejemplo</h6>			
<pre>wpa_supplicant.conf ejemplo:
network={
        ssid="foo"
        # este id_str se notifica a /sbin/wpa_action para 'ifup uni'
        id_str="uni"
        key_mgmt=NONE
}

network={
        ssid="bar"
        # este id_str se notifica el /sbin/wpa_action a 'ifup home_static'
        id_str="home_static"
        psk=123456789...
}

network={
        ssid=""
        # si ningún 'id_str' es dado, /sbin/wpa_action se fija 'ifup default'
        key_mgmt=NONE
}
</pre>
</div>
	<div class="divider" id="wpa2">
		<h6>/etc/network/interfaces ejemplo</h6>
<pre>/etc/network/interfaces ejemplo:
# el interfaz roaming TIENE que usar el método manual de inet
# 'allow-hotplug' o 'auto' asegura que el daemon arranca automáticamente
allow-hotplug eth1
iface eth1 inet manual

        wpa-driver wext
        wpa-roam /etc/wpa_supplicant/wpa_supplicant.conf

 
# si no id_str, el 'default' es utilizado como el blanco de mapping pre-seleccionada
iface default inet dhcp


# id_str="uni"
iface uni inet dhcp

# id_str="home_static"
iface home_static inet static

        address 192.168.0.20
        netmask 255.255.255.0
        network 192.168.0.0

        broadcast 192.168.0.255
        gateway 192.168.0.1
</pre>

			<p>Un interfaz lógica es arrancada por via ifup, y bajado por ifdown, mientras el wpa_supplicant asocia y desasocia con el red asociado a el por la opción 'id_str' utilizado en el archivo de configuración wpa_supplicant.conf.</p>

			<p>Un registro de acciones de /sbin/wpa_action's actions es creado en /var/log/wpa_action.log, por favor anexa ese registro cuando reporta algún problema.</p>

<h2>Controlando el Daemon Roaming con  wpa_action</h2>

			<p>Una vez comenzada el daemon roaming, el asuma control de ifupdown. Eso es; wpa_cli llama a ifup cuando el  wpa_supplicant ha asociado exitosamente con un punto de acceso, y llamas a ifdown cuando la conexión esta perdido o terminado. Mientras el daemon roaming es activo, ifupdown no debe ser controlado directamente por comandos manuales, sino, el /sbin/wpa_action esta provisto para para y recargar el daemon roaming. Por ejemplo, para parar el daemon roaming en el dispositivo 'eth1':</p>

<pre>wpa_action eth1 stop</pre>


			<p>Cuando esta requerido de actualizar el daemon roaming con nuevas detallas sobre la red, esté puede ser realizado sin pararlo. Editar el archivo wpa_supplicant.conf que esta siendo utilizado por el daemon con las nuevas detallas del red, agregue configuraciones opcionales a /etc/network/interfaces que están especifica a la nueva red (enlazada por 'id_str') y entonces, recargar (reload) el daemon así:</p>

<pre>wpa_action eth1 reload</pre>

			<p>Para detalles técnicas completas de lo que el wpa_action puede hacer, lee la página man de wpa_action(8).</p>

</div>
	<div class="divider" id="wpa3">
		<h2>Afinando la configuración Roaming</h2>

			<p>Puede encontrar situaciones donde puntos múltiples de acceso están en proximidad cercana. Puede escoger cual esta preferido, manualmente, con el wpa_cli o wpa_gui, o puede dará a cada red su prioridad. Este es provisto con la opción 'prioridad' de  wpa_supplicant.conf.</p>

</div>
	<div class="divider" id="wpa4">
		<h2>El afiche del registro</h2>

			<p>Todo actividad del daemon roaming es recordado en el /var/log/wpa_action.log. Lo siguiente información esta registrado:</p>

		<p>*hora y fecha<br /> *nombre del interfaz y el evento de acción<br /> *valores de variables del ambiente (WPA_ID, WPA_ID_STR, WPA_CTRL_DIR)<br /> *si el ifupdown comando fue ejecutado<br /> *estatus del wpa_cli (basado en WPA-PSK, red puede mostrar info. diferente)<br /> *bssid<br /> *ssid<br /> *id<br /> *id_str<br /> *pairwise_cipher<br /> *group_cipher<br /> *key_mgmt<br /> *wpa_state<br /> *ip_address</p>
	
	
</div>
	<div class="divider" id="wpa5">	
		<h2> Usando los scripts de Mapping External (por ejemplo, guessnet)</h2>

			<p>En adición al mapeo interno de interfaces lógicas via el 'id_str', el wpa_action puede llamar scripts externo de mapeo. Un script de mapeo debe regresar el nombre del interfaz lógica que debe ser levantada. Cualquier script de mapeo que funciona desde el mecanismo de mapeo ifupdowns (ver páginas man interfaces) debe también funcionar cuando llamado desde el wpa_action.</p>

			<p>Para llamar un script de mapeo agregue una línea al 'wpa-mapping-script name-of-the-script' a la estrofa de interfaces del dispositivo físico de roaming. (Puede que tener que especificar la ruta absoluta al script de mapeo.)</p>


			<p>La contenido de las líneas empezando con wpa-map están pasado al stdin del script de mapeo. En vista de que el ifupdown sólo permite una línea de wpa-map, puede adjuntar cualquier número a wpa-map para líneas adicionales. Por ejemplo:</p>

<pre>
iface wlan0 inet manual
        wpa-driver wext
        wpa-roam /etc/wpa_supplicant/wpa_supplicant.conf
        wpa-mapping-script guessnet-ifupdown
        wpa-map0 home
        wpa-map1 work
        wpa-map2 school
        # ... adicional líneas wpa-mapX según requerimiento
</pre>
			<p>Por pre-selección, el script de mapeo será sólo utilizado cuando ningún 'id_str' es disponible para la red corriente. Si deseas desactivar completamente el pre-seleccionado de 'id_str', y utilizar solamente un script externo de mapeo, utilizar la opción 'wpa-mapping-script-priority 1'  para anular el comportamiento pre-seleccionado.</p>

			<p>Si el script de mapeo regresa una cadena vació el wpa_action recurrió al interfaz 'default' (preseleccionada), a menos que hay una alternativa definida por la opción 'wpa-roam-default-iface'.</p>

			<p>Por debajo hay un ejemplo más avanzada, utilizando el guessnet-ifupdown como el script externo de mapeo.</p>

		<h6>/etc/network/interfaces con ejemplo de mapeo externo</h6>
<pre>/etc/network/interfaces con ejemplo de mapeo externo:
allow-hotplug wlan0
iface wlan0 inet manual

        wpa-driver wext
        wpa-roam /etc/wpa_supplicant/wpa_supplicant.conf
        wpa-roam-default-iface default-wparoam
        wpa-mapping-script guessnet-ifupdown
        wpa-map default: default-guessnet
        wpa-map0 home_static
        wpa-map1 work_static


# school solamente puede ser escogido via un igual, 'id_str':
iface school inet dhcp

        # resolvconf
        dns-nameservers 11.22.33.44 55.66.77.88

iface home_static inet static

        address 192.168.0.20
        netmask 255.255.255.0

        network 192.168.0.0
        broadcast 192.168.0.255
        gateway 192.168.0.1
        test peer address 192.168.0.1 mac 00:01:02:03:04:05


iface work_static inet static

        address 192.168.3.200
        netmask 255.255.255.0
        network 192.168.3.0
        broadcast 192.168.3.255

        gateway 192.168.3.1
        test peer address 192.168.3.1 mac 00:01:02:03:04:05

iface default-guessnet inet dhcp

iface default-wparoam inet dhcp
</pre>

			<p>En este ejemplo el wpa_action utilizará el guessnet para la selección de un interfaz lógica apropiada solamente cuando ningún opción 'id_str' ha sido provisto para la red corriente en el wpa_supplicant.conf suministrado.</p>

			<p>Los líneas 'wpa-map' provea a guessnet con el interfaz lógica que es de ser probado tanto como el interfaz pre-seleccionada que será utilizada cuando todas las pruebas fallan. Los líneas 'test' de cada interfaz lógica están utilizado para determinar si estamos actualmente conectado a esa red. Por ejemplo, el guessnet escoja el interfaz lógica 'home_static' si existe un dispositivo con una dirección IP de 192.168.0.1 y un MAC de 00:01:02:03:04:05 en la red corriente. Si todos las pruebas fallan, el interfaz 'default-guessnet' será configurado.</p>


			<p>Por favor, lea la página man de guessnet(8) para más información.</p>

			<h2>4. Búsqueda de averías</h2>

			<p>Para depurar problemas de conexión, asociación y autenticación, sugerimos iniciar el `wpa_cli -i &lt;interface&gt;` en una consola diferente, antes de iniciar el interfaz. Usa el nivel '0' de comando primero, para recibir todos los mensajes de depuración. Entonces, usa `ifup --verbose &lt;interface&gt;` para recibir mensajes más completos del script que inicio el wpasupplicant.</p>

	<div class="divider" id="wpa6">
		<h2>* ssids escondido</h2>

			<p>Para referencia, ver #358137. Para poder asociar los ssids escondidos, por favor intenta fijar la opción 'ap_scan=1' en la sección global, y 'scan_ssid=1' en la sección del bloque de red (network block) sección del archivo de configuración de wpa_supplicant.conf. Si están utilizando el modo gerenciado, puedo realizarlo con estas estrofas:</p>

<pre>
iface eth1 inet dhcp
wpa-conf managed
wpa-ap-scan 1
wpa-scan-ssid 1
# ... opciones adicionales para configuraciones
</pre>

			<p>Según el #368770, asociación puede llevar un largo tiempo para asociar a redes seguro WEP. En algunas casos, fijando el parámetro 'ap_scan=2' en el archivo de configuración, (o utilizando una estrofa 'wpa-ap-scan 2', que es lo equivalente) puede ayudar mucho en acelerar el asociación.</p>

			<h2>5. Consideraciones de seguridad</h2>

	<div class="divider" id="wpa7">
		<h2>Permisos de archivos de configuración</h2>
			<p>Es importante mantener privado los PSK's y otra información sensible acerca de los configuraciones privado de su red, entonces, asegurar que todos los archivos de configuraciones, que contiene datos importantes, están leíbles solamente para su dueño. Por ejemplo:</p>

<pre>
chmod 0600 /etc/network/interfaces
# sustituir la ruta de su archivo wpa_supplicant.conf 
chmod 0600 /etc/wpa_supplicant/wpa_supplicant.conf
</pre>
			<p>Por pre-selección, /etc/network/interfaces es leíble por todo el mundo, y así no es apropiado para contener claves secretos y pases.</p>


	</div>
	<div class="spacer05"></div>
</div>
</div>
</div>
</body>
</html>
