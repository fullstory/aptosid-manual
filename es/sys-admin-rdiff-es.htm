<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
   "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="es">
<head>
	<title>Manuales de aptosid - rdiff</title>
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
	<style type="text/css" media="all">@import url("../lib/css-js/content.css");</style>
        <style type="text/css" media="all">@import url("../lib/css-js/menu.css");</style>
        <style type="text/css" media="print">@import url("../lib/css-js/print.css");</style>
        <link rel ="shortcut icon" href="../lib/favicon/manual.ico" />
        <script type="text/javascript" src="../lib/css-js/menu2.js"></script>
        <!--[if lt IE 8]>
        <link rel="stylesheet" type="text/css" href="../lib/css-js/ie_5-7_override.css">
        <![endif]-->
        <!--[if lt IE 7]>
        <link rel="stylesheet" type="text/css" href="../lib/css-js/ie_5-6_override.css">
        <![endif]-->
</head>
<body>
<!-- Last translation revision by Richard 18/12/2007 1830hrs UTC -->
<div id="menu"> <!-- menu starts here es lang maintained by Luis_P -->
<!--aptosid Operating System Manual menu-version-02.12.2011.08.12 -->
<!-- menu last updated by bluewater 2011.08.12 0814 hrs UTC -->
	<div id="menu-header">
	      <a href="http://aptosid.com/"><img src="../lib/logos/manual-aptosid-logo.png" title="ir a aptosid.com y Forum y Wiki" alt="aptosid.com logo" /></a>
	</div>
	<ul id="top-list">
		<li><a href="manual-search-es.htm#search-on"> <img src="../lib/logos/manual-search-22x22.png" title="Search Manual" alt="Search" />Buscar</a> </li>
	</ul>
	<div id="flags-2">
			<a href="../flag-index.html"><img src="../lib/logos/aptosid-lang-100x64.png" title="Seleccione otro idioma - Choose another language" alt="lang-switch" /></a>
	</div>
	<ul>
<li onmouseover="showHide( 1 );" onmouseout="startTime();" ><a href="welcome-es.htm">Manual aptosid</a>
			<ul class="sub-menu" id="sm1">
				<li><a href="welcome-es.htm#welcome-gen">Manual de usuario &#8658;</a>
					<ul class="sub2-menu" id="sm1a">
					  <li><a href="credits-es.htm#cred-team">Créditos</a></li>
					</ul>
					</li>
		<li><a href="welcome-es.htm#how-to">Cómo usar este manual &#8658;</a>
					<ul class="sub2-menu" id="sm1b">
					  <li><a href="welcome-es.htm#how-to">Cómo usar este manual</a></li>
					  <li><a href="welcome-es.htm#table-contents">Indice de Contenido</a></li>
					</ul>
					</li>
		<li><a href="help-es.htm#help-gen">Recibir ayuda &#8658;</a>
					<ul class="sub2-menu" id="sm1c">
					  <li><a href="help-es.htm#help-gen">Dónde Conseguir Ayuda</a></li>
					  <li><a href="help-es.htm#paste">IRC !paste</a></li>
					</ul>
					</li>
		<li><a href="wel-quickstart-es.htm#welcome-quick">Guía rápida</a></li>
		</ul>
		</li>
<li  onmouseover="showHide( 2 );" onmouseout="startTime();" ><a href="cd-dl-burning-es.htm"> ISO, Versiones, Espejos y Quemado</a>
			   <ul class="sub-menu" id="sm2">
				<li><a href="cd-content-es.htm#cd-content">Contenido del ISO y Requerimientos &#8658;</a>
					<ul class="sub2-menu" id="sm2a">
					  <li><a href="sys-admin-release-es.htm#rolling">Notas del lanzamiento</a></li>
					</ul>
					</li>
		    <li><a href="cd-dl-burning-es.htm#download-aptosid">Espejos aptosid, descargar y quemar &#8658;</a>
				<ul class="sub2-menu" id="sm2b">
					  <li><a href="cd-dl-burning-es.htm#md5">Suma de verificación, md5</a></li>
					  <li><a href="cd-dl-burning-es.htm#burn-nero">Quemar en Windows</a></li>
					  <li><a href="cd-dl-burning-es.htm#burn-linux">Quemar en Linux</a></li>
					  <li><a href="cd-no-gui-burn-es.htm#burning-no-gui">Script para quemar ISO</a></li>
					  <li><a href="cd-no-gui-burn-es.htm#burn-no-gui-gen">Quemar sin GUI</a></li>
					  <li><a href="cd-dl-burning-es.htm#download-aptosid">Espejos de descarga aptosid</a></li>
					</ul>
					</li>
		      </ul>
		</li>
<li  onmouseover="showHide( 3 );" onmouseout="startTime();" ><a href="live-mode-es.htm">LiveCD: el modo en vivo</a>
			<ul class="sub-menu" id="sm3">
				<li><a href="live-mode-es.htm#rootpw">Clave raíz del LiveCD</a></li>
				<li><a href="live-mode-es.htm#live-cd-installsoft">Instalar Software con el LiveCD</a></li>
			</ul>
		</li>
<li  onmouseover="showHide( 4 );" onmouseout="startTime();" ><a href="term-konsole-es.htm">Terminal/Consola</a>
			<ul class="sub-menu" id="sm4">
				<li><a href="term-konsole-es.htm#term-kon"> Terminal (consola) &#8658;</a>
					<ul class="sub2-menu" id="sm4a">
					  <li><a href="term-konsole-es.htm#term-kon"> Terminal (consola)</a></li>
					  <li><a href="term-konsole-es.htm#colours"> prompts coloreados de terminal : </a></li>
					  <li><a href="term-konsole-es.htm#cli-help">Ayuda en línea de Comando</a></li>
					  <li><a href="help-es.htm#init3-tools">Herramientas que hay que conocer en el modo texto (tty) - init 3</a></li>
					  <li><a href="term-konsole-es.htm#term-cmds">Comandos del terminal de Linux</a></li>
					</ul>
					</li>
			  <li><a href="term-konsole-es.htm#sux"> sux / sudo</a></li>
		    </ul>
		</li>
<li  onmouseover="showHide( 5 );" onmouseout="startTime();" ><a href="cheatcodes-es.htm">Chuletas (cheatcodes)</a>
			<ul class="sub-menu" id="sm5">
				<li><a href="cheatcodes-es.htm#cheatcodes">Chuletas aptosid específicas para Live-ISO</a></li>
				<li><a href="cheatcodes-es.htm#cheatcodes-linux">Chuletas genericas Linux</a></li>
				<li><a href="cheatcodes-vga-es.htm#vga">Códigos VGA</a></li>
			</ul>
		</li>
<li  onmouseover="showHide( 6 );" onmouseout="startTime();" ><a href="part-gparted-es.htm">Particionar el Disco Duro; Modos tradicional, GPT y LVM</a>
		<ul class="sub-menu" id="sm6">
			<li><a href="part-gparted-es.htm#hd-ntfs3g">Escribir en Particiones NTFS con ntfs-3g</a></li>
			<li><a href="part-lvm-es.htm#part-lvm">Particiones para usar LVM - Gestor Lógico de Volúmenes</a></li>
			<li><a href="part-gparted-es.htm#partition">Particionar con un gestor gráfico &#8658;</a>
					<ul class="sub2-menu" id="sm6a">
					  <li><a href="part-gparted-es.htm#partition">Particionar el Disco Duro usando GParted / KDE Partition Manager</a></li>
					  <li><a href="part-gparted-es.htm#ntfs">Redimensionar particiones NTFS con GParted/KDE Partition Manager</a></li>
					</ul>
					</li>
		<li><a href="part-cfdisk-es.htm#partition">Particionar el Disco Duro en línea de órdenes &#8658;</a>
					 <ul class="sub2-menu" id="sm6b">
					    <li><a href="part-cfdisk-es.htm#partition">Particionar el Disco Duro con cfdisk</a></li>
					    <li><a href="part-cfdisk-es.htm#formating">Formatear después de particionar con cfdisk</a></li>
					    <li><a href="part-gdisk-es.htm#gdisk-6">Formatear después de particionar con gdisk</a></li>
					    <li><a href="part-gdisk-es.htm#gisk-1">GPT Particionar con gdisk</a></li>
					</ul>
					</li>
		<li><a href="part-size-examp-es.htm#part-example">Particionado Básico &#8658;</a>
					<ul class="sub2-menu" id="sm6c">
					  <li><a href="part-size-examp-es.htm#part-example">Ejemplos de dimensiones de particiones</a></li>
					  <li><a href="part-uuid-es.htm#uuid">UUID, Reconstruir fstab y crear nuevos puntos de montaje</a></li>
					  <li><a href="part-cfdisk-es.htm#disknames">Nombrar discos: en breve</a></li>
					</ul>
					</li>
		      </ul>
		</li>
<li  onmouseover="showHide( 7 );" onmouseout="startTime();" ><a href="hd-install-es.htm">Opciones de la Instalación - HD, USB, VM y Cryptroot</a>
		<ul class="sub-menu" id="sm7">
		  <li><a href="hd-install-es.htm#Inst-prep">Preparar para Instalar &#8658;</a>
					<ul class="sub2-menu" id="sm7a">
					  <li><a href="hd-install-es.htm#Inst-prep">Preparar para Instalar </a></li>
					  <li><a href="hd-install-es.htm#Installation">Instalar al disco duro</a></li>
					  <li><a href="hd-install-es.htm#first-hd-boot">Primera inicialización</a></li>
					</ul>
					</li>
		<li><a href="hd-install-opts-es.htm#fromiso">Arranque fromiso &#8658;</a>
					<ul class="sub2-menu" id="sm7b">
					  <li><a href="hd-install-opts-es.htm#fromiso">Iniciar fromiso - Vista general</a></li>
					  <li><a href="hd-install-opts-es.htm#grub2-fromiso">Iniciar 'fromiso' con Grub 2</a></li>
					  <li><a href="hd-install-opts-es.htm#fromiso-persist">'fromiso' y 'persist'</a></li>
					</ul>
					</li>
		<li><a href="hd-install-opts-es.htm#usb-hd">Instalar en un USB-DD - aptosid específico - aptosid-en-un-lápiz_USB &#8658;</a>
					<ul class="sub2-menu" id="sm7c">
					  <li><a href="hd-install-opts-es.htm#usb-hd">Instalar en un USB-DD - aptosid Específico - aptosid en un lápiz USB</a></li>
					  <li><a href="hd-ins-opts-oos-es.htm#raw-usb">Grabar aptosid en un lápiz USB/SSD con cualquier sistema Linux, MS Windows o Mac OS X</a></li>
					</ul>
					</li>
		  <li><a href="hd-install-crypt-es.htm#install-crypt">Instalación en particiones cifradas - cryptroot</a></li>
		  <li><a href="nbdboot-es.htm#nbd1">Arrancar aptosid en una red</a></li>
		  <li><a href="hd-install-vmopts-es.htm#vmopts">Opciones de instalación en una máquina virtual</a></li>
		</ul>
		</li>
<li  onmouseover="showHide( 8 );" onmouseout="startTime();" ><a href="gpu-es.htm">Tarjetas Gráficas, monitores, Xorg &amp; controladores</a>
	<ul class="sub-menu" id="sm8">
		<li><a href="hw-dev-mon-es.htm#mon-res">Resolución de pantalla y monitores  &#8658;</a>
					<ul class="sub2-menu" id="sm8a">
					  <li><a href="hw-dev-mon-es.htm#mon-res">Resolución de pantalla y monitores</a></li>
					  <li><a href="hw-dev-mon-es.htm#xrandr">Monitores Duales y xrandr</a></li>
					  <li><a href="hw-dev-mon-es.htm#mon-binary">Monitores Duales (utilizando binarios)</a></li>
					</ul>
					</li>
		<li><a href="gpu-es.htm#foss-xorg">Controladores GPU &#8658;</a>
					<ul class="sub2-menu" id="sm8b">
					  <li><a href="gpu-es.htm#ati-3d">Controladores AMD/ATI 3D</a></li>
					  <li><a href="gpu-es.htm#intel">Controladores Intel 2D y 3D</a></li>
					  <li><a href="gpu-es.htm#nvidia">Controladores Nvidia 3D</a></li>
					  <li><a href="gpu-es.htm#foss-xorg">Controladores código abierto Xorg</a></li>
					</ul>
					</li>
			  <li><a href="nf-firm-es.htm#fw-detect">Detección de firmware non-free</a></li>
			  <li><a href="nf-firm-es.htm#non-free-firmware">Añadir non-free a Sources List</a></li>
		</ul>
		</li>
<li  onmouseover="showHide( 9 );" onmouseout="startTime();" ><a href="wm-dm-es.htm">Gestor de ventanas</a>
		    <ul class="sub-menu" id="sm9">
			  <li><a href="wm-dm-es.htm">Gestores de Ventanas KDE y XFCE &#8658;</a>
					  <ul class="sub2-menu" id="sm9a">
					    <li><a href="wm-dm-es.htm#xfce-notes">Utilidades de XFCE</a></li>
					    <li><a href="wm-dm-es.htm#install-add">Utilidades extras de KDE</a></li>
					    <li><a href="wm-dm-es.htm#desk-freeze">El escritorio se traba</a></li>
					    <li><a href="wm-dm-es.htm#kde-login">No puedo hacer login en KDE</a></li>
					    <li><a href="wm-dm-es.htm#ch-th">Cambiar Temas</a></li>
					</ul>
					</li>
		      <li><a href="wm-dm--es.htm#dm">Instalación de otros gestores de escritorio</a></li>
		</ul>
		</li>
<li  onmouseover="showHide( 11 );" onmouseout="startTime();" ><a href="inet-ceni-es.htm">Conexión a Internet, WiFi, LAN y Redes</a>
		    <ul class="sub-menu" id="sm11">
			<li><a href="lamp-apache-es.htm">Pila de LAMP aptosid &#8658;</a>
					<ul class="sub2-menu" id="sm11a">
					    <li><a href="lamp-apache-es.htm#serv-apache">Pila de LAMP aptosid </a></li>
					    <li><a href="lamp-apache-es.htm#serv-ftp">Clientes FTP</a></li>
					    <li><a href="lamp-apache-es.htm#serv-sec">Protocolos de Seguridad</a></li>
					    <li><a href="lamp-apache-es.htm#serv-ssl">SSL</a></li>
					    <li><a href="lamp-sql-es.htm#serv-mysql">Configurar MySQL</a></li>
					    <li><a href="lamp-ppp-es.htm#serv-php">PHP en Apache</a></li>
					    <li><a href="ntp-server-es.htm#ntp-server">Configurar un servidor horario</a></li>
					</ul>
					</li>
		<li><a href="tor-privoxy-es.htm#tor">Firewalls (Muros de Fuego) y privacidad &#8658;</a>
					<ul class="sub2-menu" id="sm11b">
					    <li><a href="tor-privoxy-es.htm#tor">Tor</a></li>
					    <li><a href="tor-privoxy-es.htm#privoxy">Privoxy</a></li>
					    <li><a href="inet-ceni-es.htm#firewalls">Firewalls (Muros de Fuego)</a></li>
					</ul>
					</li>
		<li><a href="ssh-es.htm#ssh-x">SSH y Samba &#8658;</a>
					<ul class="sub2-menu" id="sm11c">
						  <li><a href="samba-es.htm#setup">Configurar un servidor Samba</a></li>
						  <li><a href="samba-es.htm#configure">Configurar SAMBA (Windows)</a></li>
						  <li><a href="ssh-es.htm#ssh-fs">Montaje remoto con SSH </a></li>
						  <li><a href="ssh-es.htm#ssh-x">Aplicaciones X Window via SSH</a></li>
						  <li><a href="ssh-es.htm#ssh-f">SSH con Konqueror</a></li>
						  <li><a href="ssh-es.htm#ssh-w">Seguimiento-X con SSH desde Win-PC</a></li>
						  <li><a href="ssh-es.htm#ssh">SSH y seguridad</a></li>
					</ul>
					</li>
		<li><a href="inet-ceni-es.htm#netcardconfig">Conexiones WIFI &#8658;</a>
						<ul class="sub2-menu" id="sm11d">
						    <li><a href="inet-ceni-es.htm#netcardconfig">'ceni': Conectar en línea</a></li>
						    <li><a href="inet-wpagui-es.htm#wpa-roaming-gui">WiFi - entorno gráfico WPA</a></li>
						    <li><a href="inet-setup-es.htm#net-set1">WiFi - Configuración del WiFi Roaming</a></li>
						    <li><a href="inet-wpa-es.htm#wpa">WiFi - wpasupplicant</a></li>
						    <li><a href="inet-ifplug-es.htm#hotswitch">Cambio de la red entre WiFi y Cable</a></li>
					</ul>
					</li>
		<li><a href="inet-ceni-es.htm#netcardconfig">Conexiones por cable &#8658;</a>
						<ul class="sub2-menu" id="sm11e">
						    <li><a href="inet-ceni-es.htm#dial-mod">Modems de 56k</a></li>
						    <li><a href="inet-ceni-es.htm#netcardconfig">'ceni': Conectar en línea</a></li>
					</ul>
					</li>
				</ul>
			    </li>
<li  onmouseover="showHide( 12 );" onmouseout="startTime();" ><a href="sys-admin-apt-es.htm">Gestión de Paquetes y Actualización</a>
	<ul class="sub-menu" id="sm12">
		<li><a href="sys-admin-apt-es.htm#apt-cook">APT y 'sources.list' &#8658;</a>
					<ul class="sub2-menu" id="sm12a">
					    <li><a href="sys-admin-apt-es.htm#apt-cook">Guía de APT y 'sources list'</a></li>
					    <li><a href="sys-admin-apt-es.htm#apt-install">Instalar un Paquete</a></li>
					    <li><a href="sys-admin-apt-es.htm#apt-delete">Quitar un Paquete</a></li>
					    <li><a href="sys-admin-apt-es.htm#apt-downgrade">Mantener ('Hold') un Paquete y versión anterior</a></li>
					    <li><a href="sys-admin-apt-es.htm#apt-cache">Buscar un paquete con 'apt-cache'</a></li>
					    <li><a href="sys-admin-apt-es.htm#gui-pacsea">Buscar un paquete en entorno gráfico</a></li>
					</ul>
				</li>
		<li><a href="sys-admin-kern-upg-es.htm#kern-upgrade">Actualizar el Kernel &#8658;</a>
					<ul class="sub2-menu" id="sm12b">
					    <li><a href="sys-admin-kern-upg-es.htm#kern-remove">Quitar kernels anteriores</a></li>
					    <li><a href="sys-admin-kern-upg-es.htm#kern-upgrade">Actualizar el Kernel</a></li>
					    <li><a href="sys-admin-kern-upg-es.htm#dmakms">Instalación dinámica de módulos del kernel con dmakms</a></li>
					</ul>
				</li>
		<li><a href="sys-admin-apt-es.htm#apt-upgrade">Actualizar el sistema instalado: 'dist-upgrade' - Vista general &#8658;</a>
					<ul class="sub2-menu" id="sm12c">
					    <li><a href="sys-admin-upgrade-es.htm#live-cd-upgrade">Actualización mediante un Live-ISO</a></li>
					    <li><a href="sys-admin-apt-locarmirr-es.htm#approx">Actualización de varios PCs en una red</a></li>
					    <li><a href="sys-admin-apt-es.htm#apt-upgrade">Actualizar el sistema instalado: 'dist-upgrade' - Vista general</a></li>
					    <li><a href="sys-admin-apt-es.htm#du-st">Actualizar el sistema instalado: 'dist-upgrade' - Los pasos</a></li>
					</ul>
				  </li>
			    </ul>
		</li>
<li  onmouseover="showHide( 13 );" onmouseout="startTime();" ><a href="sys-admin-gen-es.htm">Administración del Sistema</a>
	<ul class="sub-menu" id="sm13">
		<li><a href="bios-freedos-es.htm#bois-prep">Actualizar el BIOS con FreeDOS</a></li>
		<li><a href="vir-rkits-es.htm#virus-rkits">Buscadores de Virus y Rootkit</a></li>
		<li><a href="hd-install-es.htm#adduser">Agregar nuevo Usuario y claves &#8658;</a>
					<ul class="sub2-menu" id="sm13a">
					    <li><a href="hd-install-es.htm#adduser">Agregar un nuevo Usuario</a></li>
					    <li><a href="sys-admin-gen-es.htm#pw-lost">Clave root Perdida, nuevas claves</a></li>
					</ul>
					</li>
		<li><a href="sys-admin-gen-es.htm#start-services">Servicios y niveles de ejecución &#8658;</a>
					<ul class="sub2-menu" id="sm13b">
					    <li><a href="sys-admin-gen-es.htm#start-services">Activar/desactivar servicios</a></li>
					    <li><a href="sys-admin-gen-es.htm#pkill">Matar un proceso o servicio</a></li>
					    <li><a href="sys-admin-gen-es.htm#init">niveles de ejecución en aptosid - init</a></li>
					</ul>
					</li>
		<li><a href="sys-admin-rsync-es.htm#rsync">Copia de seguridad del sistema &#8658;</a>
					  <ul class="sub2-menu" id="sm13c">
					    <li><a href="sys-admin-rdiff-es.htm#rdiff">Respaldar con 'rdiff'</a></li>
					    <li><a href="sys-admin-rsync-es.htm#rsync">Respaldar con 'rsync'</a></li>
					    <li><a href="home-es.htm#home-bu">Mudando el /home</a></li>
					</ul>
					</li>
		<li><a href="sys-admin-gen-es.htm#fonts">CUPS, Fuentes y Sonido &#8658;</a>
					  <ul class="sub2-menu" id="sm13d">
					     <li><a href="sys-admin-gen-es.htm#fonts">Fuentes</a></li>
					     <li><a href="sys-admin-gen-es.htm#cups">Sistema de impresión CUPS</a></li>
					     <li><a href="sys-admin-gen-es.htm#sound">Mezcladores de sonido</a></li>
					</ul>
					</li>
		<li><a href="sys-admin-grub2-es.htm#grub2">Grub2 &#8658;</a>
					  <ul class="sub2-menu" id="sm13f">
					    <li><a href="sys-admin-grub2-es.htm#chroot">Grub2 - Recuperar Grub con chroot</a></li>
					    <li><a href="sys-admin-grub2-es.htm#mbr-over-grub2">Grub2 - Sobre-escribir el MBR</a></li>
					    <li><a href="sys-admin-grub2-es.htm#multi-os">Grub2 - Iniciación Dual y Múltiple</a></li>
					    <li><a href="sys-admin-grub2-es.htm#grub1-grub2">Grub2 -Actualización desde Grub1</a></li>
					    <li><a href="sys-admin-grub2-es.htm#grub2">Grub2 - Vista general</a></li>
					</ul>
					</li>
			</ul>
		</li>
	</ul>
<!-- menu ends here --> </div>
<div id="main-page">
	<div class="divider" id="rdiff">
			<h2 id="top-header">Copias de seguridad de un sistema con rdiff-backup</h2>
				<p>rdiff-backup es una herramienta para respaldar sus archivos. (Puede ser utilizada en cualquier variedad de *nix).</p>

				<p class="highlight-2">Ejecute los comandos como root en una consola, a menos que se le indique otra cosa.</p>

				<p>*Sirve para la recuperación de un dist-upgrade, kernel-upgrade fallido, etc., (y también para restaurar archivos concretos).<br /> *solamente respalda lo que ha sido cambiado desde el último rsync (así que cada respaldo lleva poco tiempo).<br /> *mantiene un historial de cambios (esto permite que pueda restaurar un archivo borrado hace tres semanas!)<br /> *realiza respaldos seguros sobre una red (usando ssh).<br /> *respalda particiones aunque estén montadas (facilita la automatización de una copia de seguridad diaria ... no tiene que desmontar).<br /> *puede restaurarlo todo si el disco duro se muere y tiene que reemplazarlo por otro.<br /> *Respalda redes grandes (sin problemas en Linux, más difícil con Windows) y es bastante usado en el ámbito empresarial .<br /> *es una aplicación manejada por la línea de órdenes, así que es bueno para quienes gustan de automatizar respaldos (por ejemplo, con un script de bash lanzado por cron).<br /> *recuerda y maneja permisos y dueños de archivos, y también enlaces simbólicos (y todo este tipo de cosas); así cuando restaure, se encuentrará todo exactamente como estaba.</p>

			<h6>Lo que va a necesitar</h6>
				<p>rdiff-backup mantiene una copia (no comprimida) de los archivos que está respaldando y también mantiene un historial (respaldos incrementales), lo que significa que el espacio para las copias de seguridad tiene que ser mayor que lo que está respaldando. Si, por ejemplo, está respaldando datos que ocupan 100 gigas de espacio, puede necesitar 120 gigas (preferiblemente en otro disco duro separado!).</p>

			<h6>Cómo configurarlo</h6>
				<p>Vamos a definir un caso hipotético:<br /> * un disco duro de 100 gigabytes (sda) está en uso, con sda1 montado para la partición /root (raíz) y sda5 montado para almacenar musica y otros archivos, mientras que  sda6 se usa para swap.<br /> * hay otro disco duro de 200 gigas (sdb) que no está siendo utilizado por el sistema, con una sóla montura sdb1 ... vamos a utilizar éste para nuestros respaldos.<br /> * la dirección IP es 192.168.0.1</p>

				<p>Lo primero que hay que hacer es instalar rdiff-backup:</p>
<pre>
# apt-get install rdiff-backup
</pre>
				<p>Ahora, aunque ya podemos respaldar cualquier directorio, como en este caso hipotético vamos a guardar particiones enteras --deseamos respaldar el sda1 y sda5 (no queremos respaldar el sda6)--, entonces creamos unos directorios para almacenar los datos:</p>
<pre>
# mkdir -p /media/sdb1/rdiff-backups/192.168.0.1/root
# mkdir -p /media/sdb1/rdiff-backups/192.168.0.1/sda5
</pre>
				<p>Es necesario dar la dirección IP por si desea utilizar este ordenador para respaldar otro (hablaremos de esto más adelante).</p>

			<h6>Haciendo copias de seguridad</h6>

				<p>rdiff-backup usa la sintaxis <span class="highlight-3">rdiff-backup dir-fuente dir-destino</span>. Nota: especifique siempre nombres de directorios, no nombres de archivos.</p>

				<p>Para respaldar el sda5, ejecute:</p>
<pre>
# rdiff-backup /media/sda5 /media/sdb1/rdiff-backups/192.168.0.1/sda5
</pre>
				<p>Y para respaldar la partición-raíz, haga:</p>
<pre>
# rdiff-backup --exclude '/tmp/*' --exclude '/proc/*' --exclude '/sys/*' --exclude '/media/*/*' / /media/sdb1/rdiff-backups/192.168.0.1/root
</pre>
				<p>Cualquier error del tipo "AF_UNIX_ruta_demasiado_larga" será ignorado. Esto puede llevar bastante tiempo, ya que es la primera vez que la partición esta siendo respaldada y rdiff-backup tendrá que respaldar la partición entera (no solamente las diferencias). Note que tampoco deseamos respaldar /tmp ya que siempre está cambiando, ni el /proc ni /sys, pues no contienen verdaderos archivos de datos, ni tampoco deseamos respaldar puntos de montaje. Si incluye respaldos para montajes, estará respaldando el sdb1, y podemos entrar en un bucle infinito! Una manera de evitar esto es respaldar separadamente los puntos de montaje.</p>

				<p>La razón porque se usa '/proc/*' en vez de solamente '/proc' es que así causaría el respaldo del nombre del directorio, /proc, pero se ignoraría todo su contendido. Lo mismo para /tmp, /sys y, aún más interesante, todos los nombres de los puntos de montaje.</p>

				 <p>Así, si destroza su partición-raíz y hace una restauración completa, /tmp, /proc, /sys y todos los demás nombres de puntos de montaje serán creados de nuevo (justamente lo que debe ser). Si /tmp no existe cuando el X arranque, pueden haber problemas. Vea la página <i>man</i> sobre --exclude y --include para más información).</p>

			<h6>Restaurando directorios desde un respaldo</h6>

				<p>rdiff-backup usa la sintaxis:</p>
<pre>
rdiff-backup -r &lt;desde_donde&gt; &lt;directorio_fuente&gt; &lt;directorio_destino&gt;
</pre>
				<p>Ahora, si accidentalmente borra el directorio /media/sda7/photos por ejemplo, puede restaurarlo ejecutando lo siguiente:</p>
<pre>
# rdiff-backup -r now /media/sdb1/rdiff-backups/192.168.0.1/sda5/photos /media/sda5/photos
</pre>
				<p>La opción "-r now" significa restaurar desde el respaldo más reciente. Si estuvo respaldando todo periódicamente (quizás con crontab), y no se dio cuenta de que el directorio de fotos estaba perdido hasta unos días después, necesitará restaurar desde un respaldo más antiguo (y no del último ("now"), en vista que este último dice que /photos no existe). O quizás solamente quiera volver a una versión previa de algo.</p>

				<p>Si desea restaurar desde hace tres días, entonces utilice "-r 3D", pero como dice en la pagina man, note que:</p>

				<p class="highlight-1">"3D" refiere al instante 72 horas antes del presente, y si no existe respaldo creado justo en ese momento, el rdiff-backup restaurará lo que fue grabado en el respaldo previo. Por ejemplo, en el caso de arriba, si "3D" fue utilizado y hubieron respaldos de hace 2 días y 4 días, el directorio será restaurado a como era hace 4 días (entonces, tiene que pensar un poco antes de llevar a cabo la restauración).</p>

				<p>Utilice lo siguiente para obtener una lista de fechas y horas de cuándo fueron realizados los respaldos del sda5:</p>
<pre>
# rdiff-backup -l /media/sdb1/rdiff-backups/192.168.0.1/sda5
</pre>
			<h5>Restaurando particiones</h5>

				<p>También puede restaurar particiones enteras (puntos de montaje); después de todo, un punto de montaje no es otra cosa que un directorio.</p>

				<p class="highlight-2">PRECAUCIÓN:  No restaure la partición raíz si ha arrancado desde allí! Con una sola orden puede perder todos sus archivos en todas las particiones, incluyendo todos los respaldos en un disco duro separado!! rdiff-backup hace exactamente lo que se le ordena --si el respaldo para la partición-raíz tiene puntos de montaje vacíos, entonces para restaurarlos todos a como están en el respaldo tiene que borrar todo en los puntos de montaje para poder hacerlos iguales al respaldo.</p>

				<p>Para restaurar el sda5 desde el último respaldo, simplemente ejecute:</p>
<pre>
# rdiff-backup -r now /media/sdb1/rdiff-backups/192.168.0.1/sda5 /media/sda5
</pre>
			<h5>Restaurando la partición-raíz</h5>

				<p>Pero restaurar la partición raíz no es tan sencillo. No se puede restaurar la partición raíz mientras está montada (ver la PRECAUCIÓN arriba). Es realmente útil poder restaurar la partición raíz, así que si ocurre un desastre instalando/actualizando, o instalando un kernel nuevo, etc, tiene la tranquilidad de que podrá retroceder hasta donde estaba antes, y sólo necesitará unos 20 minutos.</p>

				<p>Una manera de restaurar la partición raíz es arrancar desde una partición de Linux extra, si tiene una en el disco duro. Entonces podrá restaurar la partición que desee ya que ahora no estará montada como /root. Después de restaurar la partición, vuelva a arrancar desde allí, y quedará exactamente como estaba cuando hizo el respaldo! Este es con diferencia el método más fácil.</p>

				<p>Otra manera de restaurar la partición-raíz es arrancar con el LiveCD de aptosid y llevar a cabo la restauración desde allí. El rdiff-backup está incluido en aptosid. En el caso de que la versión del LiveCD de aptosid no contega rdiff, puede escribir en la línea de comando de Grub (ver Opciones de Arranque, Cheatcodes), el cheatcode "unionfs" y eso le permite instalar aplicaciones usando el LiveCD. Tan solo arranque y entre los siguientes comandos:</p>
<pre>
$ sudo su
# wget -O /etc/apt/sources.list http://aptosid.com/files/misc/sources.list
# apt-get update
# apt-get install rdiff-backup
</pre>
				<h6>Ahora, vamos hacer la restauración:</h6>
<pre>
# mount /dev/sda1 /media/sda1
# mount /dev/sdb1 /media/sdb1
# rdiff-backup -r now /media/sdb1/rdiff-backups/192.168.0.1/root /media/sda1
</pre>

				<p>Nota: Si no tiene un LiveCD de aptosid, pero el que tiene apoya el "klik", puede instalar el rdiff-backup utilizando klik, y llamando:</p>
<pre>
$ sudo ~/.zAppRun ~/Desktop/rdiff-backup_0.13.4-5.cmg rdiff-backup -r now /media/sdb1/rdiff-backups/192.168.0.1/root /media/sda1
</pre>

				<p>Se recomienda que cuando haga un respaldo de la partición raíz con la intención de restaurarla si es necesario, compruebe que funciona el proceso de restauración. Nada es peor que pensar que todo está bien y luego encontrarse algo inesperado durante una emergencia.</p>

							<p>Si el disco duro ha cambiado o ha sido vuelto a formatear, compruebe los UUIDs, (o etiquetas), en <span class="highlight-3">/boot/grub/menu.lst (grub-legacy) o los ficheros en /etc/grub.d (grub2)</span> y <span class="highlight-3">/etc/fstab</span>, y cámbielos adecuadamente. Una manera fácil de conocer la información que permita alterar en caso necesario el menu.lst y el fichero fstab es hacer como root:</p>

<pre>
blkid
</pre>
			<h5>Copias de seguridad de otros PCs</h5>

				<p>Puede respaldar otro PC desde el PC local, siempre que el PC local pueda hacer ssh al otro PC y que tenga espacio suficiente en su disco duro. El servidor ssh (sshd) tiene que estar ejecutándose en el PC remoto. Los demás PCs no tienen por qué estar en el LAN local, puede estar en cualquier parte del mundo.</p>

				<p>Asumimos que el PC remoto tiene lo siguiente:<br /> 1) un disco duro de 100 gigas (sda) en uso, con solo montajes,<br /> 2) sda1 está siendo utilizado por la partición raíz,<br /> 3) en sda5 tenemos almacenandos archivos temporales que no deseamos respaldar,<br /> 4) sda6 es el swap <br /> 5) y la dirección IP es 192.168.0.2</p>

				<p>Nota: ambos discos duros de 100 gigas normalmente no podrán ser respaldados en el disco de 200 gigas con rdiff-backup (por falta de espacio para los archivos incrementales), pero en vista de que no estamos respaldando el sda5 en el PC remoto (y porque los discos duros usualmente no estan llenos al 100%, aún que no siempre cuente con esto), entonces puede considerar que hay suficiente espacio. Cada vez que rdiff-backup realiza un respaldo se crean más archivos incrementales, y esto necesita más y más espacio.</p>

				<p>Puede ordenar a rdiff-backup que solamente guarde un máximo de respaldos durante 1 mes (este comando se muestra más adelante), y así necesitará menos espacio que si mantuviera las copias de datos de un año. Y, por supuesto, si desea tener un año de respaldos de datos, entonces hay que tener suficiente espacio en el disco duro para almacenar un año de respaldos con sus archivos incrementales.</p>

				<p>Lo que hay que hacer en primer lugar es también instalar el rdiff-backup en el PC remoto, (igual que en cada computador que desee respaldar: todos, incluyendo el servidor de respaldo, tienen que tener el rdiff-backup instalado).</p>

				<p>Para respaldar el PC remoto en un PC local, ejecute en el PC local (cuya IP es por ejemplo: 192.168.0.1):  <span class="highlight-4">Fíjese en el uso de los dos puntos dobles :: </span></p>
<pre>
# mkdir /media/sdb1/rdiff-backups/192.168.0.2/root
# rdiff-backup --exclude '/tmp/*' --exclude '/proc/*' --exclude '/sys/*' --exclude '/media/*/*' 192.168.0.2::/ /media/sdb1/rdiff-backups/192.168.0.2/root
</pre>
				<p>Ahora si desea restaurar un directorio en el PC remoto, puede iniciar la restauración desde el PC local o desde el remoto.</p>

				<p>Así es cómo podría restaurar el directorio /usr/local/games en un PC remoto, iniciándolo desde el PC remoto:</p>
<pre>
# rdiff-backup -r now 192.168.0.1::/media/sdb1/rdiff-backups/192.168.0.1/root/usr/local/games /usr/local/games
</pre>
				<p>Y así cómo podría restaurar el directorio /usr/local/games en un PC remoto, iniciándolo desde el PC local:</p>
<pre>
# rdiff-backup -r now /media/sdb1/rdiff-backups/192.168.0.1/root/usr/local/games 192.168.0.2::/usr/local/games
</pre>
				<p>Se utiliza la misma sintaxis cuando se restaura la partición raíz desde un LiveCD (donde el PC remoto ha sido arrancado via un LiveCD --ver arriba).</p>

			<h5>Automatizando respaldos:</h5>

				<p>Si está respaldando desde otro PC hacia un PC local, la primer cosa a hacer es activar los logins de ssh sin clave usando claves ssh. <span class="highlight-2">Note que estamos hablando de hacer un login ssh como root. Esto puede ser fijado para que solamente comandos de rdiff-backup sean ejecutados como root, pero esto está más allá del alcance de este capítulo. Por favor, vea <a href="ssh-es.htm#ssh-s">Configuración SSH </a>. </span>Estamos dando por sentado una total confianza, y vamos a configurar la manera más sencilla de lograr logins sin clave.</p>

				<p>Desde el PC local, haga lo siguiente:</p>
<pre>
# [ -f /root/.ssh/id_rsa ] || ssh-keygen -t rsa -f /root/.ssh/id_rsa
</pre>
				<p>Y oprima Enter dos veces para dar claves en blanco. A continuación entre:</p>
<pre>
# cat /root/.ssh/id_rsa.pub | ssh 192.168.0.2 'mkdir -p /root/.ssh;\<!--dunno if this is wrong-->
&gt; cat - &gt;&gt;/root/.ssh/authorized_keys2'
</pre>
				<p>Le va a pedir su clave como root.</p>

				<p>Ahora puede hacer "ssh" al PC remoto como root sin tener que entrar una clave, y el respaldo con rdiff-backup puede ser automatizado.</p>

				<p>A continuación, cree un script de bash que contenga todos los comandos de rdiff-backup. Nuestro script puede parecerse a esto:</p>


<pre>
#!/bin/bash
RDIFF=/usr/bin/rdiff-backup
echo
echo "=======Respaldando 192.168.0.1 root======="
${RDIFF} --ssh-no-compression --exclude '/tmp/*' --exclude '/proc/*' --exclude '/sys/*' --exclude '/media/*/*' / /media/sdb1/rdiff-backups/192.168.0.1/root
echo "(y purgar incrementos mayores de 1 mes)"
${RDIFF} --remove-older-than 1M --force /media/sdb1/rdiff-backups/192.168.0.1/root
echo
echo "=======Respaldando 192.168.0.1 montaje sda5======="
${RDIFF} --ssh-no-compression --exclude /media/sda5/myjunk /media/sda5 /media/sdb1/rdiff-backups/192.168.0.1/sda5
echo "(y purgar incrementos mayores de 1 mes)"
${RDIFF} --remove-older-than 1M --force /media/sdb1/rdiff-backups/192.168.0.1/sda5
echo
echo "=======Respaldando 192.168.0.2 root======="
$${RDIFF} --ssh-no-compression --exclude '/tmp/*' --exclude '/proc/*' --exclude '/sys/*' --exclude '/media/*/*' --exclude '/mnt/*/*' 192.168.0.2::/media/sdb1/rdiff-backups/192.168.0.2/root
echo "(y purgar incrementos mayores de 1 mes)"
${RDIFF} --remove-older-than 1M --force /media/sdb1/rdiff-backups/192.168.0.2/root
</pre>


				<p>Ahora puede nombrar este script de bash como "myrdiff-backups.bash" y colocarlo en /usr/local/bin en nuestro servidor de respaldos local, y dándole permisos para ser ejecutable. Ejecute el script para asegurarse de que funciona.</p>

				<p>Y finalmente, configure cron para llamarlo cada noche a las 8 PM. La siguiente línea en el crontab de root debe servir como llamada</p>
<pre>
# crontab -e
y insertar la línea siguiente
0 20 * * * /usr/local/bin/myrdiff-backups.bash
</pre>
			<div id="rev">Content last revised 14/08/2010 0100 UTC</div>
</div>
</div>
</body>
</html>
