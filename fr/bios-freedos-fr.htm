<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
   "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
	<title>sidux Manuals - Upgrade BIOS FreeDOS </title>
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
	<style type="text/css" media="all">@import url("../lib/css-js/content.css");</style>
        <style type="text/css" media="all">@import url("../lib/css-js/menu.css");</style>
        <style type="text/css" media="print">@import url("../lib/css-js/print.css");</style>
        <link rel ="shortcut icon" href="../lib/favicon/manual.ico" />
        <script type="text/javascript" src="../lib/css-js/menu2.js"></script>
        <!--[if lt IE 8]>
        <link rel="stylesheet" type="text/css" href="../lib/css-js/ie_5-7_override.css">
        <![endif]-->
        <!--[if lt IE 7]>
        <link rel="stylesheet" type="text/css" href="../lib/css-js/ie_5-6_override.css">
        <![endif]-->
</head>
<body>
<!-- last translation by bluewater 02/11/2008 1525 UTC -->
<div id="menu"> <!-- menu starts here fr lang maintainer LjanA and alphad-->
<!--Welcome to the  sidux-manual Operating System Manual version-01.78.2008.12.06 -->
<!-- menu last updated by bluewater 06/12/2008 0700 hrs UTC -->
<a href="http://sidux.com/"><img src="../lib/logos/sidux-logo.png" title="Vers sidux.com, forum et wiki" alt="sidux.com logo" id="menu-header" /></a>
	<ul id="top-list">
		<li><a href="manual-search-fr.htm#search-on"><img src="../lib/logos/kappfinder.png" title="Search Manual" alt="Search" /> Rechercher Online Offline</a> </li>
		<li><a href="http://manual.sidux.com/meta-manual">Méta-Manuel de Sidux</a></li>
	</ul>
	<div id="flags-2">
			<a href="../flag-index.html"><img src="../lib/logos/sidux-language-64.png" title="Choisir une autre langue - Choose another language" alt="lang-switch" /></a>
	</div>
	<ul>
		<li  onmouseover="showHide( 1 );" onmouseout="startTime();" ><a href="welcome-fr.htm">Manuel du système sidux</a>
			<ul class="sub-menu" id="sm1">
				<li><a href="welcome-fr.htm#welcome-gen">Manuel du système sidux</a></li>
				<li><a href="welcome-fr.htm#how-to">Comment utiliser ce manuel</a></li>
				<li><a href="welcome-fr.htm#table-contents">Table des matières</a></li>
				<li><a href="help-fr.htm#help-gen">Où trouver de l'aide</a></li>
				<li><a href="help-fr.htm#paste">IRC !paste</a></li>
				<li><a href="credits-fr.htm#cred-team">Mérites</a></li>
				<li><a href="wel-quickstart-fr.htm#welcome-quick">Guide rapide de sidux</a></li>
			</ul>
		</li>
		<li  onmouseover="showHide( 2 );" onmouseout="startTime();" ><a href="cd-content-fr.htm">Contenus du CD</a>
			<ul class="sub-menu" id="sm2">
				<li><a href="cd-content-fr.htm#cd-content">Contenus du CD</a></li>
			</ul>
		</li>
		<li  onmouseover="showHide( 3 );" onmouseout="startTime();" ><a href="cd-dl-burning-fr.htm">Télécharger et graver le CD</a>
			<ul class="sub-menu" id="sm3">
				<li><a href="cd-dl-burning-fr.htm#download-sidux">Miroirs de téléchargement, Télécharger et graver le CD</a></li>
				<li><a href="cd-dl-burning-fr.htm#md5">Vérification de la la somme md5</a></li>
				<li><a href="cd-dl-burning-fr.htm#burn-nero">Graver sous Windows</a></li>
				<li><a href="cd-dl-burning-fr.htm#burn-linux">Graver sous Linux</a></li>
				<li><a href="cd-dl-burning-fr.htm#xdelta">Patcher avec xdelta</a></li>
				<li><a href="cd-no-gui-burn-fr.htm#burning-no-gui">Graver depuis la console</a></li>
			</ul>
		</li>
		<li  onmouseover="showHide( 4 );" onmouseout="startTime();" ><a href="live-mode-fr.htm">Mode Live</a>
			<ul class="sub-menu" id="sm4">
				<li><a href="live-mode-fr.htm#rootpw">Mot de passe Root sur le Live-CD</a></li>
				<li><a href="live-mode-fr.htm#live-cd-installsoft">Installer des logiciels en mode Live</a></li>
				<li><a href="live-mode-fr.htm#ntfs-3g">Écrire sur des partitions NTFS avec ntfs-3g</a></li>
			</ul>
		</li>
		<li  onmouseover="showHide( 5 );" onmouseout="startTime();" ><a href="term-konsole-fr.htm">Le Terminal/Konsole</a>
			<ul class="sub-menu" id="sm5">
				<li><a href="term-konsole-fr.htm#sux"> sux</a></li>
				<li><a href="term-konsole-fr.htm#term-kon"> Le Terminal/Konsole</a></li>
				<li><a href="term-konsole-fr.htm#cli-help">L'aide en ligne de commande</a></li>
				<li><a href="term-konsole-fr.htm#term-cmds">Liste de commandes pour Terminal</a></li>
				<li><a href="term-konsole-fr.htm#shell-scripts">Scripts d'installation .sh</a></li>
			</ul>
		</li>
		<li  onmouseover="showHide( 6 );" onmouseout="startTime();" ><a href="cheatcodes-fr.htm">Codes de démarrage</a>
			<ul class="sub-menu" id="sm6">
				<li><a href="cheatcodes-fr.htm#cheatcodes">Codes de démarrage spécifiques au CD sidux</a></li>
				<li><a href="cheatcodes-fr.htm#cheatcodes-linux">Codes de démarrage génériques Linux</a></li>
				<li><a href="cheatcodes-vga-fr.htm#vga">Codes VGA </a></li>
			</ul>
		</li>
		<li  onmouseover="showHide( 7 );" onmouseout="startTime();" ><a href="part-gparted-fr.htm">Partitionner son disque dur</a>
			<ul class="sub-menu" id="sm7">
				<li><a href="part-gparted-fr.htm#partition">Partitionner avec GParted</a></li>
				<li><a href="part-gparted-fr.htm#ntfs">Retailler les partitions NTFS avec GParted</a></li>
				<li><a href="part-uuid-fr.htm#uuid">UUID, Labels de Partitions et fstab</a></li>
				<li><a href="part-cfdisk-fr.htm#disknames">Désignation des disques et partitions</a></li>
				<li><a href="part-cfdisk-fr.htm#partition">Partitionner  son DDur avec cfdisk</a></li>
				<li><a href="part-cfdisk-fr.htm#formating">Formater après un partitionnement cfdisk</a></li>
				<li><a href="part-size-examp-fr.htm#part-example">Exemples de tailles de partitions</a></li>
			</ul>
		</li>
		<li  onmouseover="showHide( 8 );" onmouseout="startTime();" ><a href="hd-install-fr.htm">Options d'installation</a>
			<ul class="sub-menu" id="sm8">
				<li><a href="hd-install-fr.htm#Inst-prep">Préparer son Installation</a></li>
				<li><a href="hd-install-fr.htm#Installation">Installer sur son DDur</a></li>
				<li><a href="hd-install-fr.htm#first-hd-boot">Premier démarrage sur DDur</a></li>
				<li><a href="hd-install-opts-fr.htm#fromiso">Démarrage  'fromiso'</a></li>
				<li><a href="hd-install-opts-fr.htm#fromiso-persist">fromiso et persist</a></li>
				<li><a href="hd-install-opts-fr.htm#usb-hd">Installer sur un DDur USB</a></li>
				<li><a href="hd-install-opts-fr.htm#vtbox">Installer sidux avec VirtualBox</a></li>
				<li><a href="hd-install-opts-fr.htm#qemu">Installer sidux avec QEMU</a></li>
			</ul>
		</li>
		<li  onmouseover="showHide( 9 );" onmouseout="startTime();" ><a href="hw-dev-hw-dri-fr.htm">Cartes Graphiques, Matériels et pilotes</a>
			<ul class="sub-menu" id="sm9">
				<li><a href="hw-dev-hw-dri-fr.htm#hd-ntfs3g">Écrire sur des partitions NTFS avec ntfs-3g</a></li>
				<li><a href="hw-dev-mon-fr.htm#mon-res">Résolution des écrans et moniteurs</a></li>
				<li><a href="hw-dev-mon-fr.htm#xrandr">Double-écrans et xrandr</a></li>
				<li><a href="hw-dev-mon-fr.htm#mon-binary">Double-écrans (avec Binaires)</a></li>
				<li><a href="hw-dev-hw-dri-fr.htm#non-free-3d">Binaires, pilotes propriétaires pour : Nvidia / ATI</a></li>
				<li><a href="hw-dev-hw-dri-fr.htm#native-nv-ati">Pilotes libres xorg pour nVidia, ATI, Radeon, Intel</a></li>
				<li><a href="hw-dev-hw-dri-fr.htm#non-free">Matériels nécessitant des outils propriétaires</a></li>
			</ul>
		</li>
		<li  onmouseover="showHide( 10 );" onmouseout="startTime();" ><a href="wm-kde-fr.htm">Environnements Fenêtrés</a>
			<ul class="sub-menu" id="sm10">
				<li><a href="wm-kde-fr.htm#desk-freeze">Gel du bureau KDE</a></li>
				<li><a href="wm-kde-fr.htm#kde-login">KDE ne se lance pas</a></li>
				<li><a href="wm-kde-fr.htm#ch-th">Changer de Thème</a></li>
			</ul>
		</li>
		<li  onmouseover="showHide( 11 );" onmouseout="startTime();" ><a href="lamp-apache-fr.htm">Suite LAMP sidux</a>
			<ul class="sub-menu" id="sm11">
				<li><a href="lamp-apache-fr.htm#serv-apache">Suite LAMP sidux</a></li>
				<li><a href="lamp-apache-fr.htm#serv-ftp">Clients FTP</a></li>
				<li><a href="lamp-apache-fr.htm#serv-sec">Protocoles de sécurité</a></li>
				<li><a href="lamp-apache-fr.htm#serv-ssl">SSL</a></li>
				<li><a href="lamp-sql-fr.htm#serv-mysql">Configurer MySQL</a></li>
				<li><a href="lamp-ppp-fr.htm#serv-php">PHP dans Apache</a></li>
				<li><a href="ntp-server-fr.htm#ntp-server">Configurer le serveur de Temps</a></li>
			</ul>
		</li>
		<li  onmouseover="showHide( 13 );" onmouseout="startTime();" ><a href="sys-admin-apt-fr.htm">Installer/Désinstaller et rétrograder les paquetages</a>
			<ul class="sub-menu" id="sm13">
				<li><a href="sys-admin-apt-fr.htm#apt-cook">Guide pour APT et listes de sources</a></li>
				<li><a href="sys-admin-meta-fr.htm#meta-pack">Installateur de Meta-Paquets</a></li>
				<li><a href="sys-admin-meta-fr.htm#meta-proxy">Installateur de Meta-Paquets et Proxies</a></li>
				<li><a href="sys-admin-apt-fr.htm#apt-install">Installer un nouveau paquet</a></li>
				<li><a href="sys-admin-apt-fr.htm#apt-delete">Désinstaller un paquet</a></li>
				<li><a href="sys-admin-apt-fr.htm#apt-downgrade">Rétrograder/Conserver un paquet</a></li>
				<li><a href="sys-admin-apt-fr.htm#apt-cache">Chercher un paquetage avec apt-cache</a></li>
				<li><a href="sys-admin-apt-fr.htm#apt-kio">Chercher un paquetage avec kio-apt</a></li>
				<li><a href="sys-admin-apt-fr.htm#apt-upgrade">Mettre à niveau un système installé - dist-upgrade</a></li>
			</ul>
		</li>
		<li  onmouseover="showHide( 12 );" onmouseout="startTime();" ><a href="internet-connecting-fr.htm">Internet et Réseau</a>
			<ul class="sub-menu" id="sm12">
				<li><a href="tor-privoxy-fr.htm#tor">Tor</a></li>
				<li><a href="tor-privoxy-fr.htm#privoxy">Privoxy</a></li>
				<li><a href="internet-connecting-fr.htm#firewalls">Firewalls</a></li>
				<li><a href="samba-fr.htm#configure">Configuration SAMBA (Windows)</a></li>
				<li><a href="samba-fr.htm#setup">Configuration de serveur Samba</a></li>
				<li><a href="ssh-fr.htm#ssh-fs">Montage SSH distant</a></li>
				<li><a href="ssh-fr.htm#ssh-x">Applications X Window via SSH</a></li>
				<li><a href="ssh-fr.htm#ssh-f">SSH en graphique avec Konqueror</a></li>
				<li><a href="ssh-fr.htm#ssh-w">Transmission-X par SSH depuis un PC Windows</a></li>
				<li><a href="ssh-fr.htm#ssh">SSH et Sécurité</a></li>
				<li><a href="internet-connecting-fr.htm#dial-mod">Modems 56k</a></li>
				<li><a href="internet-connecting-ndis-fr.htm#ndiswrapper-basic">Activation de Ndiswrapper</a></li>
				<li><a href="internet-connecting-ndis-fr.htm#ndiswrapper-advanced">Activation avancée de Ndiswrapper</a></li>
				<li><a href="internet-connecting-wpagui-fr.htm#wpa-roaming-gui">WiFi - roaming WPA-GUI</a></li>
				<li><a href="internet-connecting-wpa-fr.htm#wpa-basic">WiFi - Basic setup guide</a></li>
				<li><a href="internet-connecting-wpa-fr.htm#wpa">WiFi - wpasupplicant</a></li>
				<li><a href="internet-connecting-fr.htm#netcardconfig">Se connecter au Web - Ceni</a></li>
			</ul>
		</li>
		<li  onmouseover="showHide( 14 );" onmouseout="startTime();" ><a href="smxi-fr.htm">Administration Système</a>
			<ul class="sub-menu" id="sm14">
				<li><a href="home-fr.htm#home-bu">Moving /home</a></li>
				<li><a href="smxi-fr.htm#sm">Syntaxe des commandes smxi</a></li>
				<li><a href="siduxcc-fr.htm#siduxcc">Centre de Contrôle Sidux</a></li>
				<li><a href="sys-admin-apt-fr.htm#apt-upgrade">Mettre à niveau un système installé: dist-upgrade</a></li>
				<li><a href="sys-admin-upgrade-fr.htm#live-cd-upgrade">Mettre à niveau à partir d'un Live-CD</a></li>
				<li><a href="sys-admin-kern-upg-fr.htm#kern-upgrade">Mise-à-niveau du noyau</a></li>
				<li><a href="sys-admin-rdiff-fr.htm#rdiff">Sauvegarde avec rdiff</a></li>
				<li><a href="sys-admin-rsync-fr.htm#rsync">Sauvegarde avec rsync</a></li>
				<li><a href="vir-rkits-fr.htm#virus-rkits">Virus et Scanners de Rootkits</a></li>
				<li><a href="sys-admin-gen-fr.htm#start-services">Activer/désactiver les services</a></li>
				<li><a href="sys-admin-gen-fr.htm#pw-lost">Mots passe Root perdus</a></li>
				<li><a href="sys-admin-gen-fr.htm#fonts">Fontes</a></li>
				<li><a href="sys-admin-gen-fr.htm#cups">CUPS -imprimantes</a></li>
				<li><a href="sys-admin-gen-fr.htm#init">niveaux de fonctionnement sidux-init</a></li>
				<li><a href="sys-admin-grub-bootman2-fr.htm#mbr-grub-boot">Effacement du secteur de boot MBR</a></li>
				<li><a href="sys-admin-grub-bootman2-fr.htm#dual-boot">Double et multi-démarrage</a></li>
				<li><a href="bios-freedos-fr.htm#bois-prep">Upgrading the BIOS with FreeDOS</a></li>
				<li><a href="sys-admin-grub-bootman2-fr.htm#boot-grub-floppy">Créer une disquette de Boot</a></li>
				<li><a href="sys-admin-grub-bootman2-fr.htm#remove-grub">Enlever grub du MBR</a></li>
				<li><a href="sys-admin-grub-bootman2-fr.htm#what-is-grub">Grub, le gestionnaire de démarrage</a></li>
			</ul>
		</li>
	</ul>
<!-- menu ends here --></div>
<div id="main-page">
	<div class="divider" id="bois-prep">

		<h2 id="top-header">Upgrading the BIOS with FreeDOS</h2>

							<!--- ####
							<p>You may want, or have a need, to update the BIOS of your PC, when the manufacturer of the motherboard announces some improvement of BIOS software. The installer program usually offered is an application to run MS-DOS.</p>
							#### -->

							<p>Vous pouvez vouloir, ou avoir un besoin, mettre à jour le BIOS de votre PC, quand le fabricant de la carte mère annonce une certaine amélioration ou mise à jour du BIOS. Le programme d'installation d'habitude offert est destiné à executer MS-DOS.</p>

							<!--- ####
							<p>This is a way to update BIOS from a USB in linux. This will work with USB keys, USB sticks and with micro/mini/SD cards (with a suitable adapter).</p>
							#### -->
							<p>Voici comment mettre à jour votre BIOS d'une clé USB sous linux. Il fonctionnera avec une clé USB et avec des cartes micro/mini/SD (avec un adaptateur approprié).</p>

							<!--- ####
							<p>Firstly, your BIOS needs to allow booting from USB - and be compatible with USB harddisks. Some BIOSes accept USB Floppies, CD-ROMs or ZIP drives, although these might be usable, it may be more difficult to implement the upgrade, however you may have no other choice, (netbooks in particular).</p>
							#### -->
							<p>Premièrement, votre BIOS doit permettre de démarrer d'USB - et être compatible avec des disques durs USB. Quelques BIOS acceptent des Disquettes USB, des CD-ROMs ou lecteurs ZIP, bien que ceux-ci puissent être utilisables, il peut être plus difficile de mettre en oeuvre la mise à jour, cependant vous n'avez pas d'autre choix, (netbooks en particulier)</p>


<!--- ####
				<h3>You need three things:</h3>
#### -->
				<h3>Vous avez besoin de trois choses:</h3>
						<ol>
							<!--- ####
							<li>A USB stick, preferably &lt;2 GB (FAT16 doesn't allow more than 2 GB), and the base FreeDOS (fdbasecd.iso) install only uses 5.8 MB. <span class="highlight-3">FAT16 is the recommended format as FAT32 is not detected as bootable by every BIOS</span>.</li>
							#### -->
							<li>Une clé USB, de préférence &lt;2 GB (FAT16 ne permettant pas plus de 2 GB), et la base FreeDOS (fdbasecd.iso) install qui utilise seulement 5.8 MB. <span class="highlight-3">FAT16 est le format recommandé comme FAT32 n'est pas détecté comme demarrable par tous les BIOS</span>.</li>

							<li>A FreeDOS install medium <a href="http://www.freedos.org/freedos/files/"> fdbasecd.iso (8MB)</a>.</li>

							<li>qemu (apt-get install qemu), qemu is needed for the installer, basically the emulated qemu BIOS makes your USB stick appear to FreeDOS as an ordinary harddisk, so you can install as usual (and avoids burning the FreeDOS CD).</li>
						</ol>

				<h5><span class="highlight-2">This is absolutly critical: at no stage is the USB stick to be mounted. Be very careful to select the correct device node, otherwise all data on the wrong disk will be erased without any redress, i.e. your main hard drive.</span></h5>

	<div class="spacer02"></div>
							<p>Plug in your USB stick, <span class="highlight-2">remember, don't mount it</span>. Check dmesg (the last messages,if you just plugged it in), which device node got assigned to your USB stick lets assumes <span class="highlight-3">/dev/sdb</span>  .</p>

							<p>Clear your USB stick,<span class="highlight-3">all data will be lost</span>, you could also clear all of it, instead of just the first 16 MB. </p>


<pre>
$ sux
Password:
dd if=/dev/zero of=/dev/sdb bs=1M count=16
16+0 records in
16+0 records out
16777216 bytes (17 MB) copied, 2.35751 s, 7.1 MB/s
</pre> 
					<h3>Partitioning the USB stick</h3>
							<p>Partitioning and formatting your USB stick correctly is probably the hardest part.</p>

							<p>Set the partition label to FAT16, on &lt;2 GB sticks (it offers better compatibility overall).</p>

							<p>Next fdisk to partition:</p>
<pre>
# fdisk /dev/sdb
fdisk /dev/sdb
Device contains neither a valid DOS partition table, nor Sun, SGI or OSF disklabel
Building a new DOS disklabel with disk identifier 0xa8993739.
Changes will remain in memory only, until you decide to write them.
After that, of course, the previous content won't be recoverable.

Warning: invalid flag 0x0000 of partition table 4 will be corrected by w(rite)
</pre>
							<p>Now create a partition:</p>
<pre>
Command (m for help): <span class="highlight-3"><b>n</b></span>
Command action
   e   extended
   p   primary partition (1-4)
<span class="highlight-3"><b>p</b></span>
Partition number (1-4): <span class="highlight-3"><b>1</b></span>
First cylinder (1-1018, default 1):
Using default value 1
Last cylinder or +size or +sizeM or +sizeK (1-1018, default 1018):
Using default value 1018
</pre>
							<p>Confirm the creation of the partition by printing the partition table:</p>
<pre>
Command (m for help): <span class="highlight-3"><b>p</b></span>

Disk /dev/sdb: 2003 MB, 2003828736 bytes
62 heads, 62 sectors/track, 1018 cylinders
Units = cylinders of 3844 * 512 = 1968128 bytes
Disk identifier: 0xa8993739

   Device Boot      Start         End      Blocks   Id  System
/dev/sdb1               1        1018     1956595+  83  Linux
</pre>
							<p>Set the correct partition label, '6' for FAT16:</p>
<pre>
Command (m for help): <span class="highlight-3"><b>t</b></span>
Selected partition 1
Hex code (type L to list codes): <span class="highlight-3"><b>l</b></span>

 0  Empty           1e  Hidden W95 FAT1 80  Old Minix       be  Solaris boot
 1  FAT12           24  NEC DOS         81  Minix / old Lin bf  Solaris
 2  XENIX root      39  Plan 9          82  Linux swap / So c1  DRDOS/sec (FAT-
 3  XENIX usr       3c  PartitionMagic  83  Linux           c4  DRDOS/sec (FAT-
 4  FAT16 &lt;32M      40  Venix 80286     84  OS/2 hidden C:  c6  DRDOS/sec (FAT-
 5  Extended        41  PPC PReP Boot   85  Linux extended  c7  Syrinx
 6  FAT16           42  SFS             86  NTFS volume set da  Non-FS data
 7  HPFS/NTFS       4d  QNX4.x          87  NTFS volume set db  CP/M / CTOS / .
 8  AIX             4e  QNX4.x 2nd part 88  Linux plaintext de  Dell Utility
 9  AIX bootable    4f  QNX4.x 3rd part 8e  Linux LVM       df  BootIt
 a  OS/2 Boot Manag 50  OnTrack DM      93  Amoeba          e1  DOS access
 b  W95 FAT32       51  OnTrack DM6 Aux 94  Amoeba BBT      e3  DOS R/O
 c  W95 FAT32 (LBA) 52  CP/M            9f  BSD/OS          e4  SpeedStor
 e  W95 FAT16 (LBA) 53  OnTrack DM6 Aux a0  IBM Thinkpad hi eb  BeOS fs
 f  W95 Ext'd (LBA) 54  OnTrackDM6      a5  FreeBSD         ee  EFI GPT
10  OPUS            55  EZ-Drive        a6  OpenBSD         ef  EFI (FAT-12/16/
11  Hidden FAT12    56  Golden Bow      a7  NeXTSTEP        f0  Linux/PA-RISC b
12  Compaq diagnost 5c  Priam Edisk     a8  Darwin UFS      f1  SpeedStor
14  Hidden FAT16 &lt;3 61  SpeedStor       a9  NetBSD          f4  SpeedStor
16  Hidden FAT16    63  GNU HURD or Sys ab  Darwin boot     f2  DOS secondary
17  Hidden HPFS/NTF 64  Novell Netware  b7  BSDI fs         fd  Linux raid auto
18  AST SmartSleep  65  Novell Netware  b8  BSDI swap       fe  LANstep
1b  Hidden W95 FAT3 70  DiskSecure Mult bb  Boot Wizard hid ff  BBT
1c  Hidden W95 FAT3 75  PC/IX

Hex code (type L to list codes): <span class="highlight-3"><b>6</b></span>

Changed system type of partition 1 to 6 (FAT16)
</pre>
							<p>Activate the new and only partition:</p>
<pre>
Command (m for help): <span class="highlight-3"><b>a</b></span>
Partition number (1-4): <span class="highlight-3"><b>1</b></span>
</pre>
							<p>Print out the new partition table again, reconfirm that the partition indeed got activated:</p>
<pre>
Command (m for help): <span class="highlight-3"><b>p</b></span>

Disk /dev/sdb: 2003 MB, 2003828736 bytes
62 heads, 62 sectors/track, 1018 cylinders
Units = cylinders of 3844 * 512 = 1968128 bytes
Disk identifier: 0xa8993739

   Device Boot      Start         End      Blocks   Id  System
/dev/sdb1   *           1        1018     1956595+   6  FAT16
</pre>
							<p>Write the new partition table to your USB stick and exit fdisk:</p>
<pre>
Command (m for help): <span class="highlight-3"><b>w</b></span>
The partition table has been altered!

Calling ioctl() to re-read partition table.

WARNING: If you have created or modified any DOS 6.x
partitions, please see the fdisk manual page for additional
information.
Syncing disks.
# exit
</pre>
							<p>Format your newly created USB stick:</p>
<pre>
mkfs -t vfat -n FreeDOS /dev/sdb
exit
</pre>
							<p>The preparatory phase is now complete.You have now have partitioned and formatted the USB stick, there's nothing else left to do and you can directly go to the install process.</p>
							
					<h3>Booting up FreeDOS with qemu</h3>

							<p>As DOS has no idea of USB stick, you need to find a way to coax the FreeDOS installer into recognizing the USB as ordinary "harddisk", on live boot, the system's BIOS does that for us - but here the need to get inventive with qemu:</p>
<pre>
as user$:
qemu -hda /dev/sdb -cdrom /path/to/fdbasecd.iso -boot d
</pre>
							<p><span class="highlight-1">ctrl-alt</span> will toggle mouse and keyboard grab and allow you to switch desktops to reread any instructions at each step.</p>

		<div class="screenshot"><img src="../lib/images-common/images-qemu-freedos/qemu-boot01.jpg" alt="qemu" /></div>
							<p>This boots the FreeDOS CD and maps the USB stick raw device as primary master HD (here qemu's BIOS emulation abililty makes the USB stick appear to DOS as an ordinary harddisk).  Select the installer from the start menu of the virtualised FreeDOS boot:</p>
<pre>
1) Continue to boot FreeDOS from CD-ROM
<span class="highlight-3"><b>1</b></span>
enter
</pre>
	<div class="spacer02"></div>
							<p>Keep choosing the default of <span class="highlight-3">1</span> and/or choosing <span class="highlight-3">Yes</span> when asked.</p>

	<div class="spacer02"></div>
		<div class="screenshot"><img src="../lib/images-common/images-qemu-freedos/qemu-boot02.jpg" alt="freedos-inst1" /></div>

		<div class="spacer02"></div>
	<div class="screenshot"><img src="../lib/images-common/images-qemu-freedos/qemu-boot04.jpg" alt="freedos-inst2" /></div>

	<div class="spacer02"></div>

	<div class="spacer02"></div>
		<div class="screenshot"><img src="../lib/images-common/images-qemu-freedos/qemu-boot09.jpg" alt="freedos-inst3" /></div>


	<div class="spacer02"></div>

							<p>The install asks you to reboot - <span class="highlight-3">don't do that yet, as there is a need to fix up two errors in the FreeDOS installer for the mbr and bootmenu</span>. Type the letter <span class="highlight-3"><b>n</b></span>.</p>
	<div class="spacer02"></div>
		<div class="screenshot"><img src="../lib/images-common/images-qemu-freedos/qemu-boot18.jpg" alt="freedos-inst4" /></div>

	<div class="spacer02"></div>
				<h3>Writing a bootsector to your USB stick</h3> 
							<p>The first error to fix is the mbr with:</p>

<pre>
fdisk /mbr 1
</pre>
							<p>The second error that needs fixing is the bootmenu in your new fdconfig.sys, run:</p>
<pre>
cd \
edit fdconfig.sys 
</pre>
							<p>and change the line starting command.com to:</p>
<pre>
1234?SHELLHIGH=C:\FDOS\command.com C:\FDOS /D /P=C:\fdauto.bat /K set
(don't actually change this command, just add "1234?" to the begin of the line (before SHELLHIGH==C:\FDOS\command.com .....
NOTE it is to read : <span class="highlight-3">1234?</span>
</pre>
		<div class="screenshot"><img src="../lib/images-common/images-qemu-freedos/qemu-boot23.jpg" alt="fdconfig.sys" /></div>
	<div class="spacer02"></div>
							<p><span class="highlight-2">Do not change anything else, as the line depends on your install setup.</span></p>

							<p>Save it and exit "edit":</p>
<pre>
[alt]+[f]
</pre>
							<p>Once you're back to the command prompt, you can leave qemu.</p>

 							<p>Test to check if qemu will boot the USB stick.</p>
<pre>
qemu -hda /dev/sdb -boot c
</pre>
 							<p>Your USB stick is now bootable and contains a full FreeDOS install of 5.4 MB, for flashing. You really should boot without any drivers <span class="highlight-3">(menu option 4), loading the  himem.sys and emm386 files may otherwise interfere with your flashing programs!</span>:</p>

				<h3>Updating the BIOS</h3>
							<p>Assuming your PC is up and running, plug in the FreeDOS USB stick, mount it and download the BIOS files needed, as recommended by the manufacturer of your motherboard/BIOS, to the FreeDOS USB stick, then umount the stick.</p>

							<p> Power off your PC, plug in the FreeDOS USB stick, power up, so that you boot to the FreeDOS USB stick and follow the procedures of the manufacturer of your motherboard/BIOS.</p>



	</div>

			<div id="rev">Content last revised 11/11/2008 0800 UTC</div>
</div>
</body>
</html>
