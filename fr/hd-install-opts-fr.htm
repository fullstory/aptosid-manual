<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
   "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="fr" lang="fr">
<head>
	<title>Manuel de sidux - Autres types d'installations</title>
	<meta http-equiv="content-type" content="text/html; charset=utf-8" />
	<style type="text/css" media="all">@import url("../lib/css-js/content.css");</style>
        <style type="text/css" media="all">@import url("../lib/css-js/menu.css");</style>
        <style type="text/css" media="print">@import url("../lib/css-js/print.css");</style>
        <link rel ="shortcut icon" href="../lib/favicon/manual.ico" />
        <script type="text/javascript" src="../lib/css-js/menu2.js"></script>
        <!--[if lt IE 8]>
        <link rel="stylesheet" type="text/css" href="../lib/css-js/ie_5-7_override.css">
        <![endif]-->
        <!--[if lt IE 7]>
        <link rel="stylesheet" type="text/css" href="../lib/css-js/ie_5-6_override.css">
        <![endif]-->
</head>
<body>
<!-- Last translation revision 12/09/2007 à 8H28 UTC-->
<div id="menu"> <!-- menu starts here fr lang maintainer LjanA-->
<!--Welcome to the  sidux-manual Operating System version 01.46.2007.10.28  -->
<!-- menu last updated by bluewater 28/10/2007 1600 hrs AEST 28/10/2007 0500 hrs UTC -->
<img src="../lib/logos/sidux-logo.png" alt="logo" id="menu-header" />
	<ul id="top-list">
		<li><a href="http://sidux.com/">Vers sidux.com</a></li>
		<li><a href="http://manual.sidux.com/meta-manual">Méta-Manuel de Sidux</a></li>
	</ul>
	<div id="flags-2">
			<a href="../flag-index.html"><img src="../lib/logos/sidux-lang-50.png" title="Choisir une autre langue" alt="lang-switch" /></a>
	</div>
	<ul>
		<li  onmouseover="showHide( 1 );" onmouseout="startTime();" ><a href="welcome-fr.htm">Manuel du système sidux</a>
			<ul class="sub-menu" id="sm1">
				<li><a href="welcome-fr.htm#welcome-gen">Manuel du système sidux</a></li>
				<li><a href="welcome-fr.htm#how-to">Comment utiliser ce manuel</a></li>
				<li><a href="welcome-fr.htm#table-contents">Table des matières</a></li>
				<li><a href="help-fr.htm#help-gen">Où trouver de l'aide</a></li>
				<li><a href="help-fr.htm#paste">IRC !paste</a></li>
				<li><a href="credits-fr.htm#cred-team">Mérites</a></li>
			</ul>
		</li>
		<li  onmouseover="showHide( 2 );" onmouseout="startTime();" ><a href="cd-content-fr.htm">Contenus du CD</a>
			<ul class="sub-menu" id="sm2">
				<li><a href="cd-content-fr.htm#cd-content">Contenus du CD</a></li>
			</ul>
		</li>
		<li  onmouseover="showHide( 3 );" onmouseout="startTime();" ><a href="cd-dl-burning-fr.htm">Télécharger et graver le CD</a>
			<ul class="sub-menu" id="sm3">
				<li><a href="cd-dl-burning-fr.htm#download-sidux">Miroirs de téléchargement, Télécharger et graver le CD</a></li>
				<li><a href="cd-dl-burning-fr.htm#md5">Vérification de la la somme md5</a></li>
				<li><a href="cd-dl-burning-fr.htm#burn-nero">Graver sous Windows</a></li>
				<li><a href="cd-dl-burning-fr.htm#burn-linux">Graver sous Linux</a></li>
				<li><a href="cd-dl-burning-fr.htm#xdelta">Patcher avec xdelta</a></li>
				<li><a href="cd-no-gui-burn-fr.htm">Graver depuis la console</a></li>
			</ul>
		</li>
		<li  onmouseover="showHide( 4 );" onmouseout="startTime();" ><a href="live-mode-fr.htm">Mode Live</a>
			<ul class="sub-menu" id="sm4">
				<li><a href="live-mode-fr.htm#rootpw">Mot de passe Root sur le Live-CD</a></li>
				<li><a href="live-mode-fr.htm#live-cd-installsoft">Installer des logiciels en mode Live</a></li>
				<li><a href="live-mode-fr.htm#ntfs-3g">Écrire sur des partitions NTFS avec ntfs-3g</a></li>
			</ul>
		</li>
		<li  onmouseover="showHide( 5 );" onmouseout="startTime();" ><a href="term-konsole-fr.htm">Le Terminal/Konsole</a>
			<ul class="sub-menu" id="sm5">
				<li><a href="term-konsole-fr.htm#sux"> sux</a></li>
				<li><a href="term-konsole-fr.htm#term-kon"> Le Terminal/Konsole</a></li>
				<li><a href="term-konsole-fr.htm#cli-help">L'aide en ligne de commande</a></li>
				<li><a href="term-konsole-fr.htm#term-cmds">Liste de commandes pour Terminal</a></li>
				<li><a href="term-konsole-fr.htm#shell-scripts">Scripts d'installation .sh</a></li>
			</ul>
		</li>
		<li  onmouseover="showHide( 6 );" onmouseout="startTime();" ><a href="cheatcodes-fr.htm">Codes de démarrage</a>
			<ul class="sub-menu" id="sm6">
				<li><a href="cheatcodes-fr.htm#cheatcodes">sidux specific Live-CD Codes de démarrage</a></li>
				<li><a href="cheatcodes-fr.htm#cheatcodes-linux">Linux generic Codes de démarrage</a></li>
				<li><a href="cheatcodes-vga-fr.htm#vga">Codes VGA </a></li>
			</ul>
		</li>
		<li  onmouseover="showHide( 7 );" onmouseout="startTime();" ><a href="part-gparted-fr.htm">Partitionner son disque dur</a>
			<ul class="sub-menu" id="sm7">
				<li><a href="part-gparted-fr.htm#partition">Partitionner avec GParted</a></li>
				<li><a href="part-gparted-fr.htm#ntfs">Retailler les partitions NTFS avec GParted</a></li>
				<li><a href="part-uuid-fr.htm#uuid">UUID, Labels de Partitions et fstab</a></li>
				<li><a href="part-cfdisk-fr.htm#disknames">Désignation des disques et partitions</a></li>
				<li><a href="part-cfdisk-fr.htm#partition">Partitionner  son DDur avec cfdisk</a></li>
				<li><a href="part-cfdisk-fr.htm#formating">Formater après un partitionnement cfdisk</a></li>
				<li><a href="part-size-examp-fr.htm#part-example">Exemples de tailles de partitions</a></li>
			</ul>
		</li>
		<li  onmouseover="showHide( 8 );" onmouseout="startTime();" ><a href="hd-install-fr.htm">Options d'installation</a>
			<ul class="sub-menu" id="sm8">
				<li><a href="hd-install-fr.htm#Inst-prep">Préparer son Installation</a></li>
				<li><a href="hd-install-fr.htm#Installation">Installer sur son DDur</a></li>
				<li><a href="hd-install-fr.htm#first-hd-boot">Premier démarrage sur DDur</a></li>
				<li><a href="hd-install-opts-fr.htm#fromiso">Démarrage  'fromiso'</a></li>
				<li><a href="hd-install-opts-fr.htm#fromiso-persist">fromiso et persist</a></li>
				<li><a href="hd-install-opts-fr.htm#usb-hd">Installer sur un DDur USB</a></li>
				<li><a href="hd-install-opts-fr.htm#vtbox">Installer sidux avec VirtualBox</a></li>
				<li><a href="hd-install-opts-fr.htm#qemu">Installer sidux avec QEMU</a></li>
			</ul>
		</li>
		<li  onmouseover="showHide( 9 );" onmouseout="startTime();" ><a href="hw-dev-hw-dri-fr.htm">Cartes Graphiques, Matériels et pilotes</a>
			<ul class="sub-menu" id="sm9">
				<li><a href="hw-dev-hw-dri-fr.htm#hd-ntfs3g">Écritures sur NTFS</a></li>
				<li><a href="hw-dev-hw-dri-fr.htm#mon-res">Définition d'écran et moniteurs</a></li>
				<li><a href="hw-dev-hw-dri-fr.htm#non-free-3d">Binaires, pilotes propriétaires pour : Nvidia / ATI</a></li>
				<li><a href="hw-dev-hw-dri-fr.htm#native-nv-ati">Pilotes libres xorg drivers pour nVidia, ATI, Radeon, Intel</a></li>
				<li><a href="hw-dev-hw-dri-fr.htm#non-free">Matériels nécessitant des outils propriétaires</a></li>
			</ul>
		</li>
		<li  onmouseover="showHide( 10 );" onmouseout="startTime();" ><a href="wm-kde-fr.htm">Environnements Fenêtrés</a>
			<ul class="sub-menu" id="sm10">
				<li><a href="wm-kde-fr.htm#desk-freeze">Gel du bureau KDE</a></li>
				<li><a href="wm-kde-fr.htm#kde-login">KDE ne se lance pas</a></li>
				<li><a href="wm-kde-fr.htm#ch-th">Changer de Thème</a></li>
			</ul>
		</li>
		<li  onmouseover="showHide( 11 );" onmouseout="startTime();" ><a href="lamp-apache-fr.htm">Suite LAMP sidux</a>
			<ul class="sub-menu" id="sm11">
				<li><a href="lamp-apache-fr.htm#serv-apache">Suite LAMP sidux</a></li>
				<li><a href="lamp-apache-fr.htm#serv-ftp">Clients FTP</a></li>
				<li><a href="lamp-apache-fr.htm#serv-sec">Protocoles de sécurité</a></li>
				<li><a href="lamp-apache-fr.htm#serv-ssl">SSL</a></li>
				<li><a href="lamp-sql-fr.htm#serv-mysql">Configurer MySQL</a></li>
				<li><a href="lamp-ppp-fr.htm#serv-php">PHP dans Apache</a></li>
			</ul>
		</li>
		<li  onmouseover="showHide( 13 );" onmouseout="startTime();" ><a href="sys-admin-apt-fr.htm">Installer/Désinstaller et rétrograder les paquetages</a>
			<ul class="sub-menu" id="sm13">
				<li><a href="sys-admin-apt-fr.htm#apt-cook">Guide pour APT et listes de sources</a></li>
				<li><a href="sys-admin-meta-fr.htm#meta-pack">Installateur de Meta-Paquets</a></li>
				<li><a href="sys-admin-meta-fr.htm#meta-proxy">Installateur de Meta-Paquets et Proxies</a></li>
				<li><a href="sys-admin-apt-fr.htm#apt-install">Installer un nouveau paquet</a></li>
				<li><a href="sys-admin-apt-fr.htm#apt-delete">Désinstaller un paquet</a></li>
				<li><a href="sys-admin-apt-fr.htm#apt-downgrade">Rétrograder/Conserver un paquet</a></li>
				<li><a href="sys-admin-apt-fr.htm#apt-cache">Chercher un paquetage avec apt-cache</a></li>
				<li><a href="sys-admin-apt-fr.htm#apt-kio">Chercher un paquetage avec kio-apt</a></li>
			</ul>
		</li>
		<li  onmouseover="showHide( 12 );" onmouseout="startTime();" ><a href="internet-connecting-fr.htm">Internet et Réseau</a>
			<ul class="sub-menu" id="sm12">
				<li><a href="ntp-server-fr.htm#ntp-server">Configurer le serveur de Temps</a></li>
				<li><a href="tor-privoxy-fr.htm#tor">Tor</a></li>
				<li><a href="tor-privoxy-fr.htm#privoxy">Privoxy</a></li>
				<li><a href="internet-connecting-fr.htm#firewalls">Firewalls</a></li>
				<li><a href="samba-fr.htm#configure">Configuration SAMBA (Windows)</a></li>
				<li><a href="samba-fr.htm#setup">Configuration de serveur Samba</a></li>
				<li><a href="ssh-fr.htm#ssh-fs">Montage SSH distant</a></li>
				<li><a href="ssh-fr.htm#ssh-x">Applications X Window via SSH</a></li>
				<li><a href="ssh-fr.htm#ssh-f">SSH en graphique avec Konqueror</a></li>
				<li><a href="ssh-fr.htm#ssh-w">Transmission-X par SSH depuis un PC Windows</a></li>
				<li><a href="ssh-fr.htm#ssh">SSH et Sécurité</a></li>
				<li><a href="internet-connecting-fr.htm#dial-mod">Modems 56k</a></li>
				<li><a href="internet-connecting-ndis-fr.htm#ndiswrapper-basic">Activation de Ndiswrapper</a></li>
				<li><a href="internet-connecting-ndis-fr.htm#ndiswrapper-advanced">Activation avancée de Ndiswrapper</a></li>
				<li><a href="internet-connecting-wpa-fr.htm#wpa">WIFI-WLAN</a></li>
				<li><a href="internet-connecting-fr.htm#internetsharing">Partage de connexion Internet</a></li>
				<li><a href="internet-connecting-fr.htm#netcardconfig">Se connecter au Web</a></li>
			</ul>
		</li>
		<li  onmouseover="showHide( 14 );" onmouseout="startTime();" ><a href="sm-siduxcc-fr.htm">Administration Système</a>
			<ul class="sub-menu" id="sm14">
				<li><a href="sm-siduxcc-fr.htm#sm">Syntaxe des commandes smxi</a></li>
				<li><a href="sm-siduxcc-fr.htm#siduxcc">siduxcc</a></li>
				<li><a href="sys-admin-apt-fr.htm#apt-upgrade">Mettre à niveau un système installé</a></li>
				<li><a href="sys-admin-upgrade-fr.htm#live-cd-upgrade">Mettre à niveau à partir d'un Live-CD</a></li>
				<li><a href="sys-admin-kern-upg-fr.htm#kern-upgrade">Mise-à-niveau du noyau</a></li>
				<li><a href="sys-admin-rdiff-fr.htm#rdiff">Sauvegarde avec rdiff</a></li>
				<li><a href="sys-admin-rsync-fr.htm#rsync">Sauvegarde avec rsync</a></li>
				<li><a href="vir-rkits-fr.htm#virus-rkits">Virus et Scanners de Rootkits</a></li>
				<li><a href="sys-admin-gen-fr.htm#start-services">Activer des services dans sidux</a></li>
				<li><a href="sys-admin-gen-fr.htm#pw-lost">Mots passe Root perdus</a></li>
				<li><a href="sys-admin-gen-fr.htm#fonts">Fontes</a></li>
				<li><a href="sys-admin-gen-fr.htm#cups">CUPS - imprimantes</a></li>
				<li><a href="sys-admin-gen-fr.htm#init">niveaux  de fonctionnement sidux - init</a></li>
				<li><a href="sys-admin-grub-bootman2-fr.htm#mbr-grub-boot">Effacement du secteur de boot MBR</a></li>
				<li><a href="sys-admin-grub-bootman2-fr.htm#dual-boot">Double et multi-démarrage</a></li>
				<li><a href="sys-admin-grub-bootman2-fr.htm#boot-grub-floppy">Créer une disquette de Boot</a></li>
				<li><a href="sys-admin-grub-bootman2-fr.htm#remove-grub">Enlever grub du MBR</a></li>
				<li><a href="sys-admin-grub-bootman2-fr.htm#what-is-grub">Grub, le gestionnaire de démarrage </a></li>
			</ul>
		</li>
	</ul>
<!-- menu ends here --></div>
<div id="main-page">
	<div class="divider" id="fromiso">
		<h2 id="top-header">Démarrer depuis une image ISO ("fromiso")</h2>
	
							<p  class="highlight-2">Pour une utilisation ordinaire, nous recommanderons le système de fichiers ext3, utilisé par défaut par sidux et bien maintenu.</p>

							<p>Le code de démarrage fromiso vous permet de démarrer à partir d'une copie sur une partition de disque dur (ext2/3) de l'image du Live-CD, ce qui permet une utilisation en mode "Live" nettement accélérée (L'installation depuis un système démarré "fromiso" est également plus rapide).</p>

							<p>'fromiso' permet d'exploiter le débit de transfert des disques durs, nettement supérieur à celui de CD/DVD-ROM, et c'est ce qui explique l'accération. Cela permet aussi de pouvoir exploiter son lecteur/graveur de CD/DVD qui à ce moment là, se trouve libéré. Comme alternative, il existe également la possibilité de démarrer à partir de QEMU.</p>

				<h5>Ce qu'il vous faudra:</h5>

							<p>* un grub opérationnel (sur disquette, disque dur, ou live-cd)<br />
							* une image ISO de sidux, par exemple : sidux.iso et un système de fichiers GNU/Linux ext2/3 <br />
							* Si vous changez le nom de l'image pour adopter par exemple, le nom simplifié sidux.ISO, vous devrez en conséquence modifier les commandes nécessaires afin d'intégrer cette modification (souvenez-vous que le système d'identification des fichiers unix est sensible à la casse !).</p>

		<h4 class="highlight-3">Le Live-cd Eros et Gaia:</h4>
	
							<p>Dans un premier temps on choisit l'endroit où copier les trois fichiers nécessaires, l'image iso et les deux autres, en raccourcissant leurs noms. On crée un répertoire "sidux" pour les mettre, par exemple dans "/media/sdax", (sda1 ou 2, ou 5, ou 6, ou autre) pour y copier l'image iso en utilisant cette syntaxe :</p>

<pre>
# mkdir /media/sdax/sidux
# mv sidux.iso /media/sdax/sidux
</pre>

							<p>déplaçons-nous ensuite dans ce répertoire pour monter cette image iso:</p>

<pre>
# mkdir -p /mnt/test
# mount -t iso9660 -o loop,ro /media/sdax/sidux/sidux.iso /mnt/test
</pre>

							<p>Il nous faut copier les fichiers vmlinuz et initrd.img de l'image iso ainsi montée vers le répertoire où l'image a été copiée (nous considérerons que l'identifiant du noyau et de la partition sont connus, pour adapter la commande au cas particulier rencontré):</p>

<pre>
# cp /mnt/test/boot/vmlinuz-2.6.22.3-rc1-slh-smp-2  /media/sda5/sidux/
# cp /mnt/test/boot/initrd.img-2.6.22.3-rc1-slh-smp-2 /media/sda5/sidux/
</pre>

							<p>L'étape suivante va consister à adapter Grub pour y créer une entrée vers le démarrage depuis l'iso. Il faut pour ce faire éditer le fichier<span class="highlight-3"> /boot/grub/menu.lst </span> et y ajoûter les lignes suivantes <span class="highlight-3"> APRÈS ### END DEBIAN AUTOMAGIC KERNELS LIST</span>: <span class="highlight-2">Attention à ne pas vous amuser à utiliser de caractère Joker dans GRUB, qui ne le digère pas ! </span></p>

<pre>
### ISO boot
title sidux 32bit depuis ISO
kernel (hd0,4)/sidux/vmlinuz-2.6.22.3-rc1-slh-smp-2 boot=fll quiet vga=791 fromiso=/sidux/sidux.iso
initrd (hd0,4)/sidux/initrd.img-2.6.22.3-rc1-slh-smp-2
</pre>

							<p>Après cette édition vous disposez au démarrage d'une entrée pour démarrer à partir de votre image iso.</p>

		<h6 class="highlight-3">Les Live-CD Tartaros et Chaos:</h6>
	
							<p>Dans un premier temps on choisit l'endroit où copier les trois fichiers nécessaires, l'image iso et les deux autres, en raccourcissant leurs noms. On crée un répertoire "sidux" pour les mettre, par exemple dans "/media/hda5":</p>

<pre>
# mkdir /media/hda5/sidux
# mv sidux.iso /media/hda5/sidux
</pre>

							<p>déplaçons-nous ensuite dans ce répertoire pour monter cette image iso:</p>

<pre>
# mkdir -p /mnt/test
# mount -t iso9660 -o loop,ro /media/hda5/sidux/sidux.iso /mnt/test
</pre>

							<p>Il nous faut copier les fichiers vmlinuz et initrd.img de l'image iso ainsi montée vers le répertoire où l'image a été copiée:</p>

<pre>
# cp /mnt/test/boot/vmlinuz /media/hda5/sidux/
# cp /mnt/test/boot/miniroot.gz /media/hda5/sidux/
</pre>

							<p>L'étape suivante va consister à adapter Grub pour y créer une entrée vers le démarrage depuis l'iso. Il faut pour ce faire éditer le fichier<span class="highlight-3"> /boot/grub/menu.lst </span> et y ajoûter les lignes suivantes <span class="highlight-3"> APRÈS ### END DEBIAN AUTOMAGIC KERNELS LIST</span>: <span class="highlight-2">Attention à ne pas vous amuser à utiliser de caractère Joker dans GRUB, qui ne le digère pas ! </span></p>

<pre>
### ISO boot
title sidux 32bit from ISO
kernel (hd0,4)/sidux/vmlinuz boot=fll quiet vga=791 fromiso=/sidux/sidux.iso
initrd (hd0,4)/sidux/miniroot.gz
</pre>

							<p>Après cette édition vous disposez au démarrage d'une entrée pour démarrer à partir de votre image iso.</p>

	</div>
	<div class="divider" id="fromiso-persist">
		<h2>fromiso and persist (eros)</h2>

							<p>With eros you can have a persistent live system on a writable disc by combining a fromiso setup with the persist cheatcode.</p>

							<p>sidux uses aufs to enable what is known as "copy on write" over your cd to allow you to write new files and folders and update existing ones by keeping the new files in memory. With the <span class="highlight-3">persist</span> cheatcode, eros will store your new files on the same hard drive partition as you use to store your fromiso cd image.</p>

							<p>Using <span class="highlight-3">persist</span> gives you a live system which performs all the automatic features of the sidux live cd. This has the benefit of doing things like automatically configuring the hardware but it also means  that it will recreate the same files each time you boot up..</p> 

							<p><span class="highlight-3">For example it will not store your X (video card, keyboard, mouse) configuration or your network interfaces file  which makes it ideal for using on more then one computer, </span> but can get in the way if you need to configure some of these features</p>

							<p>Perhaps the ideal use of persistence is in conjunction with the new install-usb-gui tool to create your own bootable flash drive with your files and the software you need.</p>

							<p>Your files will be stored in a subfolder on your drive. This subfolder is created if it does not exist when the <span class="highlight-3">fromiso </span> and <span class="highlight-3">persist</span> cheatcodes are used together. </p>

							<p><span class="highlight-3">persist</span> on a FAT filesystem, as commonly used for dos/Windows 9x installations and usually found by default on flash devices, requires you to create a single large file to use as a loop device, you then format this file.</p>

							<p><span class="highlight-3">As always sidux recommends using an ext3 partition to store your iso and all other files..</span></p>

							<p>This file should be named <span class="highlight-3">sidux-rw </span>and placed in the root directory of your fat drive. Assuming the disc you want to use is mounted and writable on /media/sdb1 and you want to create a 1GB file to use as your persistent drive you could use the following commands (no need for root if you can write to the file).</p>
<pre>
Code:
disc="/media/sdb1"
size=1024
dd if=/dev/zero of=${disc}/sidux-rw bs=1M count=${size} &amp;&amp; echo 'Y' | mkfs.ext3 ${disc}/sidux-rw
</pre>

							<p class="highlight-2">NTFS partitions, commonly used for Windows NT/2000/XP (TM)  installations, CANNOT be used at all for persistence.</p>

	</div>
	<div class="divider" id="usb-hd">
		<h2>Installer sidux sur une clé ou un disque dur USB</h2>

							<p>désormais installer sidux sur une clé ou un disque dur USB est aussi facile que sur un disque dur interne. Il vous suffit de suivre les quelques conseils qui vont suivre.</p>

							<p>L'espace disque minimal recommandé pour votre clé usb sera:<br />
							Pour sidux "LITE", 1.2 Go PLUS l'espace voulu pour vos données,<br />
							Pour sidux "FULL", 2.1 Go PLUS l'espace voulu pour vos données</p>

							<p>Nous démarrons donc comme pour une installation ordinaire, et choisissons une installation sur la partition correspondant à notre périphérique USB - ici nous parlons de sda1 mais c'est bien entendu un exemple, à adapter au cas de figure correspondant à votre matériel.</p>

							<p>La partition doit bien entendu être formatée avec un système de fichiers GNU/Linux (ext3 recommandé). Une partition existante sera automatiquement reformatée par l'installeur !</p>

							<p class="highlight-2">Il va de soi que toutes les données présentes sur cette partition avant l'installation seront perdues au moment du formatage !</p>


							<p>L'installation achevée vous pouvez démarrer depuis votre périphérique USB. "Démarrage depuis USB" ou si absent "Autre périphérique" se doivent d'être activés dans votre BIOS pour que cela fonctionne.</p>

	</div>
	<div class="divider" id="vtbox">
		<h2>Installer sidux vaec VirtualBox</h2>
							<p>VirtualBox est idéale pour les lmachines 3é bits. Pour les machines 64 bits, utilisez Qemu. </p>
						<ul>
 							<li>1. Créez une image-disque pour Virtualbox.</li>
 							<li>2. Démarrez l'iso avec Virtualbox</li>
 							<li>3. installez sidux sur votre image-disque</li>
						</ul>

				<h4>Requis minimaux</h4>
							<p><span class="highlight-3">1 Go re RAM recommandés</span>: dans l'idéal, 512 Mo pour le système hébergé, 512 Mo pour l'hôte. (ça peut tourner avec moins de ram, mais n'attendez pas une grande performance à ce moment là...).</p>

							<p><span class="highlight-3">Espace disque:</span> VirtualBox en soi a beau être léger (une installation de base occupe autour de 30 Mo d'espace disque), les machines émulées elles, nécessitent pour fonctionner de disposer d'un espace disque plutôt conséquent, afin de suffire à héberger leurs propres espaces disques de stockage. Dans ces conditions, pour installer Windows XP&reg;, par exemple, vous aure besoin d'un espace suceptible de s'étendre sur un bon nombre de Gigas...To have sidux in VirtualBox you need to allocate a 5 gig image plus a swap allocation.</p>

							<p class="highlight-3">Assurez-vous d'avoir bien procédé à un dist-upgrade avant de procéder à l'installation de modules de machines virtuelles, et suite à l'installation d'un nouveau noyau, faute de quoi vous seront retournées des erreurs de type 'gcc mismatch, échec de construction des modules'. (C'est le cas d'ailleurs pour l'installation de tout type de module externe) </p>

						<h4>Le mécanisme:</h4>
<pre>
installez le paquet virtualbox
Lancez Menu K &gt; Outils système &gt;InnoTek VirtualBox - Machine Virtuelle
Fabriquez une nouvelle Machine Virtuelle, mettez un Cd d'installation d'OS
dans votre lecteur ; installez, puis redémarrez.
</pre>

				<!--<h3>Automated installation with svmi</h3>
							<p>You can run the options manually, or use the auto install feature, non interactive mode, see <span class="highlight-3">svmi -h for autoinstall options</span>. svmi makes the vbox kernel module, it updates modules, it adds it to /etc/modules so it will start automatically (otherwise vbox won't run on reboot), and updates 'adduser'.</p>
<pre>
as root #
wget -Nc techpatterns.com/svmi
chmod +x svmi
svmi
</pre>
-->
				<h3>Installation:</h3>
<pre>
apt-get update
apt-get install virtualbox-ose 
m-a a-i virtualbox-ose
</pre>

							<p>Vous stockez ensuite l'information identifiant le système d'exploitation en cours dans la structure:</p> 
	<!-- echo virtualbox-ose-module-$(uname -r) -->
<pre>
virtualbox-ose-module-$(votre_choix_de_nom -r)
</pre>
							<p class="highlight-3">Vous devrez ensuite faire ceci:</p>
<pre>
adduser &lt;nom_d_utilisateur&gt; vboxusers 
</pre>

					<h3>Installer sidux sur la machine virtuelle</h3>


<p>Utilisez l'assistant de VirtualBox pour créer une nouvelle machine virtuelle pour sidux. Suivez ensuite les instructions données pour une installation standard de sidux.</p>


<p><a href="http://www.virtualbox.org/">Le site de VirtualBox fournit une documentation accessible, notamment une aide en PDF, que vous pourrez télécharger.</a> </p>

	</div>
	<div class="divider" id="qemu">
		<h2>Installer sidux avec QEMU</h2>

							<p>Les étapes:</p>

						<ul>
 							<li>1. créer une image-disque pour qemu</li>
 							<li>2. démarrer l'iso avec qemu</li>
 							<li>3. installer sur l'image-disque</li>
						</ul>

 			<h4>Créer une image-disque</h4>

							<p>Pour utiliser qemu vous aurez probablement besoin d'une image-disque (image de disque dur). Il s'agit d'un simple fichier qui stocke le contenu d'un disque dur virtuel (émulé).</p>

							<p>Utilisez cette commande:</p>
<pre>
qemu-img create -f qcow sidux.qcow 3G
</pre>
							<p>Elle crée un fichier image appelé "sidux.qcow". Le paramètre "3G" spécifie sa taille, qui est de 3 Go. Vous pouvez également utiliser le paramètre M pour les mégaoctets (par exemple "800M". Vous n'avez pas trop à vous inquiéter de la taille du disque, car le format qcow compresse l'image de sorte qu'elle n'occupe pas plus d'espace que ce qui est effectivement occupé par les données une fois compressées.</p>


			<h4>Installer le système d'exploitation.</h4>

							<p>C'est la première fois que vous utilisez cet émulateur. <span class="highlight-3">Une bonne chose à savoir, c'est que quand vous cliquez dans la fenêtre de qemu, il préempte le pointeur de la souris. pour le libérer vous n'avez qu'à presser sur votre clavier la combinaison :</span></p>
<pre>
Ctrl+Alt
</pre>

							<p>Si vous avez besoin d'utiliser une disquette de démarrage, alors lancez qemu avec :</p>
<pre>
qemu -floppy sidux.iso -net nic -net user -m 512 -boot d sidux.qcow
</pre>
							<p>Pour lancer un cd bootable:</p>
<pre>
qemu -cdrom sidux.iso -net nic -net user -m 512 -boot d sidux.qcow
</pre>
							<p>Vous pouvez alors installer sidux comme s'il s'agissait d'un disque du réel</p>


			<h4>Utiliser le système</h4>

							<p>Pour utiliser le système après l'installation, faites simplement:</p>
<pre>
qemu [votre_image_disque]
</pre>
							<p>Une bonne idée est d'utiliser les images par recouvrement (overlay images). De cette façon vous créez une première image et Qemu va stocker ses modifications dans un fichier séparé ; de cette manière il sera aisé de revenir à une version antérieure du système et de prévenir toute instabilité potentielle.</p>

							<p>Pour créer une image de recouvrement (overlay image), entrez :</p>
<pre>
qemu-img create -b [[base''image]] -f qcow [[overlay''image]]
</pre>
							<p>Substituez l'image de le recouvrement à votre image_de_base (dans notre cas win.qcow). Après quoi vous pouvez lancer qemu avec:</p>
<pre>
qemu [image_de_recouvrement]
</pre>
							<p>L'image de base ne sera pas modifiée. Une limitation cependant : l'image de base ne doit pas être déplacée ou renommée, l'image de recouvrement gardant son chemin absolu en mémoire.</p>


				<h4>Utiliser une partition réelle quelconque en tant que partition primaire unique d'une image disque</h4>

							<p>Il peut être requis parfois d'utiliser qemu à l'émulation d'une de ses partitions systèmes réelles (par exemple, pour démarrer en même temps votre système réel ou qemu utilisant une partition spécifique comme racine). Vous pouvez y parvenir en utilisant le RAID logiciel en mode linéaire (il vous faudra le pilote de noyau linear.ko) ainsi qu'un périphérique loopback : l'astuce consiste à préempter dynamiquement un master boot record (MBR) sur la partition que vous souhaitez intégrer à une image disque qemu brute.</p>

							<p>Supposons que vous disposez d'une partition non-montée /dev/hdaN dont vous voudriez faire du système de fichiers, une partie de votre image disque qemu. Vous commencerez par créer un petit fichier pour stocker le MBR:</p>
<pre>
dd if=/dev/zero of=/path/to/mbr count=32
</pre>
							<p>Là un fichier de 16 Ko (32 * 512 bytes) est créé. Il est important de ne pas le créer trop petit, même si un MBR ne requiert qu'un unique bloc de 512 octets, car plus petit il sera, plus le hachage du raid logiciel devra être étroit, ce qui impacte sur les performances. Puis, vous attachez un périphérique loopback au fichier MBR:</p>
<pre>
losetup -f /chemin/du/mbr
</pre>
							<p>Admettons qu'au résultat le périphérique obtenu soit /dev/loop0, car nous n'utiliserions jusque là aucun autre loopback. L'étape suivante passe par la création de l'image disque "mélangée" MBR + /dev/hdaN en utilisant le RAID logiciel:</p>
<pre>
 modprobe linear
 mdadm --build --verbose /dev/md0 --chunk=16 --level=linear --raid-devices=2 /dev/loop0 /dev/sdaN
</pre>
							<p>Le résultat /dev/md0 est ce que vous allez utiliser comme disque image qemu (n'oubliez pas de fixer les permissions de sorte que l'émulateur puisse y avoir accès). La dernière (et peut-être la plus perverse) des étapes consiste à régler la configuration du disque (géométrie et table des partitions) en sorte que le point d'origine du MBR coincide avec celui de /dev/md0 (un offset d'exactement 16*512 = 16384 octets dans cet exemple). Réalisez cette étape en utilisant fdisk sur la machine hôte, et non depuis l'émulateur : la routine détection brute des disques utilisée par qemu produit en effet souvent des offset non-arrondis au kilooctet (de type 31.5 KB, comme dans la section précédente) et qui ne seraient pas gérables par le RAID logiciel. Ainsi, depuis la machine hôte: </p>
<pre>
 fdisk /dev/md0
</pre>
							<p>Puis, créez une partition primaire unique correspondant à /dev/sdaN, et manipulez la commande 's'ector du menu e'x'pert, en sorte que le premier cylindre (où cette première partition est sensée démarrer), coincide avec la taille du MBR. Quand finalement vous activez la fonction 'w' pour sauver votre réglage dans un fichier, l'opération est terminée. Vous disposez d'une partition que vous pouvez monter directement depuis votre machine hôte, et qui fait également partie d'une image disque qemu :</p>
<pre>
 qemu -hdc /dev/md0 [...]
</pre>
							<p>Évidemment vous pouvez sans problème configurer un chargeur de démarrage sur votre image disque en utilisant qemu, du moment que le répertoire /sdaN/boot de la partition originale est équipée des outils nécessaires.</p>

			<h4>Activer le module d'accélaration de QEMU</h4>

							<p>Les développeurs de qemu ont créé un module de noyau optionnel accélérant qemu jusqu'à des vitesses proches de celles d'une machine réelle. Ce module se charge avec cette option :</p>
<pre>
major=0
</pre>
							<p>Pour automatiser la création du périphérique /dev/kqemu, utilisez cette commande :</p>
<pre>
echo "options kqemu major=0" >> /etc/modprobe.conf
</pre>
							<p>Ceci empêchera modprobe.conf de vérifier systématiquement que l'option de module soit ajoûtée à chaque lancement de celui-ci.</p>

<pre>
qemu [...] -kernel-kqemu
</pre>
							<p>Cette syntaxte active la virtualisation complète et de fait améliore considérablement la rapidité de fonctionnement de l'émulateur.</p>

				<h4>Pour activer qemu:</h4>
<pre>
qemu -cdrom /tmp/pkg/sidux-debug.iso -net nic -net user -m 512
</pre>
							<p><a href="http://fabrice.bellard.free.fr/qemu/qemu-doc.html">La documentation officielle du projet QEMU </a> </p>

							<p><a href="http://wiki2.archlinux.org/index.php/Qemu">Certains contenus se rapportant à QEMU pour le Manuel de Sidux sont extraits de documents extérieurs sous licence GNU Free Documentation License 1.2 et ont été adaptés pour le Manuel de Sidux.</a> </p>

		
	</div>
	<div id="rev">Dernière révision le 28/10/2007 0230 UTC</div>

</div>
</body>
</html>
