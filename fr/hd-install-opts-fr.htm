<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
   "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="fr" lang="fr">
<head>
	<title>Manuel de sidux - Autres types d'installations</title>
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
	<style type="text/css" media="all">@import url("../lib/css-js/content.css");</style>
        <style type="text/css" media="all">@import url("../lib/css-js/menu.css");</style>
        <style type="text/css" media="print">@import url("../lib/css-js/print.css");</style>
        <link rel ="shortcut icon" href="../lib/favicon/manual.ico" />
        <script type="text/javascript" src="../lib/css-js/menu2.js"></script>
        <!--[if lt IE 8]>
        <link rel="stylesheet" type="text/css" href="../lib/css-js/ie_5-7_override.css">
        <![endif]-->
        <!--[if lt IE 7]>
        <link rel="stylesheet" type="text/css" href="../lib/css-js/ie_5-6_override.css">
        <![endif]-->
</head>
<body>
<!-- Last translation revision par Sephi 06/05/2009 1051 UTC-->
<div id="menu"> <!-- menu starts here fr lang maintainer LjanA, alphad-->
<!--sidux-manual Operating System Manual menu-version-02.04.2010.02.21 -->
<!-- menu last updated by bluewater 2010.02.21 0430 hrs UTC -->
	<div id="menu-header">
	      <a href="http://sidux.com/"><img src="../lib/logos/manual-sidux-logo.png" title="Vers sidux.com, forum et wiki" alt="sidux.com logo" /></a>
	</div>
	<ul id="top-list">
		<li><a href="manual-search-fr.htm#search-on"><img src="../lib/logos/manual-search-22x22.png" title="Search Manual" alt="Search" /> Rechercher en ligne / hors ligne</a> </li>
		<li><a href="http://manual.sidux.com/meta-manual">Community Software Selections</a></li>
	</ul>
	<div id="flags-2">
			<a href="../flag-index.html"><img src="../lib/logos/sidux-lang-100x64.png" title="Choisir une autre langue - Choose another language" alt="lang-switch" /></a>
	</div>
	<ul>
		<li  onmouseover="showHide( 1 );" onmouseout="startTime();" ><a href="welcome-fr.htm">Manuel du système sidux</a>
			<ul class="sub-menu" id="sm1">
				<li><a href="welcome-fr.htm#welcome-gen">Manuel du système sidux</a></li>
				<li><a href="welcome-fr.htm#how-to">Comment utiliser ce manuel</a></li>
				<li><a href="welcome-fr.htm#table-contents">Table des matières</a></li>
				<li><a href="help-fr.htm#help-gen">Où trouver de l'aide</a></li>
				<li><a href="help-fr.htm#paste">IRC !paste</a></li>
				<li><a href="credits-fr.htm#cred-team">Mérites</a></li>
				<li><a href="wel-quickstart-fr.htm#welcome-quick">Guide rapide de sidux</a></li>
			</ul>
		</li>
		<li  onmouseover="showHide( 2 );" onmouseout="startTime();" ><a href="cd-dl-burning-fr.htm">ISO Content, Releases, Download Mirrors and Burning</a>
			<ul class="sub-menu" id="sm2">
				<li><a href="cd-content-fr.htm#cd-content">Contenu de l'ISO et système requis</a></li>
				<li><a href="sys-admin-release-fr.htm#rolling">Notes de distribution</a></li>
				<li><a href="cd-dl-burning-fr.htm#download-sidux">Miroirs de téléchargement, Télécharger et graver le fichier ISO</a></li>
				<li><a href="cd-dl-burning-fr.htm#md5">Vérification de la la somme md5</a></li>
				<li><a href="cd-dl-burning-fr.htm#burn-nero">Graver sous Windows</a></li>
				<li><a href="cd-dl-burning-fr.htm#burn-linux">Graver sous Linux</a></li>
				<li><a href="cd-no-gui-burn-fr.htm#burning-no-gui">Script burniso</a></li>
				<li><a href="cd-no-gui-burn-fr.htm#burn-no-gui-gen">Graver depuis la console</a></li>
			</ul>
		</li>
		<li  onmouseover="showHide( 3 );" onmouseout="startTime();" ><a href="live-mode-fr.htm">Mode Live</a>
			<ul class="sub-menu" id="sm3">
				<li><a href="live-mode-fr.htm#rootpw">Mot de passe root dans le mode Live</a></li>
				<li><a href="live-mode-fr.htm#live-cd-installsoft">Installer des logiciels en mode Live</a></li>
				<li><a href="live-mode-fr.htm#ntfs-3g">Écrire sur des partitions NTFS avec ntfs-3g</a></li>
			</ul>
		</li>
		<li  onmouseover="showHide( 4 );" onmouseout="startTime();" ><a href="term-konsole-fr.htm">Le Terminal/Konsole</a>
			<ul class="sub-menu" id="sm4">
				<li><a href="term-konsole-fr.htm#sux"> sux / sudo</a></li>
				<li><a href="term-konsole-fr.htm#term-kon"> Le Terminal/Konsole</a></li>
				<li><a href="term-konsole-fr.htm#cli-help">L'aide en ligne de commande</a></li>
				<li><a href="help-fr.htm#init3-tools">Outils à connaître en mode texte (tty) - init 3</a></li>
				<li><a href="term-konsole-fr.htm#term-cmds">Liste de commandes pour Terminal</a></li>
				<li><a href="term-konsole-fr.htm#shell-scripts">Scripts d'installation .sh</a></li>
			</ul>
		</li>
		<li  onmouseover="showHide( 5 );" onmouseout="startTime();" ><a href="cheatcodes-fr.htm">Codes de démarrage</a>
			<ul class="sub-menu" id="sm5">
				<li><a href="cheatcodes-fr.htm#cheatcodes">Codes de démarrage spécifiques au ISO sidux</a></li>
				<li><a href="cheatcodes-fr.htm#cheatcodes-linux">Codes de démarrage génériques Linux</a></li>
				<li><a href="cheatcodes-vga-fr.htm#vga">Codes VGA </a></li>
			</ul>
		</li>
		<li  onmouseover="showHide( 6 );" onmouseout="startTime();" ><a href="part-gparted-fr.htm">Partitionner son disque dur</a>
			<ul class="sub-menu" id="sm6">
				<li><a href="part-gparted-fr.htm#partition">Partitionner avec GParted</a></li>
				<li><a href="part-gparted-fr.htm#ntfs">Redimensionner les partitions NTFS avec GParted</a></li>
				<li><a href="part-uuid-fr.htm#uuid">UUID, Labels de Partitions et fstab</a></li>
				<li><a href="part-cfdisk-fr.htm#disknames">Noms des disques et partitions</a></li>
				<li><a href="part-cfdisk-fr.htm#partition">Partitionner son disque dur avec cfdisk</a></li>
				<li><a href="part-cfdisk-fr.htm#formating">Formater après un partitionnement cfdisk</a></li>
				<li><a href="part-size-examp-fr.htm#part-example">Exemples de tailles de partitions</a></li>
			</ul>
		</li>
		<li  onmouseover="showHide( 7 );" onmouseout="startTime();" ><a href="hd-install-fr.htm">Options d'installation</a>
			<ul class="sub-menu" id="sm7">
				<li><a href="hd-install-fr.htm#Inst-prep">Préparer son Installation</a></li>
				<li><a href="hd-install-fr.htm#Installation">Installer sur son DDur</a></li>
				<li><a href="hd-install-fr.htm#first-hd-boot">Premier démarrage sur DDur</a></li>
				<li><a href="hd-install-opts-fr.htm#fromiso">Démarrage 'fromiso' - Overview</a></li>
				<li><a href="hd-install-opts-fr.htm#fromiso-grub-leg">Booting 'fromiso' with grub-legacy</a></li>
				<li><a href="hd-install-opts-fr.htm#grub2-fromiso">Booting 'fromiso' with Grub 2</a></li>
				<li><a href="hd-install-opts-fr.htm#fromiso-persist">fromiso et persist</a></li>
				<li><a href="hd-install-opts-fr.htm#usb-hd">Installer sur un disque USB - sidux specific - sidux-on-stick</a></li>
				<li><a href="hd-ins-opts-oos-fr.htm#raw-usb">Writing sidux to a USB/SSD stick with any Linux, MS Windows or Mac OS X system</a></li>
				<li><a href="nbdboot-fr.htm#nbd1">Booting sidux over a network</a></li>
				<li><a href="hd-install-opts-fr.htm#vtbox">Installer sidux avec VirtualBox</a></li>
				<li><a href="hd-install-opts-fr.htm#qemu">Installer sidux avec QEMU</a></li>
			</ul>
		</li>
		<li  onmouseover="showHide( 8 );" onmouseout="startTime();" ><a href="hw-dev-hw-dri-fr.htm">Cartes Graphiques, , Xorg, Matériels et pilotes</a>
			<ul class="sub-menu" id="sm8">
				<li><a href="hw-dev-hw-dri-fr.htm#hd-ntfs3g">Écrire sur des partitions NTFS avec ntfs-3g</a></li>
				<li><a href="hw-dev-mon-fr.htm#mon-res">Résolution des écrans et moniteurs</a></li>
				<li><a href="hw-dev-mon-fr.htm#xrandr">Double-écrans et xrandr</a></li>
				<li><a href="hw-dev-mon-fr.htm#mon-binary">Double-écrans (avec Binaires)</a></li>
				<li><a href="hw-dev-hw-dri-fr.htm#non-free-3d">Binaires, pilotes propriétaires pour : Nvidia &amp; xorg.conf</a></li>
				<li><a href="hw-dev-hw-dri-fr.htm#non-free-3d-2">Pilotes proprietaires (non libres) pour ATI, Radeon et autres</a></li>
				<li><a href="hw-dev-hw-dri-fr.htm#non-free-firmware">Matériels utilsant des pilotes ou firmwares non libres</a></li>
				<li><a href="hw-dev-hw-dri-fr.htm#non-free">Ajout de dépots de sources non libres à la Sources List</a></li>
				<li><a href="hw-dev-hw-dri-fr.htm#native-nv-ati">Pilotes FOSS xorg  pour nVidia, ATI, Radeon, Intel &amp; xorg.conf</a></li>
			</ul>
		</li>
		<li  onmouseover="showHide( 9 );" onmouseout="startTime();" ><a href="wm-kde-fr.htm">Environnements Fenêtrés</a>
			<ul class="sub-menu" id="sm9">
				<li><a href="wm-xfce-fr.htm#xfce-notes">Applications supplémentaires utiles pour Xfce</a></li>
				<li><a href="wm-kde-fr.htm#install-add">Applications supplémentaires utiles pour KDE</a></li>
				<li><a href="wm-kde-fr.htm#desk-freeze">Gel du bureau</a></li>
				<li><a href="wm-kde-fr.htm#kde-login">KDE ne se lance pas</a></li>
				<li><a href="wm-kde-fr.htm#ch-th">Changer de Thème</a></li>
				<li><a href="wm-kde-fr.htm#dm">Display Managers - dm</a></li>
			</ul>
		</li>
		<li  onmouseover="showHide( 10 );" onmouseout="startTime();" ><a href="lamp-apache-fr.htm">Suite LAMP sidux</a>
			<ul class="sub-menu" id="sm10">
				<li><a href="lamp-apache-fr.htm#serv-apache">Suite LAMP sidux</a></li>
				<li><a href="lamp-apache-fr.htm#serv-ftp">Clients FTP</a></li>
				<li><a href="lamp-apache-fr.htm#serv-sec">Protocoles de sécurité</a></li>
				<li><a href="lamp-apache-fr.htm#serv-ssl">SSL</a></li>
				<li><a href="lamp-sql-fr.htm#serv-mysql">Configurer MySQL</a></li>
				<li><a href="lamp-ppp-fr.htm#serv-php">PHP dans Apache</a></li>
				<li><a href="ntp-server-fr.htm#ntp-server">Configurer le serveur de Temps</a></li>
			</ul>
		</li>
		<li  onmouseover="showHide( 11 );" onmouseout="startTime();" ><a href="internet-connecting-fr.htm">Internet et Réseau</a>
			<ul class="sub-menu" id="sm11">
				<li><a href="tor-privoxy-fr.htm#tor">Tor</a></li>
				<li><a href="tor-privoxy-fr.htm#privoxy">Privoxy</a></li>
				<li><a href="internet-connecting-fr.htm#firewalls">Firewalls</a></li>
				<li><a href="samba-fr.htm#configure">Configuration SAMBA (Windows)</a></li>
				<li><a href="samba-fr.htm#setup">Configuration de serveur Samba</a></li>
				<li><a href="ssh-fr.htm#ssh-fs">Montage SSH distant</a></li>
				<li><a href="ssh-fr.htm#ssh-x">Applications X Window via SSH</a></li>
				<li><a href="ssh-fr.htm#ssh-f">SSH en graphique avec Konqueror</a></li>
				<li><a href="ssh-fr.htm#ssh-w">Transmission-X par SSH depuis un PC Windows</a></li>
				<li><a href="ssh-fr.htm#ssh">SSH et Sécurité</a></li>
				<li><a href="internet-connecting-fr.htm#dial-mod">Modems 56k</a></li>
				<li><a href="inet-wpagui-fr.htm#wpa-roaming-gui">WiFi - WPA_GUI</a></li>
				<li><a href="inet-setup-fr.htm#net-set1">WiFi - Setting up for WiFi Roaming</a></li>
				<li><a href="internet-connecting-wpa-fr.htm#wpa">WiFi - wpasupplicant</a></li>
				<li><a href="inet-ifplug-fr.htm#hotswitch">Network switching between WiFi and Cable</a></li>
				<li><a href="internet-connecting-fr.htm#netcardconfig">Se connecter au Web - Ceni</a></li>
			</ul>
		</li>
		<li  onmouseover="showHide( 12 );" onmouseout="startTime();" ><a href="sys-admin-apt-fr.htm">dist-upgrade et gestion de paquets</a>
			<ul class="sub-menu" id="sm12">
				<li><a href="sys-admin-apt-fr.htm#apt-cook">Guide pour APT et listes de sources</a></li>
				<li><a href="sys-admin-apt-fr.htm#apt-install">Installer un nouveau paquet</a></li>
				<li><a href="sys-admin-apt-fr.htm#apt-delete">Désinstaller un paquet</a></li>
				<li><a href="sys-admin-apt-fr.htm#apt-downgrade">Rétrograder/Conserver un paquet</a></li>
				<li><a href="sys-admin-apt-fr.htm#apt-cache">Chercher un paquetage avec apt-cache</a></li>
				<li><a href="sys-admin-apt-fr.htm#gui-pacsea">Recherche de paquets en mode GUI</a></li>
				<li><a href="sys-admin-upgrade-fr.htm#live-cd-upgrade">Mettre à niveau à partir d'un Live- ISO</a></li>
				<li><a href="sys-admin-apt-locarmirr-fr.htm#approx">Mise à niveau (dist-upgrade) de multiples PC en mode LAN</a></li>
				<li><a href="sys-admin-kern-upg-fr.htm#kern-upgrade">Mise à niveau du noyau</a></li>
				<li><a href="sys-admin-kern-upg-fr.htm#dmakms">Installing kernel modules dynamically with dmakms</a></li>
				<li><a href="sys-admin-apt-fr.htm#apt-upgrade">Mettre à niveau un système installé - dist-upgrade - Vue d'ensemble</a></li>
				<li><a href="sys-admin-apt-fr.htm#du-st">Mettre à niveau un système installé -  dist-upgrade - Les étapes</a></li>
			</ul>
		</li>
		<li  onmouseover="showHide( 13 );" onmouseout="startTime();" ><a href="sys-admin-gen-fr.htm">Administration Système</a>
			<ul class="sub-menu" id="sm13">
				<li><a href="hd-install-fr.htm#adduser">Ajouter un nouvel utilisateur</a></li>
				<li><a href="home-fr.htm#home-bu">Déplacer /home</a></li>
				<li><a href="sys-admin-rdiff-fr.htm#rdiff">Sauvegarde avec rdiff</a></li>
				<li><a href="sys-admin-rsync-fr.htm#rsync">Sauvegarde avec rsync</a></li>
				<li><a href="vir-rkits-fr.htm#virus-rkits">Virus et Scanners de Rootkits</a></li>
				<li><a href="sys-admin-gen-fr.htm#start-services">Activer/désactiver les services</a></li>
				<li><a href="sys-admin-gen-fr.htm#pw-lost">Perte du mot de passe root</a></li>
				<li><a href="sys-admin-gen-fr.htm#fonts">Polices</a></li>
				<li><a href="sys-admin-gen-fr.htm#cups">CUPS -imprimantes</a></li>
				<li><a href="sys-admin-gen-fr.htm#sound">Sound Mixers</a></li>
				<li><a href="sys-admin-gen-fr.htm#init">Niveaux de fonctionnement sidux-init</a></li>
				<li><a href="bios-freedos-fr.htm#bois-prep">Mise à jour du BIOS avec FreeDOS</a></li>
				<li><a href="sys-admin-grub-bootman2-fr.htm#boot-grub-floppy">Créer une disquette de démarrage</a></li>
				<li><a href="sys-admin-grub-bootman2-fr.htm#mbr-grub-boot">Grub1 - Effacement du secteur de boot MBR</a></li>
				<li><a href="sys-admin-grub-bootman2-fr.htm#dual-boot">Grub1 - Double et multi-démarrage</a></li>
				<li><a href="sys-admin-grub-bootman2-fr.htm#remove-grub">Enlever grub du MBR</a></li>
				<li><a href="sys-admin-grub-bootman2-fr.htm#what-is-grub">Grub, le gestionnaire de démarrage</a></li>
				<li><a href="sys-admin-grub2-fr.htm#mbr-over-grub2">Grub2 - MBR Overwritten</a></li>
				<li><a href="sys-admin-grub2-fr.htm#multi-os">Grub2 - Dual and Multibooting</a></li>
				<li><a href="sys-admin-grub2-fr.htm#grub1-grub2">Grub2 -Upgrading from Grub1</a></li>
				<li><a href="sys-admin-grub2-fr.htm#grub2">Grub2 - Overview</a></li>
			</ul>
		</li>
	</ul>
<!-- menu ends here --></div>
<div id="main-page">
	<div class="divider" id="fromiso">
		<h2 id="top-header">Démarrer depuis une image ISO ("fromiso") - Overview</h2>

							<p  class="highlight-2">Pour une utilisation ordinaire, nous recommandons le système de fichiers ext4, utilisé par défaut par sidux.</p>

							<p>Le code de démarrage fromiso vous permet de démarrer à partir d'une copie sur une partition de disque dur (ext2/3/4) de l'image du Live-CD, ce qui permet une utilisation en mode "Live" nettement accélérée (l'installation depuis un système démarré "fromiso" est également plus rapide).</p>

							<p>'fromiso' permet d'exploiter le débit de transfert des disques durs, nettement supérieur à celui des CD/DVD-ROM, et c'est ce qui explique l'accération. Cela permet aussi de pouvoir exploiter son lecteur/graveur de CD/DVD qui à ce moment là se trouve libéré. Comme alternative, il existe également la possibilité de démarrer à partir de QEMU.</p>

				<h5>Ce qu'il vous faudra:</h5>

							<p>* Un grub opérationnel (sur disquette, disque dur, ou live-cd)<br />
							* Une image ISO de sidux, par exemple : sidux.iso et un système de fichiers GNU/Linux ext2/3/4 <br />
							* Si vous changez le nom de l'image pour adopter par exemple, le nom simplifié sidux.ISO, vous devrez en conséquence modifier les commandes nécessaires afin d'intégrer cette modification (souvenez-vous que le système d'identification des fichiers Unix est sensible à la casse !).</p>
</div>
<div class="divider" id="grub2-fromiso">
			<h2>fromiso with Grub2</h2>
							<p>sidux has provided a grub2 file named 60_fll-fromiso to generate a fromiso entry to the grub2 menu.  The only file to configure fromiso is called <span class="highlight-3">grub2-fll-fromiso</span> and is found in <span class="highlight-3">/etc/default/grub2-fll-fromiso.</span>.</p>

							<p> First open a terminal and become root with:</p>
<pre>
sux
apt-get update
apt-get install grub2-fll-fromiso
</pre>
							<p>Then open an editor, which may be kwrite, mcedit, vim or another that you prefer:</p>

<pre>
mcedit /etc/default/grub2-fll-fromiso
</pre>
							 <p>Next uncomment (remove the<span class="highlight-2"> # </span>) the lines you need to be operative and replace the default instructions within the <span class="highlight-3">"quote marks"</span> with your preferences.</p>

							 <p>For example, compare this altered grub2-fll-fromiso with the default, (the <span class="highlight-3">highlighted lines</span> are the changed lines for instructional purposes):</p>
<pre>
# Defaults for grub2-fll-fromiso update-grub helper
# sourced by grub2's update-grub
# installed at /etc/default/grub2-fll-fromiso by the maintainer scripts

#
# This is a POSIX shell fragment
#

# specify where to look for the ISO
# default: /srv/ISO <span  class="highlight-1">### Note: This is the path to the directory that contains the ISO,<br /> it is not to include the actual sidux-*.iso file.###</span>
<span  class="highlight-3">FLL_GRUB2_ISO_LOCATION="/media/disk1part4/sidux-iso"</span>

# array for defining ISO prefices --> sidux-*.iso
# default: "sidux- fullstory-"
<span  class="highlight-3">FLL_GRUB2_ISO_PREFIX="sidux-"</span>

# set default language
# default: en_US
<span  class="highlight-3">FLL_GRUB2_LANG="en_AU"</span>

# override the default timezone.
# default: UTC
<span  class="highlight-3">FLL_GRUB2_TZ="Australia/Melbourne"</span>

# kernel framebuffer resolution, see
# http://manual.sidux.com/de/cheatcodes-vga-de.htm#vga
# default: 791
#FLL_GRUB2_VGA="791"

# additional cheatcodes
# default: noeject
<span  class="highlight-3">FLL_GRUB2_CHEATCODE="noeject nointro"</span>
</pre>


						      <p>Save and close the editor, then run in the terminal</p>
<pre>
update-grub
</pre>
						      <p>Your grub2 grub.cfg will be updated to see the different ISOs you have placed in the directory you specified and will be available on your next boot up.</p>
	    </div>
	    <div class="divider" id="fromiso-grub-leg">
			<h2>fromiso with grub-legacy</h2>

<!--- ####
				<h4 class="highlight-3">Process:</h4>
							<p>Choose a place for the iso and 2 files we need, so we get shorter names. Therefore create a base-directory: for example "/media/sdaX", (sda1 or, 2, or 5, or 6, or whatever, for example) create the directory "sidux" and copy the iso into it:</p>
<pre>$ sux
mkdir -p /media/sdaX/sidux
mv sidux.iso /media/sdaX/sidux
</pre>
							<p>Now mount the ISO image (Alternatively mc [midnight commander] can be used, as it transparently auto-mounts .iso files and lets you copy out the files needed.):</p>

<pre>
mount -t iso9660 -o loop,ro /media/sdaX/sidux/sidux.iso /mnt
</pre>
							<p>Now copy the vmlinuz and initrd.img files from the mounted iso image to the directory <span class="highlight-3">and the HD is YOUR known variable::This is an example only :</span></p>

<pre>
cp /mnt/boot/vmlinuz* /media/sda5/sidux/vmlinuz
cp /mnt/boot/initrd.img* /media/sda5/sidux/initrd.img
umount /mnt
</pre>
							<p>Next you have to customise grub. Therefore edit the file<span class="highlight-3"> /boot/grub/menu.lst </span> and add the following lines <span class="highlight-3"> AFTER the ### END DEBIAN AUTOMAGIC KERNELS LIST</span>: <span class="highlight-2">NOTE no wildcards on grub line for filenames allowed! </span> <span class="highlight-3">The HD is YOUR known variable::This is an example only:</span> </p>
<pre>
### ISO boot
title sidux 32bit from ISO
kernel (hd0,4)/sidux/vmlinuz boot=fll quiet vga=791 fromiso=/sidux/sidux.iso
initrd (hd0,4)/sidux/initrd.img
</pre>
							<p>With next boot you have a new menu item in grub to start the iso image. Should you upgrade your sidux.iso, vmlinuz and intird.img files with later releases, grub's menu.lst does not need to be altered.</p>
#### -->
				<h4 class="highlight-3">Processus :</h4>
							<p>Choisir un endroit où copier l'ISO et les deux fichiers dont nous avons besoin, nous aurons anisi des noms simplifiés. Pour cela créez un repertoire : par exemple "/media/sdaX", (sda1 ou 2, ou 5, ou 6,...) puis créer le dossier "sidux" et y copier l'ISO :</p>
<pre>$ sux
mkdir -p /media/sdaX/sidux
mv sidux.iso /media/sdaX/sidux
</pre>
							<p>Monter ensuite le fichier image (on peut aussi utiliser mc [midnight commander], puisque de façon transparente et automatique il monte les fichiers ISO et vous permet de copier les fichiers nécessaires) :</p>

<pre>
mount -t iso9660 -o loop,ro /media/sdaX/sidux/sidux.iso /mnt
</pre>
							<p>Maintenant copier les fichiers vmlinuz et initrd.img de l'image montée vers le répertoire de destination <span class="highlight-3">selon le chemin à spécifier vers votre propre disque dur. À titre d'exemple :</span></p>

<pre>
cp /mnt/boot/vmlinuz0.686 /media/sda5/sidux/vmlinuz0.686
cp /mnt/boot/initrd0.686 /media/sda5/sidux/initrd0.686
umount /mnt
</pre>
							<p>Modifier ensuite le fichier de configuration de grub. Pour cela éditer le fichier<span class="highlight-3"> /boot/grub/menu.lst </span> et ajouter les lignes suivantes <span class="highlight-3"> APRES le ### END DEBIAN AUTOMAGIC KERNELS LIST</span>: <span class="highlight-2">NOTE les caractères spéciaux tels que * ne sont pas autorisés dans les noms de fichiers! </span> <span class="highlight-3">Les variables du disque dur vous sont propres, ce qui suit n'est qu'un exemple :</span> </p>
<pre>
### ISO boot
title sidux 32bit from ISO
kernel (hd0,4)/sidux/vmlinuz0.686 boot=fll quiet vga=791 fromiso=/sidux/sidux.iso
initrd (hd0,4)/sidux/initrd0.686
</pre>
							<p>Au redémarrage vous aurez un nouvel élément dans le menu de grub pour permettre de démarrer l'ISO. Lorsque vous mettrez à jour votre sidux.iso et les fichiers vmlinuz et intird.img, le menu.lst de grub n'aura pas besoin d'être modifié.</p>

							</div>
	<div class="divider" id="fromiso-persist">
		<h2>Information générale sur fromiso avec persist</h2>

				<h3>fromiso et persist sur un disque dur</h3>

							<p>Vous pouvez avoir un système live persistant sur un disque inscriptible en combinant une installation fromiso avec le code de démarrage persist. When the fromiso uses ext2/ext3/ext4 system the default is simply:</p>

<pre>
persist
</pre>
<!--							<p>When the fromiso uses a vfat filesystem, then you must use a file that contains a linux filesystem and the cheatcode will look like:</p> -->
							<p>Lorsque fromiso utilise un système de fichier vfat, il vous faudra alors utiliser un fichier qui contiendra un système de fichier linux et le cheatcode ressemblera à ceci:</p>
<pre>
persist=/sidux/sidux-rw
</pre>

							<p>sidux utilise aufs pour activer ce que l'on appelle "copie à l'écriture" sur votre ISO, pour vous permettre de créer et de mettre à jour des fichiers et des répertoires tout en gardant les nouveaux fichiers en mémoire. Le code de démarrage <span class="highlight-3">persist</span> va stocker vos nouveaux fichiers sur la même partition que celle utilisée pour stocker votre image ISO.</p>

							<p><span class="highlight-3">fromiso</span> vous met à disposition un système live qui contient toutes les fonctionnalités automatiques du live CD sidux. Cela permet de bénéficier de fonctionnalités telles que la configuration automatique du matériel. En contrepartie cela signifie aussi que les mêmes fichiers devront être recréés à chaque démarrage, à moins que vous n'utilisiez des codes de démarrage aditionnels.</p>

							<p>L'utilisation de <span class="highlight-3">persist</span> avec d'autres codes de démarrage spécifiques à sidux tels que noxorgconf, nonetwork, etc signifie qu'il n'aura pas à recréer les mêmes fichiers à chaque démarrage.</p>

							<p>L'utilisation de persist signifie aussi que vous pouvez installer des paquets depuis apt et avoir à disposition les applications installées et n'importe quelles autres données sauvées par vous-mêmes au prochain démarrage.</p>
	</div>
	<div class="divider" id="persist-post">
				<h2>fromiso et persist sur une clef USB-sticks/SSD-cards bootable</h2>

							<p>L'utilisation de la persistance est idéale lorsqu'elle est faite en conjonction avec l'outil install-usb-gui pour créer votre propre disque flash de démarrage avec vos fichiers et les applications dont vous avez besoin. Your files will be stored in a subfolder on the drive.</p>

							<p><span class="highlight-3">persist</span> sur un système de fichiers FAT, comme c'est souvent le cas sur les installations DOS/Windows 9x et par défaut sur la plupart des périphériques flash, requiert que vous créiez un gros fichier unique qui sera utilisé comme périphérique de bouclage (loop) puis que vous le formatiez.</p>

							<p><span class="highlight-3">Sur les clefs USB-sticks/SSD-cards, ext2 et vfat sont les systèmes de fichiers recommandés car ils sont les plus à même d'être compatibles entre les différentes plateformes, ce qui est utile lors d'une utilisation de récupération de fichiers. Un pilote MS Windows &#8482; permet l'écriture sur les partitions de type ext2. Les réécriture sur les périphériques de type flash dépendent des spécifications de votre clef USB-sticks/SSD-cards.</span></p>

					<h6>systèmes de fichiers ext2</h6>
							<p>Avec ext2 la partition sera utilisée dans son intégralité. La racine actuelle est utilisée est un répertoire /fll est créé. Ce répertoire est utilisé pour persister l'utilisation de l'intégralité de l'espace libre sur le périphérique pour le système persisté.</p>
<h6>système de fichiers vfat</h6>
						      <p>Quand vfat est utilisé, la persistance est assurée grâce à un fichier dont la taille ne peut excéder 2GB et ne peux pas être inférieure à 100MB (car il serait alors inutile). Ce fichier devrait être nommé <span class="highlight-3">sidux-rw</span>.</p>

					 <h4>Example of creating persist after initial installation</h4>
							<p>If you are not sure of the mount point, mount the stick and run <span class="highlight-3">ls -lh /media</span> to provide a list of all your system mount points. Look for something like <span class="highlight-3">drwxr-xr-x  6 username root 4.0K Jan  1  1970 disk</span>. If your output states differently then replace <span class="highlight-3">"/media/disk"</span> in line with your requirement, (for example "/media/sdc1"):</p>

<pre>
disk="/media/disk"
</pre>

							<p>Set the size of the persist partition:</p>
<pre>
size=1024
</pre>
							<p>Make a directory on the stick:</p>
<pre>
mkdir $disk/sidux
</pre>
							<p>Run the code to make the persist partition:</p>

<pre>
dd if=/dev/zero of=$disk/sidux/sidux-rw bs=1M count=$size &amp;&amp;  echo 'y' | LANG=C /sbin/mkfs.ext2 $disk/sidux/sidux-rw &amp;&amp;  tune2fs -c 0 "$disk/sidux/sidux-rw"
</pre>

							<p class="highlight-2">Les partitions NTFS, souvent utilisées sur les installations de Windows NT/2000/XP (TM) ne peuvent EN AUCUN CAS être utilisées pour faire de la persistance.</p>

	</div>
	<div class="divider" id="usb-hd">
		<h2>Installation de sidux sur un disque USB/SSD devices</h2>

							<p>L'installation de sidux sur une clef ou un disque USB-stick/SSD-card est aussi simple qu'une installation normale sur disque dur. Suivez simplement ce guide.</p>

<!--				<h5>Requirements:</h5>
							<p>Any PC that has a USB 2.0 protocol and supports booting from USB/SSD.</p>

							<p>A sidux.iso image.</p> -->
				<h5>Elements requis:</h5>
							<p>Tout ordinateur utilisant des ports USB 2.0 et supportant le démarrage à partir d'un support USB/SSD.</p>

							<p>Une image sidux.iso.</p>

<!-- 				<h5>Two kinds of installation to USB/SSD</h5>
					  <ul>
							<li>1) - fromiso </li>
							<li>2) - full (the full installation to a USB/SSD behaves as normal HD installation and is done through the normal installer).</li>
					  </ul>
				<h3>USB/SSD fromiso Installation</h3>
							<p> <span class="highlight-3">Pre format your usb device with ext2 or fat32 before proceeding (at least a 2 gig capacity) . The device should have 1 partition only and as some BIOSes are temperamental this must be marked bootable.</span></p>

							<p>The <span class="highlight-3">fromiso</span> installation is done through <span class="highlight-3">Menu>System>install-sidux-to-usb</span>. On a LIVE-CD you can also click on <span class="highlight-3">sidux Installer Icon</span> and choose <span class="highlight-3">Install to USB</span>.</p> -->
				<h5>3 méhodes pour installer sur un support USB/SSD</h5>
					  <ul>
							<li>1) <a href="hd-install-opts-fr.htm#usb-from1">fromiso </a>; sidux specific: sidux-on-a-stick</li>
							<li>2) <a href="hd-install-opts-fr.htm#usb-hdd"> Totale </a>(l'installation totale sur un support USB/SSD se fait comme sur un disque dur normal à l'aide de l'installateur sidux).</li>
							<li>3) <a href="hd-ins-opts-oos-fr.htm#raw-usb"> RAW device </a> write. This is ideal when using any Linux, MS Windows or Mac OS X operating system and wish to install sidux-on-a-stick, (with caveats).</li>
					  </ul>

	    </div>
	    <div class="divider" id="usb-from1">
				<h3>Installation sur suport USB/SSD par la méthode fromiso, sidux-on-a-stick </h3>
							<p> <span class="highlight-3">Avant de commencer formater la clé usb en ext2 ou fat32 (au moins une capacité de 2 giga) . La clé de devrait comporter qu'une seule partition et bootable pour être reconnue par le BIOS.</span></p>

							<p>If using a GUI formatting application like gparted, please ensure that you first delete the existing partition, then recreate the partition before formatting.</p>

							<p>L'installation <span class="highlight-3">fromiso</span> se fait par le <span class="highlight-3">Menu>System>install-sidux-to-usb</span>. A partir du LIVE-CD vou pouvez cliquer directement sur l'icône <span class="highlight-3">sidux Installer</span> et choisir <span class="highlight-3">Install to USB</span>.</p>

							<p>Vous aurez l'occasion de choisir la langue, la zone horaire et d'autres codes de démarrage ainsi que d'activer ou non la persistance via une case à cocher.</p>

							<p>Vous avez maintenant une clef USB/SSD bootable. Si vous n'avez pas activé la persistance, vous pouvez encore l'activer en ajoutant <span class="highlight-3">persist</span> à la ligne de démarrage sur l'écran de démarrage grub. (If vfat, it is probably best to start again though).</p>


						<h6>Exemple dans un terminal :</h6>
<pre>
 fll-iso2usb -D /dev/sdb -f none --iso /home/sidux/sidux.iso -p -- lang=no tz=Pacific/Auckland
</pre>
							<p>Cela installera l'image ISO sur le périphérique USB <span class="highlight-3">sdb</span> avec la persistance, la localisation norvégienne et la zone horaire Pacifique/Auckland /NZL) ajoutées à la ligne de démarrage par défaut de grub.</p>

							<p>La configuration de X (carte graphique, clavier, souris) ainsi que le fichier de configuration des interfaces réseau n'ont pas été sauvegardés, ce qui rend cette installation idéale à utiliser sur d'autres ordinateurs.</p>

							<p>Pour une documentation plus complète comprenant des options de personnalisation, veuillez vous référer à :</p>

<pre>
$ man fll-iso2usb
</pre>

<!--			<h3>Full installation to a USB/SSD (behaves as normal HD installation)</h3>
							<p>The recommended mininmum size of a USB-stick/SSD-card is:<br />
							sidux "LITE" needs 2.5 gig PLUS you need data space,<br />
							sidux "FULL" needs 4 gig PLUS you need data space</p>

							<p> <span class="highlight-3">Pre format your device with</span> <span class="highlight-2">ext2 </span><span class="highlight-3">and partition the USB-stick/SSD-card as you would a standard PC.</span></p>

							<p>Start the installation from the Live-ISO and choose the partition on the USB/SSD-device, where sidux is to be installed, for example <span class="highlight-3">sdbX </span>and follow the sidux installer prompts. Read <a href="hd-install-fr.htm#Installation">Installing to your HD</a></p> -->
			<h3>La méthode d'installation totale sur support USB/SSD (pareil à l'installation normale sur disque dur)</h3>
							<p>La taille minimum requise pour le support USB/SSD de:<br />
							sidux "LITE" 2.5 giga PLUS vous avez besoin d'espace pour les données,<br />
							sidux "FULL" 4 giga PLUS vous avez besoin d'espace pour les données</p>

							<p> <span class="highlight-3">Formater la cé en</span> <span class="highlight-2">ext2 </span><span class="highlight-3">et partitionner la clé USB/SSD-card comme pour un ordinateur standard.</span></p>

							<p>Démarrer l'installation à partir du Live-ISO et choisir la partition où sidux sera instalé, exemple <span class="highlight-3">sdbX </span>et suivre les instructions de l'installateur sidux. Lire <a href="hd-install-fr.htm#Installation">Installer sur son DDur</a></p>

							<p><span class="highlight-3">Pour démarrer de votre dique dur externe ou de votre clé USB/SSD, votre BIOS doit d'abord en être capable et l'option "Démarrer depuis USB" doit être activée.</span></p>

<!--							<p><span class="highlight-3">Other note worthy points are: </span></p>
						<ul>
							<li>A USB-stick/SSD-card install will be usually be bound to the PC that initiated the original installation. If it is your intention to be able to use the USB/SSD stick on other PCs, it should not have non-free graphics drivers and cheatcodes pre configured, with the exception to probably have the vesa cheatcode hardcoded into the menu.lst, (all to be attended to after a successful installation).</li>

							<li>After booting the USB-stick/SSD-card to another PC, you will need to alter fstab to access the PCs hard drives.</li>

							<li>"fromiso" with "persist" is a better option should portability be the intention.</li>
						</ul>
	</div>
	<div class="divider" id="usb-hdd">
				<h3>Full installation to a USB Hard Disk Drive like an installation to a partition</h3>

							<p>A USB Hard Disk Drive has one quite good and appealing application, (particularly to new users coming from MS or another distro), and that is you can install sidux to a USB HDD, plug it in without needing to configure a PC for dual boot (repartitioning, grub alterations etcetera).</p>

							<p>Start the installation from the Live-ISO, (or from a USB-stick/SSD-card), <span class="highlight-3">as a standard install, not a USB install</span> and choose the partition on the device, where sidux is to be installed, for example <span class="highlight-3">sdbX </span>and follow the sidux installer prompts. Grub must be written to the USB HDD partition.</p>

							<p>Read <a href="hd-install-fr.htm#Installation">Installing to your HD</a></p>

							<p><span class="highlight-3">Other note worthy points are: </span></p>

						<ul>
							<li>A USB HDD install will be usually be bound to the PC that initiated the original installation. If it is your intention to be able to use the USB HDD on other PCs, the USB HDD should not have non-free graphics drivers and cheatcodes pre configured, with the exception to probably have the vesa cheatcode hardcoded into the menu.lst, (all to be attended to after a successful installation).</li>

							<li>If you want to use the installation on another machine be aware that you must make some adjustments. You will need to alter fstab to access the PCs hard drives, maybe xorg.conf and probably the network configuration.</li> -->

							<p><span class="highlight-3">Autres points à noter: </span></p>
						<ul>
							<li>Une installation sur support USB/SSD-card sera configuré par rapport au PC duquel il a été installé. Si vous avez l'intention d'utiliser votre clé USB/SSD sur d'autres ordinateurs, Il ne devrait donc pas avoir les pilotes graphiques et les codes de démarrage non libres préconfigurés, sauf si le code de démarrage vesa est déjà configuré dans le menu.lst, (tout ceci bien attendu après une installation réussie).</li>

							<li>Après avoir démarré  la clé USB/SSD-card d'un autre ordinateur, modifier le fstab afin d'accéder aux autres disques durs de l'ordinateur.</li>

							<li>"fromiso" avec le mode "persistance" est une meilleure option si vous souhaitez en faire un système portatif.</li>
						</ul>
	</div>
	<div class="divider" id="usb-hdd">
				<h3>Installation totale sur Disque Dur externe (USB) comme partition</h3>

							<p>Un disque dur externe (USB) contient un excellent et intuitif outil, (particulièrement pour les nouveaux utilisateurs venant de MS ou tout autre distribution), qui permet l'installation de sidux et ainsi de branchr et débrancher le disue dur externesans avoir besoin de configurer l'ordinateur pour un dualboot (repartitionner, conflits grub etc...).</p>

							<p>Démarrer l'installation à partir du Live-ISO, (ou à partir de la clé USB/SSD-card), <span class="highlight-3">comme une installation normale, pas comme une installation USB</span> et choisir la partition où doit s'installer sidux, exemple <span class="highlight-3">sdbX </span>et suivre les instructions de l'installateur. Grub doit être installé sur la partition du disque dur externe (USB).</p>

							<p>Lire <a href="hd-install-fr.htm#Installation">Installer sur son DDur</a></p>

							<p><span class="highlight-3">Autres remarques: </span></p>

						<ul>
							<li>Une installation sur Disque Dur externe (USB) sera configuré par rapport au PC duquel il a été installé. Si vous avez l'intention d'utiliser votre Disque Dur externe (USB) sur d'autres ordinateurs, Il ne devrait donc pas avoir les pilotes graphiques et les codes de démarrage non libres préconfigurés, sauf si le code de démarrage vesa est déjà configuré dans le menu.lst, (tout ceci bien attendu après une installation réussie).</li>

							<li>Si vous souhaitez l'utiliser sur d'autres ordinateurs, il faudra effectuer quelques modifications, comme modifier le fstab pour accéder aux autres disques dur de l'ordinateur le xorg.conf et probablement la connexion réseau.</li>
							</ul>
	</div>
	<div class="divider" id="vtbox">
		<h2>Installer sidux avec VirtualBox</h2>
							<p>Les étapes :</p>
						<ul>
 							<li>1. Créez une image disque pour Virtualbox.</li>
 							<li>2. Démarrez l'iso avec Virtualbox</li>
 							<li>3. installez sidux sur votre image disque</li>
						</ul>

				<h4>Configuration minimale requise</h4>
							<p><span class="highlight-3">1 Go de RAM recommandés</span>: dans l'idéal, 512 Mo pour le système hébergé, 512 Mo pour l'hôte. (ça peut tourner avec moins de ram, mais n'attendez pas une grande performance à ce moment là...).</p>

							<p><span class="highlight-3">Espace disque:</span> VirtualBox en soi a beau être léger (une installation de base occupe autour de 30 Mo d'espace disque), les machines émulées elles, nécessitent pour fonctionner de disposer d'un espace disque plutôt conséquent, afin de suffire à héberger leurs propres espaces disques de stockage. Dans ces conditions, pour installer Windows XP&reg;, par exemple, vous aure besoin d'un espace suceptible de s'étendre sur un bon nombre de Gigas...Pour utiliser sidux sous virtualbox vous devrez allouer une taille image de 5 GB en plus du swap.</p>

				<h3>Installation:</h3>

<pre>
apt-get update
apt-get install virtualbox-ose-qt virtualbox-ose-source dmakms module-assistant
</pre>
							<p>Then prepare the module:</p>
<pre>
m-a prepare
m-a a-i virtualbox-ose-source
</pre>
							<p>Then activate Dynamic Module-Assistant Kernel Module Support for virtualbox, so that the next time the Linux kernel is updated a virtualbox module is prepared for it too, without manual intervention. To do that, add <span class="highlight-3">virtualbox-ose-source</span> to the <span class="highlight-3">/etc/default/dmakms </span>configuration file. </p>
<pre>
mcedit /etc/default/dmakms
virtualbox-ose-source
</pre>

							<p>Then reboot the computer.</p>

							<p><a href="sys-admin-kern-upg-fr.htm#dmakms">This is essential reading on dmakms</a></p>

						      <!--<p>virtualbox-ose-source will pull in dkms,  which will build the modules and automatically re-build and update the modules when virtualbox, dkms or the kernel updates.</p>

							<p>Reboot your PC for the kernel to access the module after the initial installation.</p>

							<p>When the kernel is upgraded you will need to activate the module before starting virtualbox to avoid error messages. To avoid manual intervention each time the kernel updates, edit with your preferred editor as root <span class="highlight-3">/etc/rc.local</span> to look like this:</p>
<pre>
# By default this script does nothing.
modprobe vboxdrv
exit 0
</pre>
							<p>dkms and dmakms can coexist on the same installation, read:</p>
<pre>
man dkms
man dmakms
</pre>-->

					<h3>Installer sidux sur la machine virtuelle</h3>


							<p>Utilisez l'assistant de VirtualBox pour créer une nouvelle machine virtuelle pour sidux. Suivez ensuite les instructions données pour une installation standard de sidux.</p>


							<p><a href="http://www.virtualbox.org/">Le site de VirtualBox fournit une documentation accessible, notamment une aide en PDF, que vous pourrez télécharger.</a> </p>

	</div>
	<div class="divider" id="qemu">
		<h2>Installer sidux avec QEMU</h2>

							<p>Les étapes:</p>

						<ul>
 							<li>1. créer une image disque pour qemu</li>
 							<li>2. démarrer l'iso avec qemu</li>
 							<li>3. installer sur l'image disque</li>
						</ul>

							<p>A QT GUI tool is available to help you configure QEMU:</p>
<pre>
apt-get install qtemu
</pre>

 				<h4>Créer une image-disque</h4>

							<p>Pour utiliser qemu vous aurez probablement besoin d'une image disque (image de disque dur). Il s'agit d'un simple fichier qui stocke le contenu d'un disque dur virtuel (émulé).</p>

							<p>Utilisez cette commande:</p>
<pre>
qemu-img create -f qcow sidux.qcow 3G
</pre>
							<p>Elle créera un fichier image appelé "sidux.qcow". Le paramètre "3G" spécifie sa taille, qui est de 3 Go. Vous pouvez également utiliser le paramètre M pour les mégaoctets (par exemple "800M". Vous n'avez pas trop à vous inquiéter de la taille du disque, car le format qcow compresse l'image de sorte qu'elle n'occupe pas plus d'espace que ce qui est effectivement occupé par les données une fois compressées.</p>


			<h4>Installer le système d'exploitation</h4>

							<p>C'est la première fois que vous allez devoir démarrer l'émulateur. <span class="highlight-3">Une bonne chose à savoir : quand vous cliquez dans la fenêtre de qemu, il capture le pointeur de la souris. Pour le libérer vous n'avez qu'à presser sur votre clavier la combinaison :</span></p>
<pre>
Ctrl+Alt
</pre>

							<p>Si vous avez besoin d'utiliser une disquette de démarrage, alors lancez qemu avec :</p>
<pre>
qemu -floppy sidux.iso -net nic -net user -m 512 -boot d sidux.qcow
</pre>
							<p>Pour lancer un cd bootable:</p>
<pre>
qemu -cdrom sidux.iso -net nic -net user -m 512 -boot d sidux.qcow
</pre>
							<p>Vous pouvez alors installer sidux comme s'il s'agissait d'un disque du réel</p>


			<h4>Utiliser le système</h4>

							<p>Pour utiliser le système après l'installation, faites simplement:</p>
<pre>
qemu [votre_image_disque]
</pre>
							<p>Une bonne idée est d'utiliser les images par recouvrement (overlay images). De cette façon vous créez une première image et Qemu va stocker ses modifications dans un fichier séparé ; de cette manière il sera aisé de revenir à une version antérieure du système et de prévenir toute instabilité potentielle.</p>

							<p>Pour créer une image de recouvrement (overlay image), entrez :</p>
<pre>
qemu-img create -b [[base''image]] -f qcow [[overlay''image]]
</pre>
							<p>Remplacez l'image de recouvrement à votre image_de_base (dans notre cas sidux.qcow). Après quoi vous pouvez lancer qemu avec:</p>
<pre>
qemu [image_de_recouvrement]
</pre>
							<p>L'image de base ne sera pas modifiée. Une limitation cependant : l'image de base ne doit pas être déplacée ou renommée, l'image de recouvrement gardant son chemin absolu en mémoire.</p>


				<h4>Utiliser une partition réelle quelconque en tant que partition primaire unique d'une image disque</h4>

							<p>Il peut arriver que vous vouliez utiliser une de vos partitions système dans qemu (par exemple, pour démarrer en même temps votre système réel ou qemu utilisant une partition spécifique comme racine). Vous pouvez y parvenir en utilisant le RAID logiciel en mode linéaire (il vous faudra le pilote de noyau linear.ko) ainsi qu'un périphérique loopback : l'astuce consiste à ajouter un master boot record (MBR) à la fin de la partition que vous souhaitez intégrer à une image disque qemu brute.</p>

							<p>Supposons que vous disposez d'une partition non montée /dev/sdaN dont vous voudriez faire du système de fichiers une partie de votre image disque qemu. Vous commencerez par créer un petit fichier pour stocker le MBR:</p>
<pre>
dd if=/dev/zero of=/path/to/mbr count=32
</pre>
							<p>Là un fichier de 16 Ko (32 * 512 bytes) est créé. Il est important de ne pas le créer trop petit, même si un MBR ne requiert qu'un unique bloc de 512 octets, car plus petit il sera, plus le hachage du raid logiciel devra être étroit, ce qui impacte sur les performances. Puis, vous attachez un périphérique loopback au fichier MBR:</p>
<pre>
losetup -f /chemin/du/mbr
</pre>
							<p>Admettons qu'au résultat le périphérique obtenu soit /dev/loop0, car nous n'utiliserions jusque là aucun autre loopback. L'étape suivante passe par la création de l'image disque "mélangée" MBR + /dev/sdaN en utilisant le RAID logiciel:</p>
<pre>
 modprobe linear
 mdadm --build --verbose /dev/md0 --chunk=16 --level=linear --raid-devices=2 /dev/loop0 /dev/sdaN
</pre>
							<p>Le résultat /dev/md0 est ce que vous allez utiliser comme disque image qemu (n'oubliez pas de fixer les permissions de sorte que l'émulateur puisse y avoir accès). La dernière (et peut-être la plus perverse) des étapes consiste à régler la configuration du disque (géométrie et table des partitions) de telle sorte que le point d'origine du MBR coincide avec celui de /dev/md0 (un offset d'exactement 16*512 = 16384 octets dans cet exemple). Réalisez cette étape en utilisant fdisk sur la machine hôte, et non depuis l'émulateur : la routine de détection brute des disques utilisée par qemu produit en effet souvent des offset non-arrondis au kilooctet (de type 31.5 KB, comme dans la section précédente) et qui ne seraient pas gérables par le RAID logiciel. Ainsi, depuis la machine hôte: </p>
<pre>
 fdisk /dev/md0
</pre>
							<p>Créez ensuite une partition primaire unique correspondant à /dev/sdaN, et utilisez la commande 's'ector du menu expert, de telle sorte que le premier cylindre (où cette première partition est censée démarrer) coïncide avec la taille du MBR. Quand finalement vous activez la fonction 'w' pour sauver votre réglage dans un fichier, l'opération est terminée. Vous disposez d'une partition que vous pouvez monter directement depuis votre machine hôte, et qui fait également partie d'une image disque qemu :</p>
<pre>
 qemu -hdc /dev/md0 [...]
</pre>
							<p>Évidemment vous pouvez sans problème configurer un chargeur de démarrage sur votre image disque en utilisant qemu, du moment que le répertoire /sdaN/boot de la partition originale est équipée des outils nécessaires.</p>

			<h4>Activer le module d'accélaration de QEMU</h4>

							<p>Les développeurs de qemu ont créé un module de noyau optionnel accélérant qemu jusqu'à des vitesses proches de celles d'une machine réelle. Ce module se charge avec cette option :</p>
<pre>
major=0
</pre>
							<p>Pour automatiser la création du périphérique /dev/kqemu, utilisez cette commande :</p>
<pre>
echo "options kqemu major=0" &gt;&gt; /etc/modprobe.conf
</pre>
							<p>Ceci empêchera modprobe.conf de vérifier systématiquement que l'option de module soit ajoutée à chaque lancement de celui-ci.</p>

<pre>
qemu [...] -kernel-kqemu
</pre>
							<p>Cette syntaxe active la virtualisation complète et de fait améliore considérablement la rapidité de fonctionnement de l'émulateur.</p>

				<h4>Pour activer qemu:</h4>
<pre>
qemu -cdrom /tmp/pkg/sidux-debug.iso -net nic -net user -m 512
</pre>
							<p><a href="http://www.nongnu.org/qemu/user-doc.html">La documentation officielle du projet QEMU </a> </p>

							<p><a href="http://wiki.archlinux.org/index.php/Qemu">Certains contenus se rapportant à QEMU pour le Manuel de sidux sont extraits de documents extérieurs sous licence GNU Free Documentation License 1.2 et ont été adaptés pour le Manuel de sidux.</a> </p>

	</div>
	<div id="rev">Dernière révision le 05/03/2010 1335 UTC</div>

</div>
</body>
</html>
