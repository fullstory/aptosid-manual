<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
   "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
	<title>Manuel d'aptosid - Options d'installation sur machines virtuelles</title>
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
	<style type="text/css" media="all">@import url("../lib/css-js/content.css");</style>
        <style type="text/css" media="all">@import url("../lib/css-js/menu.css");</style>
        <style type="text/css" media="print">@import url("../lib/css-js/print.css");</style>
        <link rel ="shortcut icon" href="../lib/favicon/manual.ico" />
        <script type="text/javascript" src="../lib/css-js/menu2.js"></script>
        <!--[if lt IE 8]>
        <link rel="stylesheet" type="text/css" href="../lib/css-js/ie_5-7_override.css">
        <![endif]-->
        <!--[if lt IE 7]>
        <link rel="stylesheet" type="text/css" href="../lib/css-js/ie_5-6_override.css">
        <![endif]-->
</head>
<body>
<!-- Last translation revision by LjanA 26/09/2010 -->
<div id="menu"> <!-- menu starts here fr lang maintained by alphad, LjanA-->
<!--aptosid Operating System Manual menu-version-02.10.2011.03.14 REPO -->
<!-- menu last updated by bluewater 2011.03.14 0620 hrs UTC -->
	<div id="menu-header">
	      <a href="http://aptosid.com/"><img src="../lib/logos/manual-aptosid-logo.png" title="Vers aptosid.com, forum et wiki" alt="aptosid.com logo" /></a>
	</div>
	<ul id="top-list">
		<li><a href="manual-search-fr.htm#search-on"><img src="../lib/logos/manual-search-22x22.png" title="Search Manual" alt="Search" /> Rechercher</a> </li>
	</ul>
	<div id="flags-2">
			<a href="../flag-index.html"><img src="../lib/logos/aptosid-lang-100x64.png" title="Choisir une autre langue - Choose another language" alt="lang-switch" /></a>
	</div>
	<ul>
<li onmouseover="showHide( 1 );" onmouseout="startTime();" ><a href="welcome-fr.htm">Manuel du système aptosid</a>
			<ul class="sub-menu" id="sm1">
				<li><a href="welcome-fr.htm#welcome-gen">Manuel du système aptosid &#8658;</a>
					<ul class="sub2-menu" id="sm1a">
					  <li><a href="credits-fr.htm#cred-team">Contributeurs</a></li>
					</ul>
					</li>
		<li><a href="welcome-fr.htm#how-to">Guide de l'utilisateur &#8658;</a>
					<ul class="sub2-menu" id="sm1b">
					  <li><a href="welcome-fr.htm#how-to">Guide de l'utilisateur</a></li>
					  <li><a href="welcome-fr.htm#table-contents">Table des matières</a></li>
					</ul>
					</li>
		<li><a href="help-fr.htm#help-gen">Trouver de l'aide &#8658;</a>
					<ul class="sub2-menu" id="sm1c">
					  <li><a href="help-fr.htm#help-gen">Où trouver de l'aide</a></li>
					  <li><a href="help-fr.htm#paste">IRC !paste</a></li>
					</ul>
					</li>
		<li><a href="wel-quickstart-fr.htm#welcome-quick">Utiliser aptosid rapidement</a></li>
		</ul>
		</li>
<li  onmouseover="showHide( 2 );" onmouseout="startTime();" ><a href="cd-dl-burning-fr.htm">Contenu de l'ISO, Versions, Téléchargement, Miroirs &amp; Gravure</a>
			   <ul class="sub-menu" id="sm2">
				<li><a href="cd-content-fr.htm#cd-content">Contenu de l'ISO &#8211; Matériel minimal requis  &#8658;</a>
					<ul class="sub2-menu" id="sm2a">
					  <li><a href="sys-admin-release-fr.htm#rolling">Notes de publication</a></li>
					</ul>
					</li>
		    <li><a href="cd-dl-burning-fr.htm#download-aptosid">Miroirs aptosid &#8211; Téléchargement &#8211; Gravure &#8658;</a>
				<ul class="sub2-menu" id="sm2b">
					  <li><a href="cd-dl-burning-fr.htm#md5">md5 (somme de contrôle)</a></li>
					  <li><a href="cd-dl-burning-fr.htm#burn-nero">Graver sous Windows</a></li>
					  <li><a href="cd-dl-burning-fr.htm#burn-linux">Graver sous Linux</a></li>
					  <li><a href="cd-no-gui-burn-fr.htm#burning-no-gui">Script burniso</a></li>
					  <li><a href="cd-no-gui-burn-fr.htm#burn-no-gui-gen">Graver depuis un terminal</a></li>
					  <li><a href="cd-dl-burning-fr.htm#download-aptosid">Miroirs de téléchargement aptosid</a></li>
					</ul>
					</li>
		      </ul>
		</li>
<li  onmouseover="showHide( 3 );" onmouseout="startTime();" ><a href="live-mode-fr.htm">Live Mode</a>
			<ul class="sub-menu" id="sm3">
				<li><a href="live-mode-fr.htm#rootpw">Mot de passe root en mode Live</a></li>
				<li><a href="live-mode-fr.htm#live-cd-installsoft">Installer des logiciels en mode Live</a></li>
			</ul>
		</li>
<li  onmouseover="showHide( 4 );" onmouseout="startTime();" ><a href="term-konsole-fr.htm">Terminal / Konsole</a>
			<ul class="sub-menu" id="sm4">
				<li><a href="term-konsole-fr.htm#term-kon">Terminal / Konsole &#8658;</a>
					<ul class="sub2-menu" id="sm4a">
					  <li><a href="term-konsole-fr.htm#term-kon">Terminal / Konsole</a></li>
					  <li><a href="term-konsole-fr.htm#colours"> Coloured terminal prompts</a></li>
					  <li><a href="term-konsole-fr.htm#cli-help">Aide sous Terminal / Konsole</a></li>
					  <li><a href="help-fr.htm#init3-tools">Outils utiles en mode texte (tty) &#8211; init 3</a></li>
					  <li><a href="term-konsole-fr.htm#term-cmds">Liste de commandes sous BASH</a></li>
					</ul>
					</li>
			  <li><a href="term-konsole-fr.htm#sux">sux / sudo</a></li>
		    </ul>
		</li>
<li  onmouseover="showHide( 5 );" onmouseout="startTime();" ><a href="cheatcodes-fr.htm">Codes de démarrage</a>
			<ul class="sub-menu" id="sm5">
				<li><a href="cheatcodes-fr.htm#cheatcodes">Codes spécifiques à aptosid en mode Live</a></li>
				<li><a href="cheatcodes-fr.htm#cheatcodes-linux">Codes génériques pour Linux</a></li>
				<li><a href="cheatcodes-vga-fr.htm#vga">Codes VGA</a></li>
			</ul>
		</li>
<li  onmouseover="showHide( 6 );" onmouseout="startTime();" ><a href="part-gparted-fr.htm">Partitionner un disque dur</a>
		<ul class="sub-menu" id="sm6">
			<li><a href="part-gparted-fr.htm#hd-ntfs3g">Utiliser une partition NTFS grâce à ntfs-3g</a></li>
			<li><a href="part-lvm-fr.htm#part-lvm">Partitionner pour utiliser LVM - Gestionnaire de Volumes Logiques</a></li>
			<li><a href="part-gparted-fr.htm#partition">&#8230;dans un environnement graphique &#8658;</a>
					<ul class="sub2-menu" id="sm6a">
					  <li><a href="part-gparted-fr.htm#partition">&#8230;avec GParted / KDE Partition Manager</a></li>
					  <li><a href="part-gparted-fr.htm#ntfs">Redimensionner une partition NTFS avec GParted / KDE Partition Manager</a></li>
					</ul>
					</li>
		<li><a href="part-cfdisk-fr.htm#partition">&#8230;en mode texte (CLI) &#8658;</a>
					 <ul class="sub2-menu" id="sm6b">
					    <li><a href="part-cfdisk-fr.htm#partition">&#8230;avec cfdisk</a></li>
					    <li><a href="part-cfdisk-fr.htm#formating">Formater une partition créée avec cfdisk</a></li>
					</ul>
					</li>
		<li><a href="part-size-examp-fr.htm#part-example">Partitionner  &#8211; Concepts de base &#8658;</a>
					<ul class="sub2-menu" id="sm6c">
					  <li><a href="part-size-examp-fr.htm#part-example">Tailles des partitions  &#8211; Exemples</a></li>
					  <li><a href="part-uuid-fr.htm#uuid">UUID, Rebuilding fstab and creating new mount points</a></li>
					  <li><a href="part-cfdisk-fr.htm#disknames">Noms des disques et partitions</a></li>
					</ul>
					</li>
		      </ul>
		</li>
<li  onmouseover="showHide( 7 );" onmouseout="startTime();" ><a href="hd-install-fr.htm">Choix du type d'installation &#8211; HD, USB, VM and Cryptroot</a>
		<ul class="sub-menu" id="sm7">
		  <li><a href="hd-install-fr.htm#Inst-prep">Préparer l'installation &#8658;</a>
					<ul class="sub2-menu" id="sm7a">
					  <li><a href="hd-install-fr.htm#Inst-prep">Préparer l'installation </a></li>
					  <li><a href="hd-install-fr.htm#Installation">Installer sur le disque dur (HD)</a></li>
					  <li><a href="hd-install-fr.htm#first-hd-boot">Au premier démarrage</a></li>
					</ul>
					</li>
		<li><a href="hd-install-opts-fr.htm#fromiso">Démarrer en mode ''fromiso'' &#8658;</a>
					<ul class="sub2-menu" id="sm7b">
					  <li><a href="hd-install-opts-fr.htm#fromiso">''fromiso'' Généralités</a></li>
					  <li><a href="hd-install-opts-fr.htm#fromiso-grub-leg">Démarrer ''fromiso'' avec grub-legacy</a></li>
					  <li><a href="hd-install-opts-fr.htm#grub2-fromiso">Démarrer ''fromiso'' avec grub2</a></li>
					  <li><a href="hd-install-opts-fr.htm#fromiso-persist">''fromiso'' and persistance</a></li>
					</ul>
					</li>
		<li><a href="hd-install-opts-fr.htm#usb-hd">Installer sur USB-HD &#8658;</a>
					<ul class="sub2-menu" id="sm7c">
					  <li><a href="hd-install-opts-fr.htm#usb-hd">Installer sur disque USB &#8211; aptosid sur une clé USB</a></li>
					  <li><a href="hd-ins-opts-oos-fr.htm#raw-usb">Installer aptosid sur une clé USB/carte SSD à partir de systèmes Linux, MS-Windows ou Mac-OS-X</a></li>
					</ul>
					</li>
		  <li><a href="hd-install-crypt-fr.htm#install-crypt">Installation sur partitions cryptées - cryptroot</a></li>
		  <li><a href="nbdboot-fr.htm#nbd1">Démarrer aptosid à partir d'un réseau</a></li>
		<li><a href="hd-install-vmopts-fr.htm#vmopts">Choix d'installation sur une machine virtuelle</a></li>
		</ul>
		</li>
<li  onmouseover="showHide( 8 );" onmouseout="startTime();" ><a href="gpu-fr.htm">Cartes graphiques &#8211; Moniteurs &#8211; Xorg &#8211; Pilotes divers</a>
	<ul class="sub-menu" id="sm8">
		<li><a href="hw-dev-mon-fr.htm#mon-res">Définition des écrans &#8211; Moniteurs  &#8658;</a>
					<ul class="sub2-menu" id="sm8a">
					  <li><a href="hw-dev-mon-fr.htm#mon-res">Définition des écrans &#8211; Moniteurs</a></li>
					  <li><a href="hw-dev-mon-fr.htm#xrandr">Deux moniteurs &#8211; xrandr</a></li>
					  <li><a href="hw-dev-mon-fr.htm#mon-binary">Deux moniteurs &#8211; outils binaires</a></li>
					</ul>
					</li>
		<li><a href="gpu-fr.htm#foss-xorg">GPU firmware &#8658;</a>
					<ul class="sub2-menu" id="sm8b">
					  <li><a href="gpu-fr.htm#ati-3d">AMD/ATI 3D drivers</a></li>
					  <li><a href="gpu-fr.htm#intel">Intel 2D and 3D drivers</a></li>
					  <li><a href="gpu-fr.htm#nvidia">Nvidia 3D drivers</a></li>
					  <li><a href="gpu-fr.htm#foss-xorg">Open Source Xorg drivers</a></li>
					</ul>
					</li>
			  <li><a href="nf-firm-fr.htm#fw-detect">Firmware detection - non-free </a></li>
			  <li><a href="nf-firm-fr.htm#non-free-firmware">Adding non-free to Sources List</a></li>
		</ul>
		</li>
<li  onmouseover="showHide( 9 );" onmouseout="startTime();" ><a href="wm-kde-fr.htm">Gestionnaire de fenêtres</a>
		    <ul class="sub-menu" id="sm9">
			  <li><a href="wm-kde-fr.htm">Gestionnaire de fenêtres &#8658;</a>
					  <ul class="sub2-menu" id="sm9a">
					    <li><a href="wm-xfce-fr.htm#xfce-notes">Applications supplémentaires utiles pour Xfce</a></li>
					    <li><a href="wm-kde-fr.htm#install-add">Applications supplémentaires utiles pour KDE</a></li>
					    <li><a href="wm-kde-fr.htm#desk-freeze">Écran gelé</a></li>
					    <li><a href="wm-kde-fr.htm#kde-login">Ouverture de session impossible (login) dans KDE</a></li>
					    <li><a href="wm-kde-fr.htm#ch-th">Changer les fonds d'écran</a></li>
					</ul>
					</li>
		      <li><a href="wm-kde-fr.htm#dm">Gestionnaire d'affichage &#8211; dm (display manager)</a></li>
		</ul>
		</li>
<li  onmouseover="showHide( 11 );" onmouseout="startTime();" ><a href="inet-ceni-fr.htm">Internet &#8211; WiFi &#8211; LAN &#8211; Réseaux</a>
		    <ul class="sub-menu" id="sm11">
			<li><a href="lamp-apache-fr.htm">Suite LAMP aptosid &#8658;</a>
					<ul class="sub2-menu" id="sm11a">
					    <li><a href="lamp-apache-fr.htm#serv-apache">Suite LAMP aptosid</a></li>
					    <li><a href="lamp-apache-fr.htm#serv-ftp">Clients FTP</a></li>
					    <li><a href="lamp-apache-fr.htm#serv-sec">Protocoles de sécurité</a></li>
					    <li><a href="lamp-apache-fr.htm#serv-ssl">SSL</a></li>
					    <li><a href="lamp-sql-fr.htm#serv-mysql">Configurer MySQL </a></li>
					    <li><a href="lamp-ppp-fr.htm#serv-php">Support PHP dans Apache</a></li>
					    <li><a href="ntp-server-fr.htm#ntp-server">Configurer le serveur d'horloge (timeserver)</a></li>
					</ul>
					</li>
		<li><a href="tor-privoxy-fr.htm#tor">Pare-feu &#8211; Confidentialité &#8658;</a>
					<ul class="sub2-menu" id="sm11b">
					    <li><a href="tor-privoxy-fr.htm#tor">Tor</a></li>
					    <li><a href="tor-privoxy-fr.htm#privoxy">Privoxy</a></li>
					    <li><a href="inet-ceni-fr.htm#firewalls">Pare-feu</a></li>
					</ul>
					</li>
		<li><a href="ssh-fr.htm#ssh-x">SSH &#8211; Samba &#8658;</a>
					<ul class="sub2-menu" id="sm11c">
						  <li><a href="samba-fr.htm#setup">Configurer un serveur Samba</a></li>
						  <li><a href="samba-fr.htm#configure">Configurer SAMBA (MS-Windows)</a></li>
						  <li><a href="ssh-fr.htm#ssh-fs">Montage d'un répertoire à distance via SSH</a></li>
						  <li><a href="ssh-fr.htm#ssh-x">Application X via SSH</a></li>
						  <li><a href="ssh-fr.htm#ssh-f">Environnement graphique pour SSH via Dolphin</a></li>
						  <li><a href="ssh-fr.htm#ssh-w">Transmission de X via SSH depuis un PC MS-Windows</a></li>
						  <li><a href="ssh-fr.htm#ssh">SSH et Sécurité</a></li>
					</ul>
					</li>
		<li><a href="inet-ceni-fr.htm#netcardconfig">Connections WIFI &#8658;</a>
						<ul class="sub2-menu" id="sm11d">
						    <li><a href="inet-ceni-fr.htm#netcardconfig">Se connecter au réseau &#8211; Ceni</a></li>
						    <li><a href="inet-wpagui-fr.htm#wpa-roaming-gui">WiFi &#8211; WPA_GUI</a></li>
						    <li><a href="inet-setup-fr.htm#net-set1">WiFi &#8211; Configurer une connexion itinérante (roaming) WiFi</a></li>
						    <li><a href="inet-wpa-fr.htm#wpa">WiFi &#8211; wpasupplicant</a></li>
						    <li><a href="inet-ifplug-fr.htm#hotswitch">Alterner entre les réseaux WiFi et câblés</a></li>
					</ul>
					</li>
		<li><a href="inet-ceni-fr.htm#netcardconfig">Connexions câblées &#8658;</a>
						<ul class="sub2-menu" id="sm11e">
						    <li><a href="inet-ceni-fr.htm#dial-mod">Modems 56k </a></li>
						    <li><a href="inet-ceni-fr.htm#netcardconfig">Se connecter au réseau &#8211; Ceni</a></li>
					</ul>
					</li>
				</ul>
			    </li>
<li  onmouseover="showHide( 12 );" onmouseout="startTime();" ><a href="sys-admin-apt-fr.htm">Gestion de paquets &#8211; Mise à niveau (dist-upgrade)</a>
	<ul class="sub-menu" id="sm12">
		<li><a href="sys-admin-apt-fr.htm#apt-cook">Guide APT &#8211; Liste des dépôts de paquets &#8658;</a>
					<ul class="sub2-menu" id="sm12a">
					    <li><a href="sys-admin-apt-fr.htm#apt-cook">Guide APT &#8211; Liste des dépôts de paquets</a></li>
					    <li><a href="sys-admin-apt-fr.htm#apt-install">Installer un nouveau paquet</a></li>
					    <li><a href="sys-admin-apt-fr.htm#apt-delete">Supprimer un paquet</a></li>
					    <li><a href="sys-admin-apt-fr.htm#apt-downgrade">Geler un paquet &#8211; Dégradation de paquet</a></li>
					    <li><a href="sys-admin-apt-fr.htm#apt-cache">Recherche de paquets via apt-cache</a></li>
					    <li><a href="sys-admin-apt-fr.htm#gui-pacsea">Recherche de paquets en mode GUI</a></li>
					</ul>
				</li>
		<li><a href="sys-admin-kern-upg-fr.htm#kern-upgrade">Mise à niveau du noyau &#8658;</a>
					<ul class="sub2-menu" id="sm12b">
					    <li><a href="sys-admin-kern-upg-fr.htm#kern-remove">Supprimer des noyaux</a></li>
					    <li><a href="sys-admin-kern-upg-fr.htm#kern-upgrade">Mise à niveau du noyau</a></li>
					    <li><a href="sys-admin-kern-upg-fr.htm#dmakms">Installer des modules de noyau dynamiquement via dmakms</a></li>
					</ul>
				</li>
		<li><a href="sys-admin-apt-fr.htm#apt-upgrade">Mise à niveau d'un système (dist-upgrade) &#8211; Vue d'ensemble &#8658;</a>
					<ul class="sub2-menu" id="sm12c">
					    <li><a href="sys-admin-upgrade-fr.htm#live-cd-upgrade">Mise à niveau depuis un Live-ISO</a></li>
					    <li><a href="sys-admin-apt-locarmirr-fr.htm#approx">Mise à niveau de plusieurs ordinateurs connectés</a></li>
					    <li><a href="sys-admin-apt-fr.htm#apt-upgrade">Mise à niveau d'un système (dist-upgrade) &#8211; Vue d'ensemble</a></li>
					    <li><a href="sys-admin-apt-fr.htm#du-st">Les étapes d'une mise à niveau d'un système</a></li>
					</ul>
				  </li>
			    </ul>
		</li>
<li  onmouseover="showHide( 13 );" onmouseout="startTime();" ><a href="sys-admin-gen-fr.htm">Administration du système</a>
	<ul class="sub-menu" id="sm13">
		<li><a href="bios-freedos-fr.htm#bois-prep">Mise à niveau du BIOS via FreeDOS</a></li>
		<li><a href="vir-rkits-fr.htm#virus-rkits">Scanneurs de virus et de rootkits</a></li>
		<li><a href="hd-install-fr.htm#adduser">Ajouter un utilisateur &#8211; Mots de passe &#8658;</a>
					<ul class="sub2-menu" id="sm13a">
					    <li><a href="hd-install-fr.htm#adduser">Ajouter un utilisateur</a></li>
					    <li><a href="sys-admin-gen-fr.htm#pw-lost">Perte du mot de passe root &#8211; Nouveau mot de passe</a></li>
					</ul>
					</li>
		<li><a href="sys-admin-gen-fr.htm#start-services">Services (démons) &#8211; init &#8211; Niveaux d'exécution &#8658;</a>
					<ul class="sub2-menu" id="sm13b">
					    <li><a href="sys-admin-gen-fr.htm#start-services">Activer / Désactiver des services (démons)</a></li>
					    <li><a href="sys-admin-gen-fr.htm#init">Niveaux d'exécution aptosid &#8211; init</a></li>
					</ul>
					</li>
		<li><a href="sys-admin-rsync-fr.htm#rsync">Sauvegarder le système (OS) &#8658;</a>
					  <ul class="sub2-menu" id="sm13c">
					    <li><a href="sys-admin-rdiff-fr.htm#rdiff">Sauvegarder via rdiff</a></li>
					    <li><a href="sys-admin-rsync-fr.htm#rsync">Sauvegarder via rsync</a></li>
					    <li><a href="home-fr.htm#home-bu">Déplacer une partition /home</a></li>
					</ul>
					</li>
		<li><a href="sys-admin-gen-fr.htm#fonts">CUPS, Polices de caractères &amp; Son &#8658;</a>
					  <ul class="sub2-menu" id="sm13d">
					     <li><a href="sys-admin-gen-fr.htm#fonts">Polices de caractères </a></li>
					     <li><a href="sys-admin-gen-fr.htm#cups">CUPS &#8211; Gestion des imprimantes</a></li>
					     <li><a href="sys-admin-gen-fr.htm#sound">Mixeurs de son (Sound Mixers)</a></li>
					</ul>
					</li>
		<li><a href="sys-admin-grub2-fr.htm#grub2">Grub2 &#8658;</a>
					  <ul class="sub2-menu" id="sm13f">
					    <li><a href="sys-admin-grub2-fr.htm#chroot">Grub2 - Récupération de Grub via un chroot</a></li>
					    <li><a href="sys-admin-grub2-fr.htm#mbr-over-grub2">Grub2 &#8211; Secteur d'amorçage (MBR) écrasé</a></li>
					    <li><a href="sys-admin-grub2-fr.htm#multi-os">Grub2 &#8211; Démarrage de plusieurs systèmes (OS)</a></li>
					    <li><a href="sys-admin-grub2-fr.htm#grub1-grub2">Grub2 &#8211; Mise à niveau depuis Grub1</a></li>
					    <li><a href="sys-admin-grub2-fr.htm#grub2">Grub2 &#8211; Vue d'ensemble</a></li>
					</ul>
					</li>
			</ul>
		</li>
	</ul>
<!-- menu ends here --> </div>
<div id="main-page">
		<div class="divider" id="vmopts">
				<h2 id="top-header">Choix de machine virtuelle</h2>

						<ul>
							<li><a href="hd-install-vmopts-fr.htm#kvm">KVM pour Intel VT ou AMD-V</a></li>
							<li><a href="hd-install-vmopts-fr.htm#vbox">Virtualbox</a></li>
							<li><a href="hd-install-vmopts-fr.htm#qemu">QEMU</a></li>
							<li><a href="hd-install-vmopts-fr.htm#oos">Installing other distributions to an image</a></li>
						</ul>

							<p><span class="highlight-3">The following examples use aptosid, simply substitute aptosid with the distribution of your choice.</span></p>
	</div>
	<div class="divider" id="oos">
			    <h2>Installing other distributions to a VM image</h2>
							<p>Note: If and when you wish to install to a virtual machine image, most Linux distributions will probably only need an allocation of 12G. However if you have a requirement to have MS Windows in a virtual machine, you will need to allocate about a 30G, or more, to the image. All image allocation sizes ultimately depend on your requirements. </p>

							<p>Generally, an image allocation size, will not take up additional hard drive space until data is installed. Even then, it will only take space dynamically on a hard drive, contingent to the actual amount of data that expands or decreases on the image. This is due to the compression ratios of qcow2.</p>

		      </div>
		      <div class="divider" id="kvm">
				<h2>Enabling a KVM Virtual Machine</h2>

							<p>KVM est une solution de virtualisation intégrale pour matériels x86 dotés d'extensions de virtualisation (Intel VT ou AMD-V).</p>

				      <h3>Prérequis</h3>

							<p>Afin de vous assurer que votre matériel permette d'utiliser KVM, vérifiez que KVM soit activé dans votre BIOS (sur certains systèmes Intel VT ou AMD-VT il n'est pas évident de trouver l'option ; ici nous imaginons que KVM soit actif sur l'ordinateur). Cette commande permet de le vérifier dans une console :</p>
<pre>
cat /proc/cpuinfo | egrep --color=always 'vmx|svm'
</pre>
							<p>Sivous pouvez voir <span class="highlight-3">svm</span> ou <span class="highlight-3">vmx</span> parmi les champs d'attributs associés au cpu, votre système est en mesure d'exploiter KVM. Sinon si vous êtes sûr qu'il devrait en être capable, allez de nouveau vérifier votre BIOS, reportez-vous au manuel de votre carte mère et/ou chez sur Internet où le menu optionnel permettant l'activation de KVM peut bien se cacher.</p>

							<p>Si après vérification il s'avère que votre BIOS ne supporte pas KVM, optez alors pour <a href="hd-install-vmopts-fr.htm#vbox">Virtualbox</a>
							 ou <a href="hd-install-vmopts-fr.htm#qemu">QEMU</a></p>

							<p>Pour installer et exploiter KVM, assurez-vous en tout premier lieu que des modules Virtualbox ne soient pas chargés (s'ils l'étaient l'option --purge à leur égard serait la mieux appropriée). Puis, en fonction de votre chipset, vous ferez:</p>

							<p>Pour <span class="highlight-3">vmx</span>:</p>
<pre>
apt-get install qemu-kvm qemu-utils
modprobe kvm-intel
</pre>
							<p>Pour <span class="highlight-3">svm</span>:</p>
<pre>
apt-get install qemu-kvm qemu-utils
modprobe kvm-amd
</pre>
							 <p>On peut aussi redémarrer afin que les scripts d'initialisation de qemu-kvm procèdent au chargement des modules.</p>

					  <h4>Utilisation de KVM au démarrage d'une .iso d'aptosid</h4>

							<p><span class="highlight-2">En tant qu'utilisateur:</span></p>
<pre>
$ kvm -net nic,model=virtio -net user -soundhw ac97 -m 512 -monitor stdio -cdrom &lt;aptosid.iso&gt;
</pre>

				<h5>Installation d'une .iso d'aptosid sur une image KVM</h5>
							<p>Commencez par créer une image de disque dur (image qu'on choisira minimale et prévue pour s'agrandir en fonction des besoins grâce aux capacités de compression de qcow2):</p>
<pre>
$ qemu-img create -f qcow2 aptosid-2010-*-.img 12G
</pre>

							<p>Démarrer l'image .iso d'aptosid avec les paramètres suivants permettant à KVM d'exploiter l'image disque QEMU disponible:</p>
<pre>
$ kvm -net nic,model=virtio -net user -soundhw ac97 -m 512 -monitor stdio -cdrom &lt;/chemin/vers/aptosid.iso&gt; -boot d &lt;/chemin/vers/aptosid-20xx-*-.img&gt;
</pre>

							<p>Une fois le cd rom démarré vous irez cliquer sur l'icone de l'installeur aptosid ou le choisir au menu, cliquer sur l'item de partitionnement et dans la partie gauche vous devriez voir un disque prêt à être partitionner et formatter, la plupart du temps idéntifié comme <span class="highlight-3"> /dev/sda</span>. Sous cette partie aux choix d'option pour partitionner, optez pour gparted ou le gestionnaire de Partitions KDE. Si le gestionnaire de partitions KDE a une interface différente, ses commandes sont proches de celles de Gparted illustré ici.</p>

	<div class="screenshot"><img src="../lib/images-common/images-vm/kvm-gparted02.png" title="gparted kvm hard disk naming" alt="gparted kvm hard disk naming" /></div>
	<div class="spacer02"></div>

							<p>Au menu de Gparted vous pourrez confirmer que Gparted voit bien l'image via <span class="highlight-3">Vue>Information sur les périphériques</span> qui devrait retourner qu'il s'agit d'un  <span class="highlight-3">Disque dur ATA QEMU</span> et vraissemblablement situé comme <span class="highlight-3"> /dev/sda</span>,(dans cet exemple), car les informations de cette partie seront essentielles quand vous retournerez dans l'installeur et devrez choisir où installer grub, qui doit impérativement se trouver sur <span class="highlight-3"> /dev/sda</span>.</p>

							<p>Ensuite au menu <span class="highlight-3">Partition</span> vous choisirez <span class="highlight-3"> Disque>Créer une table de partitions</span> et créerez cette table. </p>

							<p>Créez ensuite une partition racine ext4 de 3 Gio minimum et un espace de swap de 3 Gio. Le formatage prendra un certain temps, soyez patients.</p>

							<p>Partitionnements et formatages achevés, cliquez sur OK pour retourner dans l'installeur et procédez comme s'il s'agissait d'une installation ordinaire d'aptosid (soyez patients). <span class="highlight-2">Important: Installez grub sur /dev/sda</span>.</p>

							<p>Vous obtenez alors une machine virtuelle aptosid prête à l'emploi:</p>

<pre>
$ kvm -net nic,model=virtio -net user -soundhw ac97 -m 512 -monitor stdio -drive if=virtio,boot=on,file=&lt;chemin/absolu/vers/aptosid-20xx-*.img&gt;
</pre>

							<p>Si votre hôte ne supporte pas virtio ou vous préférez utiliser un chemin relatif, faites:</p>
<pre>
$ kvm -net nic, -net user -soundhw ac97 -m 512 -monitor stdio -hda &lt;/path/to/aptosid-20xx-*.img&gt;
</pre>

							<p><span class="highlight-2">An important note regarding KVM partition naming:</span> When you install to a KVM image, your partitions change from <span class="highlight-3">sda</span> to <span class="highlight-3">vda</span>. If your kvm image does not boot and drops you to a busybox, try:</p>
<pre>
kvm -m 512 -monitor stdio /media/diskxpartx/path/aptosid-*.img
</pre>
							<p>When the grub menu appears, type <span class="highlight-2"> e </span> and change <span class="highlight-3">sda</span> to <span class="highlight-3">vda</span> in the kernel boot command. When fully booted, you can effect a permanent change by editing the following line in <span class="highlight-3"> /etc/default/grub </span> with correct syntax, if required:</p>

<pre>
GRUB_CMD_LINE_LINUX=""
</pre>
							<p>Examples:</p>
<pre>
GRUB_CMD_LINE_LINUX="root=UUID=1234-5678-1234-13456 ro quiet"
</pre>
<pre>
GRUB_CMD_LINE_LINUX="root=/dev/vda3 ro quiet"
</pre>

							<p>UUIDs are a better option use when using traditional partitioning methods.</p>

							<p> Then update the grub.cfg with:</p>

<pre>
update-grub
</pre>

							<p>Reboot the KVM image with your preferred parameters.</p>

							<p>See also: <a href="http://www.linux-kvm.org/page/Main_Page"> KVM documentation</a>.</p>

				<h5>Gérer vos machines virtuelles KVM installées</h5>
<pre>
apt-get install aqemu
</pre>
							<p>Quand vous utiliserez AQEMU assurez-vous de choisir son mode KVM dans son menu déroulant "type d'émulateur" à l'onglet "Général". La documentation d'AQEMU est pour ainsi dire inexistante, et de ce fait des manipulations de type "essais par erreurs" seront nécessaire pour vous faire une idée de son interface intuitive de paramétrage. Quoiqu'il en soit votre meilleur point de départ sera d'aller au menu "VM" suivi par l'onglet "Général".</p>

	</div>
	<div class="divider" id="vbox">
		<h2>>Booting and installing a QEMU Virtual Machine</h2>
							<p>Les étapes :</p>
						<ul>
 							<li>1. Créez une image disque pour Virtualbox.</li>
 							<li>2. Démarrez l'iso avec Virtualbox</li>
 							<li>3. installez aptosid sur votre image disque</li>
						</ul>

				<h4>Configuration minimale requise</h4>
							<p><span class="highlight-3">1 Go de RAM recommandés</span>: dans l'idéal, 512 Mo pour le système hébergé, 512 Mo pour l'hôte. (ça peut tourner avec moins de ram, mais n'attendez pas une grande performance à ce moment là...).</p>

							<p><span class="highlight-3">Espace disque:</span> VirtualBox en soi a beau être léger (une installation de base occupe autour de 30 Mo d'espace disque), les machines émulées elles, nécessitent pour fonctionner de disposer d'un espace disque plutôt conséquent, afin de suffire à héberger leurs propres espaces disque de stockage. Dans ces conditions, pour installer Windows XP&reg;, par exemple, vous aurez besoin d'un espace susceptible de s'étendre sur un bon nombre de Gigas...Pour utiliser aptosid sous virtualbox vous devrez allouer une taille image de 5 GB en plus du swap.</p>

				<h3>Installation:</h3>

<pre>
apt-get update
apt-get install virtualbox-ose-qt virtualbox-ose-source dmakms module-assistant
</pre>
							<p>Puis préparez le module:</p>
<pre>
m-a prepare
m-a a-i virtualbox-ose-source
</pre>
							<p>Activer le support module-assistant dynamique pour le module de noyau pour virtualbox fera en sorte que chaque fois que votre noyau linux sera mis-à-jour un tel module soit également préparé pour ce dernier, sans besoin d'intervention manuelle. Pour obtenir celà ajoutez <span class="highlight-3">virtualbox-ose-source</span> au fichier de configuration <span class="highlight-3">/etc/default/dmakms </span>.</p>
<pre>
mcedit /etc/default/dmakms
virtualbox-ose-source
</pre>

							<p>Redémarrez ensuite l'ordinateur.</p>

							<p><a href="sys-admin-kern-upg-fr.htm#dmakms">Vous devez lire ceci à propos de dmakms</a></p>

					<h3>Installer aptosid sur la machine virtuelle</h3>


							<p>Utilisez l'assistant de VirtualBox pour créer une nouvelle machine virtuelle pour aptosid. Suivez ensuite les instructions données pour une installation standard de aptosid.</p>


							<p><a href="http://www.virtualbox.org/">Le site de VirtualBox fournit une documentation accessible, notamment une aide en PDF, que vous pourrez télécharger.</a> </p>

	</div>
	<div class="divider" id="qemu">
		<h2>Démarrer et installer aptosid sur une machine virtuelle QEMU</h2>

							<p>Les étapes:</p>

						<ul>
 							<li>1. créer une image disque pour qemu</li>
 							<li>2. démarrer l'iso avec qemu</li>
 							<li>3. installer sur l'image disque</li>
						</ul>

							<p>Un outil graphique existe pour vous aider à configurer QEMU:</p>
<pre>
apt-get install qtemu
</pre>

 				<h4>Créer une image-disque</h4>

							<p>Pour utiliser qemu vous aurez probablement besoin d'une image disque (image de disque dur). Il s'agit d'un simple fichier qui stocke le contenu d'un disque dur virtuel (émulé).</p>

							<p>Utilisez cette commande:</p>
<pre>
qemu-img create -f qcow aptosid.qcow 3G
</pre>
							<p>Elle créera un fichier image appelé "aptosid.qcow". Le paramètre "3G" spécifie sa taille, qui est de 3 Gio. Vous pouvez également utiliser le paramètre M pour les mégaoctets (par exemple "800M". Vous n'avez pas trop à vous inquiéter de la taille du disque, car le format qcow compresse l'image de sorte qu'elle n'occupe pas plus d'espace que ce qui est effectivement occupé par les données une fois compressées.</p>


			<h4>Installer le système d'exploitation</h4>

							<p>C'est la première fois que vous allez devoir démarrer l'émulateur. <span class="highlight-3">Une bonne chose à savoir : quand vous cliquez dans la fenêtre de qemu, il capture le pointeur de la souris. Pour le libérer vous n'avez qu'à presser sur votre clavier la combinaison :</span></p>
<pre>
Ctrl+Alt
</pre>

							<p>Si vous avez besoin d'utiliser une disquette de démarrage, alors lancez qemu avec :</p>
<pre>
qemu -floppy aptosid.iso -net nic -net user -m 512 -boot d aptosid.qcow
</pre>
							<p>Pour lancer un cd bootable:</p>
<pre>
qemu -cdrom aptosid.iso -net nic -net user -m 512 -boot d aptosid.qcow
</pre>
							<p>Vous pouvez alors installer aptosid comme s'il s'agissait d'un disque du réel</p>


			<h4>Utiliser le système</h4>

							<p>Pour utiliser le système après l'installation, faites simplement:</p>
<pre>
qemu [votre_image_disque]
</pre>
							<p>Une bonne idée est d'utiliser les images par recouvrement (overlay images). De cette façon vous créez une première image et Qemu va stocker ses modifications dans un fichier séparé ; de cette manière il sera aisé de revenir à une version antérieure du système et de prévenir toute instabilité potentielle.</p>

							<p>Pour créer une image de recouvrement (overlay image), entrez :</p>
<pre>
qemu-img create -b [[base''image]] -f qcow [[overlay''image]]
</pre>
							<p>Remplacez l'image de recouvrement à votre image_de_base (dans notre cas aptosid.qcow). Après quoi vous pouvez lancer qemu avec:</p>
<pre>
qemu [image_de_recouvrement]
</pre>
							<p>L'image de base ne sera pas modifiée. Une limitation cependant : l'image de base ne doit pas être déplacée ou renommée, l'image de recouvrement gardant son chemin absolu en mémoire.</p>


				<h4>Utiliser une partition réelle quelconque en tant que partition primaire unique d'une image disque</h4>

							<p>Il peut arriver que vous vouliez utiliser une de vos partitions système dans qemu (par exemple, pour démarrer en même temps votre système réel ou qemu utilisant une partition spécifique comme racine). Vous pouvez y parvenir en utilisant le RAID logiciel en mode linéaire (il vous faudra le pilote de noyau linear.ko) ainsi qu'un périphérique loopback : l'astuce consiste à ajouter un master boot record (MBR) à la fin de la partition que vous souhaitez intégrer à une image disque qemu brute.</p>

							<p>Supposons que vous disposez d'une partition non montée /dev/sdaN dont vous voudriez faire du système de fichiers une partie de votre image disque qemu. Vous commencerez par créer un petit fichier pour stocker le MBR:</p>
<pre>
dd if=/dev/zero of=/path/to/mbr count=32
</pre>
							<p>Là un fichier de 16 Ko (32 * 512 bytes) est créé. Il est important de ne pas le créer trop petit, même si un MBR ne requiert qu'un unique bloc de 512 octets, car plus petit il sera, plus le hachage du raid logiciel devra être étroit, ce qui impacte sur les performances. Puis, vous attachez un périphérique loopback au fichier MBR:</p>
<pre>
losetup -f /chemin/du/mbr
</pre>
							<p>Admettons qu'au résultat le périphérique obtenu soit /dev/loop0, car nous n'utiliserions jusque là aucun autre loopback. L'étape suivante passe par la création de l'image disque "mélangée" MBR + /dev/sdaN en utilisant le RAID logiciel:</p>
<pre>
 modprobe linear
 mdadm --build --verbose /dev/md0 --chunk=16 --level=linear --raid-devices=2 /dev/loop0 /dev/sdaN
</pre>
							<p>Le résultat /dev/md0 est ce que vous allez utiliser comme disque image qemu (n'oubliez pas de fixer les permissions de sorte que l'émulateur puisse y avoir accès). La dernière (et peut-être la plus perverse) des étapes consiste à régler la configuration du disque (géométrie et table des partitions) de telle sorte que le point d'origine du MBR coincide avec celui de /dev/md0 (un offset d'exactement 16*512 = 16384 octets dans cet exemple). Réalisez cette étape en utilisant fdisk sur la machine hôte, et non depuis l'émulateur : la routine de détection brute des disques utilisée par qemu produit en effet souvent des offset non-arrondis au kilooctet (de type 31.5 KB, comme dans la section précédente) et qui ne seraient pas gérables par le RAID logiciel. Ainsi, depuis la machine hôte: </p>
<pre>
 fdisk /dev/md0
</pre>
							<p>Créez ensuite une partition primaire unique correspondant à /dev/sdaN, et utilisez la commande 's'ector du menu expert, de telle sorte que le premier cylindre (où cette première partition est censée démarrer) coïncide avec la taille du MBR. Quand finalement vous activez la fonction 'w' pour sauver votre réglage dans un fichier, l'opération est terminée. Vous disposez d'une partition que vous pouvez monter directement depuis votre machine hôte, et qui fait également partie d'une image disque qemu :</p>
<pre>
 qemu -hdc /dev/md0 [...]
</pre>
							<p>Évidemment vous pouvez sans problème configurer un chargeur de démarrage sur votre image disque en utilisant qemu, du moment que le répertoire /sdaN/boot de la partition originale est équipée des outils nécessaires.</p>

			<h4>Activer le module d'accélaration de QEMU</h4>

							<p>Les développeurs de qemu ont créé un module de noyau optionnel accélérant qemu jusqu'à des vitesses proches de celles d'une machine réelle. Ce module se charge avec cette option :</p>
<pre>
major=0
</pre>
							<p>Pour automatiser la création du périphérique /dev/kqemu, utilisez cette commande :</p>
<pre>
echo "options kqemu major=0" &gt;&gt; /etc/modprobe.conf
</pre>
							<p>Ceci empêchera modprobe.conf de vérifier systématiquement que l'option de module soit ajoutée à chaque lancement de celui-ci.</p>

<pre>
qemu [...] -kernel-kqemu
</pre>
							<p>Cette syntaxe active la virtualisation complète et de fait améliore considérablement la rapidité de fonctionnement de l'émulateur.</p>

				<h4>Pour activer qemu:</h4>
<pre>
qemu -cdrom /tmp/pkg/aptosid-debug.iso -net nic -net user -m 512
</pre>
							<p><a href="http://www.nongnu.org/qemu/user-doc.html">La documentation officielle du projet QEMU </a> </p>

							<p><a href="http://wiki.archlinux.org/index.php/Qemu">Certains contenus se rapportant à QEMU pour le Manuel de aptosid sont extraits de documents extérieurs sous licence GNU Free Documentation License 1.2 et ont été adaptés pour le Manuel de aptosid.</a> </p>


	</div>
	<div id="rev">Page révisée le 08/04/2011 1205 UTC</div>

</div>
</body>
</html>
