<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
   "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="fr" lang="fr">
<head>
	<title>Manuel de sidux - Internet/Réseau - WPA-Supplicant</title>
	<meta http-equiv="content-type" content="text/html; charset=utf-8" />
	<style type="text/css" media="all">@import url("../lib/css-js/content.css");</style>
        <style type="text/css" media="all">@import url("../lib/css-js/menu.css");</style>
        <style type="text/css" media="print">@import url("../lib/css-js/print.css");</style>
        <link rel ="shortcut icon" href="../lib/favicon/manual.ico" />
        <script type="text/javascript" src="../lib/css-js/menu2.js"></script>
        <!--[if lt IE 8]>
        <link rel="stylesheet" type="text/css" href="../lib/css-js/ie_5-7_override.css">
        <![endif]-->
        <!--[if lt IE 7]>
        <link rel="stylesheet" type="text/css" href="../lib/css-js/ie_5-6_override.css">
        <![endif]-->
</head>
<body id="cheatcodes">
<!-- Last translation revision LjanA xx/xx/2007 1600 UTC-->
<div id="menu"> <!-- menu starts here fr lang maintainer LjanA and alphad-->
<!--Welcome to the  sidux-manual Operating System Manual version-01.75.2008.07.13 -->
<!-- menu last updated by bluewater 13/07/2008 1200 hrs UTC -->
<a href="http://sidux.com/"><img src="../lib/logos/sidux-logo.png" title="Vers sidux.com, forum et wiki" alt="sidux.com logo" id="menu-header" /></a>
	<ul id="top-list">
		<li><a href="manual-search-fr.htm#search-on">  Rechercher</a> </li>
		<li><a href="http://manual.sidux.com/meta-manual">Méta-Manuel de Sidux</a></li>
	</ul>
	<div id="flags-2">
			<a href="../flag-index.html"><img src="../lib/logos/sidux-language-64.png" title="Choisir une autre langue - Choose another language" alt="lang-switch" /></a>
	</div>
	<ul>
		<li  onmouseover="showHide( 1 );" onmouseout="startTime();" ><a href="welcome-fr.htm">Manuel du système sidux</a>
			<ul class="sub-menu" id="sm1">
				<li><a href="welcome-fr.htm#welcome-gen">Manuel du système sidux</a></li>
				<li><a href="welcome-fr.htm#how-to">Comment utiliser ce manuel</a></li>
				<li><a href="welcome-fr.htm#table-contents">Table des matières</a></li>
				<li><a href="help-fr.htm#help-gen">Où trouver de l'aide</a></li>
				<li><a href="help-fr.htm#paste">IRC !paste</a></li>
				<li><a href="credits-fr.htm#cred-team">Mérites</a></li>
				<li><a href="wel-quickstart-fr.htm#welcome-quick">Guide rapide de sidux</a></li>
			</ul>
		</li>
		<li  onmouseover="showHide( 2 );" onmouseout="startTime();" ><a href="cd-content-fr.htm">Contenus du CD</a>
			<ul class="sub-menu" id="sm2">
				<li><a href="cd-content-fr.htm#cd-content">Contenus du CD</a></li>
			</ul>
		</li>
		<li  onmouseover="showHide( 3 );" onmouseout="startTime();" ><a href="cd-dl-burning-fr.htm">Télécharger et graver le CD</a>
			<ul class="sub-menu" id="sm3">
				<li><a href="cd-dl-burning-fr.htm#download-sidux">Miroirs de téléchargement, Télécharger et graver le CD</a></li>
				<li><a href="cd-dl-burning-fr.htm#md5">Vérification de la la somme md5</a></li>
				<li><a href="cd-dl-burning-fr.htm#burn-nero">Graver sous Windows</a></li>
				<li><a href="cd-dl-burning-fr.htm#burn-linux">Graver sous Linux</a></li>
				<li><a href="cd-dl-burning-fr.htm#xdelta">Patcher avec xdelta</a></li>
				<li><a href="cd-no-gui-burn-fr.htm">Graver depuis la console</a></li>
			</ul>
		</li>
		<li  onmouseover="showHide( 4 );" onmouseout="startTime();" ><a href="live-mode-fr.htm">Mode Live</a>
			<ul class="sub-menu" id="sm4">
				<li><a href="live-mode-fr.htm#rootpw">Mot de passe Root sur le Live-CD</a></li>
				<li><a href="live-mode-fr.htm#live-cd-installsoft">Installer des logiciels en mode Live</a></li>
				<li><a href="live-mode-fr.htm#ntfs-3g">Écrire sur des partitions NTFS avec ntfs-3g</a></li>
			</ul>
		</li>
		<li  onmouseover="showHide( 5 );" onmouseout="startTime();" ><a href="term-konsole-fr.htm">Le Terminal/Konsole</a>
			<ul class="sub-menu" id="sm5">
				<li><a href="term-konsole-fr.htm#sux"> sux</a></li>
				<li><a href="term-konsole-fr.htm#term-kon"> Le Terminal/Konsole</a></li>
				<li><a href="term-konsole-fr.htm#cli-help">L'aide en ligne de commande</a></li>
				<li><a href="term-konsole-fr.htm#term-cmds">Liste de commandes pour Terminal</a></li>
				<li><a href="term-konsole-fr.htm#shell-scripts">Scripts d'installation .sh</a></li>
			</ul>
		</li>
		<li  onmouseover="showHide( 6 );" onmouseout="startTime();" ><a href="cheatcodes-fr.htm">Codes de démarrage</a>
			<ul class="sub-menu" id="sm6">
				<li><a href="cheatcodes-fr.htm#cheatcodes">Codes de démarrage spécifiques au CD sidux</a></li>
				<li><a href="cheatcodes-fr.htm#cheatcodes-linux">Codes de démarrage génériques Linux</a></li>
				<li><a href="cheatcodes-vga-fr.htm#vga">Codes VGA </a></li>
			</ul>
		</li>
		<li  onmouseover="showHide( 7 );" onmouseout="startTime();" ><a href="part-gparted-fr.htm">Partitionner son disque dur</a>
			<ul class="sub-menu" id="sm7">
				<li><a href="part-gparted-fr.htm#partition">Partitionner avec GParted</a></li>
				<li><a href="part-gparted-fr.htm#ntfs">Retailler les partitions NTFS avec GParted</a></li>
				<li><a href="part-uuid-fr.htm#uuid">UUID, Labels de Partitions et fstab</a></li>
				<li><a href="part-cfdisk-fr.htm#disknames">Désignation des disques et partitions</a></li>
				<li><a href="part-cfdisk-fr.htm#partition">Partitionner  son DDur avec cfdisk</a></li>
				<li><a href="part-cfdisk-fr.htm#formating">Formater après un partitionnement cfdisk</a></li>
				<li><a href="part-size-examp-fr.htm#part-example">Exemples de tailles de partitions</a></li>
			</ul>
		</li>
		<li  onmouseover="showHide( 8 );" onmouseout="startTime();" ><a href="hd-install-fr.htm">Options d'installation</a>
			<ul class="sub-menu" id="sm8">
				<li><a href="hd-install-fr.htm#Inst-prep">Préparer son Installation</a></li>
				<li><a href="hd-install-fr.htm#Installation">Installer sur son DDur</a></li>
				<li><a href="hd-install-fr.htm#first-hd-boot">Premier démarrage sur DDur</a></li>
				<li><a href="hd-install-opts-fr.htm#fromiso">Démarrage  'fromiso'</a></li>
				<li><a href="hd-install-opts-fr.htm#fromiso-persist">fromiso et persist</a></li>
				<li><a href="hd-install-opts-fr.htm#usb-hd">Installer sur un DDur USB</a></li>
				<li><a href="hd-install-opts-fr.htm#vtbox">Installer sidux avec VirtualBox</a></li>
				<li><a href="hd-install-opts-fr.htm#qemu">Installer sidux avec QEMU</a></li>
			</ul>
		</li>
		<li  onmouseover="showHide( 9 );" onmouseout="startTime();" ><a href="hw-dev-hw-dri-fr.htm">Cartes Graphiques, Matériels et pilotes</a>
			<ul class="sub-menu" id="sm9">
				<li><a href="hw-dev-hw-dri-fr.htm#hd-ntfs3g">Écrire sur des partitions NTFS avec ntfs-3g</a></li>
				<li><a href="hw-dev-mon-fr.htm#mon-res">Résolution des écrans et moniteurs</a></li>
				<li><a href="hw-dev-mon-fr.htm#xrandr">Double-écrans et xrandr</a></li>
				<li><a href="hw-dev-mon-fr.htm#mon-binary">Double-écrans (avec Binaires)</a></li>
				<li><a href="hw-dev-hw-dri-fr.htm#non-free-3d">Binaires, pilotes propriétaires pour : Nvidia / ATI</a></li>
				<li><a href="hw-dev-hw-dri-fr.htm#native-nv-ati">Pilotes libres xorg pour nVidia, ATI, Radeon, Intel</a></li>
				<li><a href="hw-dev-hw-dri-fr.htm#non-free">Matériels nécessitant des outils propriétaires</a></li>
			</ul>
		</li>
		<li  onmouseover="showHide( 10 );" onmouseout="startTime();" ><a href="wm-kde-fr.htm">Environnements Fenêtrés</a>
			<ul class="sub-menu" id="sm10">
				<li><a href="wm-kde-fr.htm#desk-freeze">Gel du bureau KDE</a></li>
				<li><a href="wm-kde-fr.htm#kde-login">KDE ne se lance pas</a></li>
				<li><a href="wm-kde-fr.htm#ch-th">Changer de Thème</a></li>
			</ul>
		</li>
		<li  onmouseover="showHide( 11 );" onmouseout="startTime();" ><a href="lamp-apache-fr.htm">Suite LAMP sidux</a>
			<ul class="sub-menu" id="sm11">
				<li><a href="lamp-apache-fr.htm#serv-apache">Suite LAMP sidux</a></li>
				<li><a href="lamp-apache-fr.htm#serv-ftp">Clients FTP</a></li>
				<li><a href="lamp-apache-fr.htm#serv-sec">Protocoles de sécurité</a></li>
				<li><a href="lamp-apache-fr.htm#serv-ssl">SSL</a></li>
				<li><a href="lamp-sql-fr.htm#serv-mysql">Configurer MySQL</a></li>
				<li><a href="lamp-ppp-fr.htm#serv-php">PHP dans Apache</a></li>
				<li><a href="ntp-server-fr.htm#ntp-server">Configurer le serveur de Temps</a></li>
			</ul>
		</li>
		<li  onmouseover="showHide( 13 );" onmouseout="startTime();" ><a href="sys-admin-apt-fr.htm">Installer/Désinstaller et rétrograder les paquetages</a>
			<ul class="sub-menu" id="sm13">
				<li><a href="sys-admin-apt-fr.htm#apt-cook">Guide pour APT et listes de sources</a></li>
				<li><a href="sys-admin-meta-fr.htm#meta-pack">Installateur de Meta-Paquets</a></li>
				<li><a href="sys-admin-meta-fr.htm#meta-proxy">Installateur de Meta-Paquets et Proxies</a></li>
				<li><a href="sys-admin-apt-fr.htm#apt-install">Installer un nouveau paquet</a></li>
				<li><a href="sys-admin-apt-fr.htm#apt-delete">Désinstaller un paquet</a></li>
				<li><a href="sys-admin-apt-fr.htm#apt-downgrade">Rétrograder/Conserver un paquet</a></li>
				<li><a href="sys-admin-apt-fr.htm#apt-cache">Chercher un paquetage avec apt-cache</a></li>
				<li><a href="sys-admin-apt-fr.htm#apt-kio">Chercher un paquetage avec kio-apt</a></li>
				<li><a href="sys-admin-apt-fr.htm#apt-upgrade">Mettre à niveau un système installé - dist-upgrade</a></li>
			</ul>
		</li>
		<li  onmouseover="showHide( 12 );" onmouseout="startTime();" ><a href="internet-connecting-fr.htm">Internet et Réseau</a>
			<ul class="sub-menu" id="sm12">
				<li><a href="tor-privoxy-fr.htm#tor">Tor</a></li>
				<li><a href="tor-privoxy-fr.htm#privoxy">Privoxy</a></li>
				<li><a href="internet-connecting-fr.htm#firewalls">Firewalls</a></li>
				<li><a href="samba-fr.htm#configure">Configuration SAMBA (Windows)</a></li>
				<li><a href="samba-fr.htm#setup">Configuration de serveur Samba</a></li>
				<li><a href="ssh-fr.htm#ssh-fs">Montage SSH distant</a></li>
				<li><a href="ssh-fr.htm#ssh-x">Applications X Window via SSH</a></li>
				<li><a href="ssh-fr.htm#ssh-f">SSH en graphique avec Konqueror</a></li>
				<li><a href="ssh-fr.htm#ssh-w">Transmission-X par SSH depuis un PC Windows</a></li>
				<li><a href="ssh-fr.htm#ssh">SSH et Sécurité</a></li>
				<li><a href="internet-connecting-fr.htm#dial-mod">Modems 56k</a></li>
				<li><a href="internet-connecting-ndis-fr.htm#ndiswrapper-basic">Activation de Ndiswrapper</a></li>
				<li><a href="internet-connecting-ndis-fr.htm#ndiswrapper-advanced">Activation avancée de Ndiswrapper</a></li>
				<li><a href="internet-connecting-wpagui-fr.htm#wpa-roaming-gui">WiFi - roaming WPA-GUI</a></li>
				<li><a href="internet-connecting-wpa-fr.htm#wpa">WiFi - wpasupplicant</a></li>
				<li><a href="internet-connecting-fr.htm#netcardconfig">Se connecter au Web - Ceni</a></li>
			</ul>
		</li>
		<li  onmouseover="showHide( 14 );" onmouseout="startTime();" ><a href="smxi-fr.htm">Administration Système</a>
			<ul class="sub-menu" id="sm14">
				<li><a href="smxi-fr.htm#sm">Syntaxe des commandes smxi</a></li>
				<li><a href="siduxcc-fr.htm#siduxcc">Centre de Contrôle Sidux</a></li>
				<li><a href="sys-admin-apt-fr.htm#apt-upgrade">Mettre à niveau un système installé: dist-upgrade</a></li>
				<li><a href="sys-admin-upgrade-fr.htm#live-cd-upgrade">Mettre à niveau à partir d'un Live-CD</a></li>
				<li><a href="sys-admin-kern-upg-fr.htm#kern-upgrade">Mise-à-niveau du noyau</a></li>
				<li><a href="sys-admin-rdiff-fr.htm#rdiff">Sauvegarde avec rdiff</a></li>
				<li><a href="sys-admin-rsync-fr.htm#rsync">Sauvegarde avec rsync</a></li>
				<li><a href="vir-rkits-fr.htm#virus-rkits">Virus et Scanners de Rootkits</a></li>
				<li><a href="sys-admin-gen-fr.htm#start-services">Activer/désactiver les services</a></li>
				<li><a href="sys-admin-gen-fr.htm#pw-lost">Mots passe Root perdus</a></li>
				<li><a href="sys-admin-gen-fr.htm#fonts">Fontes</a></li>
				<li><a href="sys-admin-gen-fr.htm#cups">CUPS -imprimantes</a></li>
				<li><a href="sys-admin-gen-fr.htm#init">niveaux de fonctionnement sidux-init</a></li>
				<li><a href="sys-admin-grub-bootman2-fr.htm#mbr-grub-boot">Effacement du secteur de boot MBR</a></li>
				<li><a href="sys-admin-grub-bootman2-fr.htm#dual-boot">Double et multi-démarrage</a></li>
				<li><a href="sys-admin-grub-bootman2-fr.htm#boot-grub-floppy">Créer une disquette de Boot</a></li>
				<li><a href="sys-admin-grub-bootman2-fr.htm#remove-grub">Enlever grub du MBR</a></li>
				<li><a href="sys-admin-grub-bootman2-fr.htm#what-is-grub">Grub, le gestionnaire de démarrage</a></li>
			</ul>
		</li>
	</ul>
<!-- menu ends here --></div>
<div id="main-page">
	<div class="divider" id="wpa">
		<h2 id="top-header">Modes opératoires de wpasupplicant pour Debian</h2>

							<p class="highlight-3">En raison des complexités juridiques, sidux ne fournit sur le Live CD que des logiciels strictement libres, <a href="hw-dev-hw-dri-fr.htm#non-free">consultez svp ce lien, pour plus d'information sur les sources de firmware non-libres.</a></p>

							<p>Le paquetage Debian wpasupplicant fournit 2 modes opératoires intéressants car intégrés de près à l'infrastructure système de gestion réseau : ifupdown.</p>

				<h4>Contenus de cette section :</h4>

					<h6>1.  Spécifier quelle méthode on utilise avec wpa_supplicant</h6> 
							<p>* Tableau des pilotes supportés<br />
         						* Recommandations courantes concernant les pilotes </p>

					<h6>2. Mode #1: mode dirigé (Managed Mode)</h6>
          						<p>* Exemples<br />
          						* Tableau des options courantes<br />
          						* Notes importantes sur le mode dirigé<br />
          						* Comment Ça Marche ?</p>

					<h6>3. Mode #2: mode vagabond (Roaming Mode)</h6>
          						<p>* wpa_supplicant.conf<br />
          						* /etc/network/interfaces<br />
          						* Contrôle du démon Vagabond avec wpa_action<br />
          						* Réglages de précision du mode vagabond<br />
          						* Le fichier de logs<br />
          						* Utiliser des scripts externes de mapping (ex: guessnet)<br />
          						* /etc/network/interfaces et mapping externe</p> 

					<h6>4. En cas de problème</h6>
          						<p>* ssids cachées</p>

					<h6>5. Considerations sur la sécurité</h6>
          						<p>* Permissions des fichiers de configuration</p> 

			<h3>1. Spécifier quelle méthode on utilise avec wpa_supplicant</h3>

							<p>La méthode wext sera utilisée par défaut sur toute interface qui ne mentionnerait pas explicitement le bon type de pilote à 'wpa-driver'.  Utilisateurs des noyaux Linux 2.4 et inférieurs au 2.6.14 seront invités à spécifier un pilote de type wpa.</p>

	</div>	
		<h3>Pilotes supportés</h3>
	<div>
		<table>
			<tbody>
				<tr>
					<th>Pilote</th>
					<th>Description</th>
				</tr>
				<tr>
					<td>wext</td>
					<td>Linux wireless extensions (generic)</td>
				</tr>
			</tbody>
		</table>
	</div>
	<div class="spacer05"></div>
				<h3>Recommandations courantes concernant les pilotes</h3>

							<p>Toutes les interfaces Intel Pro Wireless (ipw2100, ipw2200 and ipw3945) utilisent la méthode "wext", à part si vous utilisez un noyau antérieur au 2.6.14.</p>

							<p>Madwifi permet d'utiliser les deux méthodes 'wext' et 'madwifi', mais 'wext' est préférable. Ceci dit 'madwifi' peut se révèler plus efficace dans certaines circonstances.</p>

							<p>Ndiswrapper N'ADMET PLUS l'utilisation de la méthode 'ndiswrapper' depuis sa version 1.16. A contrario il faut lui assigner la méthode 'wext' si vous n'utilisez pas une version dépassée de ndiswrapper..</p>

							<p>Réglez le type de pilote dans la strophe dédiée à votre interface par l'option 'wpa-driver'. Par exemple :</p>

<pre>
iface eth0 inet dhcp
	wpa-driver wext
	. . . . . plus d'options
</pre>

			<h2>2. Mode #1: Mode Dirigé (Managed Mode)</h2>

							<p>Ce mode fournit la possibilité de se connecter via wpa_supplicant à un réseau connu. la méthode utilisée est proche de celle du paquetage 'wireless-tools'. Chaque élément requis pour établir la connexion comporte un préfixe "wpa-" suivi par la valeur utilisée pour cet élément.</p>

						<h6>Exemples de fichier wpa.conf en Mode #1 - Exemple 1.</h6>
<pre>
Avertissement: la valeur 'wpa-psk' n'est valide que si:


   1. Il s'agit d'une chaîne caractères texte (ascii) comportant entre 8 et 63 caractères en tout
   2. Il s'agit d'une chaîne hexadécimale de 64 caractères

# Connexion à un point d'accès de ssid 'NETBEER' cryptée de type
# WPA-PSK/WPA2-PSK, utilisant la méthode 'wext' de wpa_supplicant,
# puisqu'aucune option de wpa-driver n'est spécifiée 
# La phrase de passe est entrée comme chaîne de caractères ASCII.
# DHCP est utilisé pour obtenir une adresse IP.

iface wlan0 inet dhcp

        wpa-ssid NETBEER
        # phrase de passe en mode texte
        wpa-psk PlainTextSecret

# Connexion à un point d'accès de ssid 'homezone' avec un type d'encryptage
# WPA-PSK/WPA2-PSK, utilisant le gestionnaire de pilote 'wext' de wpa_supplicant,
# Le psk est fourni sous forme de chaîne hexadécimale. 
#SDHCP est utilisé pour obtenir une adresse IP.

iface wlan0 inet dhcp
        wpa-driver wext
        wpa-ssid homezone
        # le psk hexadécimal est obtenu par encodage de phrase de passe texte
        wpa-psk 000102030405060708090a0b0c0d0e0f101112131415161718191a1b1c1d1e1f

# Connexion à un point d'accès de ssid 'HotSpot1' et de bssid '00:1a:2b:3c:4d:5e'
# avec un type d'encryptage WPA-PSK/WPA2-PSK, utilisant le gestionnaire de pilote
# 'madwifi' de wpa_supplicant. Le phrase de passe est entrée comme chaîne
# de caractères ASCII. Une adresse réseau statique est utilisée.

iface ath0 inet static

        wpa-driver madwifi
        wpa-ssid HotSpot1
        wpa-bssid 00:1a:2b:3c:4d:5e
        # plaintext passphrase
        wpa-psk madhotspot
        wpa-key-mgmt WPA-PSK
        wpa-pairwise TKIP CCMP
        wpa-group TKIP CCMP
        wpa-proto WPA RSN
        # static ip settings
        address 192.168.0.100
        netmask 255.255.255.0
        network 192.168.0.0
        broadcast 192.168.0.255
        gateway 192.168.0.1

# Un fichier utilisateur wpa_supplicant.conf est utilisé pour eth1.
# Toute l'information réseau est contenue dans ce fichier wpa_supplicant.conf
# Aucun type de pilote-wpa n'est spécifié, et donc wext sera utilisé 
#DHCP est utilisé pour obtenir une adresse IP.

iface eth1 inet dhcp
wpa-conf /path/to/wpa_supplicant.conf
</pre>

	<div class="divider" id="wpa1">
		<h2>Tableau des options les plus courantes</h2>

							<p>Un bref sommaire des options 'wpa-' que vous pouvez utiliser dans la strophe dédiée aux contrôleurs réseau sans fil du fichier /etc/network/interfaces. Reportez-vous à la section "Notes importantes relatives au mode dirigé" pour une information se rapportant aux valeurs 'wpa-' valides et invalides</p>

							<p class="highlight-2">Avertissement : Toutes ces valeurs SoNt SenSibLes &Agrave; lA CAssE dEs caRact&Egrave;Res !</p>

<pre>
Élément		Exemple de valeur	Description
=======         =============           ===========
wpa-ssid        chainedetexteplein      Fixe le ssid de votre réseau
wpa-bssid       00:1a:2b:3c:4d:5e       Adresse Mac de votre point d'accès
wpa-psk         0123456789......        Clé wpa de votre partage. Utilisez 
wpa_passphrase(8) pour générer	le psk d'après votre phrase de passe
wpa-key-mgmt    NONE, WPA-PSK, WPA-EAP, Liste des protocoles utilisables pour 
                IEEE8021X               authentifier votre clé
wpa-group       CCMP, TKIP, WEP104,     Liste des groupes de partage WPA
                WEP40                   utilisables
wpa-pairwise    CCMP, TKIP, NONE        Liste des partages pairwise
                                        utilisables avec WPA
wpa-auth-alg    OPEN, SHARED, LEAP      Liste des algorythmes d'authentification
                                        permis avec IEEE 802.11
wpa-proto       WPA, RSN                Liste des protocoles supportés
wpa-identity    monnomentouteslettres   ID de l'administrateur
                                        (Authentification EAP)
wpa-password    monmotdepasse           Votre mot-de-passe d'administrateur
                                        (Authentification EAP)
wpa-scan-ssid   0 ou 1              	Alterne la détection des ssid utilisant des 
					appels à des trames de vérification spécifiques 
					(Probe Request frames)
wpa-ap-scan     0 ou 1 ou 2             Ajuste la méthode de détection de     
					wpa_supplicant

</pre>
							<p>les fonctionnalités complètes de wpa-cli(8) doivent être implémentées. Tout élément manquant est considéré comme bug et doit être signalé comme tel. Les patches sont toujours des bienvenus.</p>

			<h2>Notes importantes relatives au mode dirigé (Managed Mode)</h2>

							<p>La plupart des options 'wpa-' exigent qu'au moins un ssid soit spécifié. Seulement quelques unes des options auront un effet général. Ce sont 'wpa-ap-scan' and 'wpa-preauthenticate'.</p>

							<p>Toute option 'wpa-' spécifiée dans le fichier interfaces(5) est suffisante pour activer le démon wpa_supplicant.</p>

							<p>La routine ifupdown de wpa_supplicant s'adapte au 'type" d'entrée qu'elle considère valide pour chaque option. Par exemple, si elle rencontre un champ en texte plein admissible pour une valeur spécifique, elle l'encadre automatiquement de guillemets avant de passer sa valeur à wpa_cli, qui à son tour ajoûte l'entrée au bloc réseau en construction via le socket wpa_supplicant ctrl_interface. </p>

							<p>Lancer ifup manuellement avec l'option '--verbose' vous révèlera toutes les commandes utilisées pour créer un bloc réseau avec wpa_cli. Si la valeur utilisée pour toute option de type wpa-* dans /etc/network/interfaces est entourée de guillemets, il ne pourra s'agir que d'une entrée de type "texte" ou "ascii".</p> 

							<p>Certaines entrées sont formées d'une simple chaine hexadécimale (par exemple celle de la clé wpa-wep-key*).La valeur 'type' de l'option wpa-psk, est déterminée par un simple examen de toute valeur hexadécimale comportant plus d'un seul caractère.</p>  			

			<h2>Comment ça marche</h2>
							<p>Comme indiqué plus haut, tout élément se rapportant à wpa_supplicant est précédé d'un préfixe 'wpa-'. Chaque élément se rapporte à une propriété de wpa_supplicant décrite dans les pages de manuel ($ man) wpa_supplicant.conf(5), wpa_supplicant(8) and wpa_cli(8).</p>

							<p>Le requiérant (supplicant) est lancé sans pré-configuration aucune à la base, et wpa_cli construit une configuration réseau en utilisant les paramètres que lui adressent les lignes 'wpa-*'.<br />
							Au départ le couple wpa_supplicant/wpa_cli ne fixent pas les propriétés du contrôleur wifi (comme le ferait iwconfig avec l'essid, par exemple), il informe plutôt le contrôleur de l'existence d'un point d'accès auquel il est possible de se connecter. Et lorsque le contrôleur wifi a balayé le secteur et détecté qu'un tel point d'accès est effectivement disponible, il règle alors ses propriétés.</p> 
			

							<p>Le script qui lance tout ce travail est:</p>

<pre> 
/etc/wpa_supplicant/ifupdown.sh
/etc/wpa_supplicant/functions.sh
</pre>
							<p>ifupdown.sh: Il est exécuté par run-parts, qui à son tour est invoqué par ifupdown durant les phases 'pre-up', 'pre-down' et 'post-down'</p>

							<p>Au cours de la phase 'pre-up', un démon wpa_supplicant est chargé, suivi d'une série de commandes wpa_cli configurant un réseau en fonction des options 'wpa-' utilisées dans /etc/network/interfaces pour le contrôleur physique.</p>

							<p>Si wpa-roam, le mode vagabond, est utilisé, un démon wpa_cli est chargé durant la phase 'post-up'.</p>

							<p>Durant la phase 'pre-down', le démon wpa_cli est tué s'il existe.</p>

							<p>À la phase 'post-down', c'est le démon wpa_supplicant qui est tué.</p>
			
			<h2>3. Mode #2: Mode Vagabond (Roaming Mode)</h2>

							<p>Un mode vagabond simplifié est intégré par ce paquetage. Il se présente sous la forme d'un script de comportement pour wpa_cli, /sbin/wpa_action, et prend le contrôle d'ifupdown une fois activé. La page man de wpa_action(8) décrit avec force détails ses caractéristiques techniques.</p>

							<p>Pour activer l'interfaçage vagabond, vous adapterez à votre configuration la strophe suivante dans votre fichier /etc/network/interfaces :</p>

<pre>
iface eth1 inet manual
	wpa-driver wext
        wpa-roam /chemin/vers/wpa_supplicant.conf
</pre>
							<p>Deux démons sont invoqués dans l'exemple ci-dessus : wpa_supplicant et wpa_cli. Ceci est nécessaire pour obtenir une wpa_supplicant.conf. Un bon point de départ est fourni sous la forme un fichier d'exemple de configuration :</p>
			

<pre>
 # copy the template to /etc/wpa_supplicant/
        cp /usr/share/doc/wpasupplicant/examples/wpa-roam.conf \
                /etc/wpa_supplicant/wpa_supplicant.conf
        # allow only root to read and write to file
        chmod 0600 /etc/wpa_supplicant/wpa_supplicant.conf

NOTE: it is critical that the used wpa_supplicant.conf defines the location of
      the 'ctrl_interface' so that a communication socket is created for the 
      wpa_cli (wpa-roam daemon) to attach. The mentioned example configuration,
      /usr/share/doc/wpasupplicant/examples/wpa-roam.conf, has been set to a
      sane default.

</pre>



							<p>Vous devrez éditer ce fichier de configuration, en y ajoûtant tous vos blocs réseau connus. Si vous ne comprenez pas ce que celà veut dire, commencez par lire la page man de  wpa_supplicant.conf(5).</p>

							<p>For each network, you may specify a special option 'id_str'. It should be set to a simple text string. This text string forms the basis for network profiling; it correlates to a logical interface defined in the interfaces(5) file. When no 'id_str' is given for a network, wpa_action assumes it will use the 'default' logical interface as fallback. The fallback interface can be chosen via the 'wpa-default-iface' option.</p>

							<p>So what does all this mean? Lets illustrate it with a small example taken from the wpa_action(8) manpage.</p>

						<h6>exemple de wpa_supplicant.conf</h6>			
<pre>
wpa_supplicant.conf example:
network={
        ssid="foo"
        key_mgmt=NONE
        # this id_str will notify /sbin/wpa_action to 'ifup uni'
        id_str="uni"
}

network={
        ssid="bar"
        psk=123456789...
        # this id_str will notify /sbin/wpa_action to 'ifup home_static'
        id_str="home_static"
}

network={
        ssid=""
        key_mgmt=NONE
        # no 'id_str' parameter is given, /sbin/wpa_action will 'ifup default'
}
</pre>
	</div>
	<div class="divider" id="wpa2">
		<h6>exemple de fichier /etc/network/interfaces</h6>

<pre>
exemple de /etc/network/interfaces:
# le démon vagabond DOIT utiliser la méthode manuelle inet
# 'allow-hotplug' ou 'auto' garantissent que le démon démarre automatiquement
allow-hotplug eth1
iface eth1 inet manual

        wpa-driver wext
        wpa-roam /etc/wpa_supplicant/wpa_supplicant.conf

 
# aucun id_str spécifié, 'default' est utilisé comme cible de mapping en réserve
iface default inet dhcp


# id_str="uni"
iface uni inet dhcp

# id_str="home_static"
iface home_static inet static

        address 192.168.0.20
        netmask 255.255.255.0
        network 192.168.0.0

        broadcast 192.168.0.255
        gateway 192.168.0.1
</pre>

							<p>Une interface logicielle est activée par ifup et désactivée par ifdown, à mesure que wpa_supplicant s'associe ou se dissocie d'un ssid ou d'un réseau lui étant associé par l'option 'id_str' utilisée dans le fichier de configuration wpa_supplicant.conf .</p>

							<p>Un log des actions réalisées par /sbin/wpa_action est créé à l'adresse  /var/log/wpa_action.log . Joignez ce log en fichier joint si vous rapportez un bug.</p> 

			<h2>Interacting with wpa_supplicant with wpa_cli and wpa_gui</h2>

							<p>The wpa_supplicant process can be interacted with by members of the "netdev" group if the example roaming configuration was used as is (or by whatever group or gid specified by the GROUP= crtl_interface parameter).</p>
<pre>
# the default ctrl_interface option used in the example file
	# /usr/share/doc/wpasupplicant/examples/wpa-roam.conf
        ctrl_interface=DIR=/var/run/wpa_supplicant GROUP=netdev

To interact with the supplicant, the wpa_cli (command line) and wpa_gui (QT)
have been provided. With these you may connect, disconnect, add/delete new
network blocks, provide required interactive security information and so on.
</pre>

			<h2>Contrôle du Démon Vagabond avec wpa_action</h2>

							<p>Une fois le Démon Vagabond lancé il assure le contrôle de ifupdown. Cela implique que wpa_cli appelle ifup quand wpa_supplicant s'est correctement associé à un point d'accès, et appelle ifdown quand la connexion est rompue ou fermée.</p>

							<p>Tant que le Démon Vagabond est actif il ne faut pas tenter de contrôler manuellement ifupdown, mais au contraire utiliser les commandes fournies à cet effet par /sbin/wpa_action pour arrêter et relancer le Démon Vagabond. Par exemple, pour arrêter le démon vagabond sur le contrôleur 'eth1' :</p>

<pre>
wpa_action eth1 stop
</pre>

							<p>Et quand il est nécessaire de mettre-à-jour le Démon Vagabond avec de nouveaux paramètres détaillés, ceci peut s'opérer sans l'arrêter. On édite le fichier de configuration /etc/network/interfaces en y intégrant les nouveaux détails sur la configuration spécifique au réseau concerné (pointé par son 'id_str') et l'on relance simplement le démon comme ceci :</p>

<pre>
wpa_action eth1 reload
</pre>

							<p>Pour accéder à une information précise et détaillée sur tout ce que wpa_action peut faire, lisez la page man de wpa_action(8)</p>

	</div>
	<div class="divider" id="wpa3">
		<h2>Réglages de précision du Vagabondage</h2>

							<p>Vous pouvez rencontrer des situations où de multiples points d'accès sont à proximité immédiate. Vous pouvez choisir manuellement auquel vous préférerez vous connecter, à l'aide de wpa_cli ou wpa_gui, ou assigner à chaque réseau son propre niveau de priorité. Ceci s'opère au moyen de l'option 'priority' de wpa_supplicant.conf.</p>

	</div>
	<div class="divider" id="wpa4">
		<h2>Le fichier de log</h2>

							<p>Un journal de l'activité (log) du démon vagabond s'enregistre dans /var/log/wpa_action.log. Il logue les informations suivantes :</p>
			

							<p>*date et heure<br />
							*nom de l'interface et des événements d'activité<br />
							*valeurs des variables d'environnement (WPA_ID, WPA_ID_STR, WPA_CTRL_DIR)<br />
							*exécutions des commandes ifupdown<br />
							*états de wpa_cli (basé sur WPA-PSK, le réseau peut afficher différentes informations)<br />
							*bssid<br />
							*ssid<br />
							*id<br />
							*id_str<br />
							*pairwise_cipher<br />
							*group_cipher<br />
							*key_mgmt<br />
							*wpa_state<br />
							*ip_address</p>
	
	
	</div>
	<div class="divider" id="wpa5">	
		<h2>Utilisation de scripts de mapping externes (ex: guessnet)</h2>

							<p>Outre ses possibilités internes pour mapper les interfaces logiques au moyen de 'id_str', wpa_action peut appeler des scripts externes. Un script de mapping doit retourner le nom de l'interface logique devant être activée. Tout script de mapping utilisant le mécanisme de mapping de ifupdown (cf man interfaces) devrait pouvoir fonctionner s'il est invoqué par wpa_action.</p>
			
							<p>Pour appeler un script de mapping, vous ajoûterez une ligne 'wpa-mapping-script nom-du-script' dans la strophe d'interface correspondant au contrôleur vagabond (roaming device). (Il se peut que vous ayez à specifier le chemin absolu conduisant à ce script)</p>

							<p>Le contenu des lignes commençant par wpa-map est adressé au script de mapping. Du fait qu'ifupdown ne tolère qu'une unique ligne wpa-map, vous pouvez rajoûter un numéro à wpa-map pour entrer des lignes supplémentaires, de cette façon :</p>

<pre>
iface wlan0 inet manual
        wpa-driver wext
        wpa-roam /etc/wpa_supplicant/wpa_supplicant.conf
        wpa-mapping-script guessnet-ifupdown
        wpa-map0 maison
        wpa-map1 travail
        wpa-map2 ecole
        # ... lignes wpa-mapX additionnelles désirées
</pre>

							<p>Par défaut le script de mapping ne sera utilisé que lorsqu'aucun 'id_str' n'est disponible pour le réseau concerné. Si vous préférez désactiver complètement l''id_str' de réserve pour utiliser exclusivement le script de mapping externe, utilisez l'option 'wpa-mapping-script-priority 1' pour passer outre au comportement fixé par défaut.</p>
			
							<p>Si le script de mapping retourne une chaîne vide wpa_action utilisera l'interface en réserve fixée par défaut, à moins qu'une alternative soit définie à l'option 'wpa-roam-default-iface'. </p>

							<p>Ci-dessous, figure un exemple utilisant guessnet-ifupdown en tant que script externe de mapping.</p>


						<h6>exemple de fichier /etc/network/interfaces avec mapping externe</h6>
<pre>
# exemple de fichier /etc/network/interfaces avec mapping externe :
allow-hotplug wlan0
iface wlan0 inet manual

        wpa-driver wext
        wpa-roam /etc/wpa_supplicant/wpa_supplicant.conf
        wpa-roam-default-iface default-wparoam
        wpa-mapping-script guessnet-ifupdown
        wpa-map default: default-guessnet
        wpa-map0 home_static
        wpa-map1 work_static


# school can only be chosen via 'id_str' matching
iface school inet dhcp

        # resolvconf
        dns-nameservers 11.22.33.44 55.66.77.88

iface home_static inet static

        address 192.168.0.20
        netmask 255.255.255.0

        network 192.168.0.0
        broadcast 192.168.0.255
        gateway 192.168.0.1
        test peer address 192.168.0.1 mac 00:01:02:03:04:05


iface work_static inet static

        address 192.168.3.200
        netmask 255.255.255.0
        network 192.168.3.0
        broadcast 192.168.3.255

        gateway 192.168.3.1
        test peer address 192.168.3.1 mac 00:01:02:03:04:05

iface default-guessnet inet dhcp

iface default-wparoam inet dhcp
</pre>

							<p>Dans cet exemple wpa_action n'utilisera guessnet que pour sélectionner une interface logique quand aucune option 'id_str' n'a été fournie par le réseau en cours dans  wpa_supplicant.conf.</p>

							<p>Les lignes 'wpa-map' fournissent à guessnet les interfaces logiques à tester ainsi que l'interface à utiliser par défaut si tous les test échouent. Les lignes 'test' correspondant à chaque interface logique, sont utilisées par guessnet pour déterminer si la connexion à ce réseau est ou non effective. Par exemple, guessnet choisira l'interface logique 'home_static' si un contrôleur utilisant l'IP 192.168.0.1 et l'adresse MAC 00:01:02:03:04:05 est détecté. Si aucun test ne donne de résultat alors guessnet configurera l'interface 'default-guessnet'.</p>

							<p>Lisez les pages man de guessnet(8) svp, pour plus d'information.</p>

			<h2>4. En cas de problème</h2>

							<p>Afin d'adapter et de régler la connexion, ses associations et les problèmes d'authentification, il est suggéré de démarrer :</p>

<pre>
wpa_cli -i &lt;interface&gt;
</pre>

							<p>dans une console distincte, avant de lancer l'interface. On peut alors utiliser la commande</p>

<pre>
level 0
</pre>

							<p>la première, afin de voir tous les messages de déboguage. Utilisez ensuite</p>

<pre>
ifup --verbose &lt;interface&gt;
</pre>

							<p>pour obtenir les messages du script démarrant wpasupplicant.</p>

	</div>	
	<div class="divider" id="wpa6">
		<h2>Ssids cachées</h2>

							<p>Pour référence, consultez #358137. Pour pouvoir vous associer à des ssids cachées, essayez de vous régler sur 'ap_scan=1' dans la section globale et sur 'scan_ssid=1' dans la section de bloc réseau de votre fichier de configuration  wpa_supplicant.conf. Si vous utilisez le mode Dirigé (managed mode), vous pouvez tenter de le faire en entrant ces strophes :</p>

<pre>
iface eth1 inet dhcp
wpa-conf managed
wpa-ap-scan 1
wpa-scan-ssid 1
# ... vos options additionnelles de réglage
</pre>

							<p>Si l'on en croit #368770, l'association peut prendre très longtemps à s'associer avec WEP. Dans certains cas, régler dans le fichier de configuration 'ap_scan=2' (ou utiliser la strophe 'wpa-ap-scan 2', qui revient au même) peut sensiblement aider à accélérer l'association.</p>
	</div>
	<div class="divider" id="wpa7">
			<h2>5. Considerations sur la sécurité</h2>
					<h5>Permission des fichiers de configuration</h5>


							<p>Il est important de préserver les PSK autres informations sensibles se rapportant à la configuration de votre réseau privé, en s'assurant que les fichiers de configuration importants où figurent ces informations ne soient accessibles en lecture, que pour leur seul propriétaire. Par exemple :</p>

			

<pre>
chmod 0600 /etc/network/interfaces
# substituez-y le chemin de votre fichier wpa_supplicant.conf
chmod 0600 /etc/wpa_supplicant/wpa_supplicant.conf
</pre>

							<p>Par défaut, /etc/network/interfaces est accessible en lecture à tout le monde, et c'est donc un fichier inadapté à contenir des clés secrètes et autres mots-de-passe.</p>


	</div>
		<div id="rev">Dernière mise-à-jour le 30/04/2008 1100 UTC</div>


</div>
</div>
</body>
</html>
