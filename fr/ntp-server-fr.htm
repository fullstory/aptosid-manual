<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
   "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="fr" lang="fr">
<head>
	<title>Manuel de sidux - Serveurs d'horloge NTP</title>
	<meta http-equiv="content-type" content="text/html; charset=utf-8" />
	<style type="text/css" media="all">@import url("../lib/css-js/content.css");</style>
        <style type="text/css" media="all">@import url("../lib/css-js/menu.css");</style>
        <style type="text/css" media="print">@import url("../lib/css-js/print.css");</style>
        <link rel ="shortcut icon" href="../lib/favicon/manual.ico" />
        <script type="text/javascript" src="../lib/css-js/menu2.js"></script>
        <!--[if lt IE 8]>
        <link rel="stylesheet" type="text/css" href="../lib/css-js/ie_5-7_override.css">
        <![endif]-->
        <!--[if lt IE 7]>
        <link rel="stylesheet" type="text/css" href="../lib/css-js/ie_5-6_override.css">
        <![endif]-->
</head>
<body>
<div id="menu"> <!-- menu starts here fr lang maintainer LjanA-->
<!--Welcome to the  sidux-manual Operating System version 01.38-2007-09-12   -->
<!-- menu last updated by bluewater 12/09/2007 1800 hrs AEST 12/09/2007 0800hrs UTC -->
<img src="../lib/logos/sidux-logo.png" alt="logo" id="menu-header" />
	<ul id="top-list">
		<li><a href="http://sidux.com/">Vers sidux.com</a></li>
		<li><a href="http://manual.sidux.com/meta-manual">Méta-Manuel de Sidux</a></li>
	</ul>
	<div id="flags-2">
			<a href="../flag-index.html"><img src="../lib/logos/sidux-lang-50.png" title="Choisir une autre langue" alt="lang-switch" /></a>
	</div>
	<ul>
		<li  onmouseover="showHide( 1 );" onmouseout="startTime();" ><a href="welcome-fr.htm">Manuel du système sidux</a>
			<ul class="sub-menu" id="sm1">
				<li><a href="welcome-fr.htm#welcome-gen">Manuel du système sidux</a></li>
				<li><a href="welcome-fr.htm#how-to">Comment utiliser ce manuel</a></li>
				<li><a href="welcome-fr.htm#table-contents">Table des matières</a></li>
				<li><a href="help-fr.htm#help-gen">Où trouver de l'aide</a></li>
				<li><a href="help-fr.htm#paste">IRC !paste</a></li>
				<li><a href="credits-fr.htm#cred-team">Mérites</a></li>
			</ul>
		</li>
		<li  onmouseover="showHide( 2 );" onmouseout="startTime();" ><a href="cd-content-fr.htm">Contenus du CD</a>
			<ul class="sub-menu" id="sm2">
				<li><a href="cd-content-fr.htm#cd-content">Contenus du CD</a></li>
			</ul>
		</li>
		<li  onmouseover="showHide( 3 );" onmouseout="startTime();" ><a href="cd-dl-burning-fr.htm">Télécharger et graver le CD</a>
			<ul class="sub-menu" id="sm3">
				<li><a href="cd-dl-burning-fr.htm#download-sidux">Télécharger et graver le CD</a></li>
				<li><a href="cd-dl-burning-fr.htm#md5">Vérification de la la somme md5</a></li>
				<li><a href="cd-dl-burning-fr.htm#burn-nero">Graver sous Windows</a></li>
				<li><a href="cd-dl-burning-fr.htm#burn-linux">Graver sous Linux</a></li>
				<li><a href="cd-dl-burning-fr.htm#xdelta">Patcher avec xdelta</a></li>
				<li><a href="cd-no-gui-burn-fr.htm">Graver depuis la console</a></li>
			</ul>
		</li>
		<li  onmouseover="showHide( 4 );" onmouseout="startTime();" ><a href="live-mode-fr.htm">Mode Live</a>
			<ul class="sub-menu" id="sm4">
				<li><a href="live-mode-fr.htm#rootpw">Mot de passe Root sur le Live-CD</a></li>
				<li><a href="live-mode-fr.htm#live-cd-installsoft">Installer des logiciels en mode Live</a></li>
				<li><a href="live-mode-fr.htm#ntfs-3g">Écrire sur des partitions NTFS avec ntfs-3g</a></li>
			</ul>
		</li>
		<li  onmouseover="showHide( 5 );" onmouseout="startTime();" ><a href="term-konsole-fr.htm">Le Terminal/Konsole</a>
			<ul class="sub-menu" id="sm5">
				<li><a href="term-konsole-fr.htm#term-kon"> Le Terminal/Konsole</a></li>
				<li><a href="term-konsole-fr.htm#cli-help">L'aide en ligne de commande</a></li>
				<li><a href="term-konsole-fr.htm#term-cmds">Liste de commandes pour Terminal</a></li>
				<li><a href="term-konsole-fr.htm#shell-scripts">Scripts d'installation .sh</a></li>
			</ul>
		</li>
		<li  onmouseover="showHide( 6 );" onmouseout="startTime();" ><a href="cheatcodes-fr.htm">Codes de démarrage</a>
			<ul class="sub-menu" id="sm6">
				<li><a href="cheatcodes-fr.htm#cheatcodes">Codes de démarrage</a></li>
				<li><a href="cheatcodes-vga-fr.htm#vga">Codes VGA </a></li>
			</ul>
		</li>
		<li  onmouseover="showHide( 7 );" onmouseout="startTime();" ><a href="part-gparted-fr.htm">Partitionner son disque dur</a>
			<ul class="sub-menu" id="sm7">
				<li><a href="part-gparted-fr.htm#partition">Partitionner avec GParted</a></li>
				<li><a href="part-gparted-fr.htm#ntfs">Retailler les partitions NTFS avec GParted</a></li>
				<li><a href="part-uuid-fr.htm#uuid">UUID, Labels de Partitions et fstab</a></li>
				<li><a href="part-cfdisk-fr.htm#disknames">Désignation des disques et partitions</a></li>
				<li><a href="part-cfdisk-fr.htm#partition">Partitionner  son DDur avec cfdisk</a></li>
				<li><a href="part-cfdisk-fr.htm#formating">Formater après un partitionnement cfdisk</a></li>
				<li><a href="part-size-examp-fr.htm#part-example">Exemples de tailles de partitions</a></li>
			</ul>
		</li>
		<li  onmouseover="showHide( 8 );" onmouseout="startTime();" ><a href="hd-install-fr.htm">Options d'installation</a>
			<ul class="sub-menu" id="sm8">
				<li><a href="hd-install-fr.htm#Inst-prep">Préparer son Installation</a></li>
				<li><a href="hd-install-fr.htm#Installation">Installer sur son DDur</a></li>
				<li><a href="hd-install-fr.htm#first-hd-boot">Premier démarrage sur DDur</a></li>
				<li><a href="hd-install-opts-fr.htm#fromiso">Démarrage  'fromiso'</a></li>
				<li><a href="hd-install-opts-fr.htm#usb-hd">Installer sur un DDur USB</a></li>
				<li><a href="hd-install-opts-fr.htm#vtbox">Installer sidux avec VirtualBox</a></li>
				<li><a href="hd-install-opts-fr.htm#qemu">Installer sidux avec QEMU</a></li>
			</ul>
		</li>
		<li  onmouseover="showHide( 9 );" onmouseout="startTime();" ><a href="hw-dev-hw-dri-fr.htm">Cartes Graphiques, Matériels et pilotes</a>
			<ul class="sub-menu" id="sm9">
				<li><a href="hw-dev-hw-dri-fr.htm#hd-ntfs3g">Écritures sur NTFS</a></li>
				<li><a href="hw-dev-hw-dri-fr.htm#mon-res">Définition d'écran et moniteurs</a></li>
				<li><a href="hw-dev-hw-dri-fr.htm#non-free-3d">Binaires, pilotes propriétaires pour : Nvidia / ATI</a></li>
				<li><a href="hw-dev-hw-dri-fr.htm#native-nv-ati">Pilotes libres xorg drivers pour nVidia, ATI, Radeon, Intel</a></li>
				<li><a href="hw-dev-hw-dri-fr.htm#non-free">Matériels nécessitant des outils propriétaires</a></li>
			</ul>
		</li>
		<li  onmouseover="showHide( 10 );" onmouseout="startTime();" ><a href="wm-kde-fr.htm">Environnements Fenêtrés</a>
			<ul class="sub-menu" id="sm10">
				<li><a href="wm-kde-fr.htm#desk-freeze">Gel du bureau KDE</a></li>
				<li><a href="wm-kde-fr.htm#kde-login">KDE ne se lance pas</a></li>
				<li><a href="wm-kde-fr.htm#ch-th">Changer de Thème</a></li>
			</ul>
		</li>
		<li  onmouseover="showHide( 11 );" onmouseout="startTime();" ><a href="lamp-apache-fr.htm">Suite LAMP sidux</a>
			<ul class="sub-menu" id="sm11">
				<li><a href="lamp-apache-fr.htm#serv-apache">Suite LAMP sidux</a></li>
				<li><a href="lamp-apache-fr.htm#serv-ftp">Clients FTP</a></li>
				<li><a href="lamp-apache-fr.htm#serv-sec">Protocoles de sécurité</a></li>
				<li><a href="lamp-apache-fr.htm#serv-ssl">SSL</a></li>
				<li><a href="lamp-sql-fr.htm#serv-mysql">Configurer MySQL</a></li>
				<li><a href="lamp-ppp-fr.htm#serv-php">PHP dans Apache</a></li>
			</ul>
		</li>
		<li  onmouseover="showHide( 13 );" onmouseout="startTime();" ><a href="sys-admin-apt-fr.htm">Installer/Désinstaller et rétrograder les paquetages</a>
			<ul class="sub-menu" id="sm13">
				<li><a href="sys-admin-apt-fr.htm#apt-cook">Guide pour APT et listes de sources</a></li>
				<li><a href="sys-admin-meta-fr.htm#meta-pack">Installateur de Meta-Paquets</a></li>
				<li><a href="sys-admin-meta-fr.htm#meta-proxy">Installateur de Meta-Paquets et Proxies</a></li>
				<li><a href="sys-admin-apt-fr.htm#apt-install">Installer un nouveau paquet</a></li>
				<li><a href="sys-admin-apt-fr.htm#apt-delete">Désinstaller un paquet</a></li>
				<li><a href="sys-admin-apt-fr.htm#apt-downgrade">Rétrograder/Conserver un paquet</a></li>
				<li><a href="sys-admin-apt-fr.htm#apt-cache">Chercher un paquetage avec apt-cache</a></li>
				<li><a href="sys-admin-apt-fr.htm#apt-kio">Chercher un paquetage avec kio-apt</a></li>
			</ul>
		</li>
		<li  onmouseover="showHide( 12 );" onmouseout="startTime();" ><a href="internet-connecting-fr.htm">Internet et Réseau</a>
			<ul class="sub-menu" id="sm12">
				<li><a href="ntp-server-fr.htm#ntp-server">Configurer le serveur de Temps</a></li>
				<li><a href="tor-privoxy-fr.htm#tor">Tor</a></li>
				<li><a href="tor-privoxy-fr.htm#privoxy">Privoxy</a></li>
				<li><a href="internet-connecting-fr.htm#firewalls">Firewalls</a></li>
				<li><a href="samba-fr.htm#configure">Configuration SAMBA (Windows)</a></li>
				<li><a href="samba-fr.htm#setup">Configuration de serveur Samba</a></li>
				<li><a href="ssh-fr.htm#ssh-fs">Montage SSH distant</a></li>
				<li><a href="ssh-fr.htm#ssh-x">Applications X Window via SSH</a></li>
				<li><a href="ssh-fr.htm#ssh-f">SSH en graphique avec Konqueror</a></li>
				<li><a href="ssh-fr.htm#ssh-w">Transmission-X par SSH depuis un PC Windows</a></li>
				<li><a href="ssh-fr.htm#ssh">SSH et Sécurité</a></li>
				<li><a href="internet-connecting-fr.htm#dial-mod">Modems 56k</a></li>
				<li><a href="internet-connecting-ndis-fr.htm#ndiswrapper-basic">Activation de Ndiswrapper</a></li>
				<li><a href="internet-connecting-ndis-fr.htm#ndiswrapper-advanced">Activation avancée de Ndiswrapper</a></li>
				<li><a href="internet-connecting-wpa-fr.htm#wpa">WIFI-WLAN</a></li>
				<li><a href="internet-connecting-fr.htm#internetsharing">Partage de connexion Internet</a></li>
				<li><a href="internet-connecting-fr.htm#netcardconfig">Se connecter au Web</a></li>
			</ul>
		</li>
		<li  onmouseover="showHide( 14 );" onmouseout="startTime();" ><a href="sys-admin-apt-fr.htm">Administration Système</a>
			<ul class="sub-menu" id="sm14">
				<li><a href="sm-siduxcc-fr.htm#sm">Syntaxe des commandes smxi</a></li>
				<li><a href="sm-siduxcc-fr.htm#siduxcc">siduxcc</a></li>
				<li><a href="sys-admin-apt-fr.htm#apt-upgrade">Mettre à niveau un système installé</a></li>
				<li><a href="sys-admin-upgrade-fr.htm#live-cd-upgrade">Mettre à niveau à partir d'un Live-CD</a></li>
				<li><a href="sys-admin-kern-upg-fr.htm#kern-upgrade">Mise-à-niveau du noyau</a></li>
				<li><a href="sys-admin-rdiff-fr.htm#rdiff">Sauvegarde avec rdiff</a></li>
				<li><a href="sys-admin-rsync-fr.htm#rsync">Sauvegarde avec rsync</a></li>
				<li><a href="vir-rkits-fr.htm#virus-rkits">Virus et Scanners de Rootkits</a></li>
				<li><a href="sys-admin-gen-fr.htm#start-services">Activer des services dans sidux</a></li>
				<li><a href="sys-admin-gen-fr.htm#pw-lost">Mots passe Root perdus</a></li>
				<li><a href="sys-admin-gen-fr.htm#fonts">Fontes</a></li>
				<li><a href="sys-admin-gen-fr.htm#cups">CUPS - imprimantes</a></li>
				<li><a href="sys-admin-gen-fr.htm#init">niveaux  de fonctionnement sidux - init</a></li>
				<li><a href="sys-admin-grub-bootman2-fr.htm#mbr-grub-boot">Effacement du secteur de boot MBR</a></li>
				<li><a href="sys-admin-grub-bootman2-fr.htm#dual-boot">Double et multi-démarrage</a></li>
				<li><a href="sys-admin-grub-bootman2-fr.htm#boot-grub-floppy">Créer une disquette de Boot</a></li>
				<li><a href="sys-admin-grub-bootman2-fr.htm#remove-grub">Enlever grub du MBR</a></li>
				<li><a href="sys-admin-grub-bootman2-fr.htm#what-is-grub">Grub, le gestionnaire de démarrage </a></li>
			</ul>
		</li>
	</ul>
<!-- menu ends here --></div>
<div id="main-page">
	<div class="divider" id="ntp-server">
			<h2 id="top-header">Configuration d'un serveur de mise-à-l'heure</h2>

<p>Le serveur de temps est très utile ; il vous permet de synchroniser
vos ordinateurs à des horloges atomiques pour rendre cohérentes entre
elles toutes vos connexions réseau, et autres tâches de production.</p>

<p>Pour l'installer ouvrez une console d'administration et entrez-y :</p>				
<pre>
apt-cache search ntp
apt-get update &amp;&amp; apt-get install  ntp ntp-doc
update-rc.d -f ntp defaults
run update-rc.d se fait plus tard, après la configuration
</pre>

<p>Prenez connaissance de la documentation installée dans votre système à l'adresse :</p>

<pre>
/usr/share/doc/ntp-doc/html/index.html 
</pre>


<p>et faites pointer vers celle-ci un marque-page de Konqueror, afin de
la consulter aisément. Cette documentation est volumineuse, en anglais
et pas complètement à jour, mais tout ce dont vous aurez besoin y
figure.</p>

<p>Ntp ne s'activera pas avant que vous redémarriez, mais vous devez
absolument régler votre horloge système le plus précisément possible
avant d'effectuer ce redémarrage.</p>

<p>Comme ntp est lancé comme un service...ntpdate est déjà actif dans sidux. Pour le vérifier faites :</p>
				
<pre>$ sux
# rcconf
</pre>

<p><i>(utilisez les flèches du clavier pour vous déplacer dans la liste, et la barre espace pour disposer une * astérisque face au service demandé).</i></p>

<p>Ntp récupérera l'heure d'une liste de serveurs située à l'adresse <b>/etc/ntp.conf</b> en laquelle consiste son principal fichier de configuration.</p>

<p>Ntpdate et le démon ntpd invoquent la liste de serveurs située pratiquement au début de <b>/etc/ntp.conf</b>...voici une liste réglée pour exemple :</p>


<pre>
 pool.ntp.org se fice sur plus de 100 serveur NTP low-stratum.
# Votre serveur en utilisera un groupe différent à chacun 
# de ses démarrages.
#  *** SVP, envisagez de rejoindre le pool! ***
#  ***  <a href="http://www.pool.ntp.org/#join">http://www.pool.ntp.org/#join</a>  ***
server 192.168.3.24
server ntp.blueyonder.co.uk
server uk.pool.ntp.org
server 1.uk.pool.ntp.org
server 2.uk.pool.ntp.org
server 0.europe.pool.ntp.org
server 1.europe.pool.ntp.org
server 2.europe.pool.ntp.org
</pre>

<p>Le premier est une machine du même réseau, utilisant également ntp, [dans l'exemple c'est le 'serveur 192.168.3.1]</p>

<p>Le deuxième est le serveur d'horloge de votre FAI.</p>

<p>Les suivants sont des machines diverses de uk.pool.ntp.org, et
d'autres. De toute manière, les serveurs de noms de domaines de votre
FAI sont souvent également serveurs de temps. Vous pouvez vérifier tout
ça en entrant :</p>

<pre>
ntpdate -v
</pre>

<p>Cela ne servira pas à grand chose, mais retournera une information se présentant dans ce style :</p>

<pre># ntpdate -v 192.168.3.24
19 Sep 19:09:27 ntpdate[13329]: ntpdate 4.2.2@1.1532-o Wed Aug  9 12:08:54 UTC 2006 (1)
</pre>

<p>Vous pouvez y permettre l'accès à toutes vos machines locales :</p>

<pre># Local users may interrogate the ntp server more closely.
restrict 127.0.0.1 nomodify
restrict 192.168.24
</pre>

<p>Vous pouvez aussi diffuser l'heure (broadcast) à tout votre réseau :</p>

<pre># Pour fournir une heure de référence à tout votre sous-réseau local, modifiez la ligne suivante.
# (Là encore, l'IP mentionnée n'est qu'un exemple.)
broadcast 192.168.3.255
</pre>

<p>Le fichier de configuration ntp.conf est lui aussi un peu archaïque,
et traité comme diff si vous ne faites que cliquer dessus. Avant de
lancer ntp, vous devez mettre votre ordinateur à l'heure, par exemple
comme ceci :</p>

<pre># ntpdate -u -b uk.pool.ntp.org
19 Sep 19:19:33 ntpdate[15641]: step time server 62.3.200.116 offset 0.001523 sec
</pre>

<p>si tout est allé comme sur des roulettes, vous devriez obtenir quelque chose ressemblant à ceci :</p>

<pre># ntpq -pn
remote           refid      st t when poll reach   delay   offset  jitter
----------------------------------------------------------------------------
192.168.3.24    .INIT.          16 u    - 1024    0    0.000    0.000   0.000
+194.117.157.4   192.5.41.40      2 u   97  128  377    7.849    1.548  30.157
*82.219.3.1      195.66.241.2     2 u  101  128  377   17.755    0.794  24.722
 82.133.58.132   .INIT.          16 u    - 1024    0    0.000    0.000   0.000
+194.153.168.75  195.66.241.3     2 u   37  128  377   23.475    3.259  12.203
+82.68.126.114   209.81.9.7       2 u  101  128  377   44.567   -1.366  46.922
+194.88.2.88     194.159.73.44    3 u   90  128  377   17.208   -5.569  27.527
+130.226.232.145 213.112.52.151   3 u   89  128  377   62.130   -0.797  39.999
 127.127.1.0     .LOCL.          10 l   18   64  377    0.000    0.000   0.001
 192.168.3.255   .BCST.          16 u    -   64    0    0.000    0.000   0.001
</pre>

<p>L'astérisque dans la troisième ligne dans l'exemple *82.219.3.1,
montre le serveur de temps actif le plus précis. Cela signifie que vous
utilisez une horloge fiable utilisant le port 123. Un exemple pour
iptables sera :</p>

<pre># Network Time Protocol (NTP) Server
$IPT -A udp_inbound -p UDP -s 0/0 --destination-port 123 -j ACCEPT
$IPT -A INPUT -j ACCEPT -p tcp --dport 123
</pre>


	</div>

<div id="rev">Dernière Révision le 08/09/2007 à 13H02 UTC</div>

</div>
</body>
</html>
