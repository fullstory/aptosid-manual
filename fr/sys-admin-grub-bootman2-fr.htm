<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
   "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="fr" lang="fr">
<head>
	<title>manuel de sidux - Chargeurs de démarrage</title>
	<meta http-equiv="content-type" content="text/html; charset=utf-8" />
	<style type="text/css" media="all">@import url("../lib/css-js/content.css");</style>
        <style type="text/css" media="all">@import url("../lib/css-js/menu.css");</style>
        <style type="text/css" media="print">@import url("../lib/css-js/print.css");</style>
        <link rel ="shortcut icon" href="../lib/favicon/manual.ico" />
        <script type="text/javascript" src="../lib/css-js/menu2.js"></script>
        <!--[if lt IE 8]>
        <link rel="stylesheet" type="text/css" href="../lib/css-js/ie_5-7_override.css">
        <![endif]-->
        <!--[if lt IE 7]>
        <link rel="stylesheet" type="text/css" href="../lib/css-js/ie_5-6_override.css">
        <![endif]-->
</head>
<body>
<div id="menu"> <!-- menu starts here fr lang maintainer LjanA-->
<!--Welcome to the  sidux-manual Operating System version 01.37-2007-09-11   -->
<!-- menu last updated by bluewater 11/09/2007 1200 hrs AEST 11/09/2007 0200hrs UTC -->
<img src="../lib/logos/sidux-logo.png" alt="logo" id="menu-header" />
	<ul id="top-list">
		<li><a href="http://sidux.com/">Vers sidux.com</a></li>
		<li><a href="http://manual.sidux.com/meta-manual">Méta-Manuel de Sidux</a></li>
	</ul>
	<div id="flags-2">
			<a href="../flag-index.html"><img src="../lib/logos/sidux-lang-50.png" title="Choisir une autre langue" alt="lang-switch" /></a>
	</div>
	<ul>
		<li  onmouseover="showHide( 1 );" onmouseout="startTime();" ><a href="welcome-fr.htm">Manuel du système sidux</a>
			<ul class="sub-menu" id="sm1">
				<li><a href="welcome-fr.htm#welcome-gen">Manuel du système sidux</a></li>
				<li><a href="welcome-fr.htm#how-to">Comment utiliser ce manuel</a></li>
				<li><a href="welcome-fr.htm#table-contents">Table des matières</a></li>
				<li><a href="help-fr.htm#help-gen">Où trouver de l'aide</a></li>
				<li><a href="help-fr.htm#paste">IRC !paste</a></li>
				<li><a href="credits-fr.htm#cred-team">Mérites</a></li>
			</ul>
		</li>
		<li  onmouseover="showHide( 2 );" onmouseout="startTime();" ><a href="cd-content-fr.htm">Contenus du CD</a>
			<ul class="sub-menu" id="sm2">
				<li><a href="cd-content-fr.htm#cd-content">Contenus du CD</a></li>
			</ul>
		</li>
		<li  onmouseover="showHide( 3 );" onmouseout="startTime();" ><a href="cd-dl-burning-fr.htm">Télécharger et graver le CD</a>
			<ul class="sub-menu" id="sm3">
				<li><a href="cd-dl-burning-fr.htm#download-sidux">Télécharger et graver le CD</a></li>
				<li><a href="cd-dl-burning-fr.htm#md5">Vérification de la la somme md5</a></li>
				<li><a href="cd-dl-burning-fr.htm#burn-nero">Graver sous Windows</a></li>
				<li><a href="cd-dl-burning-fr.htm#burn-linux">Graver sous Linux</a></li>
				<li><a href="cd-dl-burning-fr.htm#xdelta">Patcher avec xdelta</a></li>
				<li><a href="cd-no-gui-burn-fr.htm">Graver depuis la console</a></li>
			</ul>
		</li>
		<li  onmouseover="showHide( 4 );" onmouseout="startTime();" ><a href="live-mode-fr.htm">Mode Live</a>
			<ul class="sub-menu" id="sm4">
				<li><a href="live-mode-fr.htm#rootpw">Mot de passe Root sur le Live-CD</a></li>
				<li><a href="live-mode-fr.htm#live-cd-installsoft">Installer des logiciels en mode Live</a></li>
				<li><a href="live-mode-fr.htm#ntfs-3g">Écrire sur des partitions NTFS avec ntfs-3g</a></li>
			</ul>
		</li>
		<li  onmouseover="showHide( 5 );" onmouseout="startTime();" ><a href="term-konsole-fr.htm">Le Terminal/Konsole</a>
			<ul class="sub-menu" id="sm5">
				<li><a href="term-konsole-fr.htm#term-kon"> Le Terminal/Konsole</a></li>
				<li><a href="term-konsole-fr.htm#cli-help">L'aide en ligne de commande</a></li>
				<li><a href="term-konsole-fr.htm#term-cmds">Liste de commandes pour Terminal</a></li>
				<li><a href="term-konsole-fr.htm#shell-scripts">Scripts d'installation .sh</a></li>
			</ul>
		</li>
		<li  onmouseover="showHide( 6 );" onmouseout="startTime();" ><a href="cheatcodes-fr.htm">Codes de démarrage</a>
			<ul class="sub-menu" id="sm6">
				<li><a href="cheatcodes-fr.htm#cheatcodes">Codes de démarrage</a></li>
				<li><a href="cheatcodes-vga-fr.htm#vga">Codes VGA </a></li>
			</ul>
		</li>
		<li  onmouseover="showHide( 7 );" onmouseout="startTime();" ><a href="part-gparted-fr.htm">Partitionner son disque dur</a>
			<ul class="sub-menu" id="sm7">
				<li><a href="part-gparted-fr.htm#partition">Partitionner avec GParted</a></li>
				<li><a href="part-gparted-fr.htm#ntfs">Retailler les partitions NTFS avec GParted</a></li>
				<li><a href="part-uuid-fr.htm#uuid">UUID, Labels de Partitions et fstab</a></li>
				<li><a href="part-cfdisk-fr.htm#disknames">Désignation des disques et partitions</a></li>
				<li><a href="part-cfdisk-fr.htm#partition">Partitionner  son DDur avec cfdisk</a></li>
				<li><a href="part-cfdisk-fr.htm#formating">Formater après un partitionnement cfdisk</a></li>
				<li><a href="part-size-examp-fr.htm#part-example">Exemples de tailles de partitions</a></li>
			</ul>
		</li>
		<li  onmouseover="showHide( 8 );" onmouseout="startTime();" ><a href="hd-install-fr.htm">Options d'installation</a>
			<ul class="sub-menu" id="sm8">
				<li><a href="hd-install-fr.htm#Inst-prep">Préparer son Installation</a></li>
				<li><a href="hd-install-fr.htm#Installation">Installer sur son DDur</a></li>
				<li><a href="hd-install-fr.htm#first-hd-boot">Premier démarrage sur DDur</a></li>
				<li><a href="hd-install-opts-fr.htm#fromiso">Démarrage  'fromiso'</a></li>
				<li><a href="hd-install-opts-fr.htm#usb-hd">Installer sur un DDur USB</a></li>
				<li><a href="hd-install-opts-fr.htm#vtbox">Installer sidux avec VirtualBox</a></li>
				<li><a href="hd-install-opts-fr.htm#qemu">Installer sidux avec QEMU</a></li>
			</ul>
		</li>
		<li  onmouseover="showHide( 9 );" onmouseout="startTime();" ><a href="hw-dev-hw-dri-fr.htm">Cartes Graphiques, Matériels et pilotes</a>
			<ul class="sub-menu" id="sm9">
				<li><a href="hw-dev-hw-dri-fr.htm#hd-ntfs3g">Écritures sur NTFS</a></li>
				<li><a href="hw-dev-hw-dri-fr.htm#mon-res">Définition d'écran et moniteurs</a></li>
				<li><a href="hw-dev-hw-dri-fr.htm#non-free-3d">Binaires, pilotes propriétaires pour : Nvidia / ATI</a></li>
				<li><a href="hw-dev-hw-dri-fr.htm#native-nv-ati">Pilotes libres xorg drivers pour nVidia, ATI, Radeon, Intel</a></li>
				<li><a href="hw-dev-hw-dri-fr.htm#non-free">Matériels nécessitant des outils propriétaires</a></li>
			</ul>
		</li>
		<li  onmouseover="showHide( 10 );" onmouseout="startTime();" ><a href="wm-kde-fr.htm">Environnements Fenêtrés</a>
			<ul class="sub-menu" id="sm10">
				<li><a href="wm-kde-fr.htm#desk-freeze">Gel du bureau KDE</a></li>
				<li><a href="wm-kde-fr.htm#kde-login">KDE ne se lance pas</a></li>
				<li><a href="wm-kde-fr.htm#ch-th">Changer de Thème</a></li>
			</ul>
		</li>
		<li  onmouseover="showHide( 11 );" onmouseout="startTime();" ><a href="lamp-apache-fr.htm">Suite LAMP sidux</a>
			<ul class="sub-menu" id="sm11">
				<li><a href="lamp-apache-fr.htm#serv-apache">Suite LAMP sidux</a></li>
				<li><a href="lamp-apache-fr.htm#serv-ftp">Clients FTP</a></li>
				<li><a href="lamp-apache-fr.htm#serv-sec">Protocoles de sécurité</a></li>
				<li><a href="lamp-apache-fr.htm#serv-ssl">SSL</a></li>
				<li><a href="lamp-sql-fr.htm#serv-mysql">Configurer MySQL</a></li>
				<li><a href="lamp-ppp-fr.htm#serv-php">PHP dans Apache</a></li>
			</ul>
		</li>
		<li  onmouseover="showHide( 13 );" onmouseout="startTime();" ><a href="sys-admin-apt-fr.htm">Installer/Désinstaller et rétrograder les paquetages</a>
			<ul class="sub-menu" id="sm13">
				<li><a href="sys-admin-apt-fr.htm#apt-cook">Guide pour APT et listes de sources</a></li>
				<li><a href="sys-admin-meta-fr.htm#meta-pack">Installateur de Meta-Paquets</a></li>
				<li><a href="sys-admin-meta-fr.htm#meta-proxy">Installateur de Meta-Paquets et Proxies</a></li>
				<li><a href="sys-admin-apt-fr.htm#apt-install">Installer un nouveau paquet</a></li>
				<li><a href="sys-admin-apt-fr.htm#apt-delete">Désinstaller un paquet</a></li>
				<li><a href="sys-admin-apt-fr.htm#apt-downgrade">Rétrograder/Conserver un paquet</a></li>
				<li><a href="sys-admin-apt-fr.htm#apt-cache">Chercher un paquetage avec apt-cache</a></li>
				<li><a href="sys-admin-apt-fr.htm#apt-kio">Chercher un paquetage avec kio-apt</a></li>
			</ul>
		</li>
		<li  onmouseover="showHide( 12 );" onmouseout="startTime();" ><a href="internet-connecting-fr.htm">Internet et Réseau</a>
			<ul class="sub-menu" id="sm12">
				<li><a href="ntp-server-fr.htm#ntp-server">Configurer le serveur de Temps</a></li>
				<li><a href="tor-privoxy-fr.htm#tor">Tor</a></li>
				<li><a href="tor-privoxy-fr.htm#privoxy">Privoxy</a></li>
				<li><a href="internet-connecting-fr.htm#firewalls">Firewalls</a></li>
				<li><a href="samba-fr.htm#configure">Configuration SAMBA (Windows)</a></li>
				<li><a href="samba-fr.htm#setup">Configuration de serveur Samba</a></li>
				<li><a href="ssh-fr.htm#ssh-fs">Montage SSH distant</a></li>
				<li><a href="ssh-fr.htm#ssh-x">Applications X Window via SSH</a></li>
				<li><a href="ssh-fr.htm#ssh-f">SSH en graphique avec Konqueror</a></li>
				<li><a href="ssh-fr.htm#ssh-w">Transmission-X par SSH depuis un PC Windows</a></li>
				<li><a href="ssh-fr.htm#ssh">SSH et Sécurité</a></li>
				<li><a href="internet-connecting-fr.htm#dial-mod">Modems 56k</a></li>
				<li><a href="internet-connecting-ndis-fr.htm#ndiswrapper-basic">Activation de Ndiswrapper</a></li>
				<li><a href="internet-connecting-ndis-fr.htm#ndiswrapper-advanced">Activation avancée de Ndiswrapper</a></li>
				<li><a href="internet-connecting-wpa-fr.htm#wpa">WIFI-WLAN</a></li>
				<li><a href="internet-connecting-fr.htm#internetsharing">Partage de connexion Internet</a></li>
				<li><a href="internet-connecting-fr.htm#netcardconfig">Se connecter au Web</a></li>
			</ul>
		</li>
		<li  onmouseover="showHide( 14 );" onmouseout="startTime();" ><a href="sys-admin-apt-fr.htm">Administration Système</a>
			<ul class="sub-menu" id="sm14">
				<li><a href="sm-siduxcc-fr.htm#sm">Syntaxe des commandes smxi</a></li>
				<li><a href="sm-siduxcc-fr.htm#siduxcc">siduxcc</a></li>
				<li><a href="sys-admin-apt-fr.htm#apt-upgrade">Mettre à niveau un système installé</a></li>
				<li><a href="sys-admin-upgrade-fr.htm#live-cd-upgrade">Mettre à niveau à partir d'un Live-CD</a></li>
				<li><a href="sys-admin-kern-upg-fr.htm#kern-upgrade">Mise-à-niveau du noyau</a></li>
				<li><a href="sys-admin-rdiff-fr.htm#rdiff">Sauvegarde avec rdiff</a></li>
				<li><a href="sys-admin-rsync-fr.htm#rsync">Sauvegarde avec rsync</a></li>
				<li><a href="vir-rkits-fr.htm#virus-rkits">Virus et Scanners de Rootkits</a></li>
				<li><a href="sys-admin-gen-fr.htm#start-services">Activer des services dans sidux</a></li>
				<li><a href="sys-admin-gen-fr.htm#pw-lost">Mots passe Root perdus</a></li>
				<li><a href="sys-admin-gen-fr.htm#fonts">Fontes</a></li>
				<li><a href="sys-admin-gen-fr.htm#cups">CUPS - imprimantes</a></li>
				<li><a href="sys-admin-gen-fr.htm#init">niveaux  de fonctionnement sidux - init</a></li>
				<li><a href="sys-admin-grub-bootman2-fr.htm#mbr-grub-boot">Effacement du secteur de boot MBR</a></li>
				<li><a href="sys-admin-grub-bootman2-fr.htm#dual-boot">Double et multi-démarrage</a></li>
				<li><a href="sys-admin-grub-bootman2-fr.htm#boot-grub-floppy">Créer une disquette de Boot</a></li>
				<li><a href="sys-admin-grub-bootman2-fr.htm#remove-grub">Enlever grub du MBR</a></li>
				<li><a href="sys-admin-grub-bootman2-fr.htm#what-is-grub">Grub, le gestionnaire de démarrage </a></li>
			</ul>
		</li>
	</ul>
<!-- menu ends here --></div>
<div id="main-page">
	<div class="divider" id="mbr-grub-boot">
		<h2 id="top-header">Effacement du secteur de boot par le MBR Windows et/ou pour récupérer GRUB</h2>

							<p>Pour ré-écrire GRUB dans le MBR et/ou récupérer GRUB en général, vous devrez démarrer avec le LIVE-CD.</p>

				<h5 class="highlight-3">Récupération de GRUB pour les noyaux 2.6.22 et suivants:</h5>

							<p>Ouvrez une console et montez la partition où sidux est installée (remplacez sdxx par ce qui correspond à la partition sur laquelle se trouve votre installation):</p>

<pre>
sudo mount /media/sdxx
</pre>

							<p>Voici la commande de ré-écriture de GRUB sur le MBR, avec pointage de celui-ci vers la partition où se trouve le répertoire /boot de votre installation:</p>

<pre>
sudo /usr/sbin/grub-install --recheck --no-floppy --root-directory=/media/sdxx /dev/sda
</pre>

		<h5 class="highlight-3">Récupération de GRUB pour les noyaux antérieurs au 2.6.22:</h5>

							<p>Démarrez avec le LIVE-CD, ouvrez une console et devenez root avec :</p>

<pre>
sudo su
</pre>

							<p>Montez la partition où sidux est installée (remplacez hdb5 par ce qui correspond à la partition sur laquelle se trouve votre installation):</p>

<pre>
mount /media/hdb5
</pre>

							<p>Voici la commande de ré-écriture de GRUB sur le MBR:</p>

<pre>
grub-install --recheck --no-floppy --root-directory=/media/hdb5 /dev/hda
</pre>

</div>

	<div class="divider" id="boot-grub-floppy">

		<h2>Créer une disquette de démarrage</h2>

							<p><a href="http://www.sidux.com/files/misc/grubboot.zip">Téléchargez une image de disquette GRUB</a>. (approx. 580 kB) et nous allons tester ses usages. Sur cette disquette nous découvrirons également une version opérationnelle de FreeDOS et un éditeur. En enlevant la protection contre l'écriture de la disquette, vous pouvez y éditer le fichier menu.lst afin de le faire correspondre à vos besoins.</p>

							<p>Un autre moyen de vous fabriquer une disquette de boot consiste à utiliser les outils distribués dans <a href="http://www.ultimatebootcd.com/">UBCD (Ultimate Boot Disk CD - Ultime CD pour les démarrages)</a></p>
			
	<h5>Pour créer une diquette de démarrage GRUB, il vous faut suivre les étapes qui suivent:</h5>

							<p>1. Formater une disquette</p>

<pre>
# fdformat /dev/fd0
Double-sided, 80 tracks, 18 sec/track. Total capacity 1440 kB.
Formatting ... done
Verifying ... done
</pre>

							<p>2. Créer sur cette disquette un système de fichiers (il est recommandé d'utiliser ext2, minix(fs) ou vfat)</p>

<pre>
# mkfs -t minix /dev/fd0
480 inodes
1440 blocks
Firstdatazone=19 (19)
Zonesize=1024
Maxsize=268966912
</pre>

							<p>3. Montez la disquette</p>

<pre>
# mount -t minix /dev/fd0 /mnt
</pre>

							<p>4. Ensuite, lancez le script d'installation de GRUB</p>

<pre>
# grub-install --recheck --root-directory=/mnt /dev/fd0
Probing devices to guess BIOS drives. This may take a long time.
Unknown partition table signature
Unknown partition table signature
Unknown partition table signature
Unknown partition table signature
Unknown partition table signature
Unknown partition table signature
Unknown partition table signature
Unknown partition table signature
Unknown partition table signature
Unknown partition table signature
Due to a bug in xfs_freeze, the following command might produce a segmentation
fault when /mnt/boot/grub is not in an XFS filesystem. This error is harmless and
can be ignored.
xfs_freeze: specified file ["/mnt/boot/grub"] is not on an XFS filesystem
Unknown partition table signature
Installation finished. No error reported.
This is the contents of the device map /mnt/boot/grub/device.map.
Check if this is correct or not. If any of the lines is incorrect,
fix it and re-run the script `grub-install'.
 
(fd0)   /dev/fd0
(hd0)   /dev/sda
</pre>

							<p>5. Dernière étapes</p>

<pre>
# sed "s|^gfxmenu.*|gfxmenu\ \\(fd0\\)\\/boot\\/message|" /boot/grub/menu.lst > /mnt/boot/grub/menu.lst
# cp -L /boot/message /mnt/boot/
# umount /mnt
</pre>
							
			
	</div>
	<div class="divider" id="remove-grub">

		<h2>Effacer GRUB du MBR</h2>

							<p>L'opération est simple et rapide : dans une console root, entrez</p>

<pre>
lilo -M /dev/sda -s /dev/null
</pre>


	</div>
	<div class="divider" id="what-is-grub">
		<h2>GRUB, le chargeur de démarrage - De quoi s'agit-il ?</h2>

			<h3>Généralités</h3>
<pre>
<span class="highlight-3">Notez que GRUB pour les noyaux 2.6.22 et ultérieurs utilisera sdax
et la ligne
initrd (hd0.x)/sidux/miniroot.gz
est changée en:
initrd		/boot/initrd.img-2.6.xx.x-slh-smp-x</span>
</pre>

							<p>Grub, pour "Grand Unified Boot Loader", autrement dit Grand Chargeur de Démarrage, est un outil très puissant qui va vous permettre de démarrer les systèmes d'exploitation de votre ordinateur, éventuellement en entrant des options spéciales.</p>

							<p>GRUB ne s'appuie pas sur les listes de blocs pour trouver les fichiers nécessaires au démarrage, et il peut reconnaître un grand nombre de systèmes de fichiers : ext2, ext3, reiserfs, ... (Linux), Fat32, Fat16 (Windows), UFS (BSD), Minix et beaucoup d'autres.</p>

							<p>Grub reconnaît les extensions de BIOS (ce qui signifie qu'il est capable de démarrer des partitions de plus de 8 Go!) et n'est pas bloqué par la barrière du 1024ème cylindre. Grub est indifférent à l'endroit où un noyau est stocké physiquement : tout ce dont il a besoin, c'est d'une déclaration de la partition et du chemin du noyau qu'il est supposé démarrer (ce qui peut même être un lien virtuel). Après un changement de configuration (par exemple dans le menu.lst) il ne nécessite aucun appel-programme comme en a besoin lilo, pour appliquer la modification de configuration dès le démarrage suivant.</p>
 
							<p>Sidux utilise GRUB par défaut pour le démarrage de son CD, ainsi que pour celui de son installation sur disque dur. Grub peut même s'installer par la suite, sans aucun problème. Grub est installé sur le MBR en utilisant la commande root suivante:</p>


<pre>
grub-install --root-directory=/media/sdaX /dev/sdY
</pre>

							<p><b>/media/sdaX</b> est le chemin de la partition lisible sur laquelle, dans le répertoire "/boot/grub" les fichiers nécessaires à son fonctionnement (stage2, stage1_5xxx) sont situés. Le fichier de configuration "menu.lst" ainsi que le fichier de configuration "device.map" doivent également se trouver dans ce répertoire. <b>/dev/sdY</b> désigne le disque dur dont le MBR est utilisé par l'ordinateur. La plupart du temps, il s'agira de /dev/sda.</p>


		<h3>Nom des Disques/Noms des partitions</h3>

							<p>De tous temps Grub n'a jamais fait la différence entre les disques durs SCSI et IDE. Pour lui les disques se numérotent (hdX), et ainsi (hd0) est toujours le premier disque dur déclaré dans le BIOS, quel que soit son type de contrôleur. Remarquez que sa numération elle, soit particulière, puisqu'il commence à compter à partir du zéro. La première partition primaire du premier disque se notera dans GRUB (hd0,0). Les partitions primaires y sont désignées par de chiffres de 0 à 3, les partitions logiques sont numérotées à partir du chiffre 4.</p>


		<table>
			<tbody>
				<tr>
					<th><b>Grub</b></th>
					<th><b>Linux</b></th>
					<th><b>Label</b></th>
				</tr>
				<tr>
					<td>(fd0)</td>
					<td>/dev/fd0</td>
					<td>Disquette (sous Windows)</td>
				</tr>
				<tr>
					<td>(hda0)</td>
					<td>/dev/sda</td>
					<td>Premier Ddur</td>	
				</tr>
				<tr>
					<td>(hd0,0)</td>
					<td>/dev/sda1</td>
					<td>Part.Prim1 du Ddur1</td>	
				</tr>
				<tr>
					<td>(hd0,5)</td>
					<td>/dev/sda6</td>
					<td>Part.Logique1 du Ddur1</td>	
				</tr>
				<tr>
					<td>(hd2,2)</td>
					<td>/dev/sdc3</td>
					<td>Part.Prim3 du Ddur3</td>	
				</tr>
			</tbody>
		</table>
	<div class="spacer05"></div>

							<p>Dans la syntaxe propre à Grub, tous les périphériques sont désignés entre parenthèses (). Prenez garde toutefois, au fait que les entrées vers les noyaux nécessitent d'utiliser, elles, une syntaxe Linux. Dans les entrées de l'exemple qui suit, l'adresse en syntaxe Grub de la partition racine, comme celle désignée en pure syntaxe Linux à la ligne kernel (noyau), désignent respectivement la même partition, à savoir la quatrième partition primaire du premier disque dur :</p> 


<pre>
root (hd0,3)
kernel          /boot/vmlinuz root=UUID=bf955abf-ce1f-45a3-9ee5-93b5c5dc4fe0 ro quiet vga=791
initrd          /boot/initrd.img
</pre>

		<h3>La ligne de commande de Grub (Grub-Shell)</h3>


							<p>Une fonctionnalité particulièrement pratique de Grub est son interface de commandes. On y accède par frappe sur la lettre "c". Elle permet notamment de détecter puis de démarrer différents systèmes et fichiers (ex: noyaux) y compris avec un menu.lst complètement erroné.</p>

							<p>Pour faire quelques tests des fonctionnalités de Grub, vous pouvez même accéder à ses commandes depuis une console root via la commande </p>
<pre>
grub</pre>
							<p>Une fois dans le Shell de Grub, vous pouvez lister ses commandes accessibles en entrant "help". Le détail de l'aide pour chaque commande s'obtient en utilisant la syntaxe <span class="highlight-3">help nom_de_la_commande</span>, et le retour au Shell Linux s'opère en entrant "quit", qui termine l'activité du Shell Grub. Comme dans le Shell Linux, la touche tab du Shell Grub vous donne accès à l'auto-complétion des noms de commandes, de fichiers, de disques, ce qui est particulièrement pratique.</p>

							<p>Grub vous offre la possibilité de localiser un noyau et un initrd avant même le démarrage grâce à sa fonction "find" ; un exemple dans la commande suivante :</p>


<pre>
find /boot/vmlinuz
</pre>

							<p>Grub retourne l'adresse des partitions dotées d'un noyau nommé "vmlinuz" dans un répertoire "/boot":</p>


<pre>
(hd0,3) (hd1,0)
</pre>

							<p>Toutes les partitions disponibles d'un lecteur peuvent être affichées au moyen de la commande "geometry". Exemple :</p>

<pre>
geometry (hd0)
</pre>

							<p>provoque l'affichage de ceci:</p>

<pre>
"drive 0x80: C/H/S = 3648/255/63, The number of sectors = 58605120, /dev/hda Partition num: 0,
Filesystem type is fat, partition type 0xb Partition num: 1,
Filesystem type is fat, partition type 0xb Partition num: 2,
Filesystem type is fat, partition type 0xc Partition num: 4,
Filesystem type is ext2fs, partition type 0x83 Partition num: 5,
Filesystem type unknown, partition type 0x82 Partition num: 6,
Filesystem type is fat, partition type 0xb"
</pre>

							<p>Après l'identification d'un noyau ou d'un initrd (ou miniroot.gz), vous pouvez démarrer avec "boot".</p>


				<h3>Mode édition</h3>

							<p>Ce mode peut vous permettre de corriger momentannément les entrées de votre fichier /boot.grub/menu.lst au moment même du démarrage. Ceci est possible y compris au démarrage en mode live-cd ou lorsque votre menu.lst est protégé en écriture. Pour y accéder appuyez d'abord sur la touche d'échappement "ESC" puis sur "Entrée", puis appuyez sur "e". Les paramètres que vous saisissez le sont par défaut en fin de ligne, mais pouvez naviguer dans cette ligne avec les flèches du curseur.</p> 


				<h3>menu.lst (exemples d'entrées possibles)</h3>

							<p>Les lignes de commentaires sont signalées par des signes dièse # et de ce fait n'intérfèrent en rien dans le processus de démarrage. Elle peuvent dont être laissées en l'état.</p>

							<p><i>Pour une meilleure compréhension des publics francophones, les commentaires du fichier sont ici traduits, allant de soi que la plupart du temps, c'est en anglais que vous les trouverez dans les menu.lst habituels :)</i></p>


<pre>
# Exemple /boot/grub/menu.lst
################################################
# Emulation d'un clavier azerty_FR
setkey less backquote
setkey greater tilde
setkey ampersand 1
setkey 1 exclam
setkey tilde 2
setkey 2 at
setkey doublequote 3
setkey 3 numbersign
setkey quote 4
setkey 4 dollar
setkey parenleft 5
setkey 5 percent
setkey minus 6
setkey 6 caret
setkey backquote 7
setkey 7 ampersand
setkey underscore 8
setkey 8 asterisk
setkey backslash 9
setkey 9 parenleft
setkey at 0
setkey 0 parenright
setkey parenright minus
setkey numbersign underscore
# no change for equal
# no change for plus
setkey a q
setkey A Q
setkey z w
setkey Z W
setkey caret bracketleft
# no equivalent for diaresis => we keep the US braceleft
setkey dollar bracketright
# no equivalent for pound => we keep the US braceright
setkey q a
setkey Q A
setkey m semicolon
setkey M colon
setkey bracketleft quote 
setkey percent doublequote
setkey asterisk backslash
setkey bracketright bar
setkey w z
setkey W Z
setkey comma m
setkey question M
setkey semicolon comma
setkey period less
setkey colon period
setkey slash greater
setkey exclam slash
setkey bar question

# menu.lst - Voir: grub(8), info grub, update-grub(8)
#            grub-install(8), grub-floppy(8),
#            grub-md5-crypt, /usr/share/doc/grub
#            et /usr/share/doc/grub-doc/.

## default num
# Réglage de l'entrée activée par défaut fixée par son numéro. Numérotation
# commençant par 0, et l'entrée 0 étant celle activée par défaut
# si la commande n'est pas utilisée.
default		0

## Compte-à-rebours en sec
# Reglage en secondes du délai avant le démarrage automatique de
# l'entrée par défaut (normalement la première définie)
# Si une valeur 0 est assignée au délai
# alors Grub attendra indéfiniment un appui sur Entrée 
timeout		5

# Jolies couleurs
color cyan/blue white/blue
gfxmenu (hd0,5)/boot/message

## mot-de-passe ['--md5'] passwd
# Si utilisé dans la première section du fichier de menu, alors
# tout contrôle d'édition interactive (modification des entrées du menu
# et ligne de commande) sera désactivé et les entrées protégées par
# la commande 'lock'
# e.g. password topsecret
#      password --md5 $1$gLhU0/$aW78kHK1QfV3P2b2znUoe/
# password topsecret

#
# exemples
#
# title		Windows 95/98/NT/2000
# root		(hd0,0)
# makeactive
# chainloader	+1
#
# title		Linux
# root		(hd0,1)
# kernel	/vmlinuz root=/dev/hda2 ro
#

#
# Placez vos strophes de démarrage avant et/ou après AUTOMAGIC KERNEL LIST

### BEGIN AUTOMAGIC KERNELS LIST
## lines between the AUTOMAGIC KERNELS LIST markers will be modified
## by the debian update-grub script except for the default options below

## DO NOT UNCOMMENT THEM, Just edit them to your needs

## ## Start Default Options ##
## default kernel options
## default kernel options for automagic boot options
## If you want special options for specific kernels use kopt_x_y_z
## where x.y.z is kernel version. Minor versions can be omitted.
## e.g. kopt=root=/dev/hda1 ro
##      kopt_2_6_8=root=/dev/hdc1 ro
##      kopt_2_6_8_2_686=root=/dev/hdc2 ro
# kopt=root=UUID=1885d68b-cc9c-49f8-9f98-a6874e7b3e7e ro  quiet vga=791

## default grub root device
## e.g. groot=(hd0,0)
# groot=(hd0,5)

## should update-grub create alternative automagic boot options
## e.g. alternative=true
##      alternative=false
# alternative=false

## should update-grub lock alternative automagic boot options
## e.g. lockalternative=true
##      lockalternative=false
# lockalternative=false

## additional options to use with the default boot option, but not with the
## alternatives
## e.g. defoptions=vga=791 resume=/dev/hda5
# defoptions=

## should update-grub lock old automagic boot options
## e.g. lockold=false
##      lockold=true
# lockold=false

## Xen hypervisor options to use with the default Xen boot option
# xenhopt=

## Xen Linux kernel options to use with the default Xen boot option
# xenkopt=console=tty0

## altoption boot targets option
## multiple altoptions lines are allowed
## e.g. altoptions=(extra menu suffix) extra boot options
##      altoptions=(single-user) single
# altoptions=(single-user mode) single

## controls how many kernels should be put into the menu.lst
## only counts the first occurence of a kernel, not the
## alternative kernel options
## e.g. howmany=all
##      howmany=7
# howmany=all

## should update-grub create memtest86 boot option
## e.g. memtest86=true
##      memtest86=false
# memtest86=true

## should update-grub adjust the value of the default booted system
## can be true or false
# updatedefaultentry=false

## ## Fin des Options par Défaut ##

title		Debian GNU/Linux, kernel 2.6.22.1-slh-smp-7
root		(hd0,5)
kernel		/boot/vmlinuz-2.6.22.1-slh-smp-7 root=UUID=1885d68b-cc9c-49f8-9f98-a6874e7b3e7e ro  quiet vga=791 
initrd		/boot/initrd.img-2.6.22.1-slh-smp-7

title		Debian GNU/Linux, kernel 2.6.22.1-slh-smp-7 (single-user mode)
root		(hd0,5)
kernel		/boot/vmlinuz-2.6.22.1-slh-smp-7 root=UUID=1885d68b-cc9c-49f8-9f98-a6874e7b3e7e ro  quiet vga=791 single
initrd		/boot/initrd.img-2.6.22.1-slh-smp-7

### END DEBIAN AUTOMAGIC KERNELS LIST

#### MS (TM)
title Windows 2K/XP/2003 (hda1)
chainloader (hd0,0)+1

### ISO boot
title sidux 32bit from gaiaISO
kernel (hd0,3)/sidux3/vmlinuz-2.6.22.1-slh-smp-7 boot=fll quiet vga=791 fromiso=/sidux3/siduxgaia.iso
initrd (hd0,3)/sidux3/initrd.img-2.6.22.1-slh-smp-7


title Debian GNU/Linux, kernel 2.6.18-1-686 (hda5)
root (hd0,4)
kernel (hd0,4)/boot/vmlinuz-2.6.18-1-686 root=/dev/hda5 ro vga=791
initrd (hd0,4)/boot/initrd.img-2.6.18-1-686
savedefault
</pre>

	</div>
	<div class="divider" id="dual-boot">
			<h2>Double et Multiple Démarrage</h2>

<pre>
<span class="highlight-3">Notez que GRUB pour les noyaux 2.6.22 et ultérieurs utilisera sdax
et la ligne
initrd (hd0.x)/sidux/miniroot.gz
est changée en:
initrd		/boot/initrd.img-2.6.xx.x-slh-smp-x</span>
</pre>

							<p>Obtenir de Grub qu'il soit capable de démarrer plusieurs systèmes d'exploitation est très simple grâce à l'usage de chainloader. Par exemple si vous désirez lancer MS Windows&reg; et Debian Etch aussi bien que votre sidux 'fromiso', ou installée, tout ce que vous avez à faire est d'adapter en l'éditant, le fichier <span class="highlight-3">/boot/grub/menu.lst </span>, en y ajoûtant après la ligne <span class="highlight-3">### END DEBIAN AUTOMAGIC KERNELS LIST</span>, les entrées que vous voudrez :</p>

<pre>
### MS Windows XP (TM)
title Windows 2K/XP/2003 (sda1)
chainloader (hd0,0)+1

### Debian etch
title Debian etch
kernel (hd0,3)/debian/vmlinuz root=/dev/sda4 ro (or whatever)
initrd (hd0,3)/debian/miniroot.gz (or (whatever)

### ISO boot
title sidux 32bit from gaiaISO
kernel (hd0,3)/sidux3/vmlinuz-2.6.22.1-slh-smp-7 boot=fll quiet vga=791 fromiso=/sidux3/siduxgaia.iso
initrd (hd0,3)/sidux3/initrd.img-2.6.22.1-slh-smp-7
</pre>

							<p><b>Il est sage quand vous comptez le modifier, de faire une sauvegarde du fichier menu.lst opérationnel que vous utilisez !</b> Ceci permet de pouvoir le restaurer instantannément en cas d'erreur d'édition, surtout quand on est débutant.</p>

							<p>Certaines personnes pourraient avoir besoin de faire cohabiter plusieurs installation de MS Windows&reg;. Or MS Windows&reg; exige toujours d'être installé sur la première partition primaire du premier disque dur. Grub vous permet de passer outre à cette limitation, en cachant une partition pour en activer une autre à la place. Les commandes qui suivent devraient être testées dans la ligne de commande de Grub et, si elles fonctionnent, copiées ensuite dans menu.lst (N'oubliez pas de faire une sauvegarde !) :</p>  


<pre>hide (hd0,0) # cache la partition 1 du disque 1
unhide (hd0,1) # rend la partition 2 de disque 1 visible
rootnoverify (hd0,1) # fait de la partition 2 du disque 1 le Root-FS
makeactive # rend la partition 2 du disque 1 active
chainloader +1 # pointe vers le premier secteur de la partition de démarrage
boot # démarre le système d'exploitation</pre>

							<p>Si c'est un deuxième Windows&reg; sur le deuxième disque que vous souhaitez démarrer, alors la fonction map de Grub vous permet de tromper Windows&reg; en simulant que le deuxième soit le premier disque:</p>

<pre>
map (hd0) (hd1)
map (hd1) (hd0)
</pre>

							<p><i>Notez que la cohabitation de plusieurs Windows et ces manipulations puissent être cause de dysfonctionnements, à forciori en cas de mauvaise manipulation de votre part; aussi ne les utilisez qu'en cas d'impératif et n'oubliez pas de sauvegarder vos données !.</i></p>

		<h3>Limitations</h3>

							<p>Si GRUB n'est pas bloqué par la barrière du 1024ème cylindre et peut démarrer des systèmes au-delà, le "/boot/grub/stage2" lui, doit rester accessible au BIOS (et donc lui, se trouver avant le 1024ème cylindre). Stage2 ne peut en aucun cas être déplacé après l'installation, faute de quoi les données de configuration qu'il comporterait ne seraient plus cohérentes. Il est sage de protéger le Stage2 en écriture (read-only). Pour ce faire, vous devez vous trouver dans son répertoire :</p>


<pre>
Dos: attrib +r +s stage2
LINUX: # chmod a -w ./stage2
</pre>


		<h3>Pour en savoir plus (recommandé !)</h3>



							<p><a href="http://www.gnu.org/software/grub/grub-faq.fr.html">La foire-aux-questions officielle de GRUB</a>.</p>

							<p>Si vous êtes équipé d'une carte réseau qui lui soit compatible, Grub permet de démarrer depuis une machine distante.<a href="http://os.inf.tu-dresden.de/%7Efm3/grub.html"> Une disquette de démarrage adaptée peut être récupérée ici (notez qu'elle utilise une version antérieure de Grub)</a>.</p>
				
	</div>
<div id="rev">Dernière actualisation le 09/09/2007 à 7H06 UTC </div>	

</div>
</body>
</html>
