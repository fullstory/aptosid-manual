<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
   "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
	<title>sidux Manuals - VM Installation Options</title>
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
	<style type="text/css" media="all">@import url("../lib/css-js/content.css");</style>
        <style type="text/css" media="all">@import url("../lib/css-js/menu.css");</style>
        <style type="text/css" media="print">@import url("../lib/css-js/print.css");</style>
        <link rel ="shortcut icon" href="../lib/favicon/manual.ico" />
        <script type="text/javascript" src="../lib/css-js/menu2.js"></script>
        <!--[if lt IE 8]>
        <link rel="stylesheet" type="text/css" href="../lib/css-js/ie_5-7_override.css">
        <![endif]-->
        <!--[if lt IE 7]>
        <link rel="stylesheet" type="text/css" href="../lib/css-js/ie_5-6_override.css">
        <![endif]-->
</head>
<body>
<!-- Last translation revision by alessiog75 on 17/04/2010 20.20 UTC -->
<div id="menu"> <!-- menu starts here it lang maintainer alessiog75 -->
<!--sidux-manual Operating System Manual menu-version-02.06.2010.05.04 -->
<!-- menu last updated by bluewater 2010.05.04 1530 hrs UTC -->
	<div id="menu-header">
	      <a href="http://sidux.com/"><img src="../lib/logos/manual-sidux-logo.png" title="Un forum e wiki di sidux.com" alt="sidux.com logo" /></a>
	</div>
	<ul id="top-list">
		<li><a href="manual-search-it.htm#search-on"><img src="../lib/logos/manual-search-22x22.png" title="Ricerca sul manuale" alt="Ricerca" />Ricerca Online Offline</a></li>
		<li><a href="http://manual.sidux.com/meta-manual">Selezioni di software della Community</a></li>
	</ul>
	<div id="flags-2">
			<a href="../flag-index.html"><img src="../lib/logos/sidux-lang-100x64.png" title="Scegliere un'altra lingua" alt="lang-switch" /></a>
	</div>
	<ul>
		<li  onmouseover="showHide( 1 );" onmouseout="startTime();" ><a href="welcome-it.htm">Manuale di sidux</a>
			<ul class="sub-menu" id="sm1">
				<li><a href="welcome-it.htm#welcome-gen">Manuale di sidux</a></li>
				<li><a href="welcome-it.htm#how-to">Come usare questo manuale</a></li>
				<li><a href="welcome-it.htm#table-contents">Indice dei contenuti</a></li>
				<li><a href="help-it.htm#help-gen">Come ottenere aiuto</a></li>
				<li><a href="help-it.htm#paste">IRC !paste</a></li>
				<li><a href="credits-it.htm#cred-team">Crediti</a></li>
				<li><a href="wel-quickstart-it.htm#welcome-quick">sidux - Guida d'avvio rapida</a></li>
			</ul>
		</li>
		<li  onmouseover="showHide( 2 );" onmouseout="startTime();" ><a href="cd-dl-burning-it.htm">Contenuto della ISO, Rilasci, Mirror per i Download e Masterizzazione</a>
			<ul class="sub-menu" id="sm2">
				<li><a href="cd-content-it.htm#cd-content">Contenuto della ISO e requisiti di sistema</a></li>
				<li><a href="sys-admin-release-it.htm#rolling">Note di rilascio dinamiche</a></li>
				<li><a href="cd-dl-burning-it.htm#download-sidux">Mirror sidux, download e masterizzazione</a></li>
				<li><a href="cd-dl-burning-it.htm#md5">Somma md5</a></li>
				<li><a href="cd-dl-burning-it.htm#burn-nero">Masterizzare in Windows</a></li>
				<li><a href="cd-dl-burning-it.htm#burn-linux">Masterizzare in Linux</a></li>
				<li><a href="cd-no-gui-burn-it.htm#burning-no-gui">Script burniso</a></li>
				<li><a href="cd-no-gui-burn-it.htm#burn-no-gui-gen">Masterizzare senza interfaccia grafica</a></li>
			</ul>
		</li>
		<li  onmouseover="showHide( 3 );" onmouseout="startTime();" ><a href="live-mode-it.htm">Modalità Live</a>
			<ul class="sub-menu" id="sm3">
				<li><a href="live-mode-it.htm#rootpw">Password di root del Live ISO sidux</a></li>
				<li><a href="live-mode-it.htm#live-cd-installsoft">Installare software in modalità Live ISO</a></li>
				<li><a href="live-mode-it.htm#ntfs-3g">Scrivere su partizioni NTFS con ntfs-3g</a></li>
			</ul>
		</li>
		<li  onmouseover="showHide( 4 );" onmouseout="startTime();" ><a href="term-konsole-it.htm">Il terminale / Konsole</a>
			<ul class="sub-menu" id="sm4">
				<li><a href="term-konsole-it.htm#sux">Privilegi di root con  sux / sudo</a></li>
				<li><a href="term-konsole-it.htm#term-kon">Terminale / Konsole</a></li>
				<li><a href="term-konsole-it.htm#cli-help">Aiuto nella linea di comando</a></li>
				<li><a href="help-it.htm#init3-tools">Strumenti in modalità testo da conoscere (tty) and init 3</a></li>
				<li><a href="term-konsole-it.htm#term-cmds">Lista dei comandi da terminale</a></li>
				<li><a href="term-konsole-it.htm#shell-scripts">Installare scripts.sh</a></li>
			</ul>
		</li>
		<li  onmouseover="showHide( 5 );" onmouseout="startTime();" ><a href="cheatcodes-it.htm">Opzioni d'avvio</a>
			<ul class="sub-menu" id="sm5">
				<li><a href="cheatcodes-it.htm#cheatcodes">Opzioni d'avvio specifiche del live ISO sidux</a></li>
				<li><a href="cheatcodes-it.htm#cheatcodes-linux">Opzioni d'avvio generici di Linux</a></li>
				<li><a href="cheatcodes-vga-it.htm#vga">Codici VGA</a></li>
			</ul>
		</li>
		<li  onmouseover="showHide( 6 );" onmouseout="startTime();" ><a href="part-gparted-it.htm">Partizionare il disco fisso</a>
			<ul class="sub-menu" id="sm6">
				<li><a href="part-gparted-it.htm#partition">Partizionare il disco fisso con  GParted/KDE Partition Manager</a></li>
				<li><a href="part-gparted-it.htm#ntfs">Ridimensionare una partizione NTFS GParted/KDE Partition Manager</a></li>
				<li><a href="part-uuid-it.htm#uuid">UUID, etichettare partizioni e fstab</a></li>
				<li><a href="part-cfdisk-it.htm#disknames">Assegnare nomi ai dischi in breve</a></li>
				<li><a href="part-cfdisk-it.htm#partition">Partizionare il disco fisso con cfdisk</a></li>
				<li><a href="part-cfdisk-it.htm#formating">Formattare dopo aver partizionato con cfdisk</a></li>
				<li><a href="part-size-examp-it.htm#part-example">Esempi di dimensione partizioni</a></li>
			</ul>
		</li>
		<li  onmouseover="showHide( 7 );" onmouseout="startTime();" ><a href="hd-install-it.htm">Opzioni d'installazione</a>
			<ul class="sub-menu" id="sm7">
				<li><a href="hd-install-it.htm#Inst-prep">Preparazione all'installazione</a></li>
				<li><a href="hd-install-it.htm#Installation">Installare sul disco fisso</a></li>
				<li><a href="hd-install-it.htm#first-hd-boot">Primo avvio</a></li>
				<li><a href="hd-install-opts-it.htm#fromiso">Avviare "fromiso" - panoramica</a></li>
				<li><a href="hd-install-opts-it.htm#fromiso-grub-leg">Avviare "fromiso" con grub-legacy</a></li>
				<li><a href="hd-install-opts-it.htm#grub2-fromiso">Avviare "fromiso" con Grub 2</a></li>
				<li><a href="hd-install-opts-it.htm#fromiso-persist">"fromiso" e "persistente"</a></li>
				<li><a href="hd-install-opts-it.htm#usb-hd">Installare sidux su di un dispositivo USB - specifico di sidux - sidux-on-stick</a></li>
				<li><a href="hd-ins-opts-oos-it.htm#raw-usb">Installare sidux su di un dispositivo USB/SSD con qualsiasi s.o. :Linux, MS Windows, Mac OS X</a></li>
				<li><a href="nbdboot-it.htm#nbd1">Avviare sidux attraverso una rete</a></li>
				<li><a href="hd-install-vmopts-it.htm#vm">Opzioni di installazione della Macchina Virtuale</a></li>
			</ul>
		</li>
		<li  onmouseover="showHide( 8 );" onmouseout="startTime();" ><a href="hw-dev-hw-dri-it.htm">Schede grafiche, Xorg &amp; driver e schermi</a>
			<ul class="sub-menu" id="sm8">
				<li><a href="hw-dev-hw-dri-it.htm#hd-ntfs3g">Scrivere su partizioni NTFS con ntfs-3g</a></li>
				<li><a href="hw-dev-mon-it.htm#mon-res">Risoluzione dello schermo e tipi di schermi</a></li>
				<li><a href="hw-dev-mon-it.htm#xrandr">Doppio schermo e xrandr</a></li>
				<li><a href="hw-dev-mon-it.htm#mon-binary">Doppio schermo (usando i driver binari)</a></li>
				<li><a href="hw-dev-hw-dri-it.htm#non-free-3d">Binari, driver non-liberi per: nVidia &amp; xorg.conf</a></li>
				<li><a href="hw-dev-hw-dri-it.htm#non-free-3d-2">Driver non-liberi per ATI, Radeon ed altri</a></li>
				<li><a href="hw-dev-hw-dri-it.htm#non-free-firmware">Hardware che necessita di driver e firmware non-liberi</a></li>
				<li><a href="hw-dev-hw-dri-it.htm#non-free">Aggiungere non-free al Sources List</a></li>
				<li><a href="hw-dev-hw-dri-it.htm#native-nv-ati">Driver xorg open source per nVidia, ATI, Radeon, Intel &amp; xorg.conf</a></li>
			</ul>
		</li>
		<li  onmouseover="showHide( 9 );" onmouseout="startTime();" ><a href="wm-kde-it.htm">Gestori di finestre</a>
			<ul class="sub-menu" id="sm9">
				<li><a href="wm-xfce-it.htm#xfce-notes">Aggiunte utili per Xfce</a></li>
				<li><a href="wm-kde-it.htm#install-add">Aggiunte utili per KDE</a></li>
				<li><a href="wm-kde-it.htm#desk-freeze">Blocchi del desktop</a></li>
				<li><a href="wm-kde-it.htm#kde-login">Impossibile entrare in KDE</a></li>
				<li><a href="wm-kde-it.htm#ch-th">Cambiare i temi</a></li>
				<li><a href="wm-kde-it.htm#dm">Gestori di Display - dm</a></li>
			</ul>
		</li>
		<li  onmouseover="showHide( 10 );" onmouseout="startTime();" ><a href="lamp-apache-it.htm">LAMP in sidux</a>
			<ul class="sub-menu" id="sm10">
				<li><a href="ntp-server-it.htm#ntp-server">Impostazione time server</a></li>
				<li><a href="lamp-apache-it.htm#serv-apache">LAMP in sidux</a></li>
				<li><a href="lamp-apache-it.htm#serv-ftp">Client FTP</a></li>
				<li><a href="lamp-apache-it.htm#serv-sec">Protocolli di sicurezza</a></li>
				<li><a href="lamp-apache-it.htm#serv-ssl">SSL</a></li>
				<li><a href="lamp-sql-it.htm#serv-mysql">Impostazione di MySQL</a></li>
				<li><a href="lamp-ppp-it.htm#serv-php">PHP in Apache</a></li>
			</ul>
		</li>
		<li  onmouseover="showHide( 11 );" onmouseout="startTime();" ><a href="internet-connecting-it.htm">Internet e reti</a>
			<ul class="sub-menu" id="sm11">
				<li><a href="tor-privoxy-it.htm#tor">Tor</a></li>
				<li><a href="tor-privoxy-it.htm#privoxy">Privoxy</a></li>
				<li><a href="internet-connecting-it.htm#firewalls">Firewall</a></li>
				<li><a href="samba-it.htm#configure">Configurare Samba (Windows)</a></li>
				<li><a href="samba-it.htm#setup">Impostazione samba-server</a></li>
				<li><a href="ssh-it.htm#ssh-fs">SSH Mount da remoto</a></li>
				<li><a href="ssh-it.htm#ssh-x">Applicazioni X-window attraverso SSH</a></li>
				<li><a href="ssh-it.htm#ssh-f">Interfaccia grafica SSH con Konqueror</a></li>
				<li><a href="ssh-it.htm#ssh-w">SSH X-forwarding da un PC Windows</a></li>
				<li><a href="ssh-it.htm#ssh">SSH e sicurezza</a></li>
				<li><a href="internet-connecting-it.htm#dial-mod">Modem 56k</a></li>
				<li><a href="inet-wpagui-it.htm#wpa-roaming-gui">WiFi - WPA_GUI</a></li>
				<li><a href="inet-setup-it.htm#net-set1">WiFi - Impostare il Roaming WiFi</a></li>
				<li><a href="internet-connecting-wpa-it.htm#wpa">WiFi - wpasupplicant</a></li>
				<li><a href="inet-ifplug-it.htm#hotswitch">Scambiare la rete fra WiFi e Cavo</a></li>
				<li><a href="internet-connecting-it.htm#netcardconfig">Attivare una connessione di rete con "Ceni"</a></li>
			</ul>
		</li>
		<li  onmouseover="showHide( 12 );" onmouseout="startTime();" ><a href="sys-admin-apt-it.htm">Dist-upgrade e gestione dei pacchetti</a>
			<ul class="sub-menu" id="sm12">
				<li><a href="sys-admin-apt-it.htm#apt-cook">APT - Guida rapida lista depositi del software</a></li>
				<li><a href="sys-admin-apt-it.htm#apt-install">Installare un nuovo pacchetto</a></li>
				<li><a href="sys-admin-apt-it.htm#apt-delete">Eliminare un pacchetto</a></li>
				<li><a href="sys-admin-apt-it.htm#apt-downgrade">Effettuare il downgrade o il pin di un pacchetto</a></li>
				<li><a href="sys-admin-apt-it.htm#apt-cache">Cercare un pacchetto con apt-cache</a></li>
				<li><a href="sys-admin-apt-it.htm#gui-pacsea">Cercare un pacchetto tramite interfaccia grafica</a></li>
				<li><a href="sys-admin-upgrade-it.htm#live-cd-upgrade">Aggiornare un sistema attraverso il live ISO</a></li>
				<li><a href="sys-admin-apt-locarmirr-it.htm#approx">Fare il dist-upgrade di più PC in rete</a></li>
				<li><a href="sys-admin-kern-upg-it.htm#kern-upgrade">Aggiornare il kernel</a></li>
				<li><a href="sys-admin-kern-upg-it.htm#dmakms">Installare dinamicamente i moduli del kernel con dmakms</a></li>
				<li><a href="sys-admin-apt-it.htm#apt-upgrade">Aggiornare un sistema installato - dist-upgrade - Panoramica</a></li>
				<li><a href="sys-admin-apt-it.htm#du-st">Aggiornare un sistema installato - dist-upgrade - Passi da fare</a></li>
			</ul>
		</li>
		<li  onmouseover="showHide( 13 );" onmouseout="startTime();" ><a href="sys-admin-gen-it.htm">Amministrazione del sistema</a>
			<ul class="sub-menu" id="sm13">
				<li><a href="hd-install-it.htm#adduser">Aggiungere un nuovo utente</a></li>
				<li><a href="home-it.htm#home-bu">Spostare la directory "home"</a></li>
				<li><a href="sys-admin-rdiff-it.htm#rdiff">Backup con rdiff</a></li>
				<li><a href="sys-admin-rsync-it.htm#rsync">Backup con rsync</a></li>
				<li><a href="vir-rkits-it.htm#virus-rkits">Controllo virus e root kit</a></li>
				<li><a href="sys-admin-gen-it.htm#start-services">Abilitare e disabilitare servizi</a></li>
				<li><a href="sys-admin-gen-it.htm#pw-lost">Recupero della password di root</a></li>
				<li><a href="sys-admin-gen-it.htm#fonts">Font</a></li>
				<li><a href="sys-admin-gen-it.htm#cups">Sistema di stampa CUPS</a></li>
				<li><a href="sys-admin-gen-it.htm#sound">Mixer del suono</a></li>
				<li><a href="sys-admin-gen-it.htm#init">sidux runlevel - init</a></li>
				<li><a href="bios-freedos-it.htm#bois-prep">Aggiornare il BIOS con FreeDOS</a></li>
				<li><a href="sys-admin-grub-bootman2-it.htm#boot-grub-floppy">Creare un floppy di avvio</a></li>
				<li><a href="sys-admin-grub-bootman2-it.htm#mbr-grub-boot">Grub1 - MBR: sovrascrittura del settore di boot</a></li>
				<li><a href="sys-admin-grub-bootman2-it.htm#dual-boot">Grub1 - Avvio doppio o multiplo</a></li>
				<li><a href="sys-admin-grub-bootman2-it.htm#remove-grub">Rimuovere grub dall'MBR</a></li>
				<li><a href="sys-admin-grub-bootman2-it.htm#what-is-grub">Grub, il gestore dell'avvio</a></li>
				<li><a href="sys-admin-grub2-it.htm#mbr-over-grub2">Grub2 - MBR: sovrascrittura del settore di boot</a></li>
				<li><a href="sys-admin-grub2-it.htm#multi-os">Grub2 - Avvio doppio o multiplo</a></li>
				<li><a href="sys-admin-grub2-it.htm#grub1-grub2">Grub2 - Aggiornare da Grub1</a></li>
				<li><a href="sys-admin-grub2-it.htm#grub2">Grub2 - Panoramica</a></li>
			</ul>
		</li>
	</ul>
<!-- menu ends here --> </div>
<div id="main-page">
		<div class="divider" id="vmopts">
				<h2 id="top-header">Opzioni per la Macchina Virtuale</h2>

						<ul>
							<li><a href="hd-install-vmopts-it.htm#kvm">KVM per Intel VT o AMD-V</a></li>
							<li><a href="hd-install-vmopts-it.htm#vbox">Virtualbox</a></li>
							<li><a href="hd-install-vmopts-it.htm#qemu">QEMU</a></li>

						</ul>
		      </div>
		      <div class="divider" id="kvm">
				<h2>Avviare ed installare sidux in una macchina virtuale KVM</h2>
							<p>KVM è la soluzione per la virtualizzazione completa per Linux su hardware x86 che comprenda le estensioni per la virtualizzazione (Intel VT o AMD-V).</p>

				      <h3>Prerequisiti</h3>

							<p>Per accertarsi se l'hardware supporta KVM, assicurarsi che KVM sia abilitato nel BIOS (in alcuni casi su di un sistema Intel VT o AMD-V potrebbe non essere evidente dove è l'interruttore, perciò si assume che sia alla voce stato KVM). Per controllare in una console eseguire:</p>
<pre>
cat /proc/cpuinfo | egrep --color=always 'vmx|smx'
</pre>
							<p>Se si vede <span class="highlight-3">smx</span> o <span class="highlight-3">vmx</span> alla voce cpu flag, il sistema supporta KVM. (Altrimenti tornare indietro al BIOS se si crede che sia supportato e controllare di nuovo, oppure cercare su internet dove abilitare KVM nei menù del BIOS).</p>

							<p>Se il BIOS non supporta KVM fare riferimento a <a href="hd-install-vmopts-it.htm#vbox">Virtualbox</a>
							 o <a href="hd-install-vmopts-it.htm#qemu">QEMU</a></p>

							<p>Per installare ed avviare KVM per prima cosa assicurarsi che i moduli di Virtualbox non sono caricati, (la migliore opzione è utilizzare --purge), quindi a seconda del chipset:</p>

							<p>Per <span class="highlight-3">vmx</span>:</p>
<pre>
apt-get install qemu-kvm
modprobe kvm_intel
</pre>
							<p>Per <span class="highlight-3">smx</span>:</p>
<pre>
apt-get install qemu-kvm
modprobe kvm_amd
</pre>
							 <p>Un'altra opzione è riavviare così che gli script di init di qemu-kvm si prenderanno cura di caricare i moduli.</p>

					  <h4>Se si utilizza KVM per avviare una sidux-*.iso</h4>

							<p><span class="highlight-2">Come utente:</span></p>
<pre>
$ kvm -net nic,model=virtio -net user -soundhw ac97 -m 512 -monitor stdio -cdrom &lt;sidux.iso&gt;
</pre>

				<h5>Installare una sidux-*.iso in una immagine KVM</h5>
							<p>Per prima cosa creare una immagine hard disk, (questa immagine sarà minima ed aumenterà solo se richiesto con rapporto di compressione qcow2):</p>
<pre>
$ qemu-img create -f qcow2 sidux-2010-*-.img 12G
</pre>

							<p>Avviare sidux-*.iso con i seguenti parametri per abilitare KVM a riconoscere la presenza di una immagine hard disk QEMU disponibile:</p>
<pre>
$ kvm -net nic,model=virtio -net user -soundhw ac97 -m 512 -monitor stdio -cdrom &lt;/path/to/sidux.iso&gt; -boot d &lt;/path/to/sidux-20xx-*-.img&gt;
</pre>

							<p>Dopo che si è avviato il cdrom cliccare l'icona del sidux installer per fare avviare il programma di installazione, (oppure utilizzare il menu), cliccare sulla scheda Partizionamento e si dovrebbe vedere sulla sinistra un rettangolo con un disco pronto per il partizionamento e la formattazione, molto probabilmente chiamato <span class="highlight-3">/dev/sda</span>. Al di sotto di questo ci sono le opzioni per il partizionamento, scegliere gparted.</p>

	<div class="screenshot"><img src="../lib/images-common/images-vm/kvm-gparted02.png" title="gparted kvm hard disk naming" alt="gparted kvm hard disk naming" /></div>
	<div class="spacer02"></div>

							<p>Nel menu di Gparted si può avere conferma che Gparted vede l'immagine con <span class="highlight-3">View>Device Information</span> che dovrebbe mostrare come <span class="highlight-3">ATA QEMU Harddisk</span> e molto probabilmente si chiama <span class="highlight-3">/dev/sda</span>, (in questo esempio), dal momento che questa informazione sarà cruciale quando si torna al programma di installazione e si sceglie dove mettere Grub, dato che esso va in <span class="highlight-3">/dev/sda</span>.</p>

							<p>Quindi, nel menu <span class="highlight-3">Partizionamento</span> scegliere <span class="highlight-3">Device>Create Partiton Table</span> e creare la tabella delle partizioni.</p>

							<p>A seguire formattare la tabella delle partizioni con ext4 e includere anche una partizione di swap di 2 Gb. La formattazione richiede un po' di tempo quindi si deve essere pazienti.</p>

							<p>Al termine della formattazione cliccare OK per tornare al programma di installazione e procedere come se si stesse facendo una installazione standard, (di nuovo, portare pazienza). <span class="highlight-2">Nota: installare Grub in /dev/sda</span>.</p>

							<p>Adesso si ha una sidux-*-VM pronta per l'uso:</p>

<pre>
$ kvm -net nic,model=virtio -net user -soundhw ac97 -m 512 -monitor stdio -drive if=virtio,boot=on,file=&lt;absolute/path/to/sidux-20xx-*.img&gt;
</pre>

							<p>Se il guest non ha il supporto per virtio, oppure se non si specifica un percorso assoluto, usare:</p>
<pre>
$ kvm -net nic,model=virtio -net user -soundhw ac97 -m 512 -monitor stdio -hda &lt;/path/to/sidux-20xx-*.img&gt;
</pre>
							<p>Vedere anche:</p>
<pre>
$ man kvm
</pre>
				<h5>Gestire le installazioni della macchina virtuale KVM</h5>
<pre>
apt-get install aqemu
</pre>
							<p>Quando si utilizza AQEMU assicurarsi di aver scelto la modalità KVM dal menu a tendina di "Emulator Type" nella scheda "General". (Documentazione per AQEMU praticamente non esiste perciò alcuni "tentativi ed errori" sono necessari per scoprire come utilizzare la GUI, tuttavia un buon inizio è quello di utilizzare il menu "VM" seguito dalla scheda "General".</p>

	</div>
	<div class="divider" id="vbox">
		<h2>Avviare ed installare sidux in una macchina virtuale VirtualBox</h2>
							<p>Passi da fare:</p>
						<ul>
 							<li>1. creare una immagine disco fisso per VirtualBox</li>
 							<li>2. avviare la iso con VirtualBox</li>
 							<li>3. installare l'immagine</li>
						</ul>

				<h4>Esigenze</h4>
							<p><span class="highlight-3">RAM raccomandata: 1 giga </span>: Idealmente 512 MB per il guest e 512 MB per l'host. (può essere avviato o no, ma non ci si deve aspettare grandi prestazioni).</p>

							<p><span class="highlight-3">Spazio sul disco fisso:</span> mentre VirtualBox in sé è piuttosto "magro" (una tipica installazione necessiterà soltanto di ~30 MB), le macchine virtuali richiedono invece dei file grandi sul disco per emulare i propri dischi emulati. Così per installare MS Windows XP (TM), ad esempio, servirà un file che può crescere facilmente fino a parecchi GB. Per sidux sarà necessario allocare in VirtualBox una immagine di 5 giga oltre ad una partizione di swap.</p>

				<h3>Installazione:</h3>

<pre>
apt-get update
apt-get install virtualbox-ose-qt virtualbox-ose-source dmakms module-assistant
</pre>
							<p>Quindi preparare il modulo:</p>
<pre>
m-a prepare
m-a a-i virtualbox-ose-source
</pre>
							<p>Poi attivare il Dynamic Module-Assistant Kernel Module Support per virtualbox, così la prossima volta che il kernel Linux viene aggiornato verrà preparato anche un modulo virtualbox per esso, senza intervento manuale. Per fare ciò, aggiungere <span class="highlight-3">virtualbox-ose-source</span> al file di configurazione <span class="highlight-3">/etc/default/dmakms</span>.</p>
<pre>
mcedit /etc/default/dmakms
virtualbox-ose-source
</pre>

							<p>Infine riavviare il computer.</p>

							<p><a href="sys-admin-kern-upg-it.htm#dmakms">Questa è una lettura essenziale sul funzionamento di dmakms</a></p>

					<h3>Installare sidux nella macchina virtuale</h3>
							<p>Usare il wizard di virtualbox per creare una nuova macchina virtuale per sidux. Poi seguire le istruzioni per una normale installazione di sidux.</p>

							<p>VirtualBox ha un aiuto esaustivo in formato PDF che si può scaricare dal loro sito: <a href="http://www.virtualbox.org/">www.virtualbox.com</a></p>

	</div>
	<div class="divider" id="qemu">
		<h2>Booting and installing sidux to a QEMU Virtual Machine</h2>

		<ul>
 			<li>1. creare una immagine di disco fisso per QEMU</li>
 			<li>2. avviare la iso con QEMU</li>
 			<li>3. installare l'immagine</li>

		</ul>

							<p>È disponibile uno strumento con interfaccia grafica QT come aiuto per configurare QEMU:</p>
<pre>
apt-get install qtemu
</pre>

 				<h4>Creare l'immagine del disco fisso</h4>

				<p>Per avviare qemu probabilmente servirà una immagine di disco fisso. Questo è un file che immagazzina il contenuto del disco fisso emulato.</p>

				<p>Usare il comando seguente per creare il file immagine denominato "sidux.qcow":</p>
<pre>
qemu-img create -f qcow sidux.qcow 3G
</pre>
				<p>Il parametro "3G" specifica la dimensione del disco; in questo caso appunto 3 GB. Si può usare il suffisso M per megabyte (per esempio "256M"). Non ci si deve preoccupare troppo riguardo alla dimensione del disco - il formato qcow comprime l'immagine cosicché lo spazio vuoto non si aggiunge alla dimensione di questo file.</p>


			<h4>Installare il sistema operativo</h4>

				<p>Questa è la prima volta che serve l'avvio dell'emulatore. <span class="highlight-3">Tenere presente che quando si clicca dentro la finestra di qemu, il puntatore del mouse viene catturato. Per rilasciarlo premere:</span></p>
<pre>
Ctrl+Alt
</pre>

				<p>Se serve un floppy avviabile, avviare Qemu con:</p>
<pre>
qemu -floppy sidux.iso -net nic -net user -m 512 -boot d sidux.qcow
</pre>
				<p>Se il CD-ROM è avviabile, avviare Qemu con:</p>
<pre>
qemu -cdrom sidux.iso -net nic -net user -m 512 -boot d sidux.qcow
</pre>
				<p>Ora si può installare sidux come su un disco fisso reale.</p>


			<h4>Avviare il sistema</h4>

				<p>Per avviare il sistema, digitare:</p>
<pre>
qemu [hd_image]
</pre>
				<p>Una buona idea è utilizzare immagini overlay. In questo modo si possono creare le immagini del disco fisso una volta e poi dire a Qemu di salvare i cambiamenti in un file esterno. Ci si può sbarazzare del tutto dell'instabilità dato che è facile ritornare ad uno stato precedente del sistema.</p>

				<p>Per creare una immagine overlay, digitare:</p>
<pre>
qemu-img create -b [[base''image]] -f qcow [[overlay''image]]
</pre>
				<p>Sostituire l'immagine del disco fisso a base_image (nel nostro caso sidux.qcow), dopodiché si può avviare qemu con:</p>
<pre>
qemu [overlay_image]
</pre>
				<p>L'immagine originale non verrà toccata. NOTARE: l'immagine di base non può essere rinominata o spostata in quanto l'overlay si ricorda il percorso completo dell'immagine di base.</p>


			<h4>Usare qualsiasi partizione reale come partizione primaria singola di una immagine del disco</h4>

				<p>Talvolta si potrebbe voler usare una delle partizioni del sistema dall'interno di qemu (per esempio se si vuole avviare sia la macchina reale che qemu usando una certa partizione come root). È possibile farlo usando il software RAID in modalità lineare (serve il driver del kernel "linear.ko") e un dispositivo loopback: il trucco è mettere dinamicamente un master boot record (MBR) all'inizio della partizione reale che si vuole inglobare in una immagine del disco grezza di qemu.</p>

				<p>Supponiamo di avere una partizione pulita e non montata /dev/sdaN con qualche filesystem su di essa che si vuole sia parte di una immagine disco di qemu. Prima salvare in un piccolo file l'MBR:</p>
<pre>
dd if=/dev/zero of=/percorso/verso/mbr count=32
</pre>
				<p>Verrà creato un file di 16 KB (32 * 512 byte). È importante non crearlo troppo piccolo (anche se a MBR serve solo un singolo blocco di 512 byte), poiché più piccolo sarà e più piccola dovrà essere la parte più grossa del dispositivo del software RAID, e ciò potrebbe influire sulle prestazioni. Poi impostare un dispositivo di loopback al file MBR:</p>
<pre>
losetup -f /percorso/verso/mbr
</pre>
				<p>Supponiamo che il dispositivo risultante sia /dev/loop0, in quanto potremmo non avere ancora usato altri loopback. Il prossimo passo sarà quello di creare il "combinato" MBR e /dev/sdaN (immagine disco che usa il software RAID):</p>
<pre>
 modprobe linear
 mdadm --build --verbose /dev/md0 --chunk=16 --level=linear --raid-devices=2 /dev/loop0 /dev/sdaN
</pre>
				<p>Il risultante /dev/md0 sarà quello che useremo come immagine del disco grezza qemu (non dimenticare di impostare i permessi in modo che l'emulatore vi possa accedere). L'ultimo (e un po' scaltro) passo è impostare la configurazione del disco (geometria del disco e tabella della partizioni) in modo che il punto di inizio della partizione primaria nell'MBR si abbini a quello di /dev/sdaN dentro /dev/md0 (un offset di esattamente 16 * 512 = 16384 byte in questo esempio). Si può fare usando fdisk sulla macchina host, non nell'emulatore: la routine predefinita di rilevamento di dischi grezzi produce un "non kilobyte-roundable offsets" (es. 31.5 KB, come nella sezione precedente) che non può essere gestita dal codice del software RAID. Quindi, dall'host:</p>
<pre>
 fdisk /dev/md0
</pre>
				<p>Creare una partizione primaria singola corrispondente a /dev/sdaN, e giocare con il comando "s"ector dal menu "x"pert finché il primo cilindro (dove inizia la prima partizione) si abbina con la dimensione dell'MBR. Alla fine scrivere ("w"rite) il risultato nel file. Finito. Ora si ha una partizione che si può montare direttamente dall'host, come se fosse una parte di una immagine disco qemu:</p>
<pre>
 qemu -hdc /dev/md0 [...]
</pre>
				<p>Si può naturalmente impostare in sicurezza qualsiasi bootloader di questa immagine disco che usa qemu, purché la partizione originale /boot/sdaN contenga gli strumenti necessari.</p>



			<h4>Usare il modulo acceleratore di QEMU</h4>

				<p>Gli sviluppatori di qemu hanno creato un modulo opzionale per il kernel per accelerare qemu quasi fino ai livelli di prestazioni native del sistema. Questo dovrebbe essere caricato con l'opzione:</p>
<pre>
major=0
</pre>
				<p>per automatizzare la creazione del necessario dispositivo /dev/kqemu. Il seguente comando:</p>
<pre>
echo "options kqemu major=0" >> /etc/modprobe.conf
</pre>
				<p>imposterà modprobe.conf perché l'opzione venga aggiunta ad ogni caricamento del modulo.</p>

<pre>
qemu [...] -kernel-kqemu
</pre>
				<p>Il comando qui sopra abilita la virtualizzazione completa migliorando notevolmente la velocità.</p>

			<h4>Per attivare qemu:</h4>
<pre>
qemu -cdrom /tmp/pkg/sidux-debug.iso -net nic -net user -m 512
</pre>
		<p><a href="http://www.nongnu.org/qemu/user-doc.html">Qui si trova la documentazione ufficiale del progetto QEMU.</a></p>
		<p><a href="http://wiki.archlinux.org/index.php/Qemu">Alcuni contenuti riguardo a QEMU sono stati tratti dal wiki di arklinux sotto la Licenza 1.2 della documentazione libera GNU e modificati per il manuale sidux.</a></p>



	</div>
	<div id="rev">Page last revised 13/04/2010 1450 UTC</div>

</div>
</body>
</html>
