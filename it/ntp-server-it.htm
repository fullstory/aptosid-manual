<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
   "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
	<title>Manuale sidux - NTP Time Server</title>
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
	<style type="text/css" media="all">@import url("../lib/css-js/content.css");</style>
        <style type="text/css" media="all">@import url("../lib/css-js/menu.css");</style>
        <style type="text/css" media="print">@import url("../lib/css-js/print.css");</style>
        <link rel ="shortcut icon" href="../lib/favicon/manual.ico" />
        <script type="text/javascript" src="../lib/css-js/menu2.js"></script>
        <!--[if lt IE 8]>
        <link rel="stylesheet" type="text/css" href="../lib/css-js/ie_5-7_override.css">
        <![endif]-->
        <!--[if lt IE 7]>
        <link rel="stylesheet" type="text/css" href="../lib/css-js/ie_5-6_override.css">
        <![endif]-->
</head>
<body>
<!-- Last translation revision by alessiog75 on 02/11/2009 23.05 UTC -->
<div id="menu"> <!-- menu starts here it lang maintainer alessiog75 -->
<!--sidux-manual Operating System Manual menu-version-01.95.2009.10.30 -->
<!-- menu last updated by bluewater 2009.10.30 2220 hrs UTC -->
	<div id="menu-header">
	      <a href="http://sidux.com/"><img src="../lib/logos/manual-sidux-logo.png" title="Un forum e wiki di sidux.com" alt="sidux.com logo" /></a>
	</div>
	<ul id="top-list">
		<li><a href="manual-search-it.htm#search-on"><img src="../lib/logos/manual-search-22x22.png" title="Ricerca sul manuale" alt="Ricerca" />Ricerca Online Offline</a></li>
		<li><a href="http://manual.sidux.com/meta-manual">Selezioni di software della Community</a></li>
	</ul>
	<div id="flags-2">
			<a href="../flag-index.html"><img src="../lib/logos/sidux-lang-100x64.png" title="Scegliere un'altra lingua" alt="lang-switch" /></a>
	</div>
	<ul>
		<li  onmouseover="showHide( 1 );" onmouseout="startTime();" ><a href="welcome-it.htm">Manuale di sidux</a>
			<ul class="sub-menu" id="sm1">
				<li><a href="welcome-it.htm#welcome-gen">Manuale di sidux</a></li>
				<li><a href="welcome-it.htm#how-to">Come usare questo manuale</a></li>
				<li><a href="welcome-it.htm#table-contents">Indice dei contenuti</a></li>
				<li><a href="help-it.htm#help-gen">Come ottenere aiuto</a></li>
				<li><a href="help-it.htm#paste">IRC !paste</a></li>
				<li><a href="credits-it.htm#cred-team">Crediti</a></li>
				<li><a href="wel-quickstart-it.htm#welcome-quick">sidux - Guida d'avvio rapida</a></li>
			</ul>
		</li>
		<li  onmouseover="showHide( 2 );" onmouseout="startTime();" ><a href="cd-dl-burning-it.htm">Contenuto della ISO, Rilasci, Mirror per i Download e Masterizzazione</a>
			<ul class="sub-menu" id="sm2">
				<li><a href="cd-content-it.htm#cd-content">Contenuto della ISO e requisiti di sistema</a></li>
				<li><a href="sys-admin-release-it.htm#rolling">Note di rilascio dinamiche</a></li>
				<li><a href="cd-dl-burning-it.htm#download-sidux">Mirror sidux, download e masterizzazione</a></li>
				<li><a href="cd-dl-burning-it.htm#md5">Somma md5</a></li>
				<li><a href="cd-dl-burning-it.htm#burn-nero">Masterizzare in Windows</a></li>
				<li><a href="cd-dl-burning-it.htm#burn-linux">Masterizzare in Linux</a></li>
				<li><a href="cd-no-gui-burn-it.htm#burning-no-gui">Script burniso</a></li>
				<li><a href="cd-no-gui-burn-it.htm#burning-no-gen">Masterizzare senza interfaccia grafica</a></li>
			</ul>
		</li>
		<li  onmouseover="showHide( 3 );" onmouseout="startTime();" ><a href="live-mode-it.htm">Modalità Live</a>
			<ul class="sub-menu" id="sm3">
				<li><a href="live-mode-it.htm#rootpw">Password di root del Live ISO sidux</a></li>
				<li><a href="live-mode-it.htm#live-cd-installsoft">Installare software in modalità Live ISO</a></li>
				<li><a href="live-mode-it.htm#ntfs-3g">Scrivere su partizioni NTFS con ntfs-3g</a></li>
			</ul>
		</li>
		<li  onmouseover="showHide( 4 );" onmouseout="startTime();" ><a href="term-konsole-it.htm">Il terminale / Konsole</a>
			<ul class="sub-menu" id="sm4">
				<li><a href="term-konsole-it.htm#sux">Privilegi di root con  sux / sudo</a></li>
				<li><a href="term-konsole-it.htm#term-kon">Terminale / Konsole</a></li>
				<li><a href="term-konsole-it.htm#cli-help">Aiuto nella linea di comando</a></li>
				<li><a href="help-it.htm#init3-tools">Strumenti in modalità testo da conoscere (tty) and init 3</a></li>
				<li><a href="term-konsole-it.htm#term-cmds">Lista dei comandi da terminale</a></li>
				<li><a href="term-konsole-it.htm#shell-scripts">Installare scripts.sh</a></li>
			</ul>
		</li>
		<li  onmouseover="showHide( 5 );" onmouseout="startTime();" ><a href="cheatcodes-it.htm">Opzioni d'avvio</a>
			<ul class="sub-menu" id="sm5">
				<li><a href="cheatcodes-it.htm#cheatcodes">Opzioni d'avvio specifiche del live ISO sidux</a></li>
				<li><a href="cheatcodes-it.htm#cheatcodes-linux">Opzioni d'avvio generici di Linux</a></li>
				<li><a href="cheatcodes-vga-it.htm#vga">Codici VGA</a></li>
			</ul>
		</li>
		<li  onmouseover="showHide( 6 );" onmouseout="startTime();" ><a href="part-gparted-it.htm">Partizionare il disco fisso</a>
			<ul class="sub-menu" id="sm6">
				<li><a href="part-gparted-it.htm#partition">Partizionare il disco fisso con GParted</a></li>
				<li><a href="part-gparted-it.htm#ntfs">Ridimensionare una partizione NTFS GParted</a></li>
				<li><a href="part-uuid-it.htm#uuid">UUID, etichettare partizioni e fstab</a></li>
				<li><a href="part-cfdisk-it.htm#disknames">Assegnare nomi ai dischi in breve</a></li>
				<li><a href="part-cfdisk-it.htm#partition">Partizionare il disco fisso con cfdisk</a></li>
				<li><a href="part-cfdisk-it.htm#formating">Formattare dopo aver partizionato con cfdisk</a></li>
				<li><a href="part-size-examp-it.htm#part-example">Esempi di dimensione partizioni</a></li>
			</ul>
		</li>
		<li  onmouseover="showHide( 7 );" onmouseout="startTime();" ><a href="hd-install-it.htm">Opzioni d'installazione</a>
			<ul class="sub-menu" id="sm7">
				<li><a href="hd-install-it.htm#Inst-prep">Preparazione all'installazione</a></li>
				<li><a href="hd-install-it.htm#Installation">Installare sul disco fisso</a></li>
				<li><a href="hd-install-it.htm#first-hd-boot">Primo avvio</a></li>
				<li><a href="hd-install-opts-it.htm#fromiso">Avviare con "fromiso"</a></li>
				<li><a href="hd-install-opts-it.htm#fromiso-persist">"fromiso" e "persistente"</a></li>
				<li><a href="hd-install-opts-it.htm#usb-hd">Installare sidux su di un dispositivo USB</a></li>
				<li><a href="hd-install-opts-it.htm#vtbox">Installare sidux in VirtualBox</a></li>
				<li><a href="hd-install-opts-it.htm#qemu">Installare sidux in QEMU</a></li>
			</ul>
		</li>
		<li  onmouseover="showHide( 8 );" onmouseout="startTime();" ><a href="hw-dev-hw-dri-it.htm">Schede grafiche, driver e schermi</a>
			<ul class="sub-menu" id="sm8">
				<li><a href="hw-dev-hw-dri-it.htm#hd-ntfs3g">Scrivere su partizioni NTFS con ntfs-3g</a></li>
				<li><a href="hw-dev-mon-it.htm#mon-res">Risoluzione dello schermo e tipi di schermi</a></li>
				<li><a href="hw-dev-mon-it.htm#xrandr">Doppio schermo e xrandr</a></li>
				<li><a href="hw-dev-mon-it.htm#mon-binary">Doppio schermo (usando i driver binari)</a></li>
				<li><a href="hw-dev-hw-dri-it.htm#non-free-3d">Binari, driver non-liberi per: nVidia</a></li>
				<li><a href="hw-dev-hw-dri-it.htm#non-free-3d-2">Driver non-liberi per ATI, Radeon ed altri</a></li>
				<li><a href="hw-dev-hw-dri-it.htm#non-free-firmware">Hardware che necessita di driver e firmware non-liberi</a></li>
				<li><a href="hw-dev-hw-dri-it.htm#non-free">Aggiungere non-free al Sources List</a></li>
				<li><a href="hw-dev-hw-dri-it.htm#native-nv-ati">Driver xorg open source per nVidia, ATI, Radeon, Intel</a></li>
			</ul>
		</li>
		<li  onmouseover="showHide( 9 );" onmouseout="startTime();" ><a href="wm-kde-it.htm">Gestori di finestre</a>
			<ul class="sub-menu" id="sm9">
				<li><a href="wm-xfce-it.htm#xfce-notes">Aggiunte utili per Xfce</a></li>
				<li><a href="wm-kde-it.htm#install-add">Aggiunte utili per KDE</a></li>
				<li><a href="wm-kde-it.htm#desk-freeze">Blocchi del desktop</a></li>
				<li><a href="wm-kde-it.htm#kde-login">Impossibilità ad entrare in KDE</a></li>
				<li><a href="wm-kde-it.htm#ch-th">Cambiare i temi</a></li>
			</ul>
		</li>
		<li  onmouseover="showHide( 10 );" onmouseout="startTime();" ><a href="lamp-apache-it.htm">LAMP in sidux</a>
			<ul class="sub-menu" id="sm10">
				<li><a href="ntp-server-it.htm#ntp-server">Impostazione time server</a></li>
				<li><a href="lamp-apache-it.htm#serv-apache">LAMP in sidux</a></li>
				<li><a href="lamp-apache-it.htm#serv-ftp">Client FTP</a></li>
				<li><a href="lamp-apache-it.htm#serv-sec">Protocolli di sicurezza</a></li>
				<li><a href="lamp-apache-it.htm#serv-ssl">SSL</a></li>
				<li><a href="lamp-sql-it.htm#serv-mysql">Impostazione di MySQL</a></li>
				<li><a href="lamp-ppp-it.htm#serv-php">PHP in Apache</a></li>
			</ul>
		</li>
		<li  onmouseover="showHide( 11 );" onmouseout="startTime();" ><a href="internet-connecting-it.htm">Internet e reti</a>
			<ul class="sub-menu" id="sm11">
				<li><a href="tor-privoxy-it.htm#tor">Tor</a></li>
				<li><a href="tor-privoxy-it.htm#privoxy">Privoxy</a></li>
				<li><a href="internet-connecting-it.htm#firewalls">Firewall</a></li>
				<li><a href="samba-it.htm#configure">Configurare Samba (Windows)</a></li>
				<li><a href="samba-it.htm#setup">Impostazione samba-server</a></li>
				<li><a href="ssh-it.htm#ssh-fs">SSH Mount da remoto</a></li>
				<li><a href="ssh-it.htm#ssh-x">Applicazioni X-window attraverso SSH</a></li>
				<li><a href="ssh-it.htm#ssh-f">Interfaccia grafica SSH con Konqueror</a></li>
				<li><a href="ssh-it.htm#ssh-w">SSH X-forwarding da un PC Windows</a></li>
				<li><a href="ssh-it.htm#ssh">SSH e sicurezza</a></li>
				<li><a href="internet-connecting-it.htm#dial-mod">Modem 56k</a></li>
				<li><a href="internet-connecting-wpagui-it.htm#wpa-roaming-gui">WiFi - roaming WPA-GUI</a></li>
				<li><a href="internet-connecting-wpa-it.htm#wpa-basic">WiFi - guida base per il setup</a></li>
				<li><a href="internet-connecting-wpa-it.htm#wpa">WiFi - wpasupplicant</a></li>
				<li><a href="internet-connecting-it.htm#netcardconfig">Attivare una connessione di rete con "Ceni"</a></li>
			</ul>
		</li>
		<li  onmouseover="showHide( 12 );" onmouseout="startTime();" ><a href="sys-admin-apt-it.htm">Dist-upgrade e gestione dei pacchetti</a>
			<ul class="sub-menu" id="sm12">
				<li><a href="sys-admin-apt-it.htm#apt-cook">APT - Guida rapida lista depositi del software</a></li>
				<li><a href="sys-admin-apt-it.htm#apt-install">Installare un nuovo pacchetto</a></li>
				<li><a href="sys-admin-apt-it.htm#apt-delete">Eliminare un pacchetto</a></li>
				<li><a href="sys-admin-apt-it.htm#apt-downgrade">Effettuare il downgrade o il pin di un pacchetto</a></li>
				<li><a href="sys-admin-apt-it.htm#apt-cache">Cercare un pacchetto con apt-cache</a></li>
				<li><a href="sys-admin-apt-it.htm#gui-pacsea">Cercare un pacchetto tramite interfaccia grafica</a></li>
				<li><a href="siduxcc-it.htm#hermes">sidux-hermes</a></li>
				<li><a href="sys-admin-upgrade-it.htm#live-cd-upgrade">Aggiornare un sistema attraverso il live ISO</a></li>
				<li><a href="sys-admin-apt-locarmirr-it.htm#approx">Fare il dist-upgrade di più PC in rete</a></li>
				<li><a href="sys-admin-kern-upg-it.htm#kern-upgrade">Aggiornare il kernel</a></li>
				<li><a href="sys-admin-apt-it.htm#apt-upgrade">Aggiornare un sistema installato - dist-upgrade - Panoramica</a></li>
				<li><a href="sys-admin-apt-it.htm#du-st">Aggiornare un sistema installato - dist-upgrade - Passi da fare</a></li>
			</ul>
		</li>
		<li  onmouseover="showHide( 13 );" onmouseout="startTime();" ><a href="sys-admin-gen-it.htm">Amministrazione del sistema</a>
			<ul class="sub-menu" id="sm13">
				<li><a href="hd-install-it.htm#adduser">Aggiungere un nuovo utente</a></li>
				<li><a href="home-it.htm#home-bu">Spostare la directory "home"</a></li>
				<li><a href="siduxcc-it.htm#siduxcc">Centro di controllo sidux</a></li>
				<li><a href="sys-admin-rdiff-it.htm#rdiff">Backup con rdiff</a></li>
				<li><a href="sys-admin-rsync-it.htm#rsync">Backup con rsync</a></li>
				<li><a href="vir-rkits-it.htm#virus-rkits">Controllo virus e root kit</a></li>
				<li><a href="sys-admin-gen-it.htm#start-services">Abilitare e disabilitare servizi</a></li>
				<li><a href="sys-admin-gen-it.htm#pw-lost">Recupero della password di root</a></li>
				<li><a href="sys-admin-gen-it.htm#fonts">Font</a></li>
				<li><a href="sys-admin-gen-it.htm#cups">CUPS</a></li>
				<li><a href="sys-admin-gen-it.htm#init">sidux runlevel - init</a></li>
				<li><a href="sys-admin-grub-bootman2-it.htm#mbr-grub-boot">MBR: sovrascrittura del settore di boot</a></li>
				<li><a href="sys-admin-grub-bootman2-it.htm#dual-boot">Avvio doppio o multiplo</a></li>
				<li><a href="bios-freedos-it.htm#bois-prep">Aggiornare il BIOS con FreeDOS</a></li>
				<li><a href="sys-admin-grub-bootman2-it.htm#boot-grub-floppy">Creare un floppy di avvio</a></li>
				<li><a href="sys-admin-grub-bootman2-it.htm#remove-grub">Rimuovere grub dall'MBR</a></li>
				<li><a href="sys-admin-grub-bootman2-it.htm#what-is-grub">Grub, il gestore dell'avvio</a></li>
			</ul>
		</li>
	</ul>
<!-- menu ends here --> </div>
<div id="main-page">
	<div class="divider" id="ntp-server">
			<h2 id="top-header">Configurazione Timeserver</h2>


				<p>Per prima cosa in console come root digitare:</p>
<pre>
apt-cache search ntp
apt-get update &amp;&amp; apt-get install  ntp ntp-doc
update-rc.d -f ntp defaults

avviare update-rc.d, dopo aver fatto un po' di configurazione
</pre>

				<p>Sul sistema si trova la documentazione a:</p>
<pre>
/usr/share/doc/ntp-doc/html/index.html

eventualmente aggiungerlo ai segnalibri!
</pre>


				<p>Quello di cui sopra è una documentazione molto ampia e non avremo bisogno di tutto il suo contenuto.</p>

				<p>ntp si attiverà solo al riavvio, ma prima si dovrebbe impostare l'ora quanto più esatta possibile.</p>

				<p>ntp preleverà gli orari dalla lista di server presente in /etc/ntp.conf, che è il file principale da modificare.</p>
				<p>Sia ntpdate che il demone ntpd [chiamato ntp] ottengono la lista di timeserver dall'inizio di /etc/ntp.conf, come esempio ecco una lista:</p>

<pre>
 pool.ntp.org maps to more than 100 low-stratum NTP servers.
# Your server will pick a different set every time it starts up.
#  *** Please consider joining the pool! ***
#  ***  <a href="http://www.pool.ntp.org/#join">http://www.pool.ntp.org/#join</a>  ***
server 192.168.3.24
server ntp.blueyonder.co.uk
server uk.pool.ntp.org
server 1.uk.pool.ntp.org
server 2.uk.pool.ntp.org
server 0.europe.pool.ntp.org
server 1.europe.pool.ntp.org
server 2.europe.pool.ntp.org
</pre>



				<p>Il primo è un'altra macchina presente sulla stessa rete, con a sua volta ntp in esecuzione (su di essa è "server 192.168.3.1")</p>
				<p>La seconda è il timeserver dell'ISP a cui si è connessi.</p>
				<p>Poi ci sono un po' di uk.pool.ntp.org, poi un po' di timeserver europei che potrebbero essere migliori. Comunque gli stessi isp-nameserver di solito sono anche timeserver, si può controllare eseguendo:</p>

<pre>
ntpdate -v
</pre>


				<p>Questo non cambierà nulla, ma restituirà un tempo-risultato, qualcosa tipo:</p>
<pre>
# ntpdate -v 192.168.3.24
19 Sep 19:09:27 ntpdate[13329]: ntpdate 4.2.2@1.1532-o Wed Aug  9 12:08:54 UTC 2006 (1)
</pre>


				<p>Se si vuole permettere alle macchine locali l'accesso:</p>
<pre>
# Gli utenti locali potranno interrogare il server ntp più a fondo.
restrict 127.0.0.1 nomodify
restrict 192.168.3.0/24
</pre>


				<p>Se si vuole fornire l'ora alla sottorete locale:</p>
<pre>
# Se si vuole fornire l'ora a tutta la sottorete locale, modificare la linea seguente.
# (Come sempre, l'indirizzo è solo un esempio.)
broadcast 192.168.3.255
</pre>


				<p>Il file ntp.conf è un po' strano, viene trattato come un diff se semplicemente ci si clicca sopra, prima di avviare ntp, si deve impostare il tempo, cioè:</p>
<pre>
# ntpdate -u -b uk.pool.ntp.org
19 Sep 19:19:33 ntpdate[15641]: step time server 62.3.200.116 offset 0.001523 sec
</pre>


				<p>Poi attivare ntp come servizio, affinché parta ad ogni boot (in pratica, ad ogni riavvio). Dopo un po' che ntp è stato avviato, fare:</p>
<pre>
ntpq -pn
</pre>


				<p>Se tutto è andato bene, si dovrebbe vedere qualcosa tipo:</p>
<pre>
# ntpq -pn
remote           refid      st t when poll reach   delay   offset  jitter
----------------------------------------------------------------------------
192.168.3.24    .INIT.          16 u    - 1024    0    0.000    0.000   0.000
+194.117.157.4   192.5.41.40      2 u   97  128  377    7.849    1.548  30.157
*82.219.3.1      195.66.241.2     2 u  101  128  377   17.755    0.794  24.722
 82.133.58.132   .INIT.          16 u    - 1024    0    0.000    0.000   0.000
+194.153.168.75  195.66.241.3     2 u   37  128  377   23.475    3.259  12.203
+82.68.126.114   209.81.9.7       2 u  101  128  377   44.567   -1.366  46.922
+194.88.2.88     194.159.73.44    3 u   90  128  377   17.208   -5.569  27.527
+130.226.232.145 213.112.52.151   3 u   89  128  377   62.130   -0.797  39.999
 127.127.1.0     .LOCL.          10 l   18   64  377    0.000    0.000   0.001
 192.168.3.255   .BCST.          16 u    -   64    0    0.000    0.000   0.001
</pre>


				<p>L'asterisco nella terza linea dell'esempio: *82.219.3.1, mostra il timeserver attivo, è la parte più importante. Significa che l'ora è esatta, e che è in uso la porta 123. Un esempio di linea iptables potrebbe essere:</p>
<pre>
# Network Time Protocol (NTP) Server
$IPT -A udp_inbound -p UDP -s 0/0 --destination-port 123 -j ACCEPT
$IPT -A INPUT -j ACCEPT -p tcp --dport 123
</pre>

	</div>
			<div id="rev">Content last revised 24/02/2009 1300 UTC </div>

</div>
</body>
</html>
