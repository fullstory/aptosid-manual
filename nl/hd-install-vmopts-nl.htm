<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
   "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
	<title>sidux Manuals - VM Installation Options</title>
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
	<style type="text/css" media="all">@import url("../lib/css-js/content.css");</style>
        <style type="text/css" media="all">@import url("../lib/css-js/menu.css");</style>
        <style type="text/css" media="print">@import url("../lib/css-js/print.css");</style>
        <link rel ="shortcut icon" href="../lib/favicon/manual.ico" />
        <script type="text/javascript" src="../lib/css-js/menu2.js"></script>
        <!--[if lt IE 8]>
        <link rel="stylesheet" type="text/css" href="../lib/css-js/ie_5-7_override.css">
        <![endif]-->
        <!--[if lt IE 7]>
        <link rel="stylesheet" type="text/css" href="../lib/css-js/ie_5-6_override.css">
        <![endif]-->
</head>
<body>
<!-- Last translation revision by bluewater 22/04/2009 1350hrs UTC -->
<div id="menu"> <!-- menu starts here nl lang maintainers eislon -->
<!--sidux-manual Operating System Manual menu-version-02.06.2010.05.04 -->
<!-- menu last updated by bluewater 2010.05.04 1530 hrs UTC -->
	<div id="menu-header">
	      <a href="http://sidux.com/"><img src="../lib/logos/manual-sidux-logo.png" title="Naar sidux.com forums and wiki" alt="sidux.com logo" /></a>
	</div>
	<ul id="top-list">
		<li><a href="manual-search-nl.htm#search-on"> <img src="../lib/logos/manual-search-22x22.png" title="Search Manual" alt="Search" />Zoeken Online Offline</a> </li>
		<li><a href="http://manual.sidux.com/meta-manual">Gemeenschap Software Selecties</a></li>
	</ul>
	<div id="flags-2">
			<a href="../flag-index.html"><img src="../lib/logos/sidux-lang-100x64.png" title="Kies een andere taal - Choose another language" alt="lang-switch" /></a>
	</div>
	<ul>
		<li  onmouseover="showHide( 1 );" onmouseout="startTime();" ><a href="welcome-nl.htm">sidux  OS handleiding</a>
			<ul class="sub-menu" id="sm1">
				<li><a href="welcome-nl.htm#welcome-gen">sidux OS handleiding</a></li>
				<li><a href="welcome-nl.htm#how-to">Hoe je deze handleiding kunt gebruiken</a></li>
				<li><a href="welcome-nl.htm#table-contents">Index</a></li>
				<li><a href="help-nl.htm#help-gen">Waar je hulp kunt krijgen</a></li>
				<li><a href="help-nl.htm#paste">IRC !paste</a></li>
				<li><a href="credits-nl.htm#cred-team">Credits</a></li>
				<li><a href="wel-quickstart-nl.htm#welcome-quick">sidux Snel Start Handleiding</a></li>
			</ul>
		</li>
		<li  onmouseover="showHide( 2 );" onmouseout="startTime();" ><a href="cd-dl-burning-nl.htm">ISO inhoud, releases, download mirrors en branden</a>
			<ul class="sub-menu" id="sm2">
				<li><a href="cd-content-nl.htm#cd-content">ISO inhoud en minimale systeemeisen</a></li>
				<li><a href="sys-admin-release-nl.htm#rolling">Upgrades voor ge√Ønstalleerde systemen</a></li>
				<li><a href="cd-dl-burning-nl.htm#download-sidux">sidux mirrors, de sidux-ISO downloaden</a></li>
				<li><a href="cd-dl-burning-nl.htm#md5">md5 Checksum</a></li>
				<li><a href="cd-dl-burning-nl.htm#burn-nero">Branden in Windows</a></li>
				<li><a href="cd-dl-burning-nl.htm#burn-linux">Branden in Linux</a></li>
				<li><a href="cd-no-gui-burn-nl.htm#burning-no-gui">burniso script</a></li>
				<li><a href="cd-no-gui-burn-nl.htm#burn-no-gui-gen">Branden zonder GUI</a></li>
			</ul>
		</li>
		<li  onmouseover="showHide( 3 );" onmouseout="startTime();" ><a href="live-mode-nl.htm">Live-ISO modus</a>
			<ul class="sub-menu" id="sm3">
				<li><a href="live-mode-nl.htm#rootpw">Root-wachtwoord op de sidux-Live- ISO</a></li>
				<li><a href="live-mode-nl.htm#live-cd-installsoft">Installatie van software in de Live- ISO modus</a></li>
				<li><a href="live-mode-nl.htm#ntfs-3g">Schrijven op NTFS-partities met ntfs-3g</a></li>
			</ul>
		</li>
		<li  onmouseover="showHide( 4 );" onmouseout="startTime();" ><a href="term-konsole-nl.htm">De Terminal/Konsole</a>
			<ul class="sub-menu" id="sm4">
				<li><a href="term-konsole-nl.htm#sux">  sux / sudo</a></li>
				<li><a href="term-konsole-nl.htm#term-kon">Terminal/Konsole</a></li>
				<li><a href="term-konsole-nl.htm#cli-help">Help voor de commando regel</a></li>
				<li><a href="help-nl.htm#init3-tools">Tools to know in text mode (tty) - init 3</a></li>
				<li><a href="term-konsole-nl.htm#term-cmds">Lijst van Terminal commando's</a></li>
				<li><a href="term-konsole-nl.htm#shell-scripts">Installeer Scripts.sh</a></li>
			</ul>
		</li>
		<li  onmouseover="showHide( 5 );" onmouseout="startTime();" ><a href="cheatcodes-nl.htm">Boot Cheatcodes</a>
			<ul class="sub-menu" id="sm5">
				<li><a href="cheatcodes-nl.htm#cheatcodes">sidux specifieke Live-ISO Cheatcodes</a></li>
				<li><a href="cheatcodes-nl.htm#cheatcodes-linux">Linux algemene Cheatcodes</a></li>
				<li><a href="cheatcodes-vga-nl.htm#vga">VGA Codes</a></li>
			</ul>
		</li>
		<li  onmouseover="showHide( 6 );" onmouseout="startTime();" ><a href="part-gparted-nl.htm">Partitioneren van je harddisk</a>
			<ul class="sub-menu" id="sm6">
				<li><a href="part-gparted-nl.htm#partition">Partitioneren van je HD dmv  GParted/KDE Partition Manager</a></li>
				<li><a href="part-gparted-nl.htm#ntfs">NTFS partitie vergroten/verkleinen mbv GParted/KDE Partition Manager</a></li>
				<li><a href="part-uuid-nl.htm#uuid">UUID, Partitie Labelling en fstab</a></li>
				<li><a href="part-cfdisk-nl.htm#disknames">Namen van de fysieke harde schijven</a></li>
				<li><a href="part-cfdisk-nl.htm#partition">Partitioneren van je HD dmv cfdisk</a></li>
				<li><a href="part-cfdisk-nl.htm#formating">Formatteren na partitioneren mbv cfdisk</a></li>
				<li><a href="part-size-examp-nl.htm#part-example">Voorbeelden van partitie groottes</a></li>
			</ul>
		</li>
		<li  onmouseover="showHide( 7 );" onmouseout="startTime();" ><a href="hd-install-nl.htm">Installatie opties</a>
			<ul class="sub-menu" id="sm7">
				<li><a href="hd-install-nl.htm#Inst-prep">Installatie voorbereiden</a></li>
				<li><a href="hd-install-nl.htm#Installation">Installeren naar je HD</a></li>
				<li><a href="hd-install-nl.htm#first-hd-boot">De eerste keer opstarten</a></li>
				<li><a href="hd-install-opts-nl.htm#fromiso">Opstarten middels 'fromiso' - Overview</a></li>
				<li><a href="hd-install-opts-nl.htm#fromiso-grub-leg">Booting 'fromiso' with grub-legacy</a></li>
				<li><a href="hd-install-opts-nl.htm#grub2-fromiso">Booting 'fromiso' with Grub 2</a></li>
				<li><a href="hd-install-opts-nl.htm#fromiso-persist">fromiso en persist</a></li>
				<li><a href="hd-install-opts-nl.htm#usb-hd">Installeren op een USB-HD - sidux specific - sidux-on-stick</a></li>
				<li><a href="hd-ins-opts-oos-nl.htm#raw-usb">Writing sidux to a USB/SSD stick with any Linux, MS Windows or Mac OS X system</a></li>
				<li><a href="nbdboot-nl.htm#nbd1">Booting sidux over a network</a></li>
				<li><a href="hd-install-vmopts-nl.htm#vm">Virtual Machine installation options</a></li>
			</ul>
		</li>
		<li  onmouseover="showHide( 8 );" onmouseout="startTime();" ><a href="hw-dev-hw-dri-nl.htm">Grafische kaarten, monitoren, Xorg &amp; varia Drivers</a>
			<ul class="sub-menu" id="sm8">
				<li><a href="hw-dev-hw-dri-nl.htm#hd-ntfs3g">Schrijven op NTFS-partities met ntfs-3g</a></li>
				<li><a href="hw-dev-mon-nl.htm#mon-res">Schermresolutie en monitor</a></li>
				<li><a href="hw-dev-mon-nl.htm#xrandr">Dual Monitors en xrandr</a></li>
				<li><a href="hw-dev-mon-nl.htm#mon-binary">Dual Monitors (gebruikmakend van binaries)</a></li>
				<li><a href="hw-dev-hw-dri-nl.htm#non-free-3d">Binaries, niet-gratis drivers voor Nvidia &amp; xorg.conf</a></li>
				<li><a href="hw-dev-hw-dri-nl.htm#non-free-3d-2">non-free drivers voor ATI, Radeon en andere</a></li>
				<li><a href="hw-dev-hw-dri-nl.htm#non-free-firmware">Hardware die non-free firmware drivers benogigd</a></li>
				<li><a href="hw-dev-hw-dri-nl.htm#non-free">non-free aan Sources lijst toevoegen</a></li>
				<li><a href="hw-dev-hw-dri-nl.htm#native-nv-ati">FOSS xorg drivers voor nVidia, ATI, Radeon, Intel &amp; xorg.conf</a></li>
			</ul>
		</li>
		<li  onmouseover="showHide( 9 );" onmouseout="startTime();" ><a href="wm-kde-nl.htm">Window managers</a>
			<ul class="sub-menu" id="sm9">
				<li><a href="wm-xfce-nl.htm#xfce-notes">Handige Xfce extra's</a></li>
				<li><a href="wm-kde-nl.htm#install-add">Handige KDE extra's</a></li>
				<li><a href="wm-kde-nl.htm#desk-freeze">Desktop bevriest</a></li>
				<li><a href="wm-kde-nl.htm#kde-login">Kan niet in KDE aanloggen</a></li>
				<li><a href="wm-kde-nl.htm#ch-th">Thema veranderen</a></li>
				<li><a href="wm-kde-nl.htm#dm">Display Managers - dm</a></li>
			</ul>
		</li>
		<li  onmouseover="showHide( 10 );" onmouseout="startTime();" ><a href="lamp-apache-nl.htm">sidux LAMP Stack</a>
			<ul class="sub-menu" id="sm10">
				<li><a href="lamp-apache-nl.htm#serv-apache">sidux LAMP Stack</a></li>
				<li><a href="lamp-apache-nl.htm#serv-ftp">FTP Clients</a></li>
				<li><a href="lamp-apache-nl.htm#serv-sec">Beveiliging Protocollen</a></li>
				<li><a href="lamp-apache-nl.htm#serv-ssl">SSL</a></li>
				<li><a href="lamp-sql-nl.htm#serv-mysql">MySQL Instellen</a></li>
				<li><a href="lamp-ppp-nl.htm#serv-php">PHP in Apache</a></li>
				<li><a href="ntp-server-nl.htm#ntp-server">Tijdserver NTP instellen</a></li>
			</ul>
		</li>
		<li  onmouseover="showHide( 11 );" onmouseout="startTime();" ><a href="internet-connecting-nl.htm">Internet en netwerken</a>
			<ul class="sub-menu" id="sm11">
				<li><a href="internet-connecting-nl.htm#firewalls">Firewalls</a></li>
				<li><a href="tor-privoxy-nl.htm#tor">Tor</a></li>
				<li><a href="tor-privoxy-nl.htm#privoxy">Privoxy</a></li>
				<li><a href="samba-nl.htm#configure">Configureren van SAMBA (Windows)</a></li>
				<li><a href="samba-nl.htm#setup">Samba-Server instellen</a></li>
				<li><a href="ssh-nl.htm#ssh-fs">SSH Remote mounten</a></li>
				<li><a href="ssh-nl.htm#ssh-x">X Window Apps via SSH</a></li>
				<li><a href="ssh-nl.htm#ssh-f">GUI SSH mbv Konqueror</a></li>
				<li><a href="ssh-nl.htm#ssh-w">SSH X-doorsturen vanaf een Windows-PC</a></li>
				<li><a href="ssh-nl.htm#ssh">SSH en beveiliging</a></li>
				<li><a href="internet-connecting-nl.htm#dial-mod">56k modems</a></li>
				<li><a href="inet-wpagui-nl.htm#wpa-roaming-gui">WiFi - WPA_GUI</a></li>
				<li><a href="inet-setup-nl.htm#net-set1">WiFi - Setting up for WiFi Roaming</a></li>
				<li><a href="internet-connecting-wpa-nl.htm#wpa">WiFi - wpasupplicant</a></li>
				<li><a href="inet-ifplug-nl.htm#hotswitch">Network switching between WiFi and Cable</a></li>
				<li><a href="internet-connecting-nl.htm#netcardconfig">Online komen - Ceni</a></li>
			</ul>
		</li>
		<li  onmouseover="showHide( 12 );" onmouseout="startTime();" ><a href="sys-admin-apt-nl.htm">Actualisatie (dist-upgrade) en pakketbeheer</a>
			<ul class="sub-menu" id="sm12">
				<li><a href="sys-admin-apt-nl.htm#apt-cook">APT kookboek en sources list</a></li>
				<li><a href="sys-admin-apt-nl.htm#apt-install">Nieuw pakket installeren</a></li>
				<li><a href="sys-admin-apt-nl.htm#apt-delete">Een pakket verwijderen</a></li>
				<li><a href="sys-admin-apt-nl.htm#apt-downgrade">Downgraden Hold van een pakket</a></li>
				<li><a href="sys-admin-apt-nl.htm#apt-cache">Met apt-cache naar programmapakketten zoeken</a></li>
				<li><a href="sys-admin-apt-nl.htm#gui-pacsea">Grafisch zoekprogramma voor pakketten</a></li>
				<li><a href="sys-admin-upgrade-nl.htm#live-cd-upgrade">Upgraden dmv je Live- ISO</a></li>
				<li><a href="sys-admin-apt-locarmirr-nl.htm#approx">dist-upgrade of multiple PCs on a LAN</a></li>
				<li><a href="sys-admin-kern-upg-nl.htm#kern-upgrade">Upgraden van de kernel</a></li>
				<li><a href="sys-admin-kern-upg-nl.htm#dmakms">Installing kernel modules dynamically with dmakms</a></li>
				<li><a href="sys-admin-apt-nl.htm#apt-upgrade">Upgraden van een ge√Ønstalleerd systeem - dist-upgrade - Overview</a></li>
				<li><a href="sys-admin-apt-nl.htm#du-st">Upgraden van een ge√Ønstalleerd systeem -  dist-upgrade - The Steps</a></li>
			</ul>
		</li>
		<li  onmouseover="showHide( 13 );" onmouseout="startTime();" ><a href="sys-admin-gen-nl.htm">Systeembeheer</a>
			<ul class="sub-menu" id="sm13">
				<li><a href="hd-install-nl.htm#adduser">Nieuwe gebruiker toevoegen</a></li>
				<li><a href="home-nl.htm#home-bu">Verplaatsen van /home</a></li>
				<li><a href="sys-admin-rdiff-nl.htm#rdiff">Backup met rdiff</a></li>
				<li><a href="sys-admin-rsync-nl.htm#rsync">Backup met rsync</a></li>
				<li><a href="vir-rkits-nl.htm#virus-rkits">Virus en rootkit scanners</a></li>
				<li><a href="sys-admin-gen-nl.htm#start-services">Services-diensten (de)activeren</a></li>
				<li><a href="sys-admin-gen-nl.htm#pw-lost">Root wachtwoord vergeten</a></li>
				<li><a href="sys-admin-gen-nl.htm#fonts">Lettertypes</a></li>
				<li><a href="sys-admin-gen-nl.htm#cups">CUPS - Printing System</a></li>
				<li><a href="sys-admin-gen-nl.htm#sound">Geluid Mixers (Sound Mixers)</a></li>
				<li><a href="sys-admin-gen-nl.htm#init">sidux runlevels - init</a></li>
				<li><a href="bios-freedos-nl.htm#bois-prep">BIOS-upgrade met FreeDOS</a></li>
				<li><a href="sys-admin-grub-bootman2-nl.htm#boot-grub-floppy">Aanmaken van een boot-diskette</a></li>
				<li><a href="sys-admin-grub-bootman2-nl.htm#mbr-grub-boot">Grub1 - MBR bootsector overschreven</a></li>
				<li><a href="sys-admin-grub-bootman2-nl.htm#dual-boot">Grub1 - Dual- en multibooting</a></li>
				<li><a href="sys-admin-grub-bootman2-nl.htm#remove-grub">Grub uit de MBR verwijderen</a></li>
				<li><a href="sys-admin-grub-bootman2-nl.htm#what-is-grub">Grub de bootmanager</a></li>
				<li><a href="sys-admin-grub2-nl.htm#mbr-over-grub2">Grub2 - MBR Overwritten</a></li>
				<li><a href="sys-admin-grub2-nl.htm#multi-os">Grub2 - Dual and Multibooting</a></li>
				<li><a href="sys-admin-grub2-nl.htm#grub1-grub2">Grub2 -Upgrading from Grub1</a></li>
				<li><a href="sys-admin-grub2-nl.htm#grub2">Grub2 - Overview</a></li>
			</ul>
		</li>
	</ul>
<!-- menu ends here --> </div>
<div id="main-page">
		<div class="divider" id="vmopts">
				<h2 id="top-header">Virtual Machine options</h2>

						<ul>
							<li><a href="hd-install-vmopts-nl.htm#kvm">KVM for Intel VT or AMD-V</a></li>
							<li><a href="hd-install-vmopts-nl.htm#vbox">Virtualbox</a></li>
							<li><a href="hd-install-vmopts-nl.htm#qemu">QEMU</a></li>

						</ul>
		      </div>
		      <div class="divider" id="kvm">
				<h2>Booting and installing sidux to a KVM Virtual Machine</h2>
							<p>KVM is a full virtualisation solution for Linux on x86 hardware containing virtualisation extensions (Intel VT or AMD-V).</p>

				      <h3>Prerequisites</h3>

							<p>To ascertain whether your hardware supports KVM, ensure that KVM is enabled in the BIOS (in some cases on an Intel VT or AMD-V system it may not evident as to where the switch is, therefore assume that it is in a KVM state). The way to check is in a console run:</p>
<pre>
cat /proc/cpuinfo | egrep --color=always 'vmx|smx'
</pre>
							<p>If you see <span class="highlight-3">smx</span> or <span class="highlight-3">vmx</span> in the cpu flags field, your system supports KVM. (Otherwise go back to the BIOS if you believe it is supported and check again, else search the internet as to where in the BIOS menus KVM 'enable' could be hiding).</p>

							<p>Should your BIOS not support KVM refer to <a href="hd-install-vmopts-nl.htm#vbox">Virtualbox</a>
							 or <a href="hd-install-vmopts-nl.htm#qemu">QEMU</a></p>

							<p>To install and run KVM, firstly ensure that Virtualbox modules are not loaded, (--purge them is the best option), then depending on your chipset:</p>

							<p>For <span class="highlight-3">vmx</span>:</p>
<pre>
apt-get install qemu-kvm
modprobe kvm_intel
</pre>
							<p>For <span class="highlight-3">smx</span>:</p>
<pre>
apt-get install qemu-kvm
modprobe kvm_amd
</pre>
							 <p>Another option is reboot as the qemu-kvm initscripts will take care of loading the modules.</p>

					  <h4>Using KVM to boot a sidux-*.iso</h4>

							<p><span class="highlight-2">As user:</span></p>
<pre>
$ kvm -net nic,model=virtio -net user -soundhw ac97 -m 512 -monitor stdio -cdrom &lt;sidux.iso&gt;
</pre>

				<h5>Installing a sidux-*.iso to a KVM image</h5>
							<p>First create a hard disk image, (this image will be minimal and only grow as required due to qcow2 compression ratios):</p>
<pre>
$ qemu-img create -f qcow2 sidux-2010-*-.img 12G
</pre>

							<p>Boot the sidux-*.iso with the following parameters to enable KVM to recognise that there is an QEMU hard disk image available:</p>
<pre>
$ kvm -net nic,model=virtio -net user -soundhw ac97 -m 512 -monitor stdio -cdrom &lt;/path/to/sidux.iso&gt; -boot d &lt;/path/to/sidux-20xx-*-.img&gt;
</pre>

							<p>Once the cdrom has booted up click on the sidux installer icon to activate the installer, (or use the menu), click on the Partitioning tab and you should see on the left hand side a box that has a disk ready for partitioning and formatting, most likely noted as <span class="highlight-3"> /dev/sda</span>. Underneath that are the options for partitioning, choose gparted.</p>

	<div class="screenshot"><img src="../lib/images-common/images-vm/kvm-gparted02.png" title="gparted kvm hard disk naming" alt="gparted kvm hard disk naming" /></div>
	<div class="spacer02"></div>

							<p>In the Gparted menu you can confirm that Gparted sees the image with <span class="highlight-3">View>Device Information</span> which should state it is a <span class="highlight-3">ATA QEMU Harddisk</span> and most likely noted as <span class="highlight-3"> /dev/sda</span>,(in this example), as this will be crucial when moving back to the installer and choosing where to put Grub, as it needs to go to <span class="highlight-3"> /dev/sda</span>.</p>

							<p>Next, in the <span class="highlight-3">Partition</span> menu choose <span class="highlight-3"> Device>Create Partiton Table</span> and create the partition table. </p>

							<p>Then format the partition table with ext4 and also include a swap of 2 gig. The formatting will take time so be patient.</p>

							<p>After formatting has completed, click OK to be returned to the installer and proceed as if you are performing a standard install, (again, be patient). <span class="highlight-2">Note: Install the Grub to /dev/sda</span>.</p>

							<p>You now have a sidux-*-VM ready for use:</p>

<pre>
$ kvm -net nic,model=virtio -net user -soundhw ac97 -m 512 -monitor stdio -drive if=virtio,boot=on,file=&lt;absolute/path/to/sidux-20xx-*.img&gt;
</pre>

							<p>If the guest does not support virtio, or you do not specify an absolute path,  use:</p>
<pre>
$ kvm -net nic,model=virtio -net user -soundhw ac97 -m 512 -monitor stdio -hda &lt;/path/to/sidux-20xx-*.img&gt;
</pre>
							<p>See also:</p>
<pre>
$ man kvm
</pre>
				<h5>Managing your KVM virtual machine installations</h5>
<pre>
apt-get install aqemu
</pre>
							<p>When using AQEMU ensure that you choose the KVM mode from the drop down box for 'Emulator Type' in the 'General' tab. (Documentation for AQEMU is basically non existent, therefore a few 'trials by error' will be required to figure out the easy to use GUI, however a good start is to use first use the 'VM' menu followed by the 'General' tab.</p>

	</div>
	<div class="divider" id="vbox">
		<h2>Booting and installing sidux to a VirtualBox Virtual Machine</h2>
							<p>De Stappen:</p>
						<ul>
 							<li>1. creeer een harddisk image voor VirtualBox</li>
 							<li>2. start de ISO op met VirtualBox</li>
 							<li>3. installeren op de harddisk image</li>
						</ul>

				<h4>Vereisten</h4>
							<p><span class="highlight-3">Aanbevolen RAM: 1 GB </span>: Ideaal zou zijn 512 MB voor het gast os en 512 MB voor de host. (het kan op minder draaien, maar verwacht dan geen enorme performance).</p>

							<p><span class="highlight-3">Hard disk ruimte:</span> VirtualBox zelf heeft niet veel nodig, bij een normale installatie ongeveer 30 MB harddisk ruimte. De virtual machines zullen echter veel grotere bestanden op de harddisk opeisen, deze ziet de virtual machine dan als zijn eigen harddisk. Dus, om bijvoorbeeld MS Windows XP (TM) te installeren, zul je een bestand nodig hebben van meerdere GBs! Voor sidux in een VirtualBox is ca. 5 GB ruimte nodig voor je image en een swap allocation.</p>

				<h3>Installatie:</h3>

<pre>
apt-get update
apt-get install virtualbox-ose-qt virtualbox-ose-source dmakms module-assistant
</pre>
							<p>Bereid de module voor:</p>
<pre>
m-a prepare
m-a a-i virtualbox-ose-source
</pre>
							<p>Activeer dan de Dynamic Module-Assistant Kernel Module Support voor virtualbox, zodat de volgende keer de Linux kernel geupdate wordt zodat de virtualbox module ook voorbereid wordt, zonder handmatige acties. Omdit te doen, voer je toe <span class="highlight-3">virtualbox-ose-source</span> aan de <span class="highlight-3">/etc/default/dmakms </span>configuratie bestand. </p>
<pre>
mcedit /etc/default/dmakms
virtualbox-ose-source
</pre>

							<p>herstart hierna de computer.</p>

							<p><a href="sys-admin-kern-upg-nl.htm#dmakms">Dit is een belangrijk leesstuk voor dmakms</a></p>

					<h3>Het installeren van sidux in een virtual machine</h3>
							<p>Gebruik de virtualbox wizard om een nieuwe virtual machine voor sidux te cre√´ren. Volg dan de instructies voor een normale sidux installatie.</p>

							<p><a href="http://www.virtualbox.org/">VirtualBox heeft een goed gedocumenteerde PDF Help document, deze kun je vanaf hun site downloaden.</a> </p>

	</div>
	<div class="divider" id="qemu">
		<h2>Booting and installing sidux to a QEMU Virtual Machine</h2>

		<ul>
 			<li>1. Creeer een harddiskimage voor qemu</li>
 			<li>2. Start de ISO op met qemu</li>
 			<li>3. Installeer op de image</li>

		</ul>

							<p>A QT GUI tool is available to help you configure QEMU:</p>
<pre>
apt-get install qtemu
</pre>

 				<h4>Het cre√´ren van de harddisk image</h4>

				<p>Om qemu op te starten heb je een harddisk image nodig. Dit is een bestand welke de inhoud van de ge√´muleerde harddisk opslaat.</p>

				<p>Gebruik het volgende commando:</p>
<pre>
qemu-img create -f qcow sidux.qcow 3G
</pre>
				<p>Om het image file genaamd "sidux.qcow" te cre√´ren. De "3G" parameter specificeerd de grote van de disk - in dit geval 3 GB. Je kunt de waarde M gebruiken voor megabytes (bijvoorbeeld "256M"). Je moet je geen zorgen maken over de disk grootte - het qcow formaat comprimeerd de image zo dat de lege ruimte niet aan de grootte van het bestand wordt toegevoegd.</p>


			<h4>Installeren van het besturingssysteem</h4>

				<p>Dit is de eerste keer dat je de emulator moet starten. Let op: wanneer je in het qemu venster klikt, wordt de muispointer gebruikt in dit venster. Om deze weer 'terug' te krijgen, moet je op Ctrl+Alt drukken.</p>

				<p>Indien je een opstartdiskette nodig hebt, start dan Qemu als volgt op:</p>
<pre>
qemu -floppy sidux.iso -net nic -net user -m 512 -boot d sidux.qcow
</pre>
				<p>Indien je CD-ROM opstartbaar is, start dan Qemu als volgt op:</p>
<pre>
qemu -cdrom sidux.iso -net nic -net user -m 512 -boot d sidux.qcow
</pre>
				<p>Installeer nu sidux alsof je een installatie uitvoert op een echte harddisk.</p>


			<h4>Het systeem starten</h4>

				<p>Om het systeem te starten voer je het volgende commando uit:</p>
<pre>
qemu [hd_image]
</pre>
				<p>Het is een goed idee om overlay images te gebruiken. Op deze manier hoef je maar 1 keer een harddisk image te cre√´ren en vertel je Qemu om wijzigingen op te slaan in een extern bestand. Zo kom je van alle instabiliteit af, omdat je altijd terug kunt naar de vorige systeem status.</p>

				<p>Het cre√´eren van een overlay image, doe je als volgt:</p>
<pre>
qemu-img create -b [[base''image]] -f qcow [[overlay''image]]
</pre>
				<p>Vervang de harddisk image = base_image door, in ons geval sidux.qcow. Hierna start je qemu middels het commando:</p>
<pre>
qemu [overlay_image]
</pre>
				<p>De originele image wordt hierdoor niet gebruikt. Een probleem, de base image kan niet hernoemd of verplaatst worden, want de overlay onthoudt het volledige pad naar de base image.</p>


			<h4>Gebruik maken van een echte partitie als een enkele primaire partitie voor de hard disk image</h4>

				<p>Soms wil je een systeem partitie gebruiken met qemu (Bijvoorbeeld, als je wilt opstarten van je echte systeem of om qemu een speciale partitie te laten gebruiken als zijn root partitie). Je kunt dit doen door gebruik te maken van software RAID in lineaire mode (je hebt de linear.ko kernel driver nodig) en een loopback device: de truck is dat je dynamisch een master boot record (MBR) append aan een echte partitie welke je aan de qemu raw disk image wilt koppelen.</p>

				<p>Stel je voor dat je een unmounted /dev/sdaN partitie met een bestandssysteem hebt welke je deel wilt maken van een qemu disk image. Als eerste moet je een klein bestand aanmaken waarin de MBR komt te staan, dit doen we met het volgende commando:</p>
<pre>
dd if=/dev/zero of=/path/to/mbr count=32
</pre>
				<p>Hier wordt een 16 KB (32 * 512 bytes) bestand aangemaakt. Het is belangrijk om het bestand niet te klein te maken (ook al heeft de MBR maar 512 bytes nodig), omdat hoe kleiner het bestand is, deze te kleiner moet de chunk size van de software RAID device zijn, wat weer invloed kan hebben op de performance. Hierna maak je een loopback device aan in de MBR bestand, middels:</p>
<pre>
losetup -f /path/to/mbr
</pre>
				<p>Laten we aannemen dat het resulterende resultaat het device /dev/loop0 is, omdat we toch nog niet van een andere loopback devices gebruik maakten. De volgende stap is om de "merged" MBR + /dev/sdaN disk image te gebruiken als software RAID:</p>
<pre>
 modprobe linear
 mdadm --build --verbose /dev/md0 --chunk=16 --level=linear --raid-devices=2 /dev/loop0 /dev/sdaN
</pre>
				<p>De aangemaakte /dev/md0 is wat je gaat gebruiken als  qemu raw disk image (vergeet niet om de rechten goed te zetten, zodat qemu bij het bestand kan). De laatste stap (een beetje moeilijke) is het zetten van de disk configuratie (disk geometry en partitie tabellen) zo dat de primary partitie start punt in de MBR overeenkomt met de /dev/sdaN in de /dev/md0 (een offset van precies 16 * 512 = 16384 bytes in dit voorbeeld). Doe dit door gebruik te maken van fdisk op de host machine, niet in de emulator: de standaard raw disc detectie routine van qemu resulteert vaak in een niet-kilobyte afgeronde offsets (zoals 31.5 KB, zoals weer gegeven in vorige sectie) dit kan niet gemanaged worden door de software RAID code. Doe het volgende vanaf het hostsysteem:</p>
<pre>
 fdisk /dev/md0
</pre>
				<p>Hier cre√´ren we een enkele primaire partitie welke overeenkomt met /dev/sdaN, en spelen hier met de 's'ector commando van het 'x'pert menu totdat we de eerste cylinder (waar de eerste partitie start), overeenkomt met de grote van de MBR. Daarna doen we een , 'w'rite om het geheel op te slaan en je bent klaar. Je hebt nu een partitie die je direct kunt mounten vanaf je hostsysteem, en ook als onderdeel van je qemu disk image en wel als volgt:</p>
<pre>
 qemu -hdc /dev/md0 [...]
</pre>
				<p>Je kunt natuurlijk op een veilige manier elke  bootloader op deze disk image zetten voor het gebruik met qemu, vooruitgesteld dat de originele /boot/sdaN partitie de benodigde tools bevat.</p>



			<h4>QEMU Acceleratie Module gebruiken</h4>

				<p>De ontwikkelaars van qemu hebben een optionele kernel module gemaakt om qemu sneller te laten lopen, soms bijna op je echte pc snelheid. Deze module moet je laden met de optie:</p>
<pre>
major=0
</pre>
				<p>Om het automatisch cre√´ren van de benodigde /dev/kqemu device uit te voeren, moet je het volgende commando gebruiken:</p>
<pre>
echo "options kqemu major=0" >> /etc/modprobe.conf
</pre>
				<p>Dit zal het bestand modprobe.conf aanpassen om ervoor te zorgen dat deze module optie elke keer wordt gebruikt bij het laden van deze module.</p>

<pre>
qemu [...] -kernel-kqemu
</pre>
				<p>Dit activeert de volledige virtualisatie en zal de snelheid behoorlijk verbeteren.</p>

			<h4>Om qemu te activeren doen we:</h4>
<pre>
qemu -cdrom /tmp/pkg/sidux-debug.iso -net nic -net user -m 512
</pre>
		<p><a href="http://www.nongnu.org/qemu/user-doc.html">De offici√´le documentatie van het QEMU Project </a> </p>
		<p><a href="http://wiki.archlinux.org/index.php/Qemu">Sommige teksten voor QEMU voor het sidux-handleiding was vanaf deze site onder GNU Free Documentation License 1.2 benaderd en veranderd voor deze sidux-handleiding</a> </p>


	</div>
	<div id="rev">Page last revised 13/04/2010 1450 UTC</div>

</div>
</body>
</html>
