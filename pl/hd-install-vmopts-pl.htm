<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
   "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
	<title>sidux Manuals - VM Installation Options</title>
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
	<style type="text/css" media="all">@import url("../lib/css-js/content.css");</style>
        <style type="text/css" media="all">@import url("../lib/css-js/menu.css");</style>
        <style type="text/css" media="print">@import url("../lib/css-js/print.css");</style>
        <link rel ="shortcut icon" href="../lib/favicon/manual.ico" />
        <script type="text/javascript" src="../lib/css-js/menu2.js"></script>
        <!--[if lt IE 8]>
        <link rel="stylesheet" type="text/css" href="../lib/css-js/ie_5-7_override.css">
        <![endif]-->
        <!--[if lt IE 7]>
        <link rel="stylesheet" type="text/css" href="../lib/css-js/ie_5-6_override.css">
        <![endif]-->
</head>
<body>
<!-- Last translation revision by bluewater 22/04/2009 1350hrs UTC -->
<div id="menu"> <!-- menu starts here pl lang maintainer neceron dongle-->
<!--sidux-manual Operating System Manual menu-version-02.06.2010.05.04 -->
<!-- menu last updated by bluewater 2010.05.04 1530 hrs UTC -->
	<div id="menu-header">
	      <a href="http://sidux.com/"><img src="../lib/logos/manual-sidux-logo.png" title="Przejdź do sidux.com, forum oraz wiki" alt="sidux.com logo" /></a>
	</div>
	<ul id="top-list">
		<li><a href="manual-search-pl.htm#search-on"> <img src="../lib/logos/manual-search-22x22.png" title="Search Manual" alt="Search" /> Szukaj</a> </li>
		<li><a href="http://manual.sidux.com/meta-manual">Porady społeczności </a></li>
	</ul>
	<div id="flags-2">
			<a href="../flag-index.html"><img src="../lib/logos/sidux-lang-100x64.png" title="Wybierz inny język" alt="lang-switch" /></a>
	</div>
	<ul>
		<li  onmouseover="showHide( 1 );" onmouseout="startTime();" ><a href="welcome-pl.htm">sidux - Wstęp</a>
			<ul class="sub-menu" id="sm1">
				<li><a href="welcome-pl.htm#welcome-gen">Wstęp</a></li>
				<li><a href="welcome-pl.htm#how-to">Jak korzystać z tej instrukcji?</a></li>
				<li><a href="welcome-pl.htm#table-contents">Spis treści</a></li>
				<li><a href="help-pl.htm#help-gen">Gdzie szukać pomocy?</a></li>
				<li><a href="help-pl.htm#paste">IRC !paste</a></li>
				<li><a href="credits-pl.htm#cred-team">Autorzy</a></li>
				<li><a href="wel-quickstart-pl.htm#welcome-quick">Szybki start z sidux</a></li>
			</ul>
		</li>
		<li  onmouseover="showHide( 2 );" onmouseout="startTime();" ><a href="cd-dl-burning-pl.htm">Zawartość płyty ISO. Wersje. Serwery lustrzane. Nagrywanie</a>
			<ul class="sub-menu" id="sm2">
				<li><a href="cd-content-pl.htm#cd-content">Zawartość ISO i wymagania systemowe</a></li>
				<li><a href="sys-admin-release-pl.htm#rolling">Aktualne ogłoszenia dotyczące aktualizacji</a></li>
				<li><a href="cd-dl-burning-pl.htm#download-sidux">Serwery lustrzane, pobieranie i nagrywanie</a></li>
				<li><a href="cd-dl-burning-pl.htm#md5">Suma kontrolna md5</a></li>
				<li><a href="cd-dl-burning-pl.htm#burn-nero">Nagrywanie obrazu w Windows</a></li>
				<li><a href="cd-dl-burning-pl.htm#burn-linux">Nagrywanie obrazu w Linux</a></li>
				<li><a href="cd-no-gui-burn-pl.htm#burning-no-gui">Skrypt burniso</a></li>
				<li><a href="cd-no-gui-burn-pl.htm#burn-no-gui-gen">Nagrywanie bez interfejsu graficznego</a></li>
			</ul>
		</li>
		<li  onmouseover="showHide( 3 );" onmouseout="startTime();" ><a href="live-mode-pl.htm">Tryb Live</a>
			<ul class="sub-menu" id="sm3">
				<li><a href="live-mode-pl.htm#rootpw">Hasło administratora w trybie Live</a></li>
				<li><a href="live-mode-pl.htm#live-cd-installsoft">Instalacja oprogramowania w trakcie sesji Live</a></li>
				<li><a href="live-mode-pl.htm#ntfs-3g">Zapis na partycji NTFS z ntfs-3g</a></li>
		</ul>
		</li>
		<li  onmouseover="showHide( 4 );" onmouseout="startTime();" ><a href="term-konsole-pl.htm">Terminal/Konsola</a>
			<ul class="sub-menu" id="sm4">
				<li><a href="term-konsole-pl.htm#sux">  sux / sudo</a></li>
				<li><a href="term-konsole-pl.htm#konsole">Terminal / Konsola</a></li>
				<li><a href="term-konsole-pl.htm#cli-help">Pomoc lini poleceń</a></li>
				<li><a href="help-pl.htm#init3-tools">Tools to know in text mode (tty) - init 3</a></li>
				<li><a href="term-konsole-pl.htm#term-cmds">Lista poleceń</a></li>
				<li><a href="term-konsole-pl.htm#shell-scripts">Skrypty.sh</a></li>
			</ul>
		</li>
		<li  onmouseover="showHide( 5 );" onmouseout="startTime();" ><a href="cheatcodes-pl.htm">Start systemu</a>
			<ul class="sub-menu" id="sm5">
				<li><a href="cheatcodes-pl.htm#cheatcodes">Opcje startowe sidux Live</a></li>
				<li><a href="cheatcodes-pl.htm#cheatcodes-linux">Standardowe opcje startowe</a></li>
				<li><a href="cheatcodes-vga-pl.htm#vga">Opcje startowe VGA</a></li>
			</ul>
		</li>
		<li  onmouseover="showHide( 6 );" onmouseout="startTime();" ><a href="part-gparted-pl.htm">Partycjonowanie dysku twardego</a>
			<ul class="sub-menu" id="sm6">
				<li><a href="part-gparted-pl.htm#partition">Partycjonowanie za pomocą  GParted/KDE Partition Manager</a></li>
				<li><a href="part-gparted-pl.htm#ntfs">Zmiana rozmiaru partycji NTFS za pomocą GParted/KDE Partition Manager</a></li>
				<li><a href="part-uuid-pl.htm#uuid">UUID, etykietowanie partycji i fstab</a></li>
				<li><a href="part-cfdisk-pl.htm#disknames">Nazewnictwo dysków w brief</a></li>
				<li><a href="part-cfdisk-pl.htm#partition">Partycjonowanie za pomocą cfdisk</a></li>
				<li><a href="part-cfdisk-pl.htm#formating">Formatowanie po partycjonowaniu za pomocą cfdisk</a></li>
			<li><a href="part-size-examp-pl.htm#part-example">Przykłady podziału dysku twardego na partycje</a></li>
		</ul>
		</li>
		<li  onmouseover="showHide( 7 );" onmouseout="startTime();" ><a href="hd-install-pl.htm">Instalacja systemu</a>
			<ul class="sub-menu" id="sm7">
				<li><a href="hd-install-pl.htm#Inst-prep">Przygotowanie do instalacji</a></li>
				<li><a href="hd-install-pl.htm#Installation">Instalacja na dysku twardym</a></li>
				<li><a href="hd-install-pl.htm#first-hd-boot">Pierwsze uruchomienie systemu</a></li>
				<li><a href="hd-install-opts-pl.htm#fromiso">Uruchamianie 'fromiso' - Overview</a></li>
				<li><a href="hd-install-opts-pl.htm#fromiso-grub-leg">Booting 'fromiso' with grub-legacy</a></li>
				<li><a href="hd-install-opts-pl.htm#grub2-fromiso">Booting 'fromiso' with Grub 2</a></li>
				<li><a href="hd-install-opts-pl.htm#fromiso-persist">fromiso i persist</a></li>
				<li><a href="hd-install-opts-pl.htm#usb-hd">Instalacja na nośniku USB - sidux specific - sidux-on-stick</a></li>
				<li><a href="hd-ins-opts-oos-pl.htm#raw-usb">Writing sidux to a USB/SSD stick with any Linux, MS Windows or Mac OS X system</a></li>
				<li><a href="nbdboot-pl.htm#nbd1">Booting sidux over a network</a></li>
				<li><a href="hd-install-vmopts-pl.htm#vm">Virtual Machine installation options</a></li>
			</ul>
		</li>
		<li  onmouseover="showHide( 8 );" onmouseout="startTime();" ><a href="hw-dev-hw-dri-pl.htm">Karty graficzne, monitory, Xorg &amp; sterowniki</a>
			<ul class="sub-menu" id="sm8">
				<li><a href="hw-dev-hw-dri-pl.htm#hd-ntfs3g">Zapisywanie na partycji NTFS z ntfs-3g</a></li>
				<li><a href="hw-dev-mon-pl.htm#mon-res">Rozdzielczość ekranu</a></li>
				<li><a href="hw-dev-mon-pl.htm#xrandr">Dwa monitory - xrandr</a></li>
				<li><a href="hw-dev-mon-pl.htm#mon-binary">Dwa monitory - xorg.conf</a></li>
				<li><a href="hw-dev-hw-dri-pl.htm#non-free-3d">Niewolne sterowniki nVidii &amp; xorg.conf</a></li>
				<li><a href="hw-dev-hw-dri-pl.htm#non-free-3d-2">Niewolne sterowniki do ATI, Radeon i innych</a></li>
				<li><a href="hw-dev-hw-dri-pl.htm#non-free-firmware">Hardware wymagający niewolnych sterowiników</a></li>
				<li><a href="hw-dev-hw-dri-pl.htm#non-free">Dodawanie non-free do Sources List</a></li>
				<li><a href="hw-dev-hw-dri-pl.htm#native-nv-ati">Sterowniki FOSS xorg do kart nVidia, ATI, Radeon, Intel &amp; xorg.conf</a></li>
			</ul>
		</li>
		<li  onmouseover="showHide( 9 );" onmouseout="startTime();" ><a href="wm-kde-pl.htm">Menadżery okien</a>
			<ul class="sub-menu" id="sm9">
				<li><a href="wm-xfce-pl.htm#xfce-notes">Poradnik Xfce</a></li>
				<li><a href="wm-kde-pl.htm#install-add">Przydatne aplikacje KDE</a></li>
				<li><a href="wm-kde-pl.htm#desk-freeze">Zawieszenia pulpitu</a></li>
				<li><a href="wm-kde-pl.htm#kde-login">Problemy z logowaniem do KDE</a></li>
				<li><a href="wm-kde-pl.htm#ch-th">Zmiana motywu</a></li>
				<li><a href="wm-kde-pl.htm#dm">Display Managers - dm</a></li>
			</ul>
		</li>
		<li  onmouseover="showHide( 10 );" onmouseout="startTime();" ><a href="lamp-apache-pl.htm">Konfiguracja serwera</a>
			<ul class="sub-menu" id="sm10">
				<li><a href="lamp-apache-pl.htm#serv-apache">LAMP</a></li>
				<li><a href="lamp-apache-pl.htm#serv-ftp">Klient FTP</a></li>
				<li><a href="lamp-apache-pl.htm#serv-sec">Protokoły bezpieczeństwa</a></li>
				<li><a href="lamp-apache-pl.htm#serv-ssl">SSL</a></li>
				<li><a href="lamp-sql-pl.htm#serv-mysql">Konfiguracja MySQL</a></li>
				<li><a href="lamp-ppp-pl.htm#serv-php">PHP w Apache</a></li>
				<li><a href="ntp-server-pl.htm#ntp-server">Konfiguracja serwera czasu</a></li>
			</ul>
		</li>
		<li  onmouseover="showHide( 11 );" onmouseout="startTime();" ><a href="internet-connecting-pl.htm">Internet i sieć</a>
			<ul class="sub-menu" id="sm11">
				<li><a href="tor-privoxy-pl.htm#tor">Tor</a></li>
				<li><a href="tor-privoxy-pl.htm#privoxy">Privoxy</a></li>
				<li><a href="internet-connecting-pl.htm#firewalls">Firewall</a></li>
				<li><a href="samba-pl.htm#configure">SAMBA - konfiguracja klienta</a></li>
				<li><a href="samba-pl.htm#setup">SAMBA - konfiguracja serwera</a></li>
				<li><a href="ssh-pl.htm#ssh-fs">SSH - montowanie zdalnych zasobów</a></li>
				<li><a href="ssh-pl.htm#ssh-x">SSH - aplikacje X Window</a></li>
				<li><a href="ssh-pl.htm#ssh-f">SSH - Konqueror</a></li>
				<li><a href="ssh-pl.htm#ssh-w">SSH - zdalny dostęp z Windows z przekazywaniem X</a></li>
				<li><a href="ssh-pl.htm#ssh">SSH - bezpieczeństwo</a></li>
				<li><a href="internet-connecting-pl.htm#dial-mod">Połączenie modemowe</a></li>
				<li><a href="inet-wpagui-pl.htm#wpa-roaming-gui">WiFi - WPA_GUI</a></li>
				<li><a href="inet-setup-pl.htm#net-set1">WiFi - Setting up for WiFi Roaming</a></li>
				<li><a href="internet-connecting-wpa-pl.htm#wpa">WiFi - wpasupplicant</a></li>
				<li><a href="inet-ifplug-pl.htm#hotswitch">Network switching between WiFi and Cable</a></li>
				<li><a href="internet-connecting-pl.htm#netcardconfig">Konfiguracja sieci przy pomocy Ceni</a></li>
			</ul>
		</li>
		<li  onmouseover="showHide( 12 );" onmouseout="startTime();" ><a href="sys-admin-apt-pl.htm">Aktualizacje i zarządzanie pakietami</a>
			<ul class="sub-menu" id="sm12">
				<li><a href="sys-admin-apt-pl.htm#apt-cook">Przewodnik po APT i sources.list</a></li>
				<li><a href="sys-admin-apt-pl.htm#apt-install">Instalowanie nowych pakietów</a></li>
				<li><a href="sys-admin-apt-pl.htm#apt-delete">Usuwanie pakietów</a></li>
				<li><a href="sys-admin-apt-pl.htm#apt-downgrade">Instalacja starszej wersji pakietu, wstrzymanie aktualizacji pakietu</a></li>
				<li><a href="sys-admin-apt-pl.htm#apt-cache">Wyszukiwanie pakietu za pomocą apt-cache</a></li>
				<li><a href="sys-admin-apt-pl.htm#gui-pacsea">Wyszukiwanie pakietu za pomocą Package Search</a></li>
				<li><a href="sys-admin-upgrade-pl.htm#live-cd-upgrade">Aktualizacja systemu przez sidux Live</a></li>
				<li><a href="sys-admin-apt-locarmirr-pl.htm#approx">dist-upgrade of multiple PCs on a LAN</a></li>
				<li><a href="sys-admin-kern-upg-pl.htm#kern-upgrade">Aktualizacja jądra systemu</a></li>
				<li><a href="sys-admin-kern-upg-pl.htm#dmakms">Installing kernel modules dynamically with dmakms</a></li>
				<li><a href="sys-admin-apt-pl.htm#apt-upgrade">Pełna aktualizacja systemu - Overview</a></li>
				<li><a href="sys-admin-apt-pl.htm#du-st">Pełna aktualizacja systemu -  dist-upgrade - The Steps</a></li>
			</ul>
		</li>
		<li  onmouseover="showHide( 13 );" onmouseout="startTime();" ><a href="sys-admin-gen-pl.htm">Administracja systemem</a>
			<ul class="sub-menu" id="sm13">
				<li><a href="hd-install-pl.htm#adduser">Dodawanie nowego użytkownika</a></li>
				<li><a href="home-pl.htm#home-bu">Przenoszenie folderów domowych</a></li>
				<li><a href="sys-admin-rdiff-pl.htm#rdiff">Tworzenie kopii zapasowej - rdiff</a></li>
				<li><a href="sys-admin-rsync-pl.htm#rsync">Tworzenie kopii zapasowej - rsync</a></li>
				<li><a href="vir-rkits-pl.htm#virus-rkits">Skanery wirusów i rootkitów</a></li>
				<li><a href="sys-admin-gen-pl.htm#start-services">Aktywacja i wyłączanie usług</a></li>
				<li><a href="sys-admin-gen-pl.htm#pw-lost">Odzyskiwanie hasła administratora</a></li>
				<li><a href="sys-admin-gen-pl.htm#fonts">Czcionki</a></li>
				<li><a href="sys-admin-gen-pl.htm#cups">CUPS - Printing System</a></li>
				<li><a href="sys-admin-gen-pl.htm#sound">Sound Mixers</a></li>
				<li><a href="sys-admin-gen-pl.htm#init">Poziomy uruchamiania w sidux (runlevel)</a></li>
				<li><a href="bios-freedos-pl.htm#bois-prep">Aktualizacja BIOS</a></li>
				<li><a href="sys-admin-grub-bootman2-pl.htm#boot-grub-floppy">Tworzenie dyskietki startowej</a></li>
				<li><a href="sys-admin-grub-bootman2-pl.htm#mbr-grub-boot">Grub1 - Instalacja GRUB w MBR</a></li>
				<li><a href="sys-admin-grub-bootman2-pl.htm#dual-boot">Grub1 - Uruchamianie wielu systemów operacyjnych</a></li>
				<li><a href="sys-admin-grub-bootman2-pl.htm#remove-grub">Usuwanie GRUB z MBR</a></li>
				<li><a href="sys-admin-grub-bootman2-pl.htm#what-is-grub">Menadżer uruchamiania - GRUB</a></li>
				<li><a href="sys-admin-grub2-pl.htm#mbr-over-grub2">Grub2 - MBR Overwritten</a></li>
				<li><a href="sys-admin-grub2-pl.htm#multi-os">Grub2 - Dual and Multibooting</a></li>
				<li><a href="sys-admin-grub2-pl.htm#grub1-grub2">Grub2 -Upgrading from Grub1</a></li>
				<li><a href="sys-admin-grub2-pl.htm#grub2">Grub2 - Overview</a></li>
			</ul>
		</li>
	</ul>
<!-- menu ends here --></div>
<div id="main-page">
		<div class="divider" id="vmopts">
				<h2 id="top-header">Virtual Machine options</h2>

						<ul>
							<li><a href="hd-install-vmopts-pl.htm#kvm">KVM for Intel VT or AMD-V</a></li>
							<li><a href="hd-install-vmopts-pl.htm#vbox">Virtualbox</a></li>
							<li><a href="hd-install-vmopts-pl.htm#qemu">QEMU</a></li>

						</ul>
		      </div>
		      <div class="divider" id="kvm">
				<h2>Booting and installing sidux to a KVM Virtual Machine</h2>
							<p>KVM is a full virtualisation solution for Linux on x86 hardware containing virtualisation extensions (Intel VT or AMD-V).</p>

				      <h3>Prerequisites</h3>

							<p>To ascertain whether your hardware supports KVM, ensure that KVM is enabled in the BIOS (in some cases on an Intel VT or AMD-V system it may not evident as to where the switch is, therefore assume that it is in a KVM state). The way to check is in a console run:</p>
<pre>
cat /proc/cpuinfo | egrep --color=always 'vmx|smx'
</pre>
							<p>If you see <span class="highlight-3">smx</span> or <span class="highlight-3">vmx</span> in the cpu flags field, your system supports KVM. (Otherwise go back to the BIOS if you believe it is supported and check again, else search the internet as to where in the BIOS menus KVM 'enable' could be hiding).</p>

							<p>Should your BIOS not support KVM refer to <a href="hd-install-vmopts-pl.htm#vbox">Virtualbox</a>
							 or <a href="hd-install-vmopts-pl.htm#qemu">QEMU</a></p>

							<p>To install and run KVM, firstly ensure that Virtualbox modules are not loaded, (--purge them is the best option), then depending on your chipset:</p>

							<p>For <span class="highlight-3">vmx</span>:</p>
<pre>
apt-get install qemu-kvm
modprobe kvm_intel
</pre>
							<p>For <span class="highlight-3">smx</span>:</p>
<pre>
apt-get install qemu-kvm
modprobe kvm_amd
</pre>
							 <p>Another option is reboot as the qemu-kvm initscripts will take care of loading the modules.</p>

					  <h4>Using KVM to boot a sidux-*.iso</h4>

							<p><span class="highlight-2">As user:</span></p>
<pre>
$ kvm -net nic,model=virtio -net user -soundhw ac97 -m 512 -monitor stdio -cdrom &lt;sidux.iso&gt;
</pre>

				<h5>Installing a sidux-*.iso to a KVM image</h5>
							<p>First create a hard disk image, (this image will be minimal and only grow as required due to qcow2 compression ratios):</p>
<pre>
$ qemu-img create -f qcow2 sidux-2010-*-.img 12G
</pre>

							<p>Boot the sidux-*.iso with the following parameters to enable KVM to recognise that there is an QEMU hard disk image available:</p>
<pre>
$ kvm -net nic,model=virtio -net user -soundhw ac97 -m 512 -monitor stdio -cdrom &lt;/path/to/sidux.iso&gt; -boot d &lt;/path/to/sidux-20xx-*-.img&gt;
</pre>

							<p>Once the cdrom has booted up click on the sidux installer icon to activate the installer, (or use the menu), click on the Partitioning tab and you should see on the left hand side a box that has a disk ready for partitioning and formatting, most likely noted as <span class="highlight-3"> /dev/sda</span>. Underneath that are the options for partitioning, choose gparted.</p>

	<div class="screenshot"><img src="../lib/images-common/images-vm/kvm-gparted02.png" title="gparted kvm hard disk naming" alt="gparted kvm hard disk naming" /></div>
	<div class="spacer02"></div>

							<p>In the Gparted menu you can confirm that Gparted sees the image with <span class="highlight-3">View>Device Information</span> which should state it is a <span class="highlight-3">ATA QEMU Harddisk</span> and most likely noted as <span class="highlight-3"> /dev/sda</span>,(in this example), as this will be crucial when moving back to the installer and choosing where to put Grub, as it needs to go to <span class="highlight-3"> /dev/sda</span>.</p>

							<p>Next, in the <span class="highlight-3">Partition</span> menu choose <span class="highlight-3"> Device>Create Partiton Table</span> and create the partition table. </p>

							<p>Then format the partition table with ext4 and also include a swap of 2 gig. The formatting will take time so be patient.</p>

							<p>After formatting has completed, click OK to be returned to the installer and proceed as if you are performing a standard install, (again, be patient). <span class="highlight-2">Note: Install the Grub to /dev/sda</span>.</p>

							<p>You now have a sidux-*-VM ready for use:</p>

<pre>
$ kvm -net nic,model=virtio -net user -soundhw ac97 -m 512 -monitor stdio -drive if=virtio,boot=on,file=&lt;absolute/path/to/sidux-20xx-*.img&gt;
</pre>

							<p>If the guest does not support virtio, or you do not specify an absolute path,  use:</p>
<pre>
$ kvm -net nic,model=virtio -net user -soundhw ac97 -m 512 -monitor stdio -hda &lt;/path/to/sidux-20xx-*.img&gt;
</pre>
							<p>See also:</p>
<pre>
$ man kvm
</pre>
				<h5>Managing your KVM virtual machine installations</h5>
<pre>
apt-get install aqemu
</pre>
							<p>When using AQEMU ensure that you choose the KVM mode from the drop down box for 'Emulator Type' in the 'General' tab. (Documentation for AQEMU is basically non existent, therefore a few 'trials by error' will be required to figure out the easy to use GUI, however a good start is to use first use the 'VM' menu followed by the 'General' tab.</p>

	</div>
	<div class="divider" id="vbox">
		<h2>Booting and installing sidux to a VirtualBox Virtual Machine</h2>
							<p>The Steps:.</p>
						<ul>
 							<li>1. utwórz obraz twardego dysku dla VirtualBox</li>
 							<li>2. uruchom iso systemu przy pomocy VirtualBox</li>
 							<li>3. zainstaluj na obrazie dysku</li>
						</ul>

				<h4>Wymagania</h4>
							<p><span class="highlight-3">Wymagana pamięć ram: 1 GB </span>: Idealnie 512 MB dla systemu-gościa i 512 MB dla gospodarza. (może zostać uruchomiony na mniejszej ilości pamięci, ale nie spodziewaj się dobrych osiągów).</p>

							<p><span class="highlight-3">Miejsce na twardym dysku:</span> chociaż VirtualBox jes bardzo mały (typowa instalacja zmajmie około 30 MB twardego dysku), to wirtualne maszyny wymagają całkiem dużych plików na dysku, które reprezentują własne twarde dyski. Więć, aby zainstalować np. MS Windows XP (TM), będziesz potrzebować plik, który może mieć kilka GB. Aby mieć siduksa w VirtualBox, potrzebujesz przydzielić 5 GB na obraz dysku plus powierzchnię na swap.</p>

				<h3>Installation:</h3>

<pre>
apt-get update
apt-get install virtualbox-ose-qt virtualbox-ose-source dmakms module-assistant
</pre>
							<p>Then prepare the module:</p>
<pre>
m-a prepare
m-a a-i virtualbox-ose-source
</pre>
							<p>Then activate Dynamic Module-Assistant Kernel Module Support for virtualbox, so that the next time the Linux kernel is updated a virtualbox module is prepared for it too, without manual intervention. To do that, add <span class="highlight-3">virtualbox-ose-source</span> to the <span class="highlight-3">/etc/default/dmakms </span>configuration file. </p>
<pre>
mcedit /etc/default/dmakms
virtualbox-ose-source
</pre>

							<p>Then reboot the computer.</p>

							<p><a href="sys-admin-kern-upg-pl.htm#dmakms">This is essential reading on dmakms</a></p>

					<h3>Instalacja siduksa na wirtualnej maszynie</h3>
							<p>Użyj kreatora virtualboksa do stworzenia nowej maszyny wirtualnej dla siduksa. Następnie postępuj według instrukcji dla zwykłej instalacji siduksa.</p>

							<p><a href="http://www.virtualbox.org/">VirtualBox posiada pełną pomoc w formie PDF, którą możesz pobrać.</a> </p>

	</div>
	<div class="divider" id="qemu">
		<h2>Booting and installing sidux to a QEMU Virtual Machine</h2>

		<ul>
 			<li>1. utworzenie obrazu twardego dysku dla qemu</li>
 			<li>2. start iso przy pomocy qemu</li>
 			<li>3. instalacja na obrazie</li>

		</ul>

							<p>A QT GUI tool is available to help you configure QEMU:</p>
<pre>
apt-get install qtemu
</pre>

 				<h4>Utworzenie obrazu twardego dysku</h4>

				<p>Aby qemu mógł działać, będziesz potrzebować obraz dysku twardego. Jest to plik, który symuluje dysk twardy.</p>

				<p>Użyj polecenia:</p>
<pre>
qemu-img create -f qcow sidux.qcow 3G
</pre>
				<p>aby stworzyć plik obrazu o nazwie "sidux.qcow". Parametr "3G" określa wielkość dysku - w tym przypadku 3 GB. Możesz użyć przyrostka M dla megabajtów (np. "256M"). Nie musisz się martwić utworzeniem zbyt dużego dysku  - qcow format kompresuje obraz, więc pusta przestrzeń nie powoduje zwiększenia pliku.</p>


			<h4>Instalacja systemu operacyjnego</h4>

				<p>Teraz musisz po raz pierwszy uruchomić emulator. Pamiętaj o jednej rzeczy: kiedy klikniesz wewnątrz okna qemu, wskaźnik myszy zostanie przechwycony. Aby go "uwolnić", wciśnij Ctrl+Alt.</p>

				<p>
            Jeśli chcesz skorzystać z bootowalnej dyskietki, uruchom Qemu w następujący sposób:
          </p>
<pre>
qemu -floppy sidux.iso -net nic -net user -m 512 -boot d sidux.qcow
</pre>
				<p>jeśli twój CD-ROM jest bootowalny, uruchom Qemu z tymi opcjami:</p>
<pre>
qemu -cdrom sidux.iso -net nic -net user -m 512 -boot d sidux.qcow
</pre>
				<p>Teraz zainstaluj siduksa jakbyś to robił na prawdziwym dysku.</p>


			<h4>Uruchamianie systemu</h4>

				<p>Aby uruchomić system, wpisz:</p>
<pre>
qemu [hd_image]
</pre>
				<p>
            Dobrym pomysłem jest stworzenie obrazu overlay. W ten sposób możesz stworzyć obraz twardego dysku raz i qemu będzie zapisywać zmiany w zewnętrznym pliku. Pozbywasz się w ten sposób problemów z niestabilnym działaniem, ponieważ łatwo jest wrócić do poprzedniego stanu systemu.
          </p>

				<p>Aby utworzyć obraz overlay, napisz:</p>
<pre>
qemu-img create -b [[base''image]] -f qcow [[overlay''image]]
</pre>
				<p>Zastąp obraz twardego dysku dla base_image (w naszym przypadku sidux.qcow). Potem możesz uruchomić qemu:</p>
<pre>
qemu [overlay_image]
</pre>
				<p>
            Oryginalny obraz pozostanie nietknięty. Należy pamiętać, że podstawowy obraz nie może być przeniesiony lub mieć zmienioną nazwę, overlay pamięta jego pełną ścieżkę.
          </p>


			<h4>Użycie prawdziwej partycji jako jednej partycji podstawowej na obrazie twardego dysku</h4>

				<p>
            Czasami możesz chcieć użyć jednej z twoich partycji systemowych z qemu (na przykład, jeśli chcesz wystartować twój komputer i qemu z podanej partycji). Możesz to zrobić używając oprogramowania RAID w trybie liniowym (potrzebujesz sterownik linear.ko) i urządzenie loopback: sztuczka polega na dynamicznym dodaniu master boot rekordu (MBR) do rzeczywistej partycji, którą chcesz dodać do obrazu dysku qemu.
          </p>

				<p>Załóżmy, że masz niezamontowaną partycję /dev/sdaN z jakimś systemem plików i chcesz ją włączyć do obrazu dysku qemu. Najpierw stwórz mały plik, by przechować MBR:</p>
<pre> dd if=/dev/zero of=/sciezka/do/mbr count=32 </pre>
				<p>Tu został stworzony 16 KB (32 * 512 bytes) plik. Ważne, aby plik nie był zbyt mały (nawet jeśli MBR potrzebuje tylko pojedynczy 512-bajtowy blok), ponieważ im mniejszy będzie, tym mniejszy będzie musiał być fragment oprogramowania urządzenia RAID, co może wpłynąć na wydajność. Następnie należy skonfigurować urządzenie loopback na pliku MBR:</p>
<pre>
losetup -f /sciezka/do/mbr
</pre>
				<p>Załóżmy, że utworzone urządzenie to /dev/loop0, ponieważ nie korzystaliśmy do tej pory z innych urządzeń loopback. Następnym krokiem jest stworzenie "złączonego" MBR + /dev/sdaN obrazu dysku przy użyciu oprogramowania RAID:</p>
<pre>
 modprobe linear
 mdadm --build --verbose /dev/md0 --chunk=16 --level=linear --raid-devices=2 /dev/loop0 /dev/sdaN
</pre>
				<p>Powstały /dev/md0 jest tym, co będziemy używać jako obraz dysku dla qemu (nie zapomnij ustawić uprawnień, by emulator miał do niego niego dostęp). Ostatnim (i w pewnym stopniu skomplikowanym) krokiem jest ustawienie konfiguracji dysku (geometria dysku i tablica partycji), aby miejsce rozpoczynania się partycji podstawowej w MBR był zgodny z tym z /dev/sdaN wewnątrz /dev/md0 (offset dokładnie 16 * 512 = 16384 bajtów w tym przykładzie). Zrób to używając fdisk na rzeczywistym urządzeniu, nie na emulatorze: domyślny program wykrywania dysku z qemu często daje wynik nie zaokrąglony do kilobajtowego offsetu (jak 31.5 KB), który nie może być przyjęty przez oprogramowanie RAID. W związku z tym, na rzeczywistym sprzęcie:</p>
<pre>
 fdisk /dev/md0
</pre>
				<p>Następnie stwórz pojedynczą partycję podstawową odpowiadającą /dev/sdaN, i eksperymentuj z poleceniem 's'ector z 'x'pert menu, aż pierwszy cyliner (gdzie zaczyna się pierwsza partycja) będzie zgodny z wielkością MBR. Na koniec, 'w'rite (zapisz) wynik do pliku: zadanie zakończone. Masz teraz partycję, którą możesz zamontować bezpośrednio z rzeczywistego systemu, jak również jako część obrazu dysku qemu:</p>
<pre>
 qemu -hdc /dev/md0 [...]
</pre>
				<p>Możesz oczywiście ustawić menadżer uruchamiania na obrazie dysku używając qemu, oryginalna partycja /boot/sdaN partition zawiera niezbędne narzędzia.</p>



			<h4>Używanie modułu QEMU Accelerator</h4>

				<p> Programiści qemu stworzyli opcjonalny moduł kernela, aby przyspieszyć qemu czasami do poziomu systemu natywnego. Moduł powinien być ładowany z opcją</p>
<pre>
major=0
</pre>
				<p>aby zautomatyzować tworzenie potrzebnego urządzenia /dev/kqemu. Następujące polecenie</p>
<pre>
echo "options kqemu major=0" >> /etc/modprobe.conf
</pre>
				<p>Zmodyfikuje to plik modprobe.conf, aby upewnić się, że parametr modułu jest dodawany za każdym razem, gdy moduł jest ładowany.</p>

<pre>
qemu [...] -kernel-kqemu
</pre>
				<p>Udostępnia to pełną wirtualizację i przez co wyraźnie zwiększa szybkość.</p>

			<h4>Aby aktywować qemu:</h4>
<pre>
qemu -cdrom /tmp/pkg/sidux-debug.iso -net nic -net user -m 512
</pre>
		<p><a href="http://www.nongnu.org/qemu/user-doc.html">Oficjalna dokumentacja projektu QEMU</a> </p>
		<p><a href="http://wiki.archlinux.org/index.php/Qemu">Część treści dot. QEMU dla instrukcji siduksa było pobrane z tej strony na licencji GNU Free Documentation License 1.2 i zmodyfikowane dla instrukcji siduksa</a> </p>


	</div>
	<div id="rev">Page last revised 13/04/2010 1450 UTC</div>

</div>
</body>
</html>
