<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
   "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="pl">
<head>
	<title>sidux Manuals - Boot Managers</title>
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
	<style type="text/css" media="all">@import url("../lib/css-js/content.css");</style>
        <style type="text/css" media="all">@import url("../lib/css-js/menu.css");</style>
        <style type="text/css" media="print">@import url("../lib/css-js/print.css");</style>
        <link rel ="shortcut icon" href="../lib/favicon/manual.ico" />
        <script type="text/javascript" src="../lib/css-js/menu2.js"></script>
        <!--[if lt IE 8]>
        <link rel="stylesheet" type="text/css" href="../lib/css-js/ie_5-7_override.css">
        <![endif]-->
        <!--[if lt IE 7]>
        <link rel="stylesheet" type="text/css" href="../lib/css-js/ie_5-6_override.css">
        <![endif]-->
</head>
<body>
<!-- Last translation revision by maslot 31/08/2007 18:00 UTC -->
<div id="menu"> <!-- menu starts here pl lang maintainer neceron dongle-->
<!--sidux-manual Operating System Manual menu-version-02.03.2010.02.19 -->
<!-- menu last updated by bluewater 2010.02.19 1100 hrs UTC -->
	<div id="menu-header">
	      <a href="http://sidux.com/"><img src="../lib/logos/manual-sidux-logo.png" title="Przejdź do sidux.com, forum oraz wiki" alt="sidux.com logo" /></a>
	</div>
	<ul id="top-list">
		<li><a href="manual-search-pl.htm#search-on"> <img src="../lib/logos/manual-search-22x22.png" title="Search Manual" alt="Search" /> Szukaj</a> </li>
		<li><a href="http://manual.sidux.com/meta-manual">Porady społeczności </a></li>
	</ul>
	<div id="flags-2">
			<a href="../flag-index.html"><img src="../lib/logos/sidux-lang-100x64.png" title="Wybierz inny język" alt="lang-switch" /></a>
	</div>
	<ul>
		<li  onmouseover="showHide( 1 );" onmouseout="startTime();" ><a href="welcome-pl.htm">sidux - Wstęp</a>
			<ul class="sub-menu" id="sm1">
				<li><a href="welcome-pl.htm#welcome-gen">Wstęp</a></li>
				<li><a href="welcome-pl.htm#how-to">Jak korzystać z tej instrukcji?</a></li>
				<li><a href="welcome-pl.htm#table-contents">Spis treści</a></li>
				<li><a href="help-pl.htm#help-gen">Gdzie szukać pomocy?</a></li>
				<li><a href="help-pl.htm#paste">IRC !paste</a></li>
				<li><a href="credits-pl.htm#cred-team">Autorzy</a></li>
				<li><a href="wel-quickstart-pl.htm#welcome-quick">Szybki start z sidux</a></li>
			</ul>
		</li>
		<li  onmouseover="showHide( 2 );" onmouseout="startTime();" ><a href="cd-dl-burning-pl.htm">Zawartość płyty ISO. Wersje. Serwery lustrzane. Nagrywanie</a>
			<ul class="sub-menu" id="sm2">
				<li><a href="cd-content-pl.htm#cd-content">Zawartość ISO i wymagania systemowe</a></li>
				<li><a href="sys-admin-release-pl.htm#rolling">Aktualne ogłoszenia dotyczące aktualizacji</a></li>
				<li><a href="cd-dl-burning-pl.htm#download-sidux">Serwery lustrzane, pobieranie i nagrywanie</a></li>
				<li><a href="cd-dl-burning-pl.htm#md5">Suma kontrolna md5</a></li>
				<li><a href="cd-dl-burning-pl.htm#burn-nero">Nagrywanie obrazu w Windows</a></li>
				<li><a href="cd-dl-burning-pl.htm#burn-linux">Nagrywanie obrazu w Linux</a></li>
				<li><a href="cd-no-gui-burn-pl.htm#burning-no-gui">Skrypt burniso</a></li>
				<li><a href="cd-no-gui-burn-pl.htm#burning-no-gen">Nagrywanie bez interfejsu graficznego</a></li>
			</ul>
		</li>
		<li  onmouseover="showHide( 3 );" onmouseout="startTime();" ><a href="live-mode-pl.htm">Tryb Live</a>
			<ul class="sub-menu" id="sm3">
				<li><a href="live-mode-pl.htm#rootpw">Hasło administratora w trybie Live</a></li>
				<li><a href="live-mode-pl.htm#live-cd-installsoft">Instalacja oprogramowania w trakcie sesji Live</a></li>
				<li><a href="live-mode-pl.htm#ntfs-3g">Zapis na partycji NTFS z ntfs-3g</a></li>
		</ul>
		</li>
		<li  onmouseover="showHide( 4 );" onmouseout="startTime();" ><a href="term-konsole-pl.htm">Terminal/Konsola</a>
			<ul class="sub-menu" id="sm4">
				<li><a href="term-konsole-pl.htm#sux">  sux / sudo</a></li>
				<li><a href="term-konsole-pl.htm#konsole">Terminal / Konsola</a></li>
				<li><a href="term-konsole-pl.htm#cli-help">Pomoc lini poleceń</a></li>
				<li><a href="help-pl.htm#init3-tools">Tools to know in text mode (tty) - init 3</a></li>
				<li><a href="term-konsole-pl.htm#term-cmds">Lista poleceń</a></li>
				<li><a href="term-konsole-pl.htm#shell-scripts">Skrypty.sh</a></li>
			</ul>
		</li>
		<li  onmouseover="showHide( 5 );" onmouseout="startTime();" ><a href="cheatcodes-pl.htm">Start systemu</a>
			<ul class="sub-menu" id="sm5">
				<li><a href="cheatcodes-pl.htm#cheatcodes">Opcje startowe sidux Live</a></li>
				<li><a href="cheatcodes-pl.htm#cheatcodes-linux">Standardowe opcje startowe</a></li>
				<li><a href="cheatcodes-vga-pl.htm#vga">Opcje startowe VGA</a></li>
			</ul>
		</li>
		<li  onmouseover="showHide( 6 );" onmouseout="startTime();" ><a href="part-gparted-pl.htm">Partycjonowanie dysku twardego</a>
			<ul class="sub-menu" id="sm6">
				<li><a href="part-gparted-pl.htm#partition">Partycjonowanie za pomocą GParted</a></li>
				<li><a href="part-gparted-pl.htm#ntfs">Zmiana rozmiaru partycji NTFS za pomocą GParted</a></li>
				<li><a href="part-uuid-pl.htm#uuid">UUID, etykietowanie partycji i fstab</a></li>
				<li><a href="part-cfdisk-pl.htm#disknames">Nazewnictwo dysków w brief</a></li>
				<li><a href="part-cfdisk-pl.htm#partition">Partycjonowanie za pomocą cfdisk</a></li>
				<li><a href="part-cfdisk-pl.htm#formating">Formatowanie po partycjonowaniu za pomocą cfdisk</a></li>
			<li><a href="part-size-examp-pl.htm#part-example">Przykłady podziału dysku twardego na partycje</a></li>
		</ul>
		</li>
		<li  onmouseover="showHide( 7 );" onmouseout="startTime();" ><a href="hd-install-pl.htm">Instalacja systemu</a>
			<ul class="sub-menu" id="sm7">
				<li><a href="hd-install-pl.htm#Inst-prep">Przygotowanie do instalacji</a></li>
				<li><a href="hd-install-pl.htm#Installation">Instalacja na dysku twardym</a></li>
				<li><a href="hd-install-pl.htm#first-hd-boot">Pierwsze uruchomienie systemu</a></li>
				<li><a href="hd-install-opts-pl.htm#fromiso">Uruchamianie 'fromiso' - Overview</a></li>
				<li><a href="hd-install-opts-pl.htm#fromiso-grub-leg">Booting 'fromiso' with grub-legacy</a></li>
				<li><a href="hd-install-opts-pl.htm#grub2-fromiso">Booting 'fromiso' with Grub 2</a></li>
				<li><a href="hd-install-opts-pl.htm#fromiso-persist">fromiso i persist</a></li>
				<li><a href="hd-install-opts-pl.htm#usb-hd">Instalacja na nośniku USB - sidux specific - sidux-on-stick</a></li>
				<li><a href="hd-ins-opts-oos-pl.htm#raw-usb">Writing sidux to a USB/SSD stick with any Linux, MS Windows or Mac OS X system</a></li>
				<li><a href="nbdboot-pl.htm#nbd1">Booting sidux over a network</a></li>
				<li><a href="hd-install-opts-pl.htm#vtbox">Instalacja w VirtualBox</a></li>
				<li><a href="hd-install-opts-pl.htm#qemu">Instalacja w QEMU</a></li>
			</ul>
		</li>
		<li  onmouseover="showHide( 8 );" onmouseout="startTime();" ><a href="hw-dev-hw-dri-pl.htm">Karty graficzne, monitory, Xorg &amp; sterowniki</a>
			<ul class="sub-menu" id="sm8">
				<li><a href="hw-dev-hw-dri-pl.htm#hd-ntfs3g">Zapisywanie na partycji NTFS z ntfs-3g</a></li>
				<li><a href="hw-dev-mon-pl.htm#mon-res">Rozdzielczość ekranu</a></li>
				<li><a href="hw-dev-mon-pl.htm#xrandr">Dwa monitory - xrandr</a></li>
				<li><a href="hw-dev-mon-pl.htm#mon-binary">Dwa monitory - xorg.conf</a></li>
				<li><a href="hw-dev-hw-dri-pl.htm#non-free-3d">Niewolne sterowniki nVidii &amp; xorg.conf</a></li>
				<li><a href="hw-dev-hw-dri-pl.htm#non-free-3d-2">Niewolne sterowniki do ATI, Radeon i innych</a></li>
				<li><a href="hw-dev-hw-dri-pl.htm#non-free-firmware">Hardware wymagający niewolnych sterowiników</a></li>
				<li><a href="hw-dev-hw-dri-pl.htm#non-free">Dodawanie non-free do Sources List</a></li>
				<li><a href="hw-dev-hw-dri-pl.htm#native-nv-ati">Sterowniki FOSS xorg do kart nVidia, ATI, Radeon, Intel &amp; xorg.conf</a></li>
			</ul>
		</li>
		<li  onmouseover="showHide( 9 );" onmouseout="startTime();" ><a href="wm-kde-pl.htm">Menadżery okien</a>
			<ul class="sub-menu" id="sm9">
				<li><a href="wm-xfce-pl.htm#xfce-notes">Poradnik Xfce</a></li>
				<li><a href="wm-kde-pl.htm#install-add">Przydatne aplikacje KDE</a></li>
				<li><a href="wm-kde-pl.htm#desk-freeze">Zawieszenia pulpitu</a></li>
				<li><a href="wm-kde-pl.htm#kde-login">Problemy z logowaniem do KDE</a></li>
				<li><a href="wm-kde-pl.htm#ch-th">Zmiana motywu</a></li>
				<li><a href="wm-kde-pl.htm#dm">Display Managers - dm</a></li>
			</ul>
		</li>
		<li  onmouseover="showHide( 10 );" onmouseout="startTime();" ><a href="lamp-apache-pl.htm">Konfiguracja serwera</a>
			<ul class="sub-menu" id="sm10">
				<li><a href="lamp-apache-pl.htm#serv-apache">LAMP</a></li>
				<li><a href="lamp-apache-pl.htm#serv-ftp">Klient FTP</a></li>
				<li><a href="lamp-apache-pl.htm#serv-sec">Protokoły bezpieczeństwa</a></li>
				<li><a href="lamp-apache-pl.htm#serv-ssl">SSL</a></li>
				<li><a href="lamp-sql-pl.htm#serv-mysql">Konfiguracja MySQL</a></li>
				<li><a href="lamp-ppp-pl.htm#serv-php">PHP w Apache</a></li>
				<li><a href="ntp-server-pl.htm#ntp-server">Konfiguracja serwera czasu</a></li>
			</ul>
		</li>
		<li  onmouseover="showHide( 11 );" onmouseout="startTime();" ><a href="internet-connecting-pl.htm">Internet i sieć</a>
			<ul class="sub-menu" id="sm11">
				<li><a href="tor-privoxy-pl.htm#tor">Tor</a></li>
				<li><a href="tor-privoxy-pl.htm#privoxy">Privoxy</a></li>
				<li><a href="internet-connecting-pl.htm#firewalls">Firewall</a></li>
				<li><a href="samba-pl.htm#configure">SAMBA - konfiguracja klienta</a></li>
				<li><a href="samba-pl.htm#setup">SAMBA - konfiguracja serwera</a></li>
				<li><a href="ssh-pl.htm#ssh-fs">SSH - montowanie zdalnych zasobów</a></li>
				<li><a href="ssh-pl.htm#ssh-x">SSH - aplikacje X Window</a></li>
				<li><a href="ssh-pl.htm#ssh-f">SSH - Konqueror</a></li>
				<li><a href="ssh-pl.htm#ssh-w">SSH - zdalny dostęp z Windows z przekazywaniem X</a></li>
				<li><a href="ssh-pl.htm#ssh">SSH - bezpieczeństwo</a></li>
				<li><a href="internet-connecting-pl.htm#dial-mod">Połączenie modemowe</a></li>
				<li><a href="inet-wpagui-pl.htm#wpa-roaming-gui">WiFi - WPA_GUI</a></li>
				<li><a href="inet-setup-pl.htm#net-set1">WiFi - Setting up for WiFi Roaming</a></li>
				<li><a href="internet-connecting-wpa-pl.htm#wpa">WiFi - wpasupplicant</a></li>
				<li><a href="inet-ifplug-pl.htm#hotswitch">Network switching between WiFi and Cable</a></li>
				<li><a href="internet-connecting-pl.htm#netcardconfig">Konfiguracja sieci przy pomocy Ceni</a></li>
			</ul>
		</li>
		<li  onmouseover="showHide( 12 );" onmouseout="startTime();" ><a href="sys-admin-apt-pl.htm">Aktualizacje i zarządzanie pakietami</a>
			<ul class="sub-menu" id="sm12">
				<li><a href="sys-admin-apt-pl.htm#apt-cook">Przewodnik po APT i sources.list</a></li>
				<li><a href="sys-admin-apt-pl.htm#apt-install">Instalowanie nowych pakietów</a></li>
				<li><a href="sys-admin-apt-pl.htm#apt-delete">Usuwanie pakietów</a></li>
				<li><a href="sys-admin-apt-pl.htm#apt-downgrade">Instalacja starszej wersji pakietu, wstrzymanie aktualizacji pakietu</a></li>
				<li><a href="sys-admin-apt-pl.htm#apt-cache">Wyszukiwanie pakietu za pomocą apt-cache</a></li>
				<li><a href="sys-admin-apt-pl.htm#gui-pacsea">Wyszukiwanie pakietu za pomocą Package Search</a></li>
				<li><a href="sys-admin-upgrade-pl.htm#live-cd-upgrade">Aktualizacja systemu przez sidux Live</a></li>
				<li><a href="sys-admin-apt-locarmirr-pl.htm#approx">dist-upgrade of multiple PCs on a LAN</a></li>
				<li><a href="sys-admin-kern-upg-pl.htm#kern-upgrade">Aktualizacja jądra systemu</a></li>
				<li><a href="sys-admin-kern-upg-pl.htm#dmakms">Installing kernel modules dynamically with dmakms</a></li>
				<li><a href="sys-admin-apt-pl.htm#apt-upgrade">Pełna aktualizacja systemu - Overview</a></li>
				<li><a href="sys-admin-apt-pl.htm#du-st">Pełna aktualizacja systemu -  dist-upgrade - The Steps</a></li>
			</ul>
		</li>
		<li  onmouseover="showHide( 13 );" onmouseout="startTime();" ><a href="sys-admin-gen-pl.htm">Administracja systemem</a>
			<ul class="sub-menu" id="sm13">
				<li><a href="hd-install-pl.htm#adduser">Dodawanie nowego użytkownika</a></li>
				<li><a href="home-pl.htm#home-bu">Przenoszenie folderów domowych</a></li>
				<li><a href="sys-admin-rdiff-pl.htm#rdiff">Tworzenie kopii zapasowej - rdiff</a></li>
				<li><a href="sys-admin-rsync-pl.htm#rsync">Tworzenie kopii zapasowej - rsync</a></li>
				<li><a href="vir-rkits-pl.htm#virus-rkits">Skanery wirusów i rootkitów</a></li>
				<li><a href="sys-admin-gen-pl.htm#start-services">Aktywacja i wyłączanie usług</a></li>
				<li><a href="sys-admin-gen-pl.htm#pw-lost">Odzyskiwanie hasła administratora</a></li>
				<li><a href="sys-admin-gen-pl.htm#fonts">Czcionki</a></li>
				<li><a href="sys-admin-gen-pl.htm#cups">CUPS - Printing System</a></li>
				<li><a href="sys-admin-gen-pl.htm#sound">Sound Mixers</a></li>
				<li><a href="sys-admin-gen-pl.htm#init">Poziomy uruchamiania w sidux (runlevel)</a></li>
				<li><a href="bios-freedos-pl.htm#bois-prep">Aktualizacja BIOS</a></li>
				<li><a href="sys-admin-grub-bootman2-pl.htm#boot-grub-floppy">Tworzenie dyskietki startowej</a></li>
				<li><a href="sys-admin-grub-bootman2-pl.htm#mbr-grub-boot">Grub1 - Instalacja GRUB w MBR</a></li>
				<li><a href="sys-admin-grub-bootman2-pl.htm#dual-boot">Grub1 - Uruchamianie wielu systemów operacyjnych</a></li>
				<li><a href="sys-admin-grub-bootman2-pl.htm#remove-grub">Usuwanie GRUB z MBR</a></li>
				<li><a href="sys-admin-grub-bootman2-pl.htm#what-is-grub">Menadżer uruchamiania - GRUB</a></li>
				<li><a href="sys-admin-grub2-pl.htm#mbr-over-grub2">Grub2 - MBR Overwritten</a></li>
				<li><a href="sys-admin-grub2-pl.htm#multi-os">Grub2 - Dual and Multibooting</a></li>
				<li><a href="sys-admin-grub2-pl.htm#grub1-grub2">Grub2 -Upgrading from Grub1</a></li>
				<li><a href="sys-admin-grub2-pl.htm#grub2">Grub2 - Overview</a></li>
			</ul>
		</li>
	</ul>
<!-- menu ends here --></div>
<div id="main-page">
	<div class="divider" id="mbr-grub-boot">

					<h2 id="top-header">To rewrite Grub1 (grub-legacy)</h2>
						<p><span class="highlight-2">NOTE: to restore a Grub1 bootloader you need to have a 2009-03 (momos) sidux.iso or earlier.</span></p>

						<p>To only re-write grub (grub-legacy) to MBR from the hard drive:</p>
<pre>
/usr/sbin/grub-install --recheck --no-floppy /dev/sda
</pre>
						<p>This line may need to be run more than once, until its convinced you really mean it.</p>

		<h2>Bootsector overwritten by Windows MBR and /or to recover grub1 (grub-legacy)</h2>
							<p><span class="highlight-2">NOTE: to restore a Grub1 bootloader you need to have a 2009-03 (momos) sidux.iso or earlier.</span> <a href="sys-admin-grub2-pl.htm#chroot">Alternatively use chroot with any live.iso</a>.</p>

							<p> To rewrite the grub (grub-legacy) to the MBR and/or to recover grub 1 in general, you will need boot up a <span class="highlight-3">sidux live-cd (sidux-2009-03-momos.iso or earlier)</span>, first:</p>
						<ol>
							<li>To identify and confirm your partitions (e.g. [h,s]d[a..]X) all the following actions need root privileges, so to get root (#):
<pre>
$ sux
</pre>
							</li>
							<li>When in root type in:
<pre>
fdisk -l
cat /etc/fstab
</pre>
							This is to get the correct names.
							</li>
							<li>When you have acertained the correct partition, create the mount point:
<pre>
mkdir -p /media/[hdxx,sdxx,diskx]
</pre>
							</li>
							<li>Mount it:
<pre>
mount /dev/xdxx /media/xdxx
</pre>
							</li>

							<li>Now rewrite Grub to MBR of the first harddisk (generic):
<pre>
/usr/sbin/grub-install --recheck --no-floppy --root-directory=/media/xdxx /dev/sda
</pre>
							</li>
						</ol>

					<h6>Example</h6>
<pre>
root@sidux:/home/sidux# fdisk -l
# fdisk -l
Disk /dev/sda: 115.9 GB, 115989736960 bytes
255 heads, 63 sectors/track, 14101 cylinders
Units = cylinders of 16065 * 512 = 8225280 bytes
Disk identifier: 0x40444044
   Device Boot      Start         End      Blocks   Id  System
/dev/sda1   *           1        3673    29503341    7  HPFS/NTFS
/dev/sda2            3674       14101    83762910    5  Extended
/dev/sda5            3674        7239    28641784+  83  Linux
/dev/sda6            7239       10842    28934104+  83  Linux
/dev/sda7           10843       14101    26177886    b  W95 FAT32
Disk /dev/sdb: 120.0 GB, 120034123776 bytes
255 heads, 63 sectors/track, 14593 cylinders
Units = cylinders of 16065 * 512 = 8225280 bytes
Disk identifier: 0xa41e667f
   Device Boot      Start         End      Blocks   Id  System
/dev/sdb1               1        3574    28708123+  83  Linux
/dev/sdb2            3575        7247    29503372+  83  Linux
/dev/sdb3            7248       10845    28900935   83  Linux
/dev/sdb4           10846       14593    30105810    5  Extended
/dev/sdb5   *       10846       14338    28057491   83  Linux
/dev/sdb6           14339       14593     2048256   82  Linux swap / Solaris
Disk /dev/sdc: 250.0 GB, 250059350016 bytes
255 heads, 63 sectors/track, 30401 cylinders
Units = cylinders of 16065 * 512 = 8225280 bytes
Disk identifier: 0x00077541
   Device Boot      Start         End      Blocks   Id  System
/dev/sdc1               1       30401   244196001   83  Linux
Disk /dev/sdd: 250.0 GB, 250059350016 bytes
255 heads, 63 sectors/track, 30401 cylinders
Units = cylinders of 16065 * 512 = 8225280 bytes
Disk identifier: 0x1c01ad92
   Device Boot      Start         End      Blocks   Id  System
/dev/sdd1               1       30401   244196001   83  Linux

root@sidux:/home/sidux# cat /etc/fstab
# /etc/fstab - static information about the filesystems - fstab(5)
#
# /etc/fstab is only read by programs, and not written; it is the duty of the
# system administrator to properly maintain this file.
#
# Instead  of giving the device explicitly, one may indicate the filesystem
# that is to be mounted by its UUID or VOLUME label. This will make the
# system more robust: adding or removing a disk changes the disk device name
# but not the filesystem UUID or VOLUME label.

# automatically added, ST3120026A-3LJ093B4-part1
/dev/sda1       /media/disk0    ntfs    noauto,users,exec,ro,dmask=0022,fmask=0133      0       0

# automatically added, ST3120026A-3LJ093B4-part5
/dev/sda5       /media/disk1    jfs     noauto,users,exec,noatime       0       2

# automatically added, ST3120026A-3LJ093B4-part6
/dev/sda6       /media/disk2    reiserfs        noauto,users,exec,noatime       0       2

# automatically added, ST3120026A-3LJ093B4-part7
/dev/sda7       /media/disk3    vfat    noauto,users,exec,shortname=lower,quiet,umask=000       0       0

# automatically added, ST3120026A-3LJ09RBF-part1
/dev/sdb1       /media/disk4    reiserfs        noauto,users,exec,noatime       0       2

# automatically added, ST3120026A-3LJ09RBF-part2
/dev/sdb2       /media/disk5    ext3    noauto,users,exec,noatime       0       2

# automatically added, ST3120026A-3LJ09RBF-part3
/dev/sdb3       /media/disk6    reiserfs        noauto,users,exec,noatime       0       2

# automatically added, ST3120026A-3LJ09RBF-part5
/dev/sdb5       /media/disk7    ext3    noauto,users,exec,noatime       0       2

# automatically added, ST3120026A-3LJ09RBF-part6
/dev/sdb6       none    swap    sw      0       0

# automatically added, ST3250824AS-4ND1V199-part1
/dev/sdc1       /media/disk9    ext3    noauto,users,exec,noatime       0       2

# automatically added, ST3250620AS-9QE13XVF-part1
/dev/sdd1       /media/disk10   ext3    noauto,users,exec,noatime       0       2

# automatically added, _NEC_DVD_RW_ND-4550A
/dev/cdrom      /media/cdrom    udf,iso9660     user,noauto     0       0

# automatically added, ASUS_DVD-ROM_DVD-E616P_0104
/dev/cdrom1     /media/cdrom1   udf,iso9660     user,noauto     0       0

# automatically added
/dev/fd0        /media/fd0      auto    rw,user,noauto  0       0

# temporary filesystem in virtual memory
#tmpfs  /tmp    tmpfs   defaults        0       0
</pre>
<pre>
root partition is /dev/sdb1  and your MBR goes on sda
mkdir -p /media/sdb1
mount /dev/sdb1 /media/sdb1
/usr/sbin/grub-install --recheck --no-floppy --root-directory=/media/sdb1 /dev/sda
</pre>


						<p>On older linux systems, the IDE disks devices (PATA) were differentiated from those using current standard by an <span class="highlight-3">hdaX</span> name instead of<span class="highlight-3"> sdaX</span></p>



	</div>
	<div class="divider" id="boot-grub-floppy">
		<h2>Tworzenie dyskietki startowej</h2>



							<p>To make yourself a boot floppy, use the tools provided in <a href="http://www.ultimatebootcd.com/">UBCD (Ultimate Boot Disk CD)</a></p>


	</div>
	<div class="divider" id="remove-grub">
		<h2>Usuwanie gruba z MBR</h2>

							<p>Install the system recovery tool mbr:</p>
<pre>
apt-get update
apt-get install mbr
apt-get remove --purge lilo
man install-mbr
</pre>


	</div>
	<div class="divider" id="what-is-grub">
		<h2>Menadżer uruchamiania GRUB</h2>
<pre>
<span class="highlight-3">UWAGA: Grub dla kerneli 2.6.22 i nowszych używa sdax
i linia
initrd (hd0,x)/sidux/miniroot.gz
zmieniła się na:
initrd		/boot/initrd.img-2.6.xx.x-slh-smp-x</span>
</pre>
			<h3>Ogólne informacje</h3>

			<p>Grub jest programem rozruchowym, który może uruchomić systemy operacyjne z różnych partycji. Grub nie polega na listach blokowych, aby znaleźć potrzebne pliki do uruchomienia systemu i może czytać wiele różnych systemów plików: ext2, ext3, reiserfs, ... (Linux), Fat32, Fat16 (Windows), UFS (BSD), Minix i inne.</p>

			<p>Grub rozpoznaje rozszerzenia BIOS (co oznacza, że może uruchamiać systemy z partycji powyżej 8 GB!) i nie ma bariery 1024. cylindra. Grub nie przejmuje się, gdzie fizycznie znajduje się kernel, potrzebuje tylko deklaracji partycji i ścieżki do kernela, który ma uruchomić (może być to nawet symlink). Po zmianie w konfiguracji (np. menu.lst) nie wymaga wywołania programu jak Lilo, nowe ustawienia są wprowadzane przy następnym starcie systemu.</p>
			<p>sidux używa Gruba do startu z CD i kiedy jest instalowany na twardy dysk, Grub jest użyty domyślnie. Niemniej jednak Grub może być także zainstalowany później. Grub jest instalowany na MBR z konsoli roota przy pomocy następującego polecenia:</p>

<pre>grub-install --root-directory=/media/sdaX /dev/sdY</pre>

			<p>/media/sdaX oznacza zamontowaną partycję, na której w katalogu "/boot/grub" znajdą się potrzebne pliki (stage2, stage1_5xxx). Plik konfiguracyjny "menu.lst" również musi zostać utworzony w tym katalogu. /dev/sdY jest twardym dyskiem, na którego MBR Grub zostanie zainstalowany, zwykle /dev/sda.</p>

			<h3>Nazwy dysków/nazwy urządzeń</h3>

			<p>Grub nie różnicuje dysków SCSI i IDE. (hd0) jest zawsze pierwszym twardym dyskiem, który jest pierwszy w sekwencji startu (ustawionej w BIOS), niezależnie czy IDE lub SCSI. Niezwykła jest metoda liczenia; pierwsza partycja na pierwszym hd to (hd0,0). Podstawowe partycje są numerowane 0-3, dyski logiczne od 4 wzwyż.</p>

		<table>
			<tbody>
				<tr>
					<th><b>Grub</b></th>
					<th><b>Linux</b></th>
					<th><b>Etykieta</b></th>
				</tr>
				<tr>
					<td>(fd0)</td>
					<td>/dev/fd0</td>
					<td>Floppy (pod Windows)</td>
				</tr>
				<tr>
					<td>(hd0)</td>
					<td>/dev/sda</td>
					<td>pierwszy hd</td>
				</tr>
				<tr>
					<td>(hd0,0)</td>
					<td>/dev/sda1</td>
					<td>Part.1 na hd1</td>
				</tr>
				<tr>
					<td>(hd0,5)</td>
					<td>/dev/sda6</td>
					<td>Logical part. na hd 1</td>
				</tr>
			</tbody>
		</table>
	<div class="spacer05"></div>
			<p>Wszystkie nazwy urządzeń dla Gruba muszą być wzięte w nawias (). Bądź jednak świadomy wpisów poza linią kernela. W przeciwieństwie do Gruba, kernel potrzebuje danych w normalnej, linuksowej postaci. Wpisy w następującym przykładzie wskazują tę samą partycję, mianowicie czwartą partycję na pierwszym hd. Pierwsza linia jest w notacji Gruba, druga to typowy, linuksowy zapis:</p>

<pre>
root (hd0,3)
kernel          /boot/vmlinuz root=UUID=bf955abf-ce1f-45a3-9ee5-93b5c5dc4fe0 ro quiet vga=791
initrd          /boot/initrd.img
</pre>

			<h3>Linia poleceń (Grub-Shell)</h3>

			<p>Bardzo wygodną funkcją jest linia poleceń. Można do niej dotrzeć, przez wciśnięcie "c". Daje ci możliwość znalezienia i uruchomienia innych systemów i plików (np. Kernel), nawet jeśli jest uszkodzony plik menu.lst.</p>

			<p>Aby trochę potestować, możesz uruchomić Grub z uruchomionego systemu przy pomocy polecenia "grub". W Grub-Shell możesz zobaczyć wszystkie możliwe polecenia przy pomocy "help". Szczegółowa pomoc dla każdego polecenia jest dostępna przy pomocy <span class="highlight-3">"help command"</span>, wracasz do konsoli przez "quit"( Grub-Shell zostanie zakończone). W Grub-Shell klawisz tab ma podobną funkcję jak w linii poleceń linuksa, co jest wielkim ułatwieniem. Polecenia, nazwy dysków i nazwy plików mogą być automatycznie uzupełniane przy pomocy klawisza tab.</p>

			<p>Grub daje możliwość znalezienia kernela i initrd nawet przed właściwym startem przy pomocy "find" , np.:</p>
<pre>find /boot/vmlinuz</pre>

			<p>Grub pokazuje partycje, które mają kernel o nazwie "vmlinuz" w katalogu "/boot":</p>
<pre>(hd0,3) (hd1,0)</pre>

			<p>Wszystkie dostępne partycje mogą zostać znalezione przy pomocy "geometry", np.</p>
<pre>geometry (hd0)</pre>

			<p>pokaże to:</p>
<pre>"drive 0x80: C/H/S = 3648/255/63, The number of sectors = 58605120, /dev/sda Partition num: 0,
Filesystem type is fat, partition type 0xb Partition num: 1,
Filesystem type is fat, partition type 0xb Partition num: 2,
Filesystem type is fat, partition type 0xc Partition num: 4,
Filesystem type is ext2fs, partition type 0x83 Partition num: 5,
Filesystem type unknown, partition type 0x82 Partition num: 6,
Filesystem type is fat, partition type 0xb"
</pre>
			<p>Po tym, jak Kernel lub istniejący initrd (lub miniroot.gz) zostanie znaleziony, możesz uruchomić go przy pomocy "boot".</p>


			<h3>Tryb edycji</h3>

			<p>Ten tryb umożliwia zmianę wpisów w "menu.lst" podczas startu systemu. Działa to nawet wtedy, gdy Grub jest uruchamiany z CD i menu.lst jest tylko do odczytu. Aby przejść to trybu edycji, wciśnij ESC, potwierdź przy pomocy Enter i wciśnij "e". Parametry są wtedy dodawane na końcu linii, lub możesz poruszać się wzdłuż linii przy pomocy klawiszy kursora.</p>


			<h3>menu.lst (przykłady możliwych wpisów)</h3>

							<p><span class="highlight-2">NOTE:</span> In this section commented out lines are started with <span class="highlight-3">2</span> or more <span class="highlight-3">#</span> marks, and are excluded from interfering with the bootprocess.</p>

<pre>
# Example /boot/grub/menu.lst
################################################
# setkey changes the keyboardlayout to german (as an example)
setkey y z
setkey z y
setkey Y Z
setkey Z Y
setkey equal parenright
setkey parenright parenleft
setkey parenleft asterisk
setkey doublequote at
setkey plus bracketright
setkey minus slash
setkey slash ampersand
setkey ampersand percent
setkey percent caret
setkey underscore question
setkey question underscore
setkey semicolon less
setkey less numbersign
setkey numbersign backslash
setkey colon greater
setkey greater bar
setkey asterisk braceright
# menu.lst - See: grub(8), info grub, update-grub(8)
#            grub-install(8), grub-floppy(8),
#            grub-md5-crypt, /usr/share/doc/grub
#            and /usr/share/doc/grub-doc/.

## default num
# Set the default entry to the entry number NUM. Numbering starts from 0, and
# the entry number 0 is the default if the command is not used.
default		0

## timeout sec
# Set a timeout, in SEC seconds, before automatically booting the default entry
# (normally the first entry defined).
timeout		5

# Pretty colours
color cyan/blue white/blue
gfxmenu (hd0,5)/boot/message

## password ['--md5'] passwd
# If used in the first section of a menu file, disable all interactive editing
# control (menu entry editor and command-line)  and entries protected by the
# command 'lock'
# e.g. password topsecret
#      password --md5 $1$gLhU0/$aW78kHK1QfV3P2b2znUoe/
# password topsecret

#
# examples
#
# title		Windows 95/98/NT/2000
# root		(hd0,0)
# makeactive
# chainloader	+1
#
# title		Linux
# root		(hd0,1)
# kernel	/vmlinuz root=/dev/sda2 ro
#

#
# Put static boot stanzas before and/or after AUTOMAGIC KERNEL LIST

### BEGIN AUTOMAGIC KERNELS LIST
## lines between the AUTOMAGIC KERNELS LIST markers will be modified
## by the debian update-grub script except for the default options below

## DO NOT UNCOMMENT THEM, Just edit them to your needs

## ## Start Default Options ##
## default kernel options
## default kernel options for automagic boot options
## If you want special options for specific kernels use kopt_x_y_z
## where x.y.z is kernel version. Minor versions can be omitted.
## e.g. kopt=root=/dev/sda1 ro
##      kopt_2_6_8=root=/dev/sdc1 ro
##      kopt_2_6_8_2_686=root=/dev/sdc2 ro
# kopt=root=UUID=1885d68b-cc9c-49f8-9f98-a6874e7b3e7e ro  quiet vga=791

## default grub root device
## e.g. groot=(hd0,0)
# groot=(hd0,5)

## should update-grub create alternative automagic boot options
## e.g. alternative=true
##      alternative=false
# alternative=false

## should update-grub lock alternative automagic boot options
## e.g. lockalternative=true
##      lockalternative=false
# lockalternative=false

## additional options to use with the default boot option, but not with the
## alternatives
## e.g. defoptions=vga=791 resume=/dev/sda5
# defoptions=

## should update-grub lock old automagic boot options
## e.g. lockold=false
##      lockold=true
# lockold=false

## Xen hypervisor options to use with the default Xen boot option
# xenhopt=

## Xen Linux kernel options to use with the default Xen boot option
# xenkopt=console=tty0

## altoption boot targets option
## multiple altoptions lines are allowed
## e.g. altoptions=(extra menu suffix) extra boot options
##      altoptions=(single-user) single
# altoptions=(single-user mode) single

## controls how many kernels should be put into the menu.lst
## only counts the first occurence of a kernel, not the
## alternative kernel options
## e.g. howmany=all
##      howmany=7
# howmany=all

## should update-grub create memtest86 boot option
## e.g. memtest86=true
##      memtest86=false
# memtest86=true

## should update-grub adjust the value of the default booted system
## can be true or false
# updatedefaultentry=false

## ## End Default Options ##

title		Debian GNU/Linux, kernel 2.6.22.1-slh-smp-7
root		(hd0,5)
kernel		/boot/vmlinuz-2.6.22.1-slh-smp-7 root=UUID=1885d68b-cc9c-49f8-9f98-a6874e7b3e7e ro  quiet vga=791
initrd		/boot/initrd.img-2.6.22.1-slh-smp-7

title		Debian GNU/Linux, kernel 2.6.22.1-slh-smp-7 (single-user mode)
root		(hd0,5)
kernel		/boot/vmlinuz-2.6.22.1-slh-smp-7 root=UUID=1885d68b-cc9c-49f8-9f98-a6874e7b3e7e ro  quiet vga=791 single
initrd		/boot/initrd.img-2.6.22.1-slh-smp-7

### END DEBIAN AUTOMAGIC KERNELS LIST

#### MS (TM)
title Windows 2K/XP/2003 (sda1)
chainloader (hd0,0)+1

### ISO boot
title sidux 32bit from gaiaISO
kernel (hd0,3)/sidux3/vmlinuz-2.6.22.1-slh-smp-7 boot=fll quiet vga=791 fromiso=/sidux3/siduxgaia.iso
initrd (hd0,3)/sidux3/initrd.img-2.6.22.1-slh-smp-7


title Debian GNU/Linux, kernel 2.6.18-1-686 (sda5)
root (hd0,4)
kernel (hd0,4)/boot/vmlinuz-2.6.18-1-686 root=/dev/sda5 ro vga=791
initrd (hd0,4)/boot/initrd.img-2.6.18-1-686
savedefault
</pre>

	</div>
	<div class="divider" id="dual-boot">
			<h2>Uruchamianie wielu systemów</h2>

							<p>Aktywowacja uruchamiania wielu systemów w grubie jest bardzo prosta przy użyciu ładowania łańcuchowego (chainloading). Jeśli na przykład chcesz uruchamiać MS Windows (TM) i Debiana etch na jednym komputerze z instalacją 'fromiso' sidux.com, będziesz potrzebować trochę zmodyfikować gruba. Dlatego edytuj plik <span class="highlight-3">/boot/grub/menu.lst </span>i dodaj następujące linie po <span class="highlight-3">### END DEBIAN AUTOMAGIC KERNELS LIST</span>:</p>


<pre>
####MS Windows (TM) perhaps even MS Vista (TM)
title Windows (95/98/XP/Vista)
rootnoverify (hd0,1)
makeactive
chainloader +1

### Debian etch
title Debian etch
kernel (hd0,3)/debian/vmlinuz root=/dev/sda4 ro
initrd (hd0,3)/debian/miniroot.gz

### ISO boot
title sidux 32bit from ISO
kernel (hd0,5)/sidux/vmlinuz boot=fll quiet vga=791 fromiso=/sidux/sidux.iso
initrd (hd0,5)/sidux/miniroot.gz
</pre>
			<p>Niektórzy potrzebują/chcą mieć kilka instalacji Windows. Windows zawsze chce być uruchamiany z dysku 1. Będziemy musieli schować jedną partycję i odkryć drugą. Nastepujące polecenia powinny zostać wpisane w linii poleceń gruba i, jeśli zakończą się sukcesem, skopiowane do menu.lst. Procedura powinna być zastosowana dla wszystkich partycji Windows. Nie zapomnij o kopii zapasowej! </p>

<pre>hide (hd0,0) # schowanie partycji 1 na dysku 1
unhide (hd0,1) # odkrywa partycję 2 dysku 1
rootnoverify (hd0,1) # czyni partycję 2 dysku 1 głównym systemem plików
makeactive # czyni aktywną partycję 2 dysku 1
chainloader +1 # wskazuje pierwszy sektor partycji startowej
boot # uruchamia system operacyjny</pre>

			<p>Jeśli chcesz uruchomić drugi Windows z drugiego dysku, zamieniasz wirtualnie dysk 1 i 2. Tym samym Windows widzi symulowany pierwszy dysk:</p>
<pre>map (hd0) (hd1)
map (hd1) (hd0)
</pre>


			<h3>Uwagi</h3>

			<p>Ponieważ Grub nie ma bariery 1024. cylindra i może uruchamiać systemy ponad 1024 cylindry, "/boot/grub/stage2" musi być dostępne przez bios (musi być przed 1024. cylindrem). Stage2 nie może być przemieszczany po instalacji (np. Defrag może tego spróbować). Przy instalacji zapisywane są dane, które później by się nie zgadzały. Dlatego sensowne jest nadanie atrybutu tylko do odczytu dla pliku stage2 (musisz być w katalogu bieżącym):</p>

<pre>Dos: attrib +r +s stage2
LINUX: # chmod a -w ./stage2
</pre>


			<h3>Dalsze informacje</h3>

			<p><a href="http://www.gnu.org/software/grub/grub-faq.en.html">Oficjalny FAQ dla Gruba</a>.</p>

			<p>Jeśli masz wspieraną kartę sieciową, Grub może startować przez sieć.<a href="http://os.inf.tu-dresden.de/%7Efm3/grub.html"> Odpowiednie dyski można pobrać tutaj (chociaż ze starszymi wersjami Gruba)</a>.</p>

	</div>
			<div id="rev">Strona ostatnio modyfikowana 03/02/2010 1100 UTC</div>


</div>
</body>
</html>
