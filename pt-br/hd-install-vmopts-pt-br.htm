<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
   "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
	<title>aptosid Manuals - VM Installation Options</title>
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
	<style type="text/css" media="all">@import url("../lib/css-js/content.css");</style>
        <style type="text/css" media="all">@import url("../lib/css-js/menu.css");</style>
        <style type="text/css" media="print">@import url("../lib/css-js/print.css");</style>
        <link rel ="shortcut icon" href="../lib/favicon/manual.ico" />
        <script type="text/javascript" src="../lib/css-js/menu2.js"></script>
        <!--[if lt IE 8]>
        <link rel="stylesheet" type="text/css" href="../lib/css-js/ie_5-7_override.css">
        <![endif]-->
        <!--[if lt IE 7]>
        <link rel="stylesheet" type="text/css" href="../lib/css-js/ie_5-6_override.css">
        <![endif]-->
</head>
<body>
<!-- Last translation revision by bluewater 22/04/2009 1350hrs UTC -->
<div id="menu"> <!-- menu starts here pt-br lang maintained by ceti-->
<!--aptosid Operating System Manual menu-version-02.10.2011.03.14 REPO -->
<!-- menu last updated by bluewater 2011.03.14 0620 hrs UTC -->
	<div id="menu-header">
	      <a href="http://aptosid.com/"><img src="../lib/logos/manual-aptosid-logo.png" title="Ir para aptosid.com forums e wiki" alt="aptosid.com logo" /></a>
	</div>
	<ul id="top-list">
		<li><a href="manual-search-pt-br.htm#search-on"><img src="../lib/logos/manual-search-22x22.png" title="Search Manual" alt="Search" /> Procurar Online Offline</a> </li>
	</ul>
	<div id="flags-2">
			<a href="../flag-index.html"><img src="../lib/logos/aptosid-lang-100x64.png" title="Escolha outra língua - Choose another language" alt="troca-língua" /></a>
	</div>
	<ul>
<li onmouseover="showHide( 1 );" onmouseout="startTime();" ><a href="welcome-pt-br.htm">Manual do Sistema Operacional aptosid</a>
			<ul class="sub-menu" id="sm1">
				<li><a href="welcome-pt-br.htm#welcome-gen">Manual do SO aptosid &#8658;</a>
					<ul class="sub2-menu" id="sm1a">
					  <li><a href="credits-pt-br.htm#cred-team">Créditos</a></li>
					</ul>
					</li>
		<li><a href="welcome-pt-br.htm#how-to">Como usar este manual &#8658;</a>
					<ul class="sub2-menu" id="sm1b">
					  <li><a href="welcome-pt-br.htm#how-to">Como usar este manual</a></li>
					  <li><a href="welcome-pt-br.htm#table-contents">Índice</a></li>
					</ul>
					</li>
		<li><a href="help-pt-br.htm#help-gen">Como conseguir ajuda &#8658;</a>
					<ul class="sub2-menu" id="sm1c">
					  <li><a href="help-pt-br.htm#help-gen">Onde e como obter ajuda</a></li>
					  <li><a href="help-pt-br.htm#paste">IRC !paste</a></li>
					</ul>
					</li>
		<li><a href="wel-quickstart-pt-br.htm#welcome-quick">Guia Rápido do aptosid</a></li>
		</ul>
		</li>
<li  onmouseover="showHide( 2 );" onmouseout="startTime();" ><a href="cd-dl-burning-pt-br.htm">Conteúdo das ISOs, lançamentos, espelhos e como queimar</a>
			   <ul class="sub-menu" id="sm2">
				<li><a href="cd-content-pt-br.htm#cd-content">Conteúdo das ISOs e requisitos do sistema &#8658;</a>
					<ul class="sub2-menu" id="sm2a">
					  <li><a href="sys-admin-release-pt-br.htm#rolling">Notas de Lançamento</a></li>
					</ul>
					</li>
		    <li><a href="cd-dl-burning-pt-br.htm#download-aptosid">Espelhos ('mirrors') do aptosid, como baixar e como queimar &#8658;</a>
				<ul class="sub2-menu" id="sm2b">
					  <li><a href="cd-dl-burning-pt-br.htm#md5">Como verificar o md5</a></li>
					  <li><a href="cd-dl-burning-pt-br.htm#burn-nero">Como queimar no Windows</a></li>
					  <li><a href="cd-dl-burning-pt-br.htm#burn-linux">Como queimar no Linux</a></li>
					  <li><a href="cd-no-gui-burn-pt-br.htm#burning-no-gui">O script burniso</a></li>
					  <li><a href="cd-no-gui-burn-pt-br.htm#burn-no-gui-gen">Como queimar sem interface gráfica</a></li>
					  <li><a href="cd-dl-burning-pt-br.htm#download-aptosid">Espelhos para baixar o aptosid</a></li>
					</ul>
					</li>
		      </ul>
		</li>
<li  onmouseover="showHide( 3 );" onmouseout="startTime();" ><a href="live-mode-pt-br.htm">O modo Live</a>
			<ul class="sub-menu" id="sm3">
				<li><a href="live-mode-pt-br.htm#rootpw">Senha do root na ISO aptosid-Live</a></li>
				<li><a href="live-mode-pt-br.htm#live-cd-installsoft">Como instalar software estando no modo Live-ISO</a></li>
			</ul>
		</li>
<li  onmouseover="showHide( 4 );" onmouseout="startTime();" ><a href="term-konsole-pt-br.htm">Terminal / Konsole</a>
			<ul class="sub-menu" id="sm4">
				<li><a href="term-konsole-pt-br.htm#term-kon"> Terminal / Konsole &#8658;</a>
					<ul class="sub2-menu" id="sm4a">
					  <li><a href="term-konsole-pt-br.htm#term-kon"> Terminal / Konsole</a></li>
					  <li><a href="term-konsole-pt-br.htm#colours"> Coloured terminal prompts</a></li>
					  <li><a href="term-konsole-pt-br.htm#cli-help">Ajuda pela linha de comando</a></li>
					  <li><a href="help-pt-br.htm#init3-tools">Ferramentas a conhecer no modo texto (tty) - init 3</a></li>
					  <li><a href="term-konsole-pt-br.htm#term-cmds">Lista de comandos de Terminal no Linux</a></li>
					</ul>
					</li>
			  <li><a href="term-konsole-pt-br.htm#sux"> sux / sudo</a></li>
		    </ul>
		</li>
<li  onmouseover="showHide( 5 );" onmouseout="startTime();" ><a href="cheatcodes-pt-br.htm">"Cheatcodes"</a>
			<ul class="sub-menu" id="sm5">
				<li><a href="cheatcodes-pt-br.htm#cheatcodes">Cheatcodes específicas da Live-ISO do aptosid</a></li>
				<li><a href="cheatcodes-pt-br.htm#cheatcodes-linux">Cheatcodes genéricas do Linux</a></li>
				<li><a href="cheatcodes-vga-pt-br.htm#vga">Códigos VGA</a></li>
			</ul>
		</li>
<li  onmouseover="showHide( 6 );" onmouseout="startTime();" ><a href="part-gparted-pt-br.htm">Como particionar seu HD</a>
		<ul class="sub-menu" id="sm6">
			<li><a href="part-gparted-pt-br.htm#hd-ntfs3g">Escrevendo em partições NTFS com o ntfs-3g</a></li>
			<li><a href="part-lvm-pt-br.htm#part-lvm">Partitioning to use LVM - Logical Volume Manager</a></li>
			<li><a href="part-gparted-pt-br.htm#partition">Como particionar pela interface gráfica &#8658;</a>
					<ul class="sub2-menu" id="sm6a">
					  <li><a href="part-gparted-pt-br.htm#partition">Como particionar o HD usando GParted / Gerenciador de partições do KDE</a></li>
					  <li><a href="part-gparted-pt-br.htm#ntfs">Como redimensionar a partição NTFS com o GParted / Gerenciador de partições do KDE</a></li>
					</ul>
					</li>
		<li><a href="part-cfdisk-pt-br.htm#partition">Como particionar pela linha de comando &#8658;</a>
					 <ul class="sub2-menu" id="sm6b">
					    <li><a href="part-cfdisk-pt-br.htm#partition">Como particionar seu HD com o cfdisk</a></li>
					    <li><a href="part-cfdisk-pt-br.htm#formating">Como formatar após o particionamento com o cfdisk</a></li>
					</ul>
					</li>
		<li><a href="part-size-examp-pt-br.htm#part-example">O básico do particionamento &#8658;</a>
					<ul class="sub2-menu" id="sm6c">
					  <li><a href="part-size-examp-pt-br.htm#part-example">Exemplos de tamanhos de partições</a></li>
					  <li><a href="part-uuid-pt-br.htm#uuid">UUID, Rebuilding fstab and creating new mount points</a></li>
					  <li><a href="part-cfdisk-pt-br.htm#disknames">Uma geral sobre nomeação de discos</a></li>
					</ul>
					</li>
		      </ul>
		</li>
<li  onmouseover="showHide( 7 );" onmouseout="startTime();" ><a href="hd-install-pt-br.htm">Opções de instalação - HD, USB, VM and Cryptroot</a>
		<ul class="sub-menu" id="sm7">
		  <li><a href="hd-install-pt-br.htm#Inst-prep">Preparação &#8658;</a>
					<ul class="sub2-menu" id="sm7a">
					  <li><a href="hd-install-pt-br.htm#Inst-prep">Preparação da instalação </a></li>
					  <li><a href="hd-install-pt-br.htm#Installation">Como instalar no HD</a></li>
					  <li><a href="hd-install-pt-br.htm#first-hd-boot">Primeira inicialização</a></li>
					</ul>
					</li>
		<li><a href="hd-install-opts-pt-br.htm#fromiso">Como dar o 'boot' com fromiso &#8658;</a>
					<ul class="sub2-menu" id="sm7b">
					  <li><a href="hd-install-opts-pt-br.htm#fromiso">Como inicializar com fromiso - visão geral</a></li>
					  <li><a href="hd-install-opts-pt-br.htm#fromiso-grub-leg">Como inicializar com 'fromiso' e grub-legacy</a></li>
					  <li><a href="hd-install-opts-pt-br.htm#grub2-fromiso">Como inicializar com 'fromiso' e Grub 2</a></li>
					  <li><a href="hd-install-opts-pt-br.htm#fromiso-persist">fromiso e persist</a></li>
					</ul>
					</li>
		<li><a href="hd-install-opts-pt-br.htm#usb-hd">Como instalar em drives USB &#8658;</a>
					<ul class="sub2-menu" id="sm7c">
					  <li><a href="hd-install-opts-pt-br.htm#usb-hd">Como instalar em um HD-USB - específico do aptosid - aptosid-on-stick</a></li>
					  <li><a href="hd-ins-opts-oos-pt-br.htm#raw-usb">Instalando em dispositivo USB/SSD com qualquer sistema Linux, MS Windows ou Mac OSX</a></li>
					</ul>
					</li>
		  <li><a href="hd-install-crypt-pt-br.htm#install-crypt">Installing to encryted partitions - cryptroot</a></li>
		  <li><a href="nbdboot-pt-br.htm#nbd1">Inicializando o aptosid através de uma rede</a></li>
		  <li><a href="hd-install-vmopts-pt-br.htm#vmopts">Opções de instalação de Máquina Virtual</a></li>
		</ul>
		</li>
<li  onmouseover="showHide( 8 );" onmouseout="startTime();" ><a href="gpu-pt-br.htm">Placas de Vídeo, dispositivos diversos, xorg &amp;  drivers</a>
	<ul class="sub-menu" id="sm8">
		<li><a href="hw-dev-mon-pt-br.htm#mon-res">Monitores e resolução de tela &#8658;</a>
					<ul class="sub2-menu" id="sm8a">
					  <li><a href="hw-dev-mon-pt-br.htm#mon-res">Monitores e resolução de tela</a></li>
					  <li><a href="hw-dev-mon-pt-br.htm#xrandr">Monitores múltiplos (Dual Monitors) e a xrandr</a></li>
					  <li><a href="hw-dev-mon-pt-br.htm#mon-binary">Monitores múltiplos usando binários</a></li>
					</ul>
					</li>
		<li><a href="gpu-pt-br.htm#foss-xorg">GPU firmware &#8658;</a>
					<ul class="sub2-menu" id="sm8b">
					  <li><a href="gpu-pt-br.htm#ati-3d">AMD/ATI 3D drivers</a></li>
					  <li><a href="gpu-pt-br.htm#intel">Intel 2D and 3D drivers</a></li>
					  <li><a href="gpu-pt-br.htm#nvidia">Nvidia 3D drivers</a></li>
					  <li><a href="gpu-pt-br.htm#foss-xorg">Open Source Xorg drivers</a></li>
					</ul>
					</li>
			  <li><a href="nf-firm-pt-br.htm#fw-detect">Firmware detection - non-free </a></li>
			  <li><a href="nf-firm-pt-br.htm#non-free-firmware">Adding non-free to Sources List</a></li>
		</ul>
		</li>
<li  onmouseover="showHide( 9 );" onmouseout="startTime();" ><a href="wm-kde-pt-br.htm">Gerenciadores de janelas</a>
		    <ul class="sub-menu" id="sm9">
			  <li><a href="wm-kde-pt-br.htm">Gerenciadores de janelas &#8658;</a>
					  <ul class="sub2-menu" id="sm9a">
					    <li><a href="wm-xfce-pt-br.htm#xfce-notes">Extras úteis para o Xfce</a></li>
					    <li><a href="wm-kde-pt-br.htm#install-add">Extras úteis para o KDE</a></li>
					    <li><a href="wm-kde-pt-br.htm#desk-freeze">Congelamentos do desktop</a></li>
					    <li><a href="wm-kde-pt-br.htm#kde-login">"Não consigo entrar no KDE"</a></li>
					    <li><a href="wm-kde-pt-br.htm#ch-th">Como mudar os temas</a></li>
					</ul>
					</li>
		      <li><a href="wm-kde-pt-br.htm#dm">Gerenciadores de ambientes - dm</a></li>
		</ul>
		</li>
<li  onmouseover="showHide( 11 );" onmouseout="startTime();" ><a href="inet-ceni-pt-br.htm">Conexão com a Internet, WiFi, LAN e redes</a>
		    <ul class="sub-menu" id="sm11">
			<li><a href="lamp-apache-pt-br.htm">aptosid LAMP Stack &#8658;</a>
					<ul class="sub2-menu" id="sm11a">
					    <li><a href="lamp-apache-pt-br.htm#serv-apache">aptosid LAMP Stack</a></li>
					    <li><a href="lamp-apache-pt-br.htm#serv-ftp">Clientes FTP</a></li>
					    <li><a href="lamp-apache-pt-br.htm#serv-sec">Protocolos de segurança</a></li>
					    <li><a href="lamp-apache-pt-br.htm#serv-ssl">SSL</a></li>
					    <li><a href="lamp-sql-pt-br.htm#serv-mysql">Configuração do MySQL</a></li>
					    <li><a href="lamp-ppp-pt-br.htm#serv-php">PHP no Apache</a></li>
					    <li><a href="ntp-server-pt-br.htm#ntp-server">Configuração do servidor de data/hora</a></li>
					</ul>
					</li>
		<li><a href="tor-privoxy-pt-br.htm#tor">Firewalls e privacidade &#8658;</a>
					<ul class="sub2-menu" id="sm11b">
					    <li><a href="tor-privoxy-pt-br.htm#tor">Tor</a></li>
					    <li><a href="tor-privoxy-pt-br.htm#privoxy">Privoxy</a></li>
					    <li><a href="inet-ceni-pt-br.htm#firewalls">Firewalls</a></li>
					</ul>
					</li>
		<li><a href="ssh-pt-br.htm#ssh-x">SSH e Samba &#8658;</a>
					<ul class="sub2-menu" id="sm11c">
						  <li><a href="samba-pt-br.htm#setup">Configuração do servidor Samba</a></li>
						  <li><a href="samba-pt-br.htm#configure">Como configurar o Samba (Windows)</a></li>
						  <li><a href="ssh-pt-br.htm#ssh-fs">Como montar um SSH remoto</a></li>
						  <li><a href="ssh-pt-br.htm#ssh-x">Aplicações do X via SSH</a></li>
						  <li><a href="ssh-pt-br.htm#ssh-f">SSH com o Konqueror</a></li>
						  <li><a href="ssh-pt-br.htm#ssh-w">SSH com X-Forwarding a partir do Windows</a></li>
						  <li><a href="ssh-pt-br.htm#ssh">SSH e segurança</a></li>
					</ul>
					</li>
		<li><a href="inet-ceni-pt-br.htm#netcardconfig">Conexões wifi &#8658;</a>
						<ul class="sub2-menu" id="sm11d">
						    <li><a href="inet-ceni-pt-br.htm#netcardconfig">Como ficar online - ceni</a></li>
						    <li><a href="inet-wpagui-pt-br.htm#wpa-roaming-gui">WiFi - interface WPA_</a></li>
						    <li><a href="inet-setup-pt-br.htm#net-set1">WiFi - como configurar o modo "Roaming"</a></li>
						    <li><a href="inet-wpa-pt-br.htm#wpa">WiFi - wpasupplicant</a></li>
						    <li><a href="inet-ifplug-pt-br.htm#hotswitch">Como permutar entre wifi e cabo</a></li>
					</ul>
					</li>
		<li><a href="inet-ceni-pt-br.htm#netcardconfig">Conexões com fio &#8658;</a>
						<ul class="sub2-menu" id="sm11e">
						    <li><a href="inet-ceni-pt-br.htm#dial-mod">Modems 56k</a></li>
						    <li><a href="inet-ceni-pt-br.htm#netcardconfig">Como ficar online - ceni</a></li>
					</ul>
					</li>
				</ul>
			    </li>
<li  onmouseover="showHide( 12 );" onmouseout="startTime();" ><a href="sys-admin-apt-pt-br.htm">Gerenciamento de pacotes e dist-upgrade</a>
	<ul class="sub-menu" id="sm12">
		<li><a href="sys-admin-apt-pt-br.htm#apt-cook">Guia do APT e a sources list &#8658;</a>
					<ul class="sub2-menu" id="sm12a">
					    <li><a href="sys-admin-apt-pt-br.htm#apt-cook">Guia do APT e a sources list</a></li>
					    <li><a href="sys-admin-apt-pt-br.htm#apt-install">Como instalar um novo pacote</a></li>
					    <li><a href="sys-admin-apt-pt-br.htm#apt-delete">Como deletar um pacote</a></li>
					    <li><a href="sys-admin-apt-pt-br.htm#apt-downgrade">Pacotes em HOLD (espera) e como rebaixar pacotes</a></li>
					    <li><a href="sys-admin-apt-pt-br.htm#apt-cache">Como pesquisar pacotes com o apt-cache</a></li>
					    <li><a href="sys-admin-apt-pt-br.htm#gui-pacsea">Como pesquisar pacotes com a interface gráfica</a></li>
					</ul>
				</li>
		<li><a href="sys-admin-kern-upg-pt-br.htm#kern-upgrade">Como atualizar o kernel &#8658;</a>
					<ul class="sub2-menu" id="sm12b">
					    <li><a href="sys-admin-kern-upg-pt-br.htm#kern-remove">Como remover kernels</a></li>
					    <li><a href="sys-admin-kern-upg-pt-br.htm#kern-upgrade">Como atualizar o kernel</a></li>
					    <li><a href="sys-admin-kern-upg-pt-br.htm#dmakms">Como instalar módulos do kernel dinamicamente com o dmakms</a></li>
					</ul>
				</li>
		<li><a href="sys-admin-apt-pt-br.htm#apt-upgrade">Como atualizar todo o sistema -  dist-upgrade - visão geral &#8658;</a>
					<ul class="sub2-menu" id="sm12c">
					    <li><a href="sys-admin-upgrade-pt-br.htm#live-cd-upgrade">Atualização com uma Live-ISO</a></li>
					    <li><a href="sys-admin-apt-locarmirr-pt-br.htm#approx">dist-upgrade de múltiplos PCs em uma LAN</a></li>
					    <li><a href="sys-admin-apt-pt-br.htm#apt-upgrade">Como atualizar todo o sistema -  dist-upgrade - visão geral</a></li>
					    <li><a href="sys-admin-apt-pt-br.htm#du-st">Como atualizar todo o sistema -  dist-upgrade - os passos</a></li>
					</ul>
				  </li>
			    </ul>
		</li>
<li  onmouseover="showHide( 13 );" onmouseout="startTime();" ><a href="sys-admin-gen-pt-br.htm">Administração do sistema</a>
	<ul class="sub-menu" id="sm13">
		<li><a href="bios-freedos-pt-br.htm#bois-prep">Como atualizar a BIOS com o FreeDOS</a></li>
		<li><a href="vir-rkits-pt-br.htm#virus-rkits">Antivirus  e caçadores de rootkits</a></li>
		<li><a href="hd-install-pt-br.htm#adduser">Como adicionar usuários e senhas &#8658;</a>
					<ul class="sub2-menu" id="sm13a">
					    <li><a href="hd-install-pt-br.htm#adduser">Como adicionar um novo usuário</a></li>
					    <li><a href="sys-admin-gen-pt-br.htm#pw-lost">Perda da senha root, nova senha</a></li>
					</ul>
					</li>
		<li><a href="sys-admin-gen-pt-br.htm#start-services">Serviços e runlevels &#8658;</a>
					<ul class="sub2-menu" id="sm13b">
					    <li><a href="sys-admin-gen-pt-br.htm#start-services">Habilitar/desabilitar serviços</a></li>
					    <li><a href="sys-admin-gen-pt-br.htm#init">Runlevels no aptosid - init</a></li>
					</ul>
					</li>
		<li><a href="sys-admin-rsync-pt-br.htm#rsync">Como fazer backups do sistema &#8658;</a>
					  <ul class="sub2-menu" id="sm13c">
					    <li><a href="sys-admin-rdiff-pt-br.htm#rdiff">Backup com o rdiff</a></li>
					    <li><a href="sys-admin-rsync-pt-br.htm#rsync">Backup com o rsync</a></li>
					    <li><a href="home-pt-br.htm#home-bu">Como mover sua /home</a></li>
					</ul>
					</li>
		<li><a href="sys-admin-gen-pt-br.htm#fonts">CUPS, fontes e som &#8658;</a>
					  <ul class="sub2-menu" id="sm13d">
					     <li><a href="sys-admin-gen-pt-br.htm#fonts">Fontes</a></li>
					     <li><a href="sys-admin-gen-pt-br.htm#cups">CUPS - sistema de impressão</a></li>
					     <li><a href="sys-admin-gen-pt-br.htm#sound">Mixadores de som</a></li>
					</ul>
					</li>
		<li><a href="sys-admin-grub2-pt-br.htm#grub2">Grub2 &#8658;</a>
					  <ul class="sub2-menu" id="sm13f">
					    <li><a href="sys-admin-grub2-pt-br.htm#chroot">Grub2 - Recovering Grub with chroot</a></li>
					    <li><a href="sys-admin-grub2-pt-br.htm#mbr-over-grub2">Grub2 - sobrescrição da MBR</a></li>
					    <li><a href="sys-admin-grub2-pt-br.htm#multi-os">Grub2 - boots duplos e múltiplos</a></li>
					    <li><a href="sys-admin-grub2-pt-br.htm#grub1-grub2">Grub2 - como atualizar a partir do Grub1</a></li>
					    <li><a href="sys-admin-grub2-pt-br.htm#grub2">Grub2 - visão geral</a></li>
					</ul>
					</li>
			</ul>
		</li>
	</ul>
<!-- menu ends here --> </div>
<div id="main-page">
		<div class="divider" id="vmopts">
				<h2 id="top-header">Virtual Machine options</h2>

						<ul>
							<li><a href="hd-install-vmopts-pt-br.htm#kvm">KVM for Intel VT or AMD-V</a></li>
							<li><a href="hd-install-vmopts-pt-br.htm#vbox">Virtualbox</a></li>
							<li><a href="hd-install-vmopts-pt-br.htm#qemu">QEMU</a></li>

						</ul>
		      </div>
		      <div class="divider" id="kvm">
				<h2>Booting and installing aptosid to a KVM Virtual Machine</h2>
							<p>KVM is a full virtualisation solution for Linux on x86 hardware containing virtualisation extensions (Intel VT or AMD-V).</p>

				      <h3>Prerequisites</h3>

							<p>To ascertain whether your hardware supports KVM, ensure that KVM is enabled in the BIOS (in some cases on an Intel VT or AMD-V system it may not evident as to where the switch is, therefore assume that it is in a KVM state). The way to check is in a console run:</p>
<pre>
cat /proc/cpuinfo | egrep --color=always 'vmx|svm'
</pre>
							<p>If you see <span class="highlight-3">svm</span> or <span class="highlight-3">vmx</span> in the cpu flags field, your system supports KVM. (Otherwise go back to the BIOS if you believe it is supported and check again, else search the internet as to where in the BIOS menus KVM 'enable' could be hiding).</p>

							<p>Should your BIOS not support KVM refer to <a href="hd-install-vmopts-pt-br.htm#vbox">Virtualbox</a>
							 or <a href="hd-install-vmopts-pt-br.htm#qemu">QEMU</a></p>

							<p>To install and run KVM, firstly ensure that Virtualbox modules are not loaded, (--purge them is the best option), then depending on your chipset:</p>

							<p>For <span class="highlight-3">vmx</span>:</p>
<pre>
apt-get install qemu-kvm qemu-utils
modprobe kvm-intel
</pre>
							<p>For <span class="highlight-3">svm</span>:</p>
<pre>
apt-get install qemu-kvm qemu-utils
modprobe kvm-amd
</pre>
							 <p>Another option is reboot as the qemu-kvm initscripts will take care of loading the modules.</p>

					  <h4>Using KVM to boot a aptosid-*.iso</h4>

							<p><span class="highlight-2">As user:</span></p>
<pre>
$ kvm -net nic,model=virtio -net user -soundhw ac97 -m 512 -monitor stdio -cdrom &lt;aptosid.iso&gt;
</pre>

				<h5>Installing a aptosid-*.iso to a KVM image</h5>
							<p>First create a hard disk image, (this image will be minimal and only grow as required due to qcow2 compression ratios):</p>
<pre>
$ qemu-img create -f qcow2 aptosid-2010-*-.img 12G
</pre>

							<p>Boot the aptosid-*.iso with the following parameters to enable KVM to recognise that there is an QEMU hard disk image available:</p>
<pre>
$ kvm -net nic,model=virtio -net user -soundhw ac97 -m 512 -monitor stdio -cdrom &lt;/path/to/aptosid.iso&gt; -boot d &lt;/path/to/aptosid-20xx-*-.img&gt;
</pre>

							<p>Once the cdrom has booted up click on the aptosid installer icon to activate the installer, (or use the menu), click on the Partitioning tab and you should see on the left hand side a box that has a disk ready for partitioning and formatting, most likely noted as <span class="highlight-3"> /dev/sda</span>. Underneath that are the options for partitioning, choose gparted or partitionmanager. Whilst the KDE partionmanager has a  different layout to gparted, which used in the following example, it is just as intuitive to work with.</p>

	<div class="screenshot"><img src="../lib/images-common/images-vm/kvm-gparted02.png" title="gparted kvm hard disk naming" alt="gparted kvm hard disk naming" /></div>
	<div class="spacer02"></div>

							<p>In the Gparted menu you can confirm that Gparted sees the image with <span class="highlight-3">View>Device Information</span> which should state it is a <span class="highlight-3">ATA QEMU Harddisk</span> and most likely noted as <span class="highlight-3"> /dev/sda</span>,(in this example), as this will be crucial when moving back to the installer and choosing where to put Grub, as it needs to go to <span class="highlight-3"> /dev/sda</span>.</p>

							<p>Next, in the <span class="highlight-3">Partition</span> menu choose <span class="highlight-3"> Device>Create Partiton Table</span> and create the partition table. </p>

							<p>Then format the partition table with ext4 and also include a swap of 2 gig. The formatting will take time so be patient.</p>

							<p>After formatting has completed, click OK to be returned to the installer and proceed as if you are performing a standard install, (again, be patient). <span class="highlight-2">Note: Install the Grub to /dev/sda</span>.</p>

							<p>You now have a aptosid-*-VM ready for use:</p>

<pre>
$ kvm -net nic,model=virtio -net user -soundhw ac97 -m 512 -monitor stdio -drive if=virtio,boot=on,file=&lt;absolute/path/to/aptosid-20xx-*.img&gt;
</pre>

							<p>If the guest does not support virtio, or you do not specify an absolute path,  use:</p>
<pre>
$ kvm -net nic, -net user -soundhw ac97 -m 512 -monitor stdio -hda &lt;/path/to/aptosid-20xx-*.img&gt;
</pre>

							<p><span class="highlight-2">An important note regarding KVM partition naming:</span> When you install to a KVM image, your partitions change from <span class="highlight-3">sda</span> to <span class="highlight-3">vda</span>. If your kvm image does not boot and drops you to a busybox, try:</p>
<pre>
kvm -m 512 -monitor stdio /media/diskxpartx/path/aptosid-*.img
</pre>
							<p>When the grub menu appears, type <span class="highlight-2"> e </span> and change <span class="highlight-3">sda</span> to <span class="highlight-3">vda</span> in the kernel boot command. When fully booted, you can effect a permanent change by editing the following line in <span class="highlight-3"> /etc/default/grub </span> with correct syntax, if required:</p>

<pre>
GRUB_CMD_LINE_LINUX=""
</pre>
							<p>Examples:</p>
<pre>
GRUB_CMD_LINE_LINUX="root=UUID=1234-5678-1234-13456 ro quiet"
</pre>
<pre>
GRUB_CMD_LINE_LINUX="root=/dev/vda3 ro quiet"
</pre>

							<p>UUIDs are a better option use when using traditional partitioning methods.</p>

							<p> Then update the grub.cfg with:</p>

<pre>
update-grub
</pre>

							<p>Reboot the KVM image with your preferred parameters.</p>

							<p>See also: <a href="http://www.linux-kvm.org/page/Main_Page"> KVM documentation</a>.</p>

				<h5>Managing your KVM virtual machine installations</h5>
<pre>
apt-get install aqemu
</pre>
							<p>When using AQEMU ensure that you choose the KVM mode from the drop down box for 'Emulator Type' in the 'General' tab. (Documentation for AQEMU is basically non existent, therefore a few 'trials by error' will be required to figure out the easy to use GUI, however a good start is to use first use the 'VM' menu followed by the 'General' tab.</p>

	</div>
	<div class="divider" id="vbox">
		<h2>Booting and installing aptosid to a VirtualBox Virtual Machine</h2>
							<p>Passos:</p>
						<ul>
 							<li>1. crie uma imagem do HD para VirtualBox</li>
 							<li>2. dê o boot em ISOs com VirtualBox</li>
 							<li>3. instale a imagem</li>
						</ul>

				<h4>Requisitos:</h4>
							<p><span class="highlight-3">RAM recomendada: 1 GB </span>; idealmente, 512 MB para o guest e 512 MB para o host (pode ser rodado com menos memória, porém não espere bom desempenho).</p>

							<p><span class="highlight-3">Espaço no HD:</span> Enquanto o VirtualBox em si é magro (uma instalação típica ocupa apenas 30 MB de espaço), as máquinas virtuais necessitarão de grandes arquivos no disco para representar seus próprios HDs. Assim, para instalar o MS Windows XP (TM), por exemplo, você vai precisar de um arquivo que facilmente crescerá por diversos GB em tamanho. Para não se apertar, vai ser preciso que você aloque uma imagem de 5 GB e mais a swap.</p>

				<h3>Instalação:</h3>

<pre>
apt-get update
apt-get install virtualbox-ose-qt virtualbox-ose-source dmakms module-assistant
</pre>
							<p>Então prepare o módulo:</p>
<pre>
m-a prepare
m-a a-i virtualbox-ose-source
</pre>
							<p>Daí ative o Dynamic Module-Assistant Kernel Module Support (dmakms) para o Virtualbox, de forma que, na próxima vez que o kernel for atualizado, um módulo do Virtualbox também seja preparado para ele, sem intervenção manual. Para fazer isso, adicione <span class="highlight-3">virtualbox-ose-source</span> ao arquivo de configuração <span class="highlight-3">/etc/default/dmakms </span>.</p>
<pre>
mcedit /etc/default/dmakms
virtualbox-ose-source
</pre>

							<p>Em seguida, reinicie sua máquina.</p>

							<p><a href="sys-admin-kern-upg-pt-br.htm#dmakms">Leitura essencial sobre o dmakms</a></p>

					<h3>Como instalar o aptosid na máquina virtual</h3>
							<p>Use o assistente do virtualbox para criar uma nova máquina virtual para o aptosid, depois é só seguir as instruções de uma instalação normal.</p>

							<p><a href="http://www.virtualbox.org/">O VirtualBox tem uma boa Ajuda em PDF, que você pode baixar aqui.</a> </p>

	</div>
	<div class="divider" id="qemu">
		<h2>Booting and installing aptosid to a QEMU Virtual Machine</h2>

		<ul>
 			<li>1. crie uma imagem do HD para o qemu</li>
 			<li>2. dê o boot da iso pelo qemu</li>
 			<li>3. instale a imagem</li>

		</ul>

							<p>Existe uma interface gráfica em QT para ajudá-lo a fazer a configuração:</p>
<pre>
apt-get install qtemu
</pre>

 				<h4>Como criar a imagem do HD</h4>

				<p>Para rodar o QEMU, você provavelmente irá precisar de uma imagem do HD. Trata-se de um arquivo que armazena o conteúdo do HD emulado.</p>

				<p>Use este comando:</p>
<pre>
qemu-img create -f qcow aptosid.qcow 3G
</pre>
				<p>Isso cria o arquivo de imagem "aptosid.qcow". O parâmetro "3G" especifica o tamanho do disco - no caso, 3 GB. Você pode usar o sufixo M para megabytes (por exemplo, "256M"). Não se preocupe muito com o tamanho do disco - o formato qcow comprime a imagem, de forma que o espaço vago não é adicionado ao tamanho do arquivo.</p>


			<h4>Como instalar o sistema operacional</h4>

				<p>Esta é a primeira vez que você vai precisar de abrir o emulador. <span class="highlight-3">Atenção: quando você clica dentro da janela do qemu, o ponteiro do mouse fica preso. Para soltá-lo, pressione:</span></p>
<pre>
Ctrl+Alt
</pre>

				<p>Se for preciso dar o boot a partir de um disquete, rode o Qemu com:</p>
<pre>
qemu -floppy aptosid.iso -net nic -net user -m 512 -boot d aptosid.qcow
</pre>
				<p>...e se for a partir de um CD:</p>
<pre>
qemu -cdrom aptosid.iso -net nic -net user -m 512 -boot d aptosid.qcow
</pre>
				<p> Agora instale o aptosid como se fosse em um HD de verdade.</p>


			<h4>Como rodar o sistema</h4>

				<p>Para rodar o sistema, digite:</p>
<pre>
qemu [hd_image]
</pre>
				<p>Uma boa ideia é usar imagens sobrepostas. Dessa forma, você pode criar a imagem do HD uma vez e dizer ao qemu para armazenar as mudanças em um arquivo externo. Você se livra de toda possível instabilidade, porque é facílimo  reverter o sistema para o estado original.</p>

				<p>Para criar uma imagem sobreposta ("overlay"), digite:</p>
<pre>
qemu-img create -b [[base''image]] -f qcow [[overlay''image]]
</pre>
				<p>Isso substitui a imagem do HD para base_image (no caso, aptosid.qcow). Depois, é só rodar o qemu assim:</p>
<pre>
qemu [overlay_image]
</pre>
				<p>A imagem original permanece intocada. Um probleminha: a imagem base não poderá ser renomeada ou movida. A sobreposição (overlay) lembra o caminho completo da base.</p>


			<h4>Como usar qualquer partição real como a partição primária de uma imagem do HD</h4>

				<p>Pode acontecer de você desejar usar uma de suas partições de dentro do qemu (por exemplo, dar o boot tanto em sua máquina real quanto no qemu, usando uma partição como root). Isso pode ser feito utilizando software RAID no modo linear (é necessário o driver linear.ko) e um dispositivo loopback: o truque é  preceder dinamicamente uma MBR à partição real que você deseja embutir em uma imagem de HD bruta (raw) no qemu.</p>

				<p>Suponha que você tenha uma partição desmontada /dev/sdaN com alguns arquivos do sistema que você deseja que façam parte de uma imagem de HD do qemu. Primeiro, crie um pequeno arquivo para guardar a MBR:</p>
<pre>
dd if=/dev/zero of=/caminho/para/mbr count=32
</pre>
				<p>Com isso, um arquivo de 16 KB (32 * 512 bytes) é criado. É importante não fazê-lo muito pequeno (ainda que a MBR precise de apenas um bloco de 512 bytes), pois quanto menor ele for, menor terá de ser o tamanho do software RAID, o que pode impactar no desempenho. Agora, você configura um dispositivo loopback para a MBR:</p>
<pre>
losetup -f /caminho/para/mbr
</pre>
				<p>Assumamos que o dispositivo resultante seja /dev/loop0, pois até agora não usamos nenhum outro loopback. O próximo passo é criar a imagem do HD resultante da fusão MBR + /dev/sdaN usando software RAID:</p>
<pre>
 modprobe linear
 mdadm --build --verbose /dev/md0 --chunk=16 --level=linear --raid-devices=2 /dev/loop0 /dev/sdaN
</pre>
				<p>O /dev/md0 resultante é o que você usará como imagem bruta do disco no qemu (não se esqueça de ajustar as permissões para que o emulador possa acessá-la). O último passo é fixar a configuração do disco (geometria do disco e tabela de partições) de forma que o ponto inicial da partição primária na MBR seja igual ao do /dev/sdaN dentro de /dev/md0 (exatamente 16 * 512 = 16384 bytes neste exemplo). Para isso, use o fdisk na máquina hospedeira, não no emulador: a rotina padrão de detecção de imagem bruta (raw) do qemu muitas vezes dá resultados não arredondáveis em kilobytes (como 31.5 KB na seção anterior), impossíveis de serem gerenciados pelo código do RAID. Portanto, no hospedeiro:</p>
<pre>
 fdisk /dev/md0
</pre>
				<p>Lá, crie uma partição primária correspondente a /dev/sdaN e experimente com o comando 's'ector no menu 'x'pert até que o primeiro cilindro (onde está a primeira partição) tenha tamanho igual ao da MBR. Finalmente, use 'w'rite para escrever o resultado no arquivo e... acabou! Agora você tem uma partição que pode ser montada direto da máquina hospedeira e que também é parte da imagem de disco do qemu:</p>
<pre>
 qemu -hdc /dev/md0 [...]
</pre>
				<p>Naturalmente, você pode configurar qualquer carregador de boot na imagem usando o qemu, desde que a partição /boot/sdaN contenha as ferramentas necessárias.</p>



			<h4>Como usar o Módulo de Aceleração do QEMU</h4>

				<p>Os desenvolvedores do qemu criaram um módulo opcional para o kernel, de forma a acelerar o qemu às vezes até a níveis de operação nativos. Ele pode ser carregado com a opção:</p>
<pre>
major=0
</pre>
				<p>... para automatizar a criação do necessário dispositivo /dev/kqemu. Já este comando:</p>
<pre>
echo "options kqemu major=0" >> /etc/modprobe.conf
</pre>
				<p>corrige o modprobe.conf para assegurar que a opção do módulo seja adicionada sempre que ele é carregado.</p>

<pre>
qemu [...] -kernel-kqemu
</pre>
				<p>Isto habilita total virtualização, o que melhora a velocidade consideravelmente.</p>

			<h4>Para ativar o qemu:</h4>
<pre>
qemu -cdrom /tmp/pkg/aptosid-debug.iso -net nic -net user -m 512
</pre>
		<p><a href="http://www.nongnu.org/qemu/user-doc.html">Documentação oficial do Projeto QEMU </a> </p>
		<p><a href="http://wiki.archlinux.org/index.php/Qemu">Parte do que está escrito sobre o QEMU neste Manual do aptosid foi conseguido acessando-se este site, sob a GNU Free Documentation License 1.2 e modificada para este manual.</a> </p>


	</div>
	<div id="rev">Page last revised 29/10/2010 0410 UTC</div>

</div>
</body>
</html>
