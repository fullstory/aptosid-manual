<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
   "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
	<title>Manuais do sidux - Gerenciadore de Boot</title>
	<meta http-equiv="content-type" content="text/html; charset=utf-8" />
	<style type="text/css" media="all">@import url("../lib/css-js/content.css");</style>
        <style type="text/css" media="all">@import url("../lib/css-js/menu.css");</style>
        <style type="text/css" media="print">@import url("../lib/css-js/print.css");</style>
        <link rel ="shortcut icon" href="../lib/favicon/manual.ico" />
        <script type="text/javascript" src="../lib/css-js/menu2.js"></script>
        <!--[if lt IE 8]>
        <link rel="stylesheet" type="text/css" href="../lib/css-js/ie_5-7_override.css">
        <![endif]-->
        <!--[if lt IE 7]>
        <link rel="stylesheet" type="text/css" href="../lib/css-js/ie_5-6_override.css">
        <![endif]-->
</head>
<body>
<!-- Last translation revision by xxxx 0x/xx/2008 0700 UTC -->
<div id="menu"> <!-- menu starts here pt-br lang maintainer ceti-->
<!--Welcome to the  sidux-manual Operating System Manual version-01.63.2008.01.12 -->
<!-- menu last updated by bluewater 11/01/2008 2300 hrs AEST 10/01/2008 1200 hrs UTC -->
<img src="../lib/logos/sidux-logo.png" alt="logo" id="menu-header" />
	<ul id="top-list">
		<li><a href="http://sidux.com/">Ir para sidux.com</a></li>
		<li><a href="http://manual.sidux.com/meta-manual">Manual do sidux-Meta</a></li>
	</ul>
	<div id="flags-2">
			<a href="../flag-index.html"><img src="../lib/logos/sidux-lang-50.png" title="Escolha outra língua" alt="troca-língua" /></a>
	</div>
	<ul>
		<li  onmouseover="showHide( 1 );" onmouseout="startTime();" ><a href="welcome-pt-br.htm">Manual do sidux</a>
			<ul class="sub-menu" id="sm1">
				<li><a href="welcome-pt-br.htm#welcome-gen">Manual do sidux</a></li>
				<li><a href="welcome-pt-br.htm#how-to">Como usar este manual</a></li>
				<li><a href="welcome-pt-br.htm#table-contents">Índice</a></li>
				<li><a href="help-pt-br.htm#help-gen">Onde encontrar ajuda</a></li>
				<li><a href="help-pt-br.htm#paste">IRC !paste</a></li>
				<li><a href="credits-pt-br.htm#cred-team">Créditos</a></li>
			</ul>
		</li>
		<li  onmouseover="showHide( 2 );" onmouseout="startTime();" ><a href="cd-content-pt-br.htm">Conteúdo do CD</a>
			<ul class="sub-menu" id="sm2">
				<li><a href="cd-content-pt-br.htm#cd-content">Conteúdo do CD</a></li>
			</ul>
		</li>
		<li  onmouseover="showHide( 3 );" onmouseout="startTime();" ><a href="cd-dl-burning-pt-br.htm">Baixando e Queimando o CD</a>
			<ul class="sub-menu" id="sm3">
				<li><a href="cd-dl-burning-pt-br.htm#download-sidux">Espelhos para Baixar e Queimar</a></li>
				<li><a href="cd-dl-burning-pt-br.htm#md5">Checando o md5</a></li>
				<li><a href="cd-dl-burning-pt-br.htm#burn-nero">Queimando no Windows</a></li>
				<li><a href="cd-dl-burning-pt-br.htm#burn-linux">Queimando no Linux</a></li>
				<li><a href="cd-dl-burning-pt-br.htm#xdelta">Usando o xdelta-Patch</a></li>
				<li><a href="cd-no-gui-burn-pt-br.htm">Queimando sem Interface Gráfica</a></li>
			</ul>
		</li>
		<li  onmouseover="showHide( 4 );" onmouseout="startTime();" ><a href="live-mode-pt-br.htm">Modo Live</a>
			<ul class="sub-menu" id="sm4">
				<li><a href="live-mode-pt-br.htm#rootpw">Senha de root no sidux-LiveCD</a></li>
				<li><a href="live-mode-pt-br.htm#live-cd-installsoft">Instalando Software no Modo sidux-LiveCD</a></li>
				<li><a href="live-mode-pt-br.htm#ntfs-3g">Escrevendo em Partições NTFS com o ntfs-3g</a></li>
			</ul>
		</li>
		<li  onmouseover="showHide( 5 );" onmouseout="startTime();" ><a href="term-konsole-pt-br.htm">O Terminal/Konsole</a>
			<ul class="sub-menu" id="sm5">
				<li><a href="term-konsole-pt-br.htm#sux"> sux</a></li>
				<li><a href="term-konsole-pt-br.htm#term-kon"> Terminal/Konsole</a></li>
				<li><a href="term-konsole-pt-br.htm#cli-help">Ajuda para a Linha de Comando</a></li>
				<li><a href="term-konsole-pt-br.htm#term-cmds">Lista de Comandos do Terminal</a></li>
				<li><a href="term-konsole-pt-br.htm#shell-scripts">Instalando Scripts.sh</a></li>
			</ul>
		</li>
		<li  onmouseover="showHide( 6 );" onmouseout="startTime();" ><a href="cheatcodes-pt-br.htm">CheatCodes</a>
			<ul class="sub-menu" id="sm6">
				<li><a href="cheatcodes-pt-br.htm#cheatcodes">Cheatcodes específicas do sidux LiveCD</a></li>
				<li><a href="cheatcodes-pt-br.htm#cheatcodes-linux">Cheatcodes para o Linux em geral</a></li>
				<li><a href="cheatcodes-vga-pt-br.htm#vga">Códigos para VGA</a></li>
			</ul>
		</li>
		<li  onmouseover="showHide( 7 );" onmouseout="startTime();" ><a href="part-gparted-pt-br.htm">Particionando seu HD</a>
			<ul class="sub-menu" id="sm7">
				<li><a href="part-gparted-pt-br.htm#partition">Particionando seu HD com o GParted</a></li>
				<li><a href="part-gparted-pt-br.htm#ntfs">Redimensionando a Partição NTFS com o GParted</a></li>
				<li><a href="part-uuid-pt-br.htm#uuid">UUID, Nomeando Partições e fstab</a></li>
				<li><a href="part-cfdisk-pt-br.htm#disknames">Nomes dos Discos: Uma Breve Explicação</a></li>
				<li><a href="part-cfdisk-pt-br.htm#partition">Particionando seu HD com o cfdisk</a></li>
				<li><a href="part-cfdisk-pt-br.htm#formating">Formatando com o cfdisk, Após Particionamento</a></li>
				<li><a href="part-size-examp-pt-br.htm#part-example">Exemplos de Tamanhos de Partições</a></li>
			</ul>
		</li>
		<li  onmouseover="showHide( 8 );" onmouseout="startTime();" ><a href="hd-install-pt-br.htm">Opções de Instalação</a>
			<ul class="sub-menu" id="sm8">
				<li><a href="hd-install-pt-br.htm#Inst-prep">Preparando a Instalação</a></li>
				<li><a href="hd-install-pt-br.htm#Installation">Instalando no HD</a></li>
				<li><a href="hd-install-pt-br.htm#first-hd-boot">Primeira inicialização</a></li>
				<li><a href="hd-install-opts-pt-br.htm#fromiso">Inicializando com 'fromiso'</a></li>
				<li><a href="hd-install-opts-pt-br.htm#fromiso-persist">Fromiso e Persist</a></li>
				<li><a href="hd-install-opts-pt-br.htm#usb-hd">Instalando em HD-USB</a></li>
				<li><a href="hd-install-opts-pt-br.htm#vtbox">Instalando com o VirtualBox</a></li>
				<li><a href="hd-install-opts-pt-br.htm#qemu">Instalando com o QEMU</a></li>
			</ul>
		</li>
		<li  onmouseover="showHide( 9 );" onmouseout="startTime();" ><a href="hw-dev-hw-dri-pt-br.htm">Placas de Vídeo, Dispositivos Diversos e Drivers</a>
			<ul class="sub-menu" id="sm9">
				<li><a href="hw-dev-hw-dri-pt-br.htm#hd-ntfs3g">Escrevendo na Partição NTFS</a></li>
				<li><a href="hw-dev-hw-dri-pt-br.htm#mon-res">Resolução de Tela e Monitores</a></li>
				<li><a href="hw-dev-hw-dri-pt-br.htm#non-free-3d">Drivers Proprietários para nVidia e ATI</a></li>
				<li><a href="hw-dev-hw-dri-pt-br.htm#native-nv-ati">Drivers Livres para nVidia, ATI, Radeon e Intel</a></li>
				<li><a href="hw-dev-hw-dri-pt-br.htm#non-free">Hardware que Precisa de Soluções Proprietárias</a></li>
			</ul>
		</li>
		<li  onmouseover="showHide( 10 );" onmouseout="startTime();" ><a href="wm-kde-pt-br.htm">Gerenciadores de Janelas</a>
			<ul class="sub-menu" id="sm10">
				<li><a href="wm-kde-pt-br.htm#desk-freeze">Travamentos do KDE</a></li>
				<li><a href="wm-kde-pt-br.htm#kde-login">Não Consigo Entrar no KDE</a></li>
				<li><a href="wm-kde-pt-br.htm#ch-th">Mudando Temas</a></li>
			</ul>
		</li>
		<li  onmouseover="showHide( 11 );" onmouseout="startTime();" ><a href="lamp-apache-pt-br.htm">LAMP no sidux</a>
			<ul class="sub-menu" id="sm11">
				<li><a href="lamp-apache-pt-br.htm#serv-apache">LAMP no sidux</a></li>
				<li><a href="lamp-apache-pt-br.htm#serv-ftp">Clientes FTP</a></li>
				<li><a href="lamp-apache-pt-br.htm#serv-sec">Protocolos de Segurança</a></li>
				<li><a href="lamp-apache-pt-br.htm#serv-ssl">SSL</a></li>
				<li><a href="lamp-sql-pt-br.htm#serv-mysql">Configuração do MySQL</a></li>
				<li><a href="lamp-ppp-pt-br.htm#serv-php">PHP no Apache</a></li>
				<li><a href="ntp-server-pt-br.htm#ntp-server">Configuração do Serviço NTP</a></li>
			</ul>
		</li>
		<li  onmouseover="showHide( 12 );" onmouseout="startTime();" ><a href="internet-connecting-pt-br.htm">Internet e Rede</a>
			<ul class="sub-menu" id="sm12">
				<li><a href="tor-privoxy-pt-br.htm#tor">Tor</a></li>
				<li><a href="tor-privoxy-pt-br.htm#privoxy">Privoxy</a></li>
				<li><a href="internet-connecting-pt-br.htm#firewalls">Firewalls</a></li>
				<li><a href="samba-pt-br.htm#configure">Configurando o SAMBA (Windows)</a></li>
				<li><a href="samba-pt-br.htm#setup">sidux Como Servidor Samba</a></li>
				<li><a href="ssh-pt-br.htm#ssh-fs">Montagem Remota do SSH </a></li>
				<li><a href="ssh-pt-br.htm#ssh-x">Aplicações X via SSH</a></li>
				<li><a href="ssh-pt-br.htm#ssh-f">SSH com o Konqueror</a></li>
				<li><a href="ssh-pt-br.htm#ssh-w">Acesso Remoto SSH a Partir do Windows</a></li>
				<li><a href="ssh-pt-br.htm#ssh">SSH e Segurança</a></li>
				<li><a href="internet-connecting-pt-br.htm#dial-mod">Modems Discados</a></li>
				<li><a href="internet-connecting-ndis-pt-br.htm#ndiswrapper-basic">Ativando o Ndiswrapper</a></li>
				<li><a href="internet-connecting-ndis-pt-br.htm#ndiswrapper-advanced">Ativando o Ndiswrapper -  Avançado</a></li>
				<li><a href="internet-connecting-wpa-pt-br.htm#wpa">WIFI-WLAN</a></li>
				<li><a href="internet-connecting-pt-br.htm#netcardconfig">Configurando a Rede</a></li>
			</ul>
		</li>
		<li  onmouseover="showHide( 13 );" onmouseout="startTime();" ><a href="sys-admin-apt-pt-br.htm">Instalando/Apagando e Rebaixando Pacotes</a>
			<ul class="sub-menu" id="sm13">
				<li><a href="sys-admin-apt-pt-br.htm#apt-cook">Guia do APT e a "Sources list"</a></li>
				<li><a href="sys-admin-meta-pt-br.htm#meta-pack">Instalador do Meta-Package</a></li>
				<li><a href="sys-admin-meta-pt-br.htm#meta-proxy">Instalador do Meta-Package e Proxies</a></li>
				<li><a href="sys-admin-apt-pt-br.htm#apt-install">Instalando um Novo Pacote</a></li>
				<li><a href="sys-admin-apt-pt-br.htm#apt-delete">Apagando um Pacote</a></li>
				<li><a href="sys-admin-apt-pt-br.htm#apt-downgrade">Rebaixando um Pacote</a></li>
				<li><a href="sys-admin-apt-pt-br.htm#apt-cache">Procurando pacotes com o apt-cache</a></li>
				<li><a href="sys-admin-apt-pt-br.htm#apt-kio">Procurando pacotes com o kio-apt</a></li>
				<li><a href="sm-siduxcc-pt-br.htm#sm">Comandos do sm</a></li>
				<li><a href="sm-siduxcc-pt-br.htm#siduxcc">siduxcc</a></li>
				<li><a href="sys-admin-apt-pt-br.htm#apt-upgrade">Atualizando Todo o Sistema -  dist-upgrade</a></li>
			</ul>
		</li>
		<li  onmouseover="showHide( 14 );" onmouseout="startTime();" ><a href="sm-siduxcc-pt-br.htm">Administração do Sistema</a>
			<ul class="sub-menu" id="sm14">
				<li><a href="sm-siduxcc-pt-br.htm#sm">Comandos do sm</a></li>
				<li><a href="sm-siduxcc-pt-br.htm#siduxcc">siduxcc</a></li>
				<li><a href="sys-admin-apt-pt-br.htm#apt-upgrade">Atualizando Todo o Sistema -  dist-upgrade</a></li>
				<li><a href="sys-admin-upgrade-pt-br.htm#live-cd-upgrade">Atualizando Pelo Live-CD</a></li>
				<li><a href="sys-admin-kern-upg-pt-br.htm#kern-upgrade">Atualizando o kernel</a></li>
				<li><a href="sys-admin-rdiff-pt-br.htm#rdiff">Backups com o rdiff</a></li>
				<li><a href="sys-admin-rsync-pt-br.htm#rsync">Backups com o rsync</a></li>
				<li><a href="vir-rkits-pt-br.htm#virus-rkits">Antivírus e Caçadores de Rootkits</a></li>
				<li><a href="sys-admin-gen-pt-br.htm#start-services">Services enable/disable</a></li>
				<li><a href="sys-admin-gen-pt-br.htm#pw-lost">Perda de Senhas root</a></li>
				<li><a href="sys-admin-gen-pt-br.htm#fonts">Fontes</a></li>
				<li><a href="sys-admin-gen-pt-br.htm#cups">CUPS</a></li>
				<li><a href="sys-admin-gen-pt-br.htm#init">Runlevels no sidux - init</a></li>
				<li><a href="sys-admin-grub-bootman2-pt-br.htm#mbr-grub-boot">Sobrescrição da MBR</a></li>
				<li><a href="sys-admin-grub-bootman2-pt-br.htm#dual-boot">Boots Duplos e Múltiplos</a></li>
				<li><a href="sys-admin-grub-bootman2-pt-br.htm#boot-grub-floppy">Criando um Disquete de Boot</a></li>
				<li><a href="sys-admin-grub-bootman2-pt-br.htm#remove-grub">Removendo o GRUB da MBR</a></li>
				<li><a href="sys-admin-grub-bootman2-pt-br.htm#what-is-grub">GRUB, o Gerenciador de Boot</a></li>
			</ul>
		</li>
	</ul>
<!-- menu ends here --> </div>

<div id="main-page">
	<div class="divider" id="mbr-grub-boot">
		<h2 id="top-header">Setor de boot sobrescrito pelo Windows / Como recuperar o GRUB</h2>

							<p> Para reescrever o GRUB na MBR e/ou recuperar o GRUB em geral, você terá de dar o boot pelo LiveCD do sidux.</p>

						<h5 class="highlight-3">Recuperação do GRUB para kernels 2.6.22 e superiores:</h5>

							<p>Abra um terminal e monte a partição onde o sidux está instalado: (substitua 'sdxx' por 'sda2' ou qualquer que seja a partição):</p>
<pre>
sudo mount /media/sdxx
</pre>
							<p>Agora reescreva o GRUB na MBR:</p>

<pre>
sudo /usr/sbin/grub-install --recheck --no-floppy --root-directory=/media/sdxx /dev/sda
</pre>

						<h5 class="highlight-3">Recuperação do GRUB para kernels anteriores a 2.6.22:</h5>

							<p>Dê o boot pelo LiveCD, abra um konsole e torne-se root com:</p>
<pre>
sudo su
</pre>
							<p>Monte a partição onde o sidux está instalado (em nosso exemplo, hdb5)</p>
<pre>
mount /media/hdb5
</pre>
							<p>Agora reescreva o Grub na MBR:</p>

<pre>
grub-install --recheck --no-floppy --root-directory=/media/hdb5 /dev/hda
</pre>

	</div>
	<div class="divider" id="boot-grub-floppy">
		<h2>Criando um disquete de boot</h2>
							<p><a href="http://sidux.com/files/misc/grubboot.zip">Baixe uma imagem do Grub-Floppy</a>. (approx. 580 kB) e brinque um pouco com ela. No disquete você encontra também um FreeDOS funcional e um editor. Se você remover a proteção de escrita do disquete, você pode até editar o menu.lst a seu gosto.</p>

							<p>Outra opção para fazer você mesmo um disquete de boot é usar as ferramentas disponibilizadas pelo <a href="http://www.ultimatebootcd.com/">UBCD (Ultimate Boot Disk CD)</a></p>
			
						<h5>Para fazer um disquete que dê o boot com o GRUB, siga estes passos:</h5>

							<p>1. Formate um disquete</p>
<pre>
# fdformat /dev/fd0
Double-sided, 80 tracks, 18 sec/track. Total capacity 1440 kB.
Formatting ... done
Verifying ... done
</pre>
							<p>2. Crie um sistema de arquivos no disquete (de preferência, ext2, minix(fs) ou vfat)</p>
<pre>
# mkfs -t minix /dev/fd0
480 inodes
1440 blocks
Firstdatazone=19 (19)
Zonesize=1024
Maxsize=268966912
</pre>
							<p>3. Monte o disquete</p>
<pre>
# mount -t minix /dev/fd0 /mnt
</pre>
							<p>4.Execute o script de instalação do GRUB</p>
<pre>
# grub-install --recheck --root-directory=/mnt /dev/fd0
Probing devices to guess BIOS drives. This may take a long time.
Unknown partition table signature
Unknown partition table signature
Unknown partition table signature
Unknown partition table signature
Unknown partition table signature
Unknown partition table signature
Unknown partition table signature
Unknown partition table signature
Unknown partition table signature
Unknown partition table signature
Devido a um bug em xfs_freeze, o comando seguinte pode produzir um erro de
segmentação ('segmentation fault') quando /mnt/boot/grub não estiver em um sistema
de arquivos XFS. Este erro é inofensivo e pode ser ignorado.
xfs_freeze: specified file ["/mnt/boot/grub"] is not on an XFS filesystem
Unknown partition table signature
Installation finished. No error reported.
Este é o conteúdo do dispositivo map /mnt/boot/grub/device.map.
Cheque se está certo ou não. Se houver alguma linha incorreta,
corrija-a a execute de novo o script `grub-install'.
 
(fd0)   /dev/fd0
(hd0)   /dev/sda
</pre>
							<p>5. Últimos Passos</p>
<pre>
# sed "s|^gfxmenu.*|gfxmenu\ \\(fd0\\)\\/boot\\/message|" /boot/grub/menu.lst > /mnt/boot/grub/menu.lst
# cp -L /boot/message /mnt/boot/
# umount /mnt
</pre>
							
			
	</div>
	<div class="divider" id="remove-grub">
		<h2>Removendo o GRUB da MBR</h2>

<p>É muito simples, basta digitar como root:</p>
<pre>lilo -M /dev/hda -s /dev/null</pre>

			<p>em um terminal.</p>
	</div>
	<div class="divider" id="what-is-grub">
		<h2>GRUB, o Gerenciador de Boot - o que é isto?</h2>

			<h3>Geral</h3>
<pre>
<span class="highlight-3">OBSERVAÇÃO: A partir do kernel 2.6.22, o Grub passou a usar sdax
e a linha
initrd (hd0.x)/sidux/miniroot.gz
mudou para:
initrd		/boot/initrd.img-2.6.xx.x-slh-smp-x</span>
</pre>
							<p>O GRUB é um gerenciador de boot que pode iniciar sistemas operacionais em diferentes partições. O GRUB não depende de uma lista de blocos para encontrar os arquivos necessários para dar a partida em um sistema e pode ler vários sistemas de arquivos: ext2, ext3, reiserfs, ... (Linux), Fat32, Fat16 (Windows), UFS (BSD), Minix e muitos outros.</p>

							<p>O GRUB compreende as extensões da BIOS (o que significa que pode dar boot a partições acima de 8 GByte!) e não tem a barreira 1024-cylinder. O Grub não precisa saber onde o kernel reside fisicamente, tudo de que ele precisa é da declaração da partição e o caminho para o kernel a ser iniciado (pode ser até um link simbólico). Se for feita alguma mudança no arquivo de configuração 'menu.lst', ele não precisa ser rodado (como acontece com o Lilo, outro gerenciador): a nova configuração entra em vigor quando o computador for reiniciado.</p>

							<p>O sidux usa o GRUB para iniciar pelo LiveCD. Se for instalado no HD, o Grub também será usado como gerenciador padrão. Mas ele pode ser instalado em qualquer tempo sem problemas: para instalá-lo na MBR, abra um terminal e digite como root:</p>


<pre>
grub-install --root-directory=/media/hdaX /dev/hdY
</pre>

							<p>/media/hdaX é a partição montada como 'leitura', onde, no diretório "/boot/grub" serão colocados os arquivos necessários (stage2, stage1_5xxx). O arquivo de configuração 'menu.lst' também precisa ser criado naquele diretório. Já /dev/hdY é o disco rígido em cuja MBR o Grub será instalado; geralmente, é o /dev/hda.</p>

						<h3>Nomes de discos/Nomes de dispositivos</h3>

							<p><span class="highlight-2">NOTA: </span><span class="highlight-3">hda</span> está em processo de extinção, portanto comece a substituir <span class="highlight-3">hda </span>por <span class="highlight-3">sda</span> a partir do kernel 2.6.22 e seguintes.</p>

		<p>O GRUB não diferencia HDs SCSI de HDs IDE. (hd0) é sempre o primeiro HD que, por sua vez, é sempre o primeiro na seqüência de boot (isso é configurado na BIOS), independentemente de ser SCSI ou IDE. Já o método de numeração é singular: a primeira partição no primeiro HD é (hd0,0). Partições primárias são numeradas de 0 a 3, partições lógicas de 4 para cima.</p>

		<table>
			<tbody>
				<tr>
					<th><b>Grub</b></th>
					<th><b>Linux</b></th>
					<th><b>Rótulo</b></th>
				</tr>
				<tr>
					<td>(fd0)</td>
					<td>/dev/fd0</td>
					<td>Floppy ou Disquete (sob Windows)</td>
				</tr>
				<tr>
					<td>(hda0)</td>
					<td>/dev/hda</td>
					<td>primeiro HD</td>	
				</tr>
				<tr>
					<td>(hd0,0)</td>
					<td>/dev/hda1</td>
					<td>Partição1 no HD1</td>	
				</tr>
				<tr>
					<td>(hd0,5)</td>
					<td>/dev/hda6</td>
					<td>Partição estendida no HD1</td>	
				</tr>
			</tbody>
		</table>
	<div class="spacer05"></div>
							<p>Todas as denominações de dispositivos são colocadas entre parêntesis. Cuidado, porém, com os dados na linha do kernel no 'menu.lst': contrastando com o próprio Grub, o kernel exige que os dados sejam escritos na maneira normal do Linux. As entradas no seguinte exemplo se referem à mesma partição, no caso a quarta partição do primeiro HD. A primeira linha está na notação do Grub, já a segunda usa a notação típica do Linux:</p>
<pre>
root (hd0,3)
kernel          /boot/vmlinuz root=UUID=bf955abf-ce1f-45a3-9ee5-93b5c5dc4fe0 ro quiet vga=791
initrd          /boot/initrd.img
</pre>

					<h3>Modo de Comando (Grub-Shell)</h3>

							<p>Uma característica muito confortável do Grub é o Modo de Comando ('Command-Mode'). Ele é acessado teclando-se a letra "c", que abre a Grub-Shell, uma espécie de terminal do Grub. Com ela, você pode encontrar e dar o boot a diferentes sistemas e arquivos (p. ex., o kernel), mesmo com um 'menu.lst' avariado.</p>

							<p>Para testar um pouco, você pode até rodar o Grub em um terminal dentro de um sistema que está em execução. Basta tornar-se root e digitar 'grub'. Na Grub-Shell você pode visualizar todos os comandos possíveis com "help". Ajuda detalhada para cada comando pode ser obtida com <span class="highlight-3">help comando</span>. Para sair do Modo de Comando do Grub, digite "quit" (a Grub-Shell é fechada). Na Grub-Shell, a tecla Tab tem uma função similar à do terminal do Linux, o que é uma grande facilidade. Comandos, nomes de HDs, nomes de arquivos etc podem ser auto-completados com a tecla Tab.</p>

							<p>O GRUB dá-lhe a oportunidade de localizar o kernel e initrd antes do boot, usando  o comando "find", como neste exemplo:</p>

<pre>
find /boot/vmlinuz
</pre>

							<p>O Grub irá mostrar as partições que tiverem um kernel com o nome "vmlinuz" no diretório "/boot":</p>

<pre>
(hd0,3) (hd1,0)
</pre>

							<p>Todas as partições disponíveis podem ser encontradas com "geometry". Exemplo:</p>

<pre>
geometry (hd0)
</pre>

							<p>mostra o seguinte:</p>

<pre>
"drive 0x80: C/H/S = 3648/255/63, The number of sectors = 58605120, /dev/hda Partition num: 0,
Filesystem type is fat, partition type 0xb Partition num: 1,
Filesystem type is fat, partition type 0xb Partition num: 2,
Filesystem type is fat, partition type 0xc Partition num: 4,
Filesystem type is ext2fs, partition type 0x83 Partition num: 5,
Filesystem type unknown, partition type 0x82 Partition num: 6,
Filesystem type is fat, partition type 0xb"
</pre>
							<p>Depois que o kernel ou initrd (ou miniroot.gz) tiverem sido encontrados, você pode iniciar o sistema com "boot".</p>


				<h3>Modo de Edição</h3>

							<p>Este modo permite a você fazer alterações no arquivo enquanto o sistema é carregado. Isto funciona mesmo quando o Grub é rodado do LiveCD e o 'menu.lst' é protegido contra escrita. Primeiro, pressione ESC, confirme com Return/Enter e pressione "e". Adicione os parâmetros no final da linha (ou no meio delas, usando as setas direcionais).</p>


				<h3>menu.lst (exemplos de possíveis entradas)</h3>

							<p>Linhas com comentários começam com # e não interferem com o processo de boot, portanto podem ficar no arquivo.</p>

<pre>
# Exemplo de /boot/grub/menu.lst
################################################
# setkey muda o leiaute do teclado para alemão (neste exemplo)
setkey y z
setkey z y
setkey Y Z
setkey Z Y
setkey equal parenright
setkey parenright parenleft
setkey parenleft asterisk
setkey doublequote at
setkey plus bracketright
setkey minus slash
setkey slash ampersand
setkey ampersand percent
setkey percent caret
setkey underscore question
setkey question underscore
setkey semicolon less
setkey less numbersign
setkey numbersign backslash
setkey colon greater
setkey greater bar
setkey asterisk braceright
# menu.lst - See: grub(8), info grub, update-grub(8)
#            grub-install(8), grub-floppy(8),
#            grub-md5-crypt, /usr/share/doc/grub
#            and /usr/share/doc/grub-doc/.

## default num
# Set the default entry to the entry number NUM. Numbering starts from 0, and
# the entry number 0 is the default if the command is not used.
default		0

## timeout sec
# Set a timeout, in SEC seconds, before automatically booting the default entry
# (normally the first entry defined).
timeout		5

# Pretty colours
color cyan/blue white/blue
gfxmenu (hd0,5)/boot/message

## password ['--md5'] passwd
# If used in the first section of a menu file, disable all interactive editing
# control (menu entry editor and command-line)  and entries protected by the
# command 'lock'
# e.g. password topsecret
#      password --md5 $1$gLhU0/$aW78kHK1QfV3P2b2znUoe/
# password topsecret

#
# examples
#
# title		Windows 95/98/NT/2000
# root		(hd0,0)
# makeactive
# chainloader	+1
#
# title		Linux
# root		(hd0,1)
# kernel	/vmlinuz root=/dev/hda2 ro
#

#
# Put static boot stanzas before and/or after AUTOMAGIC KERNEL LIST

### BEGIN AUTOMAGIC KERNELS LIST
## lines between the AUTOMAGIC KERNELS LIST markers will be modified
## by the debian update-grub script except for the default options below

## DO NOT UNCOMMENT THEM, Just edit them to your needs

## ## Start Default Options ##
## default kernel options
## default kernel options for automagic boot options
## If you want special options for specific kernels use kopt_x_y_z
## where x.y.z is kernel version. Minor versions can be omitted.
## e.g. kopt=root=/dev/hda1 ro
##      kopt_2_6_8=root=/dev/hdc1 ro
##      kopt_2_6_8_2_686=root=/dev/hdc2 ro
# kopt=root=UUID=1885d68b-cc9c-49f8-9f98-a6874e7b3e7e ro  quiet vga=791

## default grub root device
## e.g. groot=(hd0,0)
# groot=(hd0,5)

## should update-grub create alternative automagic boot options
## e.g. alternative=true
##      alternative=false
# alternative=false

## should update-grub lock alternative automagic boot options
## e.g. lockalternative=true
##      lockalternative=false
# lockalternative=false

## additional options to use with the default boot option, but not with the
## alternatives
## e.g. defoptions=vga=791 resume=/dev/hda5
# defoptions=

## should update-grub lock old automagic boot options
## e.g. lockold=false
##      lockold=true
# lockold=false

## Xen hypervisor options to use with the default Xen boot option
# xenhopt=

## Xen Linux kernel options to use with the default Xen boot option
# xenkopt=console=tty0

## altoption boot targets option
## multiple altoptions lines are allowed
## e.g. altoptions=(extra menu suffix) extra boot options
##      altoptions=(single-user) single
# altoptions=(single-user mode) single

## controls how many kernels should be put into the menu.lst
## only counts the first occurence of a kernel, not the
## alternative kernel options
## e.g. howmany=all
##      howmany=7
# howmany=all

## should update-grub create memtest86 boot option
## e.g. memtest86=true
##      memtest86=false
# memtest86=true

## should update-grub adjust the value of the default booted system
## can be true or false
# updatedefaultentry=false

## ## End Default Options ##

title		Debian GNU/Linux, kernel 2.6.22.1-slh-smp-7
root		(hd0,5)
kernel		/boot/vmlinuz-2.6.22.1-slh-smp-7 root=UUID=1885d68b-cc9c-49f8-9f98-a6874e7b3e7e ro  quiet vga=791 
initrd		/boot/initrd.img-2.6.22.1-slh-smp-7

title		Debian GNU/Linux, kernel 2.6.22.1-slh-smp-7 (single-user mode)
root		(hd0,5)
kernel		/boot/vmlinuz-2.6.22.1-slh-smp-7 root=UUID=1885d68b-cc9c-49f8-9f98-a6874e7b3e7e ro  quiet vga=791 single
initrd		/boot/initrd.img-2.6.22.1-slh-smp-7

### END DEBIAN AUTOMAGIC KERNELS LIST

#### MS (TM)
title Windows 2K/XP/2003 (hda1)
chainloader (hd0,0)+1

### ISO boot
title sidux 32bit from gaiaISO
kernel (hd0,3)/sidux3/vmlinuz-2.6.22.1-slh-smp-7 boot=fll quiet vga=791 fromiso=/sidux3/siduxgaia.iso
initrd (hd0,3)/sidux3/initrd.img-2.6.22.1-slh-smp-7


title Debian GNU/Linux, kernel 2.6.18-1-686 (hda5)
root (hd0,4)
kernel (hd0,4)/boot/vmlinuz-2.6.18-1-686 root=/dev/hda5 ro vga=791
initrd (hd0,4)/boot/initrd.img-2.6.18-1-686
savedefault
</pre>

	</div>
	<div class="divider" id="dual-boot">
			<h2>Boots Duplos e Múltiplos</h2>

<pre>
<span class="highlight-3">NOTA: O Grub passou a usar sdax do kernel 2.6.22 em diante
e a linha
initrd (hd0,x)/sidux/miniroot.gz
mudou para:
initrd		/boot/initrd.img-2.6.xx.x-slh-smp-x</span>
</pre>

							<p>Habilitar o GRUB a dar boot em diversos sistemas operacionais é muito simples com o uso de chainloading. Por exemplo, se em seu computador estão instalados o MS Windows (TM)  e o  Debian etch, além do sidux 'fromiso', basta editar o arquivo <span class="highlight-3">/boot/grub/menu.lst </span>e adicionar as seguintes linhas após <span class="highlight-3">### END DEBIAN AUTOMAGIC KERNELS LIST</span>:</p>


<pre>
####MS Windows (TM) perhaps even MS Vista (TM)
Title Windows (95/98/XP/Vista
rootnoverify (hd0,1)
makeactive
chainloader +1

### Debian etch
title Debian etch
kernel (hd0,3)/debian/vmlinuz root=/dev/hda4 ro (or whatever)
initrd (hd0,3)/debian/miniroot.gz (or (whatever)

### ISO boot
title sidux 32bit from gaiaISO
kernel (hd0,3)/sidux3/vmlinuz-2.6.22.1-slh-smp-7 boot=fll quiet vga=791 fromiso=/sidux3/siduxgaia.iso
initrd (hd0,3)/sidux3/initrd.img-2.6.22.1-slh-smp-7
</pre>


							<p>Algumas pessoas necessitam/desejam diversas instalações do MS Windows (TM). O MS Windows (TM) quer sempre ser iniciado no disco 1. Teremos de esconder uma partição e ativar outra. Os seguintes comandos devem ser digitados na Linha de Comando do GRUB e, se der certo, copiados para o arquivo /boot/grub/menu.lst. Isso tem de ser feito para todas as partições Windows. Não se esqueça de fazer cópia de seus dados:</p>

<pre>hide (hd0,0) # esconde partição 1 do HD 1
unhide (hd0,1) # torna visível partição 2 do HD 1
rootnoverify (hd0,1) # torna partição 2 do HD 1 o sistema de arquivos Root
makeactive # ativa partição 2 do HD 1
chainloader +1 # aponta para o primeiro setor da partição de boot
boot # dá partida no sistema operacional</pre>

							<p>Se quiser rodar um 2o. Windows, que está no 2o. disco, troque os HDs virtualmente. Dessa forma, o Windows verá uma simulação de HD 1:</p>

<pre>
map (hd0) (hd1)
map (hd1) (hd0)
</pre>


					<h3>Advertências Finais</h3>

							<p>Como o Grub não tem a barreira dos 1024-cilindros e pode, com isso, dar boot em sistemas acima desses 1024 cilindros, o "/boot/grub/stage2" tem de estar acessível para a BIOS (tem de ficar antes dos 1024 cilindros). O Stage2 não pode ser movido depois da instalação (o Defrag, p.ex., pode tentar fazer isso). Dados de configuração serão escritos e perderão a coerência com a realidade. Por tudo isso, o ideal é fazer o 'stage2' somente-leitura (read-only). Você precisar estar no diretório corrente:</p>

<pre>
Dos: attrib +r +s stage2
LINUX: # chmod a -w ./stage2
</pre>


				<h3>Onde encontrar mais sobre o assunto</h3>



							<p><a href="http://www.gnu.org/software/grub/grub-faq.en.html">Página oficial das FAQs do GRUB</a>.</p>

							<p>Se sua uma placa de rede funcionar bem no Linux, o Grub pode dar boot através da rede.<a href="http://os.inf.tu-dresden.de/%7Efm3/grub.html"> Um Disco de Boot pode ser obtido aqui (apesar de ser usada uma versão antiga do Grub).</a>.</p>
				
	</div>
	<div class="spacer05"></div>


</div>
</body>
</html>
