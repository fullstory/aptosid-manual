<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
   "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
	<title>Manuais do sidux - Grub2 (RO)</title>
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
	<style type="text/css" media="all">@import url("../lib/css-js/content.css");</style>
        <style type="text/css" media="all">@import url("../lib/css-js/menu.css");</style>
        <style type="text/css" media="print">@import url("../lib/css-js/print.css");</style>
        <link rel ="shortcut icon" href="../lib/favicon/manual.ico" />
        <script type="text/javascript" src="../lib/css-js/menu2.js"></script>
        <!--[if lt IE 8]>
        <link rel="stylesheet" type="text/css" href="../lib/css-js/ie_5-7_override.css">
        <![endif]-->
        <!--[if lt IE 7]>
        <link rel="stylesheet" type="text/css" href="../lib/css-js/ie_5-6_override.css">
        <![endif]-->
</head>
<body>
<!-- Last translation revision by bluewater 22/04/2009 1350hrs UTC -->
<div id="menu"> <!-- menu starts here pt-br lang maintainer ceti-->
<!--sidux-manual Operating System Manual menu-version-02.01.2010.10.19 -->
<!-- menu last updated by bluewater 2010.01.19 0420 hrs UTC -->
	<div id="menu-header">
	      <a href="http://sidux.com/"><img src="../lib/logos/manual-sidux-logo.png" title="Ir para sidux.com forums e wiki" alt="sidux.com logo" /></a>
	</div>
	<ul id="top-list">
		<li><a href="manual-search-pt-br.htm#search-on"><img src="../lib/logos/manual-search-22x22.png" title="Search Manual" alt="Search" /> Procurar Online Offline</a> </li>
		<li><a href="http://manual.sidux.com/meta-manual">Seleção de Softwares da Comunidade</a></li>
	</ul>
	<div id="flags-2">
			<a href="../flag-index.html"><img src="../lib/logos/sidux-lang-100x64.png" title="Escolha outra língua - Choose another language" alt="troca-língua" /></a>
	</div>
	<ul>
		<li  onmouseover="showHide( 1 );" onmouseout="startTime();" ><a href="welcome-pt-br.htm">Manual do sidux</a>
			<ul class="sub-menu" id="sm1">
				<li><a href="welcome-pt-br.htm#welcome-gen">Manual do sidux</a></li>
				<li><a href="welcome-pt-br.htm#how-to">Como usar este manual</a></li>
				<li><a href="welcome-pt-br.htm#table-contents">Índice</a></li>
				<li><a href="help-pt-br.htm#help-gen">Onde encontrar ajuda</a></li>
				<li><a href="help-pt-br.htm#paste">IRC !paste</a></li>
				<li><a href="credits-pt-br.htm#cred-team">Créditos</a></li>
				<li><a href="wel-quickstart-pt-br.htm#welcome-quick">Guia Rápido do sidux</a></li>
			</ul>
		</li>
		<li  onmouseover="showHide( 2 );" onmouseout="startTime();" ><a href="cd-dl-burning-pt-br.htm">Conteúdo da ISO, lançamentos, espelhos e queima</a>
			<ul class="sub-menu" id="sm2">
				<li><a href="cd-content-pt-br.htm#cd-content">Conteúdo da ISO e requisitos do sistema</a></li>
				<li><a href="sys-admin-release-pt-br.htm#rolling">Notas sobre atualização automática de versão</a></li>
				<li><a href="cd-dl-burning-pt-br.htm#download-sidux">Espelhos para baixar e queimar</a></li>
				<li><a href="cd-dl-burning-pt-br.htm#md5">Checando o md5</a></li>
				<li><a href="cd-dl-burning-pt-br.htm#burn-nero">Queimando no Windows</a></li>
				<li><a href="cd-dl-burning-pt-br.htm#burn-linux">Queimando no Linux</a></li>
				<li><a href="cd-no-gui-burn-pt-br.htm#burning-no-gui">Script burniso </a></li>
				<li><a href="cd-no-gui-burn-pt-br.htm#burning-no-gen">Queimando sem interface gráfica</a></li>
			</ul>
		</li>
		<li  onmouseover="showHide( 3 );" onmouseout="startTime();" ><a href="live-mode-pt-br.htm">Modo Live</a>
			<ul class="sub-menu" id="sm3">
				<li><a href="live-mode-pt-br.htm#rootpw">Senha de root no sidux-Live ISO</a></li>
				<li><a href="live-mode-pt-br.htm#live-cd-installsoft">Instalando software no modo sidux-Live ISO</a></li>
				<li><a href="live-mode-pt-br.htm#ntfs-3g">Escrevendo em partições NTFS com o ntfs-3g</a></li>
			</ul>
		</li>
		<li  onmouseover="showHide( 4 );" onmouseout="startTime();" ><a href="term-konsole-pt-br.htm">O Terminal/Konsole</a>
			<ul class="sub-menu" id="sm4">
				<li><a href="term-konsole-pt-br.htm#sux">  sux / sudo</a></li>
				<li><a href="term-konsole-pt-br.htm#term-kon"> Terminal/Konsole</a></li>
				<li><a href="term-konsole-pt-br.htm#cli-help">Ajuda para a linha de comando</a></li>
				<li><a href="help-pt-br.htm#init3-tools">Ferramentas a conhecer no modo texto (tty) - init 3</a></li>
				<li><a href="term-konsole-pt-br.htm#term-cmds">Lista de comandos do terminal</a></li>
				<li><a href="term-konsole-pt-br.htm#shell-scripts">Instalando scripts .sh</a></li>
			</ul>
		</li>
		<li  onmouseover="showHide( 5 );" onmouseout="startTime();" ><a href="cheatcodes-pt-br.htm">Cheatcodes</a>
			<ul class="sub-menu" id="sm5">
				<li><a href="cheatcodes-pt-br.htm#cheatcodes">Cheatcodes específicas do sidux-Live ISO</a></li>
				<li><a href="cheatcodes-pt-br.htm#cheatcodes-linux">Cheatcodes para o Linux em geral</a></li>
				<li><a href="cheatcodes-vga-pt-br.htm#vga">Códigos para VGA</a></li>
			</ul>
		</li>
		<li  onmouseover="showHide( 6 );" onmouseout="startTime();" ><a href="part-gparted-pt-br.htm">Particionando seu HD</a>
			<ul class="sub-menu" id="sm6">
				<li><a href="part-gparted-pt-br.htm#partition">Particionando seu HD com o GParted</a></li>
				<li><a href="part-gparted-pt-br.htm#ntfs">Redimensionando a partição NTFS com o GParted</a></li>
				<li><a href="part-uuid-pt-br.htm#uuid">UUID, nomeando partições e a fstab</a></li>
				<li><a href="part-cfdisk-pt-br.htm#disknames">Nomes dos discos: uma breve explicação</a></li>
				<li><a href="part-cfdisk-pt-br.htm#partition">Particionando seu HD com o cfdisk</a></li>
				<li><a href="part-cfdisk-pt-br.htm#formating">Formatando com o cfdisk, após particionamento</a></li>
				<li><a href="part-size-examp-pt-br.htm#part-example">Exemplos de tamanhos de partições</a></li>
			</ul>
		</li>
		<li  onmouseover="showHide( 7 );" onmouseout="startTime();" ><a href="hd-install-pt-br.htm">Opções de Instalação</a>
			<ul class="sub-menu" id="sm7">
				<li><a href="hd-install-pt-br.htm#Inst-prep">Preparando a instalação</a></li>
				<li><a href="hd-install-pt-br.htm#Installation">Instalando no HD</a></li>
				<li><a href="hd-install-pt-br.htm#first-hd-boot">Primeira inicialização</a></li>
				<li><a href="hd-install-opts-pt-br.htm#fromiso">Inicializando com 'fromiso' - visão geral</a></li>
				<li><a href="hd-install-opts-pt-br.htm#fromiso-grub-leg">Dando o boot pelo 'fromiso' com grub-legacy</a></li>
				<li><a href="hd-install-opts-pt-br.htm#grub2-fromiso">Dando o boot pelo 'fromiso' com Grub 2</a></li>
				<li><a href="hd-install-opts-pt-br.htm#fromiso-persist">Fromiso e persist</a></li>
				<li><a href="hd-install-opts-pt-br.htm#usb-hd">Instalando em HD-USB - sidux specific - sidux-on-stick</a></li>
				<li><a href="hd-ins-opts-oos-pt-br.htm#raw-usb">Instalando em dispositivo USB/SSD com qualquer sistema Linux, MS Windows ou Mac OSX</a></li>
				<li><a href="nbdboot-pt-br.htm#nbd1">Inicializando o sidux através de uma rede</a></li>
				<li><a href="hd-install-opts-pt-br.htm#vtbox">Instalando com o VirtualBox</a></li>
				<li><a href="hd-install-opts-pt-br.htm#qemu">Instalando com o QEMU</a></li>
			</ul>
		</li>
		<li  onmouseover="showHide( 8 );" onmouseout="startTime();" ><a href="hw-dev-hw-dri-pt-br.htm">Placas de Vídeo, Dispositivos Diversos, Xorg &amp;  Drivers</a>
			<ul class="sub-menu" id="sm8">
				<li><a href="hw-dev-hw-dri-pt-br.htm#hd-ntfs3g">Escrevendo em partições NTFS com o ntfs-3g</a></li>
				<li><a href="hw-dev-mon-pt-br.htm#mon-res">Resolução de tela e monitores</a></li>
				<li><a href="hw-dev-mon-pt-br.htm#xrandr">Dois monitores e xrandr</a></li>
				<li><a href="hw-dev-mon-pt-br.htm#mon-binary">Dois monitores (usando binários)</a></li>
				<li><a href="hw-dev-hw-dri-pt-br.htm#non-free-3d">Drivers proprietários para nVidia &amp; xorg.conf</a></li>
				<li><a href="hw-dev-hw-dri-pt-br.htm#non-free-3d-2">Drivers proprietários para ATI, Radeon e outras</a></li>
				<li><a href="hw-dev-hw-dri-pt-br.htm#non-free-firmware">Hardware que precisa de firmware não livre</a></li>
				<li><a href="hw-dev-hw-dri-pt-br.htm#non-free">Adicionando repositórios não livres à sources.list</a></li>
				<li><a href="hw-dev-hw-dri-pt-br.htm#native-nv-ati">Os drivers FOSS para NVidia, ATI, Radeon e Intel na xorg &amp; xorg.conf</a></li>
			</ul>
		</li>
		<li  onmouseover="showHide( 9 );" onmouseout="startTime();" ><a href="wm-kde-pt-br.htm">Gerenciadores de Janelas</a>
			<ul class="sub-menu" id="sm9">
				<li><a href="wm-xfce-pt-br.htm#xfce-notes">Extras úteis para o XFCE</a></li>
				<li><a href="wm-kde-pt-br.htm#install-add">Extras úteis para o KDE</a></li>
				<li><a href="wm-kde-pt-br.htm#desk-freeze">Travamentos do desktop</a></li>
				<li><a href="wm-kde-pt-br.htm#kde-login">Não consigo entrar no KDE</a></li>
				<li><a href="wm-kde-pt-br.htm#ch-th">Mudando temas</a></li>
				<li><a href="wm-kde-pt-br.htm#dm">Gerenciadores de ambientes</a></li>
			</ul>
		</li>
		<li  onmouseover="showHide( 10 );" onmouseout="startTime();" ><a href="lamp-apache-pt-br.htm">LAMP no sidux</a>
			<ul class="sub-menu" id="sm10">
				<li><a href="lamp-apache-pt-br.htm#serv-apache">LAMP no sidux</a></li>
				<li><a href="lamp-apache-pt-br.htm#serv-ftp">Clientes FTP</a></li>
				<li><a href="lamp-apache-pt-br.htm#serv-sec">Protocolos de segurança</a></li>
				<li><a href="lamp-apache-pt-br.htm#serv-ssl">SSL</a></li>
				<li><a href="lamp-sql-pt-br.htm#serv-mysql">Configuração do MySQL</a></li>
				<li><a href="lamp-ppp-pt-br.htm#serv-php">PHP no Apache</a></li>
				<li><a href="ntp-server-pt-br.htm#ntp-server">Configuração do serviço NTP</a></li>
			</ul>
		</li>
		<li  onmouseover="showHide( 11 );" onmouseout="startTime();" ><a href="internet-connecting-pt-br.htm">Internet e Rede</a>
			<ul class="sub-menu" id="sm11">
				<li><a href="tor-privoxy-pt-br.htm#tor">Tor</a></li>
				<li><a href="tor-privoxy-pt-br.htm#privoxy">Privoxy</a></li>
				<li><a href="internet-connecting-pt-br.htm#firewalls">Firewalls</a></li>
				<li><a href="samba-pt-br.htm#configure">Configurando o SAMBA (Windows)</a></li>
				<li><a href="samba-pt-br.htm#setup">sidux como servidor Samba</a></li>
				<li><a href="ssh-pt-br.htm#ssh-fs">Montagem remota do SSH </a></li>
				<li><a href="ssh-pt-br.htm#ssh-x">Aplicações X via SSH</a></li>
				<li><a href="ssh-pt-br.htm#ssh-f">SSH com o Konqueror</a></li>
				<li><a href="ssh-pt-br.htm#ssh-w">Acesso remoto SSH a partir do Windows</a></li>
				<li><a href="ssh-pt-br.htm#ssh">SSH e segurança</a></li>
				<li><a href="internet-connecting-pt-br.htm#dial-mod">Modems discados</a></li>
				<li><a href="internet-connecting-wpagui-pt-br.htm#wpa-roaming-gui">WiFi - roaming WPA-GUI</a></li>
				<li><a href="internet-connecting-wpa-pt-br.htm#wpa-basic">WiFi - guia básico de configuração</a></li>
				<li><a href="internet-connecting-wpa-pt-br.htm#wpa">WiFi - wpasupplicant</a></li>
				<li><a href="internet-connecting-pt-br.htm#netcardconfig">Configurando a rede - Ceni</a></li>
			</ul>
		</li>
		<li  onmouseover="showHide( 12 );" onmouseout="startTime();" ><a href="sys-admin-apt-pt-br.htm">Dist-upgrade e Gerenciamento de Pacotes</a>
			<ul class="sub-menu" id="sm12">
				<li><a href="sys-admin-apt-pt-br.htm#apt-cook">Guia do APT e a sources list</a></li>
				<li><a href="sys-admin-apt-pt-br.htm#apt-install">Instalando um novo pacote</a></li>
				<li><a href="sys-admin-apt-pt-br.htm#apt-delete">Apagando um pacote</a></li>
				<li><a href="sys-admin-apt-pt-br.htm#apt-downgrade">Rebaixando um pacote</a></li>
				<li><a href="sys-admin-apt-pt-br.htm#apt-cache">Procurando pacotes com o apt-cache</a></li>
				<li><a href="sys-admin-apt-pt-br.htm#gui-pacsea">Procurando pacotes no modo gráfico</a></li>
				<li><a href="sys-admin-upgrade-pt-br.htm#live-cd-upgrade">Atualizando pelo Live- ISO</a></li>
				<li><a href="sys-admin-apt-locarmirr-pt-br.htm#approx">Dist-upgrade de múltiplos PCs em uma LAN</a></li>
				<li><a href="sys-admin-kern-upg-pt-br.htm#kern-upgrade">Atualizando o kernel</a></li>
				<li><a href="sys-admin-kern-upg-pt-br.htm#dmakms">Instalando módulos do kernel dinamicamente com dmakms</a></li>
				<li><a href="sys-admin-apt-pt-br.htm#apt-upgrade">Atualizando todo o sistema (dist-upgrade) - visão geral</a></li>
				<li><a href="sys-admin-apt-pt-br.htm#du-st">Atualizando todo o sistema (dist-upgrade) - os passos</a></li>
			</ul>
		</li>
		<li  onmouseover="showHide( 13 );" onmouseout="startTime();" ><a href="sys-admin-gen-pt-br.htm">Administração do Sistema</a>
			<ul class="sub-menu" id="sm13">
				<li><a href="hd-install-pt-br.htm#adduser">Adicionando um novo usuário</a></li>
				<li><a href="home-pt-br.htm#home-bu">Movendo a /home</a></li>
				<li><a href="sys-admin-rdiff-pt-br.htm#rdiff">Backups com o rdiff</a></li>
				<li><a href="sys-admin-rsync-pt-br.htm#rsync">Backups com o rsync</a></li>
				<li><a href="vir-rkits-pt-br.htm#virus-rkits">Antivírus e caçadores de rootkits</a></li>
				<li><a href="sys-admin-gen-pt-br.htm#start-services">Habilitando/desabilitando serviços</a></li>
				<li><a href="sys-admin-gen-pt-br.htm#pw-lost">Perda de senhas root</a></li>
				<li><a href="sys-admin-gen-pt-br.htm#fonts">Fontes</a></li>
				<li><a href="sys-admin-gen-pt-br.htm#cups">CUPS - sistema de impressão</a></li>
				<li><a href="sys-admin-gen-pt-br.htm#sound">Misturadores de som</a></li>
				<li><a href="sys-admin-gen-pt-br.htm#init">Runlevels no sidux - init</a></li>
				<li><a href="bios-freedos-pt-br.htm#bois-prep">Atualizando a BIOS com FreeDOS</a></li>
				<li><a href="sys-admin-grub-bootman2-pt-br.htm#boot-grub-floppy">Criando um disquete de boot</a></li>
				<li><a href="sys-admin-grub-bootman2-pt-br.htm#mbr-grub-boot">Grub1 - sobrescrição da MBR</a></li>
				<li><a href="sys-admin-grub-bootman2-pt-br.htm#dual-boot">Grub1 - boots duplos e múltiplos</a></li>
				<li><a href="sys-admin-grub-bootman2-pt-br.htm#remove-grub">Removendo o GRUB da MBR</a></li>
				<li><a href="sys-admin-grub-bootman2-pt-br.htm#what-is-grub">Grub, o gerenciador de boot</a></li>
				<li><a href="sys-admin-grub2-pt-br.htm#mbr-over-grub2">Grub2 - sobrescrição da MBR</a></li>
				<li><a href="sys-admin-grub2-pt-br.htm#multi-os">Grub2 - boots duplos e múltiplos</a></li>
				<li><a href="sys-admin-grub2-pt-br.htm#grub1-grub2">Grub2 -atualizando a partir do Grub1</a></li>
				<li><a href="sys-admin-grub2-pt-br.htm#grub2">Grub2 - visão geral</a></li>
			</ul>
		</li>
	</ul>
<!-- menu ends here --> </div>
<div id="main-page">
		<div class="divider" id="grub2">
			<h2 id="top-header">GRUB 2</h2>
				<h6>Resumo básico das principais diferenças entre o GRUB 1 (agora chamado de grub-legacy) e o GRUB 2:</h6>

					<ul>
						  	<li><span class="highlight-3">Não existe mais o arquivo menu.lst.</span></li>

							<li>Um arquivo com o nome de <span class="highlight-3">grub.cfg</span> agora controla a tela do Grub.</li>

							<li>O grub.cfg é gerado automaticamente pelos scripts localizados em <span class="highlight-3"> /etc/grub.d</span>.</li>

							<li>O sistema de numeração das partições também é diferente. Elas agora começam em 1, ao invés de 0 (os drives continuam a ser numerados a partir de 0):
<pre>
Linux      grub1     grub2
/dev/sda1  (hd0,0)   (hd0,1)
/dev/sda2  (hd0,1)   (hd0,2)
/dev/sda3  (hd0,2)   (hd0,3)

/dev/sdb1  (hd1,0)   (hd1,1)
/dev/sdb2  (hd1,1)   (hd1,2)
/dev/sdb3  (hd1,2)   (hd1,3)
</pre>
							</li>

							<li>As seções do grub.cfg são formadas de maneira levemente diferente, se comparadas com o menu.lst. Não é possível, portanto, copiar as instâncias do menu.lst diretamente para o grub.cfg, já que este é o arquivo "resultante". <span class="highlight-2">Aliás, o arquivo grub.cfg não deve nunca ser alterado manualmente. </span></li>

					 </ul>

					 <h4> O arquivo de configuração padrão do Grub 2</h4>
							<p>O arquivo <span class="highlight-3">/etc/default/grub</span> contém as variáveis do grub2. Por exemplo, fim de espera ('timeout') no menu, entradas a ser ativadas pelo menu, parâmetros do kernel, o uso ou não de gráficos e por aí afora.</p>

					 <h4> Os scripts do Grub 2</h4>
							<p>Os arquivos que estão em <span class="highlight-3"> /etc/grub.d</span> controlam o arquivo "resultante", chamado, como já vimos, <span class="highlight-3"> grub.cfg</span>. Este arquivo se encontra no diretório <span class="highlight-3"> /boot/grub/</span>.</p>

							<p><span class="highlight-2">O grub.cfg não deve nunca ser alterado manualmente. </span>Todas as alterações são feitas em um ou em todos os scripts localizados no diretório <span class="highlight-3"> /etc/grub.d</span>. os-prober should handle 90% of all cases:</p>
<pre>
00_header:
05_debian_theme: Especifica o fundo, cores do texto e temas
10_hurd: Localiza os kernels Hurd
10_linux: Localiza os kernels Linux com base nos resultados do comando lsb_release.
20_memtest86+: Se o arquivo /boot/memtest86+.bin existir, ele é incluído no menu.
30_os-prober: Procura por Linux e outros SOs em todas as partições e os inclue no menu.
40_custom: Um 'template' (modelo de documento vazio) para adicionar entradas personalizadas no menu para outros SOs.
60_fll-fromiso: Um 'template' para adicionar entradas personalizadas no menu para fromisos a partir de dispositivos USB/cartões SSD.
<span class="highlight-2">60_fll-fromiso não deve ser alterado; use /etc/default/grub2-fll-fromiso</span>
</pre>
							<p>Depois que uma alteração é feita, o grub.cfg precisa saber das mudanças. No caso de atualizações do kernel do sidux, o comando é rodado automaticamente. No caso de uma alteração manual feita por você em qualquer dos arquivos acima, como administrador do sistema, é necessário rodar: </p>

<pre>
update-grub
</pre>

							<p><span class="highlight-3">O pacote deb do Grub2 existente nos repositórios Debian foi montado de tal forma que alterações manuais raramente são necessárias.</span></p>
		</div>
		<div class="divider" id="grub1-grub2">
				<h2>Como atualizar do Grub-Legacy para o Grub 2</h2>
							<p><span class="highlight-2">Recomendamos uma atualização limpa, com total remoção do Grub 1</span>. Tenha em mente que você pode estragar tudo, portanto seja extremamente cuidadoso.</p>

						<h6>Passo 1: </h6>
							<p>Assegure-se de que seu sistema está inteiramente atualizado por <span class="highlight-3">dist-upgrade no init 3: </span></p>
<pre>
apt-get update
Ctrl+Alt+F1
init 3
apt-get dist-upgrade
init 5 &amp;&amp; exit
</pre>
						<h6>Passo 2:</h6>
							<p>Remova totalmente o Grub 1:</p>
<pre>
rm -rf /boot/grub
apt-get purge grub-gfxboot
</pre>
							<p>O resultado será a remoção dos arquivos <span class="highlight-3">fll-iso2usb* grub-gfxboot* install-usb-gui* </span>. Digite <span class="highlight-3">S (ou 'Y')</span> para confirmar.</p>

						<h6>Passo 3:</h6>

<pre>
apt-get install grub2 os-prober
</pre>

<div class="screenshot"><img src="../lib/images-common/images-grub2/grub2-2.png" title="Grub2" alt="Grub2" /></div>
							<p>Use a tecla Tab para selecionar OK</p>

<div class="screenshot"><img src="../lib/images-common/images-grub2/grub2-3.png" title="Grub2" alt="Grub2" /></div>
							<p>Use a tecla Tab para selecionar OK</p>

<div class="screenshot"><img src="../lib/images-common/images-grub2/grub2-convert-1.png" title="Grub2-conversion 1" alt="Grub2-conversion 1" /></div>

							<p>Use a seta e a barra de espaço para colocar um caractere <span class="highlight-3">* (asterisco) </span> no dispositivo em cuja MBR o Grub 2 será escrito. <i>(Neste exemplo, a instalação se dará em um drive USB)</i>.</p>

						<h6>Passo 4:</h6>
<pre>
update-grub
</pre>


						<h6>Passo 5:</h6>
<pre>
apt-get install install-usb-gui fll-iso2usb
</pre>

						<h6>Passo 6:</h6>
							<p> Reinicie seu PC e o menu.cfg vai mostrar uma lista com o kernel e os sistemas operacionais, como esta:</p>
<div class="screenshot"><img src="../lib/images-common/images-grub2/grub2-os-list.jpg" title="Grub2-OS list" alt="Grub2-OS list" /></div>

							<p>Se algo estiver corrompido ou acontecer alguma coisa errada, consulte <a href="sys-admin-grub2-en.htm#chroot">Grub 2 na MBR sobrescrito ou corrompido</a>. </p>


	      </div>
		<div class="divider" id="multi-os">
				<h2>Boots duplos e múltiplos com o Grub 2</h2>

							<p>Como o Grub2 é modular na configuração, com um simples comando é possível procurar novos sistemas operacionais. Se algum é encontrado, ele tenta implementar a alteração no menu.cfg, atualizando-o. Este comando é o seguinte:</p>
<pre>
update-grub
</pre>
							<p>Caso haja necessidade de incluir uma entrada personalizada ou caso o script 30_os-prober falhe ao escrever menus do tipo 'chainloader' no menu.cfg, use seu editor de textos favorito para fazer suas alterações no arquivo <span class="highlight-3"> /etc/grub.d/40_custom</span>.</p>

							<p>Exemplos de customização do 40_custom  file:</p>
<pre>
menuentry "second mbr"{
set root=(hd1)
chainloader +1
}
</pre>

<pre>
menuentry "second partition"{
set root=(hd0,2)
chainloader +1
}
</pre>
							<p>Então, após suas edições, rode:</p>
<pre>
update-grub
</pre>
							<p>Se ele reclamar que não consegue reconhecer o dispositivo, será necessário gerar o devicemap ('mapa de dispositivos') novamente.</p>

							<p><span class="highlight-3">Para isso, assegure-se de escolher a partição, não a MBR, ao instalar o outro sistema operacional:</span></p>

<pre>
grub-mkdevicemap --no-floppy
update-grub
</pre>
							<p>As mensagens de advertência podem ser ignoradas sem problemas.</p>

							<p>Se você cometer um erro, a atualização provavelmente irá sobrescrever sua MBR e você terá de fazer a correção com <a href="sys-admin-grub2-en.htm#mbr-over-grub2">Grub2 - sobrescrição da MBR</a>.</p>
</div>
	<div class="divider" id="mbr-over-grub2">

					<h2>Como simplesmente reescrever o grub2 na MBR, a partir do HD:</h2>

<pre>
/usr/sbin/grub-install --recheck --no-floppy /dev/sda
</pre>
						<p>Pode ser necessário rodar este comando mais de uma vez, até que ele esteja convencido de que é isso mesmo que você quer.</p>

		<h2>MBR reescrita pelo Windows, Grub2 corrompido e como recuperar o Grub2</h2>
							<p><span class="highlight-2">NOTA: para restaurar o Grub2, você precisa ter uma iso da versão 2009-04 (moros) ou superior do sidux.</span> <a href="sys-admin-grub2-pt-br.htm#chroot">Alternativamente, use chroot em qualquer live.iso</a>.</p>

							<p> Para reescrever o grub2 na MBR e/ou recuperar o grub2 em geral, será necessário dar o boot pela <span class="highlight-3">sidux.iso</span>:</p>
						<ol>
							<li>Para identificar e confirmar suas partições (p. ex. [h,s]d[a..]X), todas as ações a seguir precisam de privilégios de administrador, portanto torne-se root (#):
<pre>
$ sux
</pre>
							</li>
							<li>Daí digite:
<pre>
fdisk -l
cat /etc/fstab
</pre>
							Isto é para obter os nomes corretos.
							</li>
							<li>Quando souber qual é a partição que dá o boot, crie o ponto de montagem:
<pre>
mkdir -p /media/[hdxx,sdxx,diskx]
</pre>
							</li>
							<li>Monte a partição:
<pre>
mount /dev/xdxx /media/xdxx
</pre>
							</li>

							<li>Agora reescreva o Grub para a MBR do primeiro HD (genérico):
<pre>
/usr/sbin/grub-install --recheck --no-floppy --root-directory=/media/xdxx /dev/sda
</pre>
							</li>
						</ol>
	      </div>
		<div class="divider" id="chroot">
		      <h3>Como usar o chroot para recuperar um Grub2 corrompido ou sobrescrito na MBR</h3>

							<p>Para recuperar o Grub 2, se ele tiver sido corrompido ou sobrescrito na MBR, crie um ambiente <span class="highlight-3">chroot</span>. <span class="highlight-3">Any live.iso will suffice as the chroot takes you to your hard disk installed system so you can restore the appropriate grub version, grub1 (grub-legacy) or grub2.</span></p>

							<p>Inicie sua máquina com uma live.iso do sidux que seja apropriada para seu sistema (CD, DVD, pendrive ou cartão SSD de 32 ou 64 bit) e abra o terminal. Digite <span class="highlight-3">sux</span> e pressione [ENTER] para passar a ter permissões de root.</p>

							<p>Use <span class="highlight-3">fdisk -l ou blkid</span> para assegurar-se de qual é a partição que dá o boot e pegue o nome correto. Se preferir o ambiente gráfico, use o <span class="highlight-3">Gparted</span>:</p>
<pre>
blkid
</pre>
							<p>... e para checar se os dados do fstab combinam com a saída do blkid:</p>
<pre>
cat /etc/fstab
</pre>
							<p>Vamos assumir que seu sistema de arquivos root está em <span class="highlight-3">/dev/sda2</span></p>
<pre>
mkdir /mnt/sidux-chroot
mount /dev/sda2 /mnt/sidux-chroot
</pre>

							<p>Em seguida, monte /proc e /dev assim:</p>
<pre>
mount -t proc proc /mnt/sidux-chroot/proc
mount -t devpts devpts /mnt/sidux-chroot/dev/pts
mount -o bind /dev /mnt/sidux-chroot/dev
</pre>

							<p>Seu ambiente chroot agora está criado; acesse-o com:</p>
<pre>
chroot /mnt/sidux-chroot /bin/bash
</pre>

							<p>Agora você é capaz de usar o cache local do apt ou alterar arquivos que precisem de correção como se você tivesse dado o boot pelo sistema; no nosso caso, o que desejamos é colocar o Grub de volta na MBR.</p>

							<p><span class="highlight-3">To restore Grub 2</span></p>
<pre>
apt-get install --reinstall grub-pc
</pre>
							<p><span class="highlight-3">To restore Grub 1 (grub-legacy)</span></p>
<pre>
apt-get install --reinstall grub-legacy
</pre>
							<p>Siga as instruções do instalador.</p>

							<p>Para sair do chroot:</p>
<pre>
Ctrl+d
</pre>
							<p>Reinicie seu computador.</p>





	</div>
	<div id="rev">Page last revised 01/02/2010 0705 UTC</div>

</div>
</body>
</html>
