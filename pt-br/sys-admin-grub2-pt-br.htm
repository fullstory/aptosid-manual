<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
   "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
	<title>Manuais do aptosid - Grub2 (RO)</title>
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
	<style type="text/css" media="all">@import url("../lib/css-js/content.css");</style>
        <style type="text/css" media="all">@import url("../lib/css-js/menu.css");</style>
        <style type="text/css" media="print">@import url("../lib/css-js/print.css");</style>
        <link rel ="shortcut icon" href="../lib/favicon/manual.ico" />
        <script type="text/javascript" src="../lib/css-js/menu2.js"></script>
        <!--[if lt IE 8]>
        <link rel="stylesheet" type="text/css" href="../lib/css-js/ie_5-7_override.css">
        <![endif]-->
        <!--[if lt IE 7]>
        <link rel="stylesheet" type="text/css" href="../lib/css-js/ie_5-6_override.css">
        <![endif]-->
</head>
<body>
<!-- Last translation revision by bluewater 22/04/2009 1350hrs UTC -->
<div id="menu"> <!-- menu starts here pt-br lang maintained by ceti-->
<!--aptosid Operating System Manual menu-version-02.10.2011.02.12 -->
<!-- menu last updated by bluewater 2011.02.12 0710 hrs UTC -->
	<div id="menu-header">
	      <a href="http://aptosid.com/"><img src="../lib/logos/manual-aptosid-logo.png" title="Ir para aptosid.com forums e wiki" alt="aptosid.com logo" /></a>
	</div>
	<ul id="top-list">
		<li><a href="manual-search-pt-br.htm#search-on"><img src="../lib/logos/manual-search-22x22.png" title="Search Manual" alt="Search" /> Procurar Online Offline</a> </li>
	</ul>
	<div id="flags-2">
			<a href="../flag-index.html"><img src="../lib/logos/aptosid-lang-100x64.png" title="Escolha outra língua - Choose another language" alt="troca-língua" /></a>
	</div>
	<ul>
<li onmouseover="showHide( 1 );" onmouseout="startTime();" ><a href="welcome-pt-br.htm">Manual do Sistema Operacional aptosid</a>
			<ul class="sub-menu" id="sm1">
				<li><a href="welcome-pt-br.htm#welcome-gen">Manual do SO aptosid &#8658;</a>
					<ul class="sub2-menu" id="sm1a">
					  <li><a href="credits-pt-br.htm#cred-team">Créditos</a></li>
					</ul>
					</li>
		<li><a href="welcome-pt-br.htm#how-to">Como usar este manual &#8658;</a>
					<ul class="sub2-menu" id="sm1b">
					  <li><a href="welcome-pt-br.htm#how-to">Como usar este manual</a></li>
					  <li><a href="welcome-pt-br.htm#table-contents">Índice</a></li>
					</ul>
					</li>
		<li><a href="help-pt-br.htm#help-gen">Como conseguir ajuda &#8658;</a>
					<ul class="sub2-menu" id="sm1c">
					  <li><a href="help-pt-br.htm#help-gen">Onde e como obter ajuda</a></li>
					  <li><a href="help-pt-br.htm#paste">IRC !paste</a></li>
					</ul>
					</li>
		<li><a href="wel-quickstart-pt-br.htm#welcome-quick">Guia Rápido do aptosid</a></li>
		</ul>
		</li>
<li  onmouseover="showHide( 2 );" onmouseout="startTime();" ><a href="cd-dl-burning-pt-br.htm">Conteúdo das ISOs, lançamentos, espelhos e como queimar</a>
			   <ul class="sub-menu" id="sm2">
				<li><a href="cd-content-pt-br.htm#cd-content">Conteúdo das ISOs e requisitos do sistema &#8658;</a>
					<ul class="sub2-menu" id="sm2a">
					  <li><a href="sys-admin-release-pt-br.htm#rolling">Notas de Lançamento</a></li>
					</ul>
					</li>
		    <li><a href="cd-dl-burning-pt-br.htm#download-aptosid">Espelhos ('mirrors') do aptosid, como baixar e como queimar &#8658;</a>
				<ul class="sub2-menu" id="sm2b">
					  <li><a href="cd-dl-burning-pt-br.htm#md5">Como verificar o md5</a></li>
					  <li><a href="cd-dl-burning-pt-br.htm#burn-nero">Como queimar no Windows</a></li>
					  <li><a href="cd-dl-burning-pt-br.htm#burn-linux">Como queimar no Linux</a></li>
					  <li><a href="cd-no-gui-burn-pt-br.htm#burning-no-gui">O script burniso</a></li>
					  <li><a href="cd-no-gui-burn-pt-br.htm#burn-no-gui-gen">Como queimar sem interface gráfica</a></li>
					  <li><a href="cd-dl-burning-pt-br.htm#download-aptosid">Espelhos para baixar o aptosid</a></li>
					</ul>
					</li>
		      </ul>
		</li>
<li  onmouseover="showHide( 3 );" onmouseout="startTime();" ><a href="live-mode-pt-br.htm">O modo Live</a>
			<ul class="sub-menu" id="sm3">
				<li><a href="live-mode-pt-br.htm#rootpw">Senha do root na ISO aptosid-Live</a></li>
				<li><a href="live-mode-pt-br.htm#live-cd-installsoft">Como instalar software estando no modo Live-ISO</a></li>
			</ul>
		</li>
<li  onmouseover="showHide( 4 );" onmouseout="startTime();" ><a href="term-konsole-pt-br.htm">Terminal / Konsole</a>
			<ul class="sub-menu" id="sm4">
				<li><a href="term-konsole-pt-br.htm#term-kon"> Terminal / Konsole &#8658;</a>
					<ul class="sub2-menu" id="sm4a">
					  <li><a href="term-konsole-pt-br.htm#term-kon"> Terminal / Konsole</a></li>
					  <li><a href="term-konsole-pt-br.htm#colours"> Coloured terminal prompts</a></li>
					  <li><a href="term-konsole-pt-br.htm#cli-help">Ajuda pela linha de comando</a></li>
					  <li><a href="help-pt-br.htm#init3-tools">Ferramentas a conhecer no modo texto (tty) - init 3</a></li>
					  <li><a href="term-konsole-pt-br.htm#term-cmds">Lista de comandos de Terminal no Linux</a></li>
					</ul>
					</li>
			  <li><a href="term-konsole-pt-br.htm#sux"> sux / sudo</a></li>
		    </ul>
		</li>
<li  onmouseover="showHide( 5 );" onmouseout="startTime();" ><a href="cheatcodes-pt-br.htm">"Cheatcodes"</a>
			<ul class="sub-menu" id="sm5">
				<li><a href="cheatcodes-pt-br.htm#cheatcodes">Cheatcodes específicas da Live-ISO do aptosid</a></li>
				<li><a href="cheatcodes-pt-br.htm#cheatcodes-linux">Cheatcodes genéricas do Linux</a></li>
				<li><a href="cheatcodes-vga-pt-br.htm#vga">Códigos VGA</a></li>
			</ul>
		</li>
<li  onmouseover="showHide( 6 );" onmouseout="startTime();" ><a href="part-gparted-pt-br.htm">Como particionar seu HD</a>
		<ul class="sub-menu" id="sm6">
			<li><a href="part-gparted-pt-br.htm#hd-ntfs3g">Escrevendo em partições NTFS com o ntfs-3g</a></li>
			<li><a href="part-lvm-pt-br.htm#part-lvm">Partitioning to use LVM - Logical Volume Manager</a></li>
			<li><a href="part-gparted-pt-br.htm#partition">Como particionar pela interface gráfica &#8658;</a>
					<ul class="sub2-menu" id="sm6a">
					  <li><a href="part-gparted-pt-br.htm#partition">Como particionar o HD usando GParted / Gerenciador de partições do KDE</a></li>
					  <li><a href="part-gparted-pt-br.htm#ntfs">Como redimensionar a partição NTFS com o GParted / Gerenciador de partições do KDE</a></li>
					</ul>
					</li>
		<li><a href="part-cfdisk-pt-br.htm#partition">Como particionar pela linha de comando &#8658;</a>
					 <ul class="sub2-menu" id="sm6b">
					    <li><a href="part-cfdisk-pt-br.htm#partition">Como particionar seu HD com o cfdisk</a></li>
					    <li><a href="part-cfdisk-pt-br.htm#formating">Como formatar após o particionamento com o cfdisk</a></li>
					</ul>
					</li>
		<li><a href="part-size-examp-pt-br.htm#part-example">O básico do particionamento &#8658;</a>
					<ul class="sub2-menu" id="sm6c">
					  <li><a href="part-size-examp-pt-br.htm#part-example">Exemplos de tamanhos de partições</a></li>
					  <li><a href="part-uuid-pt-br.htm#uuid">UUID, rotulando partições e a fstab</a></li>
					  <li><a href="part-cfdisk-pt-br.htm#disknames">Uma geral sobre nomeação de discos</a></li>
					</ul>
					</li>
		      </ul>
		</li>
<li  onmouseover="showHide( 7 );" onmouseout="startTime();" ><a href="hd-install-pt-br.htm">Opções de instalação - HD, USB, VM and Cryptroot</a>
		<ul class="sub-menu" id="sm7">
		  <li><a href="hd-install-pt-br.htm#Inst-prep">Preparação &#8658;</a>
					<ul class="sub2-menu" id="sm7a">
					  <li><a href="hd-install-pt-br.htm#Inst-prep">Preparação da instalação </a></li>
					  <li><a href="hd-install-pt-br.htm#Installation">Como instalar no HD</a></li>
					  <li><a href="hd-install-pt-br.htm#first-hd-boot">Primeira inicialização</a></li>
					</ul>
					</li>
		<li><a href="hd-install-opts-pt-br.htm#fromiso">Como dar o 'boot' com fromiso &#8658;</a>
					<ul class="sub2-menu" id="sm7b">
					  <li><a href="hd-install-opts-pt-br.htm#fromiso">Como inicializar com fromiso - visão geral</a></li>
					  <li><a href="hd-install-opts-pt-br.htm#fromiso-grub-leg">Como inicializar com 'fromiso' e grub-legacy</a></li>
					  <li><a href="hd-install-opts-pt-br.htm#grub2-fromiso">Como inicializar com 'fromiso' e Grub 2</a></li>
					  <li><a href="hd-install-opts-pt-br.htm#fromiso-persist">fromiso e persist</a></li>
					</ul>
					</li>
		<li><a href="hd-install-opts-pt-br.htm#usb-hd">Como instalar em drives USB &#8658;</a>
					<ul class="sub2-menu" id="sm7c">
					  <li><a href="hd-install-opts-pt-br.htm#usb-hd">Como instalar em um HD-USB - específico do aptosid - aptosid-on-stick</a></li>
					  <li><a href="hd-ins-opts-oos-pt-br.htm#raw-usb">Instalando em dispositivo USB/SSD com qualquer sistema Linux, MS Windows ou Mac OSX</a></li>
					</ul>
					</li>
		  <li><a href="hd-install-crypt-pt-br.htm#install-crypt">Installing to encryted partitions - cryptroot</a></li>
		  <li><a href="nbdboot-pt-br.htm#nbd1">Inicializando o aptosid através de uma rede</a></li>
		  <li><a href="hd-install-vmopts-pt-br.htm#vmopts">Opções de instalação de Máquina Virtual</a></li>
		</ul>
		</li>
<li  onmouseover="showHide( 8 );" onmouseout="startTime();" ><a href="gpu-pt-br.htm">Placas de Vídeo, dispositivos diversos, xorg &amp;  drivers</a>
	<ul class="sub-menu" id="sm8">
		<li><a href="hw-dev-mon-pt-br.htm#mon-res">Monitores e resolução de tela &#8658;</a>
					<ul class="sub2-menu" id="sm8a">
					  <li><a href="hw-dev-mon-pt-br.htm#mon-res">Monitores e resolução de tela</a></li>
					  <li><a href="hw-dev-mon-pt-br.htm#xrandr">Monitores múltiplos (Dual Monitors) e a xrandr</a></li>
					  <li><a href="hw-dev-mon-pt-br.htm#mon-binary">Monitores múltiplos usando binários</a></li>
					</ul>
					</li>
		<li><a href="gpu-pt-br.htm#foss-xorg">GPU firmware &#8658;</a>
					<ul class="sub2-menu" id="sm8b">
					  <li><a href="gpu-pt-br.htm#ati-3d">AMD/ATI 3D drivers</a></li>
					  <li><a href="gpu-pt-br.htm#intel">Intel 2D and 3D drivers</a></li>
					  <li><a href="gpu-pt-br.htm#nvidia">Nvidia 3D drivers</a></li>
					  <li><a href="gpu-pt-br.htm#foss-xorg">Open Source Xorg drivers</a></li>
					</ul>
					</li>
			  <li><a href="nf-firm-pt-br.htm#fw-detect">Firmware detection - non-free </a></li>
			  <li><a href="nf-firm-pt-br.htm#non-free-firmware">Adding non-free to Sources List</a></li>
		</ul>
		</li>
<li  onmouseover="showHide( 9 );" onmouseout="startTime();" ><a href="wm-kde-pt-br.htm">Gerenciadores de janelas</a>
		    <ul class="sub-menu" id="sm9">
			  <li><a href="wm-kde-pt-br.htm">Gerenciadores de janelas &#8658;</a>
					  <ul class="sub2-menu" id="sm9a">
					    <li><a href="wm-xfce-pt-br.htm#xfce-notes">Extras úteis para o Xfce</a></li>
					    <li><a href="wm-kde-pt-br.htm#install-add">Extras úteis para o KDE</a></li>
					    <li><a href="wm-kde-pt-br.htm#desk-freeze">Congelamentos do desktop</a></li>
					    <li><a href="wm-kde-pt-br.htm#kde-login">"Não consigo entrar no KDE"</a></li>
					    <li><a href="wm-kde-pt-br.htm#ch-th">Como mudar os temas</a></li>
					</ul>
					</li>
		      <li><a href="wm-kde-pt-br.htm#dm">Gerenciadores de ambientes - dm</a></li>
		</ul>
		</li>
<li  onmouseover="showHide( 11 );" onmouseout="startTime();" ><a href="inet-ceni-pt-br.htm">Conexão com a Internet, WiFi, LAN e redes</a>
		    <ul class="sub-menu" id="sm11">
			<li><a href="lamp-apache-pt-br.htm">aptosid LAMP Stack &#8658;</a>
					<ul class="sub2-menu" id="sm11a">
					    <li><a href="lamp-apache-pt-br.htm#serv-apache">aptosid LAMP Stack</a></li>
					    <li><a href="lamp-apache-pt-br.htm#serv-ftp">Clientes FTP</a></li>
					    <li><a href="lamp-apache-pt-br.htm#serv-sec">Protocolos de segurança</a></li>
					    <li><a href="lamp-apache-pt-br.htm#serv-ssl">SSL</a></li>
					    <li><a href="lamp-sql-pt-br.htm#serv-mysql">Configuração do MySQL</a></li>
					    <li><a href="lamp-ppp-pt-br.htm#serv-php">PHP no Apache</a></li>
					    <li><a href="ntp-server-pt-br.htm#ntp-server">Configuração do servidor de data/hora</a></li>
					</ul>
					</li>
		<li><a href="tor-privoxy-pt-br.htm#tor">Firewalls e privacidade &#8658;</a>
					<ul class="sub2-menu" id="sm11b">
					    <li><a href="tor-privoxy-pt-br.htm#tor">Tor</a></li>
					    <li><a href="tor-privoxy-pt-br.htm#privoxy">Privoxy</a></li>
					    <li><a href="inet-ceni-pt-br.htm#firewalls">Firewalls</a></li>
					</ul>
					</li>
		<li><a href="ssh-pt-br.htm#ssh-x">SSH e Samba &#8658;</a>
					<ul class="sub2-menu" id="sm11c">
						  <li><a href="samba-pt-br.htm#setup">Configuração do servidor Samba</a></li>
						  <li><a href="samba-pt-br.htm#configure">Como configurar o Samba (Windows)</a></li>
						  <li><a href="ssh-pt-br.htm#ssh-fs">Como montar um SSH remoto</a></li>
						  <li><a href="ssh-pt-br.htm#ssh-x">Aplicações do X via SSH</a></li>
						  <li><a href="ssh-pt-br.htm#ssh-f">SSH com o Konqueror</a></li>
						  <li><a href="ssh-pt-br.htm#ssh-w">SSH com X-Forwarding a partir do Windows</a></li>
						  <li><a href="ssh-pt-br.htm#ssh">SSH e segurança</a></li>
					</ul>
					</li>
		<li><a href="inet-ceni-pt-br.htm#netcardconfig">Conexões wifi &#8658;</a>
						<ul class="sub2-menu" id="sm11d">
						    <li><a href="inet-ceni-pt-br.htm#netcardconfig">Como ficar online - ceni</a></li>
						    <li><a href="inet-wpagui-pt-br.htm#wpa-roaming-gui">WiFi - interface WPA_</a></li>
						    <li><a href="inet-setup-pt-br.htm#net-set1">WiFi - como configurar o modo "Roaming"</a></li>
						    <li><a href="inet-wpa-pt-br.htm#wpa">WiFi - wpasupplicant</a></li>
						    <li><a href="inet-ifplug-pt-br.htm#hotswitch">Como permutar entre wifi e cabo</a></li>
					</ul>
					</li>
		<li><a href="inet-ceni-pt-br.htm#netcardconfig">Conexões com fio &#8658;</a>
						<ul class="sub2-menu" id="sm11e">
						    <li><a href="inet-ceni-pt-br.htm#dial-mod">Modems 56k</a></li>
						    <li><a href="inet-ceni-pt-br.htm#netcardconfig">Como ficar online - ceni</a></li>
					</ul>
					</li>
				</ul>
			    </li>
<li  onmouseover="showHide( 12 );" onmouseout="startTime();" ><a href="sys-admin-apt-pt-br.htm">Gerenciamento de pacotes e dist-upgrade</a>
	<ul class="sub-menu" id="sm12">
		<li><a href="sys-admin-apt-pt-br.htm#apt-cook">Guia do APT e a sources list &#8658;</a>
					<ul class="sub2-menu" id="sm12a">
					    <li><a href="sys-admin-apt-pt-br.htm#apt-cook">Guia do APT e a sources list</a></li>
					    <li><a href="sys-admin-apt-pt-br.htm#apt-install">Como instalar um novo pacote</a></li>
					    <li><a href="sys-admin-apt-pt-br.htm#apt-delete">Como deletar um pacote</a></li>
					    <li><a href="sys-admin-apt-pt-br.htm#apt-downgrade">Pacotes em HOLD (espera) e como rebaixar pacotes</a></li>
					    <li><a href="sys-admin-apt-pt-br.htm#apt-cache">Como pesquisar pacotes com o apt-cache</a></li>
					    <li><a href="sys-admin-apt-pt-br.htm#gui-pacsea">Como pesquisar pacotes com a interface gráfica</a></li>
					</ul>
				</li>
		<li><a href="sys-admin-kern-upg-pt-br.htm#kern-upgrade">Como atualizar o kernel &#8658;</a>
					<ul class="sub2-menu" id="sm12b">
					    <li><a href="sys-admin-kern-upg-pt-br.htm#kern-remove">Como remover kernels</a></li>
					    <li><a href="sys-admin-kern-upg-pt-br.htm#kern-upgrade">Como atualizar o kernel</a></li>
					    <li><a href="sys-admin-kern-upg-pt-br.htm#dmakms">Como instalar módulos do kernel dinamicamente com o dmakms</a></li>
					</ul>
				</li>
		<li><a href="sys-admin-apt-pt-br.htm#apt-upgrade">Como atualizar todo o sistema -  dist-upgrade - visão geral &#8658;</a>
					<ul class="sub2-menu" id="sm12c">
					    <li><a href="sys-admin-upgrade-pt-br.htm#live-cd-upgrade">Atualização com uma Live-ISO</a></li>
					    <li><a href="sys-admin-apt-locarmirr-pt-br.htm#approx">dist-upgrade de múltiplos PCs em uma LAN</a></li>
					    <li><a href="sys-admin-apt-pt-br.htm#apt-upgrade">Como atualizar todo o sistema -  dist-upgrade - visão geral</a></li>
					    <li><a href="sys-admin-apt-pt-br.htm#du-st">Como atualizar todo o sistema -  dist-upgrade - os passos</a></li>
					</ul>
				  </li>
			    </ul>
		</li>
<li  onmouseover="showHide( 13 );" onmouseout="startTime();" ><a href="sys-admin-gen-pt-br.htm">Administração do sistema</a>
	<ul class="sub-menu" id="sm13">
		<li><a href="bios-freedos-pt-br.htm#bois-prep">Como atualizar a BIOS com o FreeDOS</a></li>
		<li><a href="vir-rkits-pt-br.htm#virus-rkits">Antivirus  e caçadores de rootkits</a></li>
		<li><a href="hd-install-pt-br.htm#adduser">Como adicionar usuários e senhas &#8658;</a>
					<ul class="sub2-menu" id="sm13a">
					    <li><a href="hd-install-pt-br.htm#adduser">Como adicionar um novo usuário</a></li>
					    <li><a href="sys-admin-gen-pt-br.htm#pw-lost">Perda da senha root, nova senha</a></li>
					</ul>
					</li>
		<li><a href="sys-admin-gen-pt-br.htm#start-services">Serviços e runlevels &#8658;</a>
					<ul class="sub2-menu" id="sm13b">
					    <li><a href="sys-admin-gen-pt-br.htm#start-services">Habilitar/desabilitar serviços</a></li>
					    <li><a href="sys-admin-gen-pt-br.htm#init">Runlevels no aptosid - init</a></li>
					</ul>
					</li>
		<li><a href="sys-admin-rsync-pt-br.htm#rsync">Como fazer backups do sistema &#8658;</a>
					  <ul class="sub2-menu" id="sm13c">
					    <li><a href="sys-admin-rdiff-pt-br.htm#rdiff">Backup com o rdiff</a></li>
					    <li><a href="sys-admin-rsync-pt-br.htm#rsync">Backup com o rsync</a></li>
					    <li><a href="home-pt-br.htm#home-bu">Como mover sua /home</a></li>
					</ul>
					</li>
		<li><a href="sys-admin-gen-pt-br.htm#fonts">CUPS, fontes e som &#8658;</a>
					  <ul class="sub2-menu" id="sm13d">
					     <li><a href="sys-admin-gen-pt-br.htm#fonts">Fontes</a></li>
					     <li><a href="sys-admin-gen-pt-br.htm#cups">CUPS - sistema de impressão</a></li>
					     <li><a href="sys-admin-gen-pt-br.htm#sound">Mixadores de som</a></li>
					</ul>
					</li>
		<li><a href="sys-admin-grub2-pt-br.htm#grub2">Grub2 &#8658;</a>
					  <ul class="sub2-menu" id="sm13f">
					    <li><a href="sys-admin-grub2-pt-br.htm#chroot">Grub2 - Recovering Grub with chroot</a></li>
					    <li><a href="sys-admin-grub2-pt-br.htm#mbr-over-grub2">Grub2 - sobrescrição da MBR</a></li>
					    <li><a href="sys-admin-grub2-pt-br.htm#multi-os">Grub2 - boots duplos e múltiplos</a></li>
					    <li><a href="sys-admin-grub2-pt-br.htm#grub1-grub2">Grub2 - como atualizar a partir do Grub1</a></li>
					    <li><a href="sys-admin-grub2-pt-br.htm#grub2">Grub2 - visão geral</a></li>
					</ul>
					</li>
			</ul>
		</li>
	</ul>
<!-- menu ends here --> </div>
<div id="main-page">
		<div class="divider" id="grub2">
			<h2 id="top-header">GRUB 2</h2>
				<h6>Resumo básico das principais diferenças entre o GRUB 1 (agora chamado de grub-legacy) e o GRUB 2:</h6>

					<ul>
						  	<li><span class="highlight-3">Não existe mais o arquivo menu.lst.</span></li>

							<li>Um arquivo com o nome de <span class="highlight-3">grub.cfg</span> agora controla a tela do Grub.</li>

							<li>O grub.cfg é gerado automaticamente pelos scripts localizados em <span class="highlight-3"> /etc/grub.d</span>.</li>

							<li>O sistema de numeração das partições também é diferente. Elas agora começam em 1, ao invés de 0 (os drives continuam a ser numerados a partir de 0):
<pre>
Linux      grub1     grub2
/dev/sda1  (hd0,0)   (hd0,1)
/dev/sda2  (hd0,1)   (hd0,2)
/dev/sda3  (hd0,2)   (hd0,3)

/dev/sdb1  (hd1,0)   (hd1,1)
/dev/sdb2  (hd1,1)   (hd1,2)
/dev/sdb3  (hd1,2)   (hd1,3)
</pre>
							</li>

							<li>As seções do grub.cfg são formadas de maneira levemente diferente, se comparadas com o menu.lst. Não é possível, portanto, copiar as instâncias do menu.lst diretamente para o grub.cfg, já que este é o arquivo "resultante". <span class="highlight-2">Aliás, o arquivo grub.cfg não deve nunca ser alterado manualmente. </span></li>

					 </ul>
		</div>
		<div class="divider" id="grub2-files">
					  <h4> O arquivo de configuração padrão do Grub 2</h4>
							<p>O arquivo <span class="highlight-3">/etc/default/grub</span> contém as variáveis do grub2. Por exemplo, fim de espera ('timeout') no menu, entradas a ser ativadas pelo menu, parâmetros do kernel, o uso ou não de gráficos e por aí afora.</p>

					 <h4> Os scripts do Grub 2</h4>
							<p>Os arquivos que estão em <span class="highlight-3"> /etc/grub.d</span> controlam o arquivo "resultante", chamado, como já vimos, <span class="highlight-3"> grub.cfg</span>. Este arquivo se encontra no diretório <span class="highlight-3"> /boot/grub/</span>.</p>

							<p><span class="highlight-2">O grub.cfg não deve nunca ser alterado manualmente. </span>Todas as alterações são feitas em um ou em todos os scripts localizados no diretório <span class="highlight-3"> /etc/grub.d</span>. os-prober deve lidar com 90% de todos os casos:</p>
<pre>
00_header:
05_debian_theme: Especifica o fundo, cores do texto e temas
10_hurd: Localiza os kernels Hurd
10_linux: Localiza os kernels Linux com base nos resultados do comando lsb_release.
20_memtest86+: Se o arquivo /boot/memtest86+.bin existir, ele é incluído no menu.
30_os-prober: Procura por Linux e outros SOs em todas as partições e os inclue no menu.
40_custom: Um 'template' (modelo de documento vazio) para adicionar entradas personalizadas no menu para outros SOs.
60_fll-fromiso: Um 'template' para adicionar entradas personalizadas no menu para fromisos a partir de dispositivos USB/cartões SSD.
<span class="highlight-2">60_fll-fromiso não deve ser alterado; use /etc/default/grub2-fll-fromiso
Read  <a href="hd-install-opts-pt-br.htm#grub2-fromiso">Booting 'fromiso' with Grub 2</a></span>
</pre>
							<p>Depois que uma alteração é feita, o grub.cfg precisa saber das mudanças. No caso de atualizações do kernel do aptosid, o comando é rodado automaticamente. No caso de uma alteração manual feita por você em qualquer dos arquivos acima, como administrador do sistema, é necessário rodar: </p>

<pre>
update-grub
</pre>

							<p><span class="highlight-3">O pacote deb do Grub2 existente nos repositórios Debian foi montado de tal forma que alterações manuais raramente são necessárias.</span></p>
		</div>
		<div class="divider" id="grub1-grub2">
				<h2>Como atualizar do Grub-Legacy para o Grub 2</h2>
							<p><span class="highlight-2">Recomendamos uma atualização limpa, com total remoção do Grub 1</span>. Tenha em mente que você pode estragar tudo, portanto seja extremamente cuidadoso.</p>

						<h6>Passo 1: </h6>
							<p>Assegure-se de que seu sistema está inteiramente atualizado por <span class="highlight-3">dist-upgrade no init 3: </span></p>
<pre>
apt-get update
Ctrl+Alt+F1
init 3
apt-get dist-upgrade
init 5 &amp;&amp; exit
</pre>
						<h6>Passo 2:</h6>
							<p>Remova totalmente o Grub 1:</p>
<pre>
rm -rf /boot/grub
apt-get purge grub-gfxboot
</pre>
							<p>O resultado será a remoção dos arquivos <span class="highlight-3">fll-iso2usb* grub-gfxboot* install-usb-gui* </span>. Digite <span class="highlight-3">S (ou 'Y')</span> para confirmar.</p>

						<h6>Passo 3:</h6>

<pre>
apt-get install grub2 os-prober
</pre>

<div class="screenshot"><img src="../lib/images-common/images-grub2/grub2-2.png" title="Grub2" alt="Grub2" /></div>
							<p>Use a tecla Tab para selecionar OK</p>

<div class="screenshot"><img src="../lib/images-common/images-grub2/grub2-3.png" title="Grub2" alt="Grub2" /></div>
							<p>Use a tecla Tab para selecionar OK</p>

<div class="screenshot"><img src="../lib/images-common/images-grub2/grub2-convert-1.png" title="Grub2-conversion 1" alt="Grub2-conversion 1" /></div>

							<p>Use a seta e a barra de espaço para colocar um caractere <span class="highlight-3">* (asterisco) </span> no dispositivo em cuja MBR o Grub 2 será escrito. <i>(Neste exemplo, a instalação se dará em um drive USB)</i>.</p>

						<h6>Passo 4:</h6>
<pre>
update-grub
</pre>


						<h6>Passo 5:</h6>
<pre>,
apt-get install install-usb-gui fll-iso2usb
</pre>

						<h6>Passo 6:</h6>
							<p> Reinicie seu PC e o menu.cfg vai mostrar uma lista com o kernel e os sistemas operacionais, como esta:</p>
<div class="screenshot"><img src="../lib/images-common/images-grub2/grub2-os-list.jpg" title="Grub2-OS list" alt="Grub2-OS list" /></div>

							<p>Se algo estiver corrompido ou acontecer alguma coisa errada, consulte <a href="sys-admin-grub2-pt-br.htm#chroot">Grub 2 na MBR sobrescrito ou corrompido</a>. </p>

				  <h3>Como editar as opções do Grub2 via tela de edição</h3>
<div class="screenshot"><img src="../lib/images-common/images-grub2/grub2-e-1.JPG" title="Grub2-Edit" alt="Grub2-Edit" /></div>
							<p>Se, por algum motivo, você tiver de fazer uma alteração temporária nas opções de boot de um kernel presente no Grub2, pressione a letra <span class="highlight-2"> e </span> para editar as opções do kernel. Use as setas direcionais para navegar até a linha desejada. Daí, ainda na tela de edição, use <span class="highlight-3"> Ctrl+x </span> para reiniciar o computador.</p>

							<p>Por exemplo, para ir direto para o runlevel 3, adicione <span class="highlight-3">3</span> no final da linha<span class="highlight-3"> linux /boot/vmlinuz</span>.</p>

							<p>As edições que você fizer na tela de edição não são permanentes. Para que elas o sejam, você necessita editar os arquivos apropriados. Veja <a href="sys-admin-grub2-pt-br.htm#grub2-files">arquivos do Grub2</a>.</p>

	      </div>
		<div class="divider" id="multi-os">
				<h2>Boots duplos e múltiplos com o Grub 2</h2>

							<p>Como o Grub2 é modular na configuração, com um simples comando é possível procurar novos sistemas operacionais. Se algum é encontrado, ele tenta implementar a alteração no menu.cfg, atualizando-o. Este comando é o seguinte:</p>
<pre>
update-grub
</pre>
							<p>Caso haja necessidade de incluir uma entrada personalizada ou caso o script 30_os-prober falhe ao escrever menus do tipo 'chainloader' no menu.cfg, use seu editor de textos favorito para fazer suas alterações no arquivo <span class="highlight-3"> /etc/grub.d/40_custom</span>.</p>

							<p>Exemplos de customização do 40_custom  file:</p>
<pre>
menuentry "second mbr"{
set root=(hd1)
chainloader +1
}
</pre>

<pre>
menuentry "second partition"{
set root=(hd0,2)
chainloader +1
}
</pre>
							<p>Então, após suas edições, rode:</p>
<pre>
update-grub
</pre>
							<p>Se ele reclamar que não consegue reconhecer o dispositivo, será necessário gerar o devicemap ('mapa de dispositivos') novamente.</p>

							<p><span class="highlight-3">Para isso, assegure-se de escolher a partição, não a MBR, ao instalar o outro sistema operacional:</span></p>

<pre>
grub-mkdevicemap --no-floppy
update-grub
</pre>
							<p>As mensagens de advertência podem ser ignoradas sem problemas.</p>

							<p>Se você cometer um erro, a atualização provavelmente irá sobrescrever sua MBR e você terá de fazer a correção com <a href="sys-admin-grub2-pt-br.htm#mbr-over-grub2">Grub2 - sobrescrição da MBR</a>.</p>
</div>
	<div class="divider" id="mbr-over-grub2">

					<h2>Como simplesmente reescrever o grub2 na MBR, a partir do HD:</h2>

<pre>
/usr/sbin/grub-install --recheck --no-floppy /dev/sda
</pre>
						<p>Pode ser necessário rodar este comando mais de uma vez, até que ele esteja convencido de que é isso mesmo que você quer.</p>

		<h2>MBR reescrita pelo Windows, Grub2 corrompido e como recuperar o Grub2</h2>
							<p><span class="highlight-2">NOTA: para restaurar o Grub2, você precisa ter uma iso da versão 2009-04 (moros) ou superior do aptosid.</span> <a href="sys-admin-grub2-pt-br.htm#chroot">Alternativamente, use chroot em qualquer live.iso</a>.</p>

							<p> Para reescrever o grub2 na MBR e/ou recuperar o grub2 em geral, será necessário dar o boot pela <span class="highlight-3">aptosid.iso</span>:</p>
						<ol>
							<li>Para identificar e confirmar suas partições (p. ex. [h,s]d[a..]X), todas as ações a seguir precisam de privilégios de administrador, portanto torne-se root (#):
<pre>
$ sux
</pre>
							</li>
							<li>Daí digite:
<pre>
fdisk -l
cat /etc/fstab
</pre>
							Isto é para obter os nomes corretos.
							</li>
							<li>Quando souber qual é a partição que dá o boot, crie o ponto de montagem:
<pre>
mkdir -p /media/[hdxx,sdxx,diskx]
</pre>
							</li>
							<li>Monte a partição:
<pre>
mount /dev/xdxx /media/xdxx
</pre>
							</li>

							<li>Agora reescreva o Grub para a MBR do primeiro HD (genérico):
<pre>
/usr/sbin/grub-install --recheck --no-floppy --root-directory=/media/xdxx /dev/sda
</pre>
							</li>
						</ol>
	      </div>
		<div class="divider" id="chroot">
		      <h3>Como usar o chroot para recuperar um Grub2 corrompido ou sobrescrito na MBR</h3>

							<p>Para recuperar o Grub 2, se ele tiver sido corrompido ou sobrescrito na MBR, crie um ambiente <span class="highlight-3">chroot</span>. <span class="highlight-3">Any live.iso will suffice as the chroot takes you to your hard disk installed system so you can restore the appropriate grub version, grub1 (grub-legacy) or grub2.</span></p>

							<p>Inicie sua máquina com uma live.iso do aptosid que seja apropriada para seu sistema (CD, DVD, pendrive ou cartão SSD de 32 ou 64 bit) e abra o terminal. Digite <span class="highlight-3">sux</span> e pressione [ENTER] para passar a ter permissões de root.</p>

							<p>Use <span class="highlight-3">fdisk -l ou blkid</span> para assegurar-se de qual é a partição que dá o boot e pegue o nome correto. Se preferir o ambiente gráfico, use o <span class="highlight-3">Gparted</span>:</p>
<pre>
blkid
</pre>
							<p>... e para checar se os dados do fstab combinam com a saída do blkid:</p>
<pre>
cat /etc/fstab
</pre>
							<p>Vamos assumir que seu sistema de arquivos root está em <span class="highlight-3">/dev/sda2</span></p>
<pre>
mkdir /mnt/aptosid-chroot
mount /dev/sda2 /mnt/aptosid-chroot
</pre>

							<p>Em seguida, monte /proc, /dev e /sys assim:</p>
<pre>
mount --bind /proc /mnt/aptosid-chroot/proc
mount --bind /sys /mnt/aptosid-chroot/sys
mount --bind /dev /mnt/aptosid-chroot/dev
mount --bind /dev/pts /mnt/aptosid-chroot/dev/pts
</pre>
							<p>Should internet access be a requirement, copy resolv.conf to the chroot environment before entering chroot:</p>
<pre>
cp /etc/resolv.conf /mnt/aptosid-chroot/etc/resolv.conf
</pre>

							<p>Seu ambiente chroot agora está criado; acesse-o com:</p>
<pre>
chroot /mnt/aptosid-chroot /bin/bash
</pre>

							<p>Agora você é capaz de usar o cache local do apt ou alterar arquivos que precisem de correção como se você tivesse dado o boot pelo sistema; no nosso caso, o que desejamos é colocar o Grub de volta na MBR.</p>

							<p><span class="highlight-3">To restore Grub 2</span></p>
<pre>
apt-get install --reinstall grub-pc
</pre>
							<p><span class="highlight-3">To restore Grub 1 (grub-legacy)</span></p>
<pre>
apt-get install --reinstall grub-legacy
</pre>
							<p>Siga as instruções do instalador.</p>

							<p>Para sair do chroot:</p>
<pre>
Ctrl+d
</pre>
							<p>Reinicie seu computador.</p>





	</div>
	<div id="rev">Page last revised 05/10/2010 0815 UTC</div>

</div>
</body>
</html>
