<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
   "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
	<title>sidux Manuals - Internet/Network WPA-Supplicant</title>
	<meta http-equiv="content-type" content="text/html; charset=utf-8" />
	<style type="text/css" media="all">@import url("../lib/css-js/content.css");</style>
	<style type="text/css" media="all">@import url("../lib/css-js/menu.css");</style>
	<style type="text/css" media="print">@import url("../lib/css-js/print.css");</style>
	<link rel ="shortcut icon" href="../lib/favicon/manual.ico" />
	<script type="text/javascript" src="../lib/css-js/menu2.js"></script>
</head>
<body id="cheatcodes">
<div id="menu"> <!-- menu starts here -->
<!--Welcome to the Official sidux-manual 0.6-2007-05-08 ro lang maintainer ladepa-->
<!-- menu last updated by bluewater 08/05/2007 1700rs AEST 08/05/2007 0700hrs UTC -->
<img src="../lib//logos/sidux-logo.png" alt="logo" id="menu-header" />
	<ul id="top-list">
		<li><a href="http://sidux.com/">Back to main sidux menu</a></li>
	</ul>
	<div id="flags-2">
			<a href="../flag-index.html"><img src="../lib/logos/sidux-lang-50.png" title="Alege o alta limba straina" alt="lang-switch" /></a>
	</div>
	<ul>
		<li  onmouseover="showHide( 1 );" onmouseout="startTime();" ><a href="welcome-ro.htm">Bine ati venit la manualul oficial  Sidux</a>
			<ul class="sub-menu" id="sm1">
				<li><a href="welcome-ro.htm#welcome-gen">Manual Oficial </a></li>
				<li><a href="welcome-ro.htm#how-to">Folosirea acestui manual</a></li>
				<li><a href="help-ro.htm#help-gen">De unde primiti ajutor</a></li>
				<li><a href="credits-ro.htm#cred-team">Credits</a></li>
			</ul>
		</li>
		<li  onmouseover="showHide( 2 );" onmouseout="startTime();" ><a href="cd-content-ro.htm">Continutul CD-ului</a>
			<ul class="sub-menu" id="sm2">
				<li><a href="cd-content-ro.htm#cd-content">Continutul CD-ului</a></li>
			</ul>
		</li>
		<li  onmouseover="showHide( 6 );" onmouseout="startTime();" ><a href="cd-dl-burning-ro.htm">Descarcarea si scrirea CD-ului</a>
			<ul class="sub-menu" id="sm6">
				<li><a href="cd-dl-burning-ro.htm#download-sidux">Descarcarea si scrierea CD-ului</a></li>
				<li><a href="cd-dl-burning-ro.htm#md5">Verificarea cu suma de control md5 </a></li>
				<li><a href="cd-dl-burning-ro.htm#burn-nero">Scrierea in Windows</a></li>
				<li><a href="cd-dl-burning-ro.htm#burn-linux">Scrierea in Linux</a></li>
				<li><a href="cd-dl-burning-ro.htm#xdelta">Adaugirile xdelta (Patching)</a></li>
				<li><a href="cd-no-gui-burn-ro.htm">Scrierea CD-ului fara GUI (interfata grafica)</a></li>
			</ul>
		</li>
		<li  onmouseover="showHide( 4 );" onmouseout="startTime();" ><a href="live-mode-ro.htm">Live Mode</a>
			<ul class="sub-menu" id="sm4">
				<li><a href="live-mode-ro.htm#rootpw">Parola de root pe sidux-LiveCD</a></li>
				<li><a href="live-mode-ro.htm#live-cd-installsoft">Instalarea de software in timpul lucrului de pe Live-CD</a></li>
				<li><a href="live-mode-ro.htm#ntfs-3g">Scrierea pe partitii  NTFS cu ntfs-3g</a></li>
			</ul>
		</li>
		<li  onmouseover="showHide( 9 );" onmouseout="startTime();" ><a href="term-konsole-ro.htm">Terminalul /Konsola</a>
			<ul class="sub-menu" id="sm9">
				<li><a href="term-konsole-ro.htm#term-kon"> Terminalul/Konsola</a></li>
				<li><a href="term-konsole-ro.htm#cli-help">Ajutor in Linie de Comanda</a></li>
				<li><a href="term-konsole-ro.htm#shell-scripts">Instalarea Scripts.sh</a></li>
			</ul>
		</li>
		<li  onmouseover="showHide( 7 );" onmouseout="startTime();" ><a href="cheatcodes-ro.htm">CheatCodes</a>
			<ul class="sub-menu" id="sm7">
				<li><a href="cheatcodes-ro.htm#cheatcodes">Cheatcodes</a></li>
				<li><a href="cheatcodes-vga-ro.htm#vga"> Coduri VGA </a></li>
			</ul>
		</li>
		<li  onmouseover="showHide( 5 );" onmouseout="startTime();" ><a href="part-gparted-ro.htm">Partitionarea Hard Discului</a>
			<ul class="sub-menu" id="sm5">
				<li><a href="part-gparted-ro.htm#partition">Partitionarea Hard Discului folosind GParted</a></li>
				<li><a href="part-gparted-ro.htm#ntfs">Redimensionarea partitiilor NTFS folosind GParted</a></li>
				<li><a href="part-uuid-ro.htm#uuid">UUID, Etichetarea Partitiilor si fstab</a></li>
				<li><a href="part-cfdisk-ro.htm#partition">Partitionarea Hard discului folosind cfdisk</a></li>
				<li><a href="part-cfdisk-ro.htm#formating">Formatarea dupa partitionarea cu cfdisk</a></li>
				<li><a href="part-size-examp-ro.htm#part-example">Exemple de marimi de Partitii </a></li>
			</ul>
		</li>
		<li  onmouseover="showHide( 8 );" onmouseout="startTime();" ><a href="hd-install-ro.htm">Optiuni de Instalare </a>
			<ul class="sub-menu" id="sm8">
				<li><a href="hd-install-ro.htm#Inst-prep">Pregatirea Instalarii</a></li>
				<li><a href="hd-install-ro.htm#Installation">Instalarea pe  Hard Disc</a></li>
				<li><a href="hd-install-ro.htm#first-hd-boot">Prima Pornire</a></li>
				<li><a href="hd-install-opts-ro.htm#fromiso">Pornirea 'fromiso'</a></li>
				<li><a href="hd-install-opts-ro.htm#usb-hd">Instalarea pe un USB-Hard Disc</a></li>
				<li><a href="hd-install-opts-ro.htm#qemu">Instalarea prin QEMU</a></li>
			</ul>
		</li>
		<li  onmouseover="showHide( 10 );" onmouseout="startTime();" ><a href="hw-dev-hw-dri-ro.htm">Placi Grafice ,Dispozitive Hardware si Drivere</a>
			<ul class="sub-menu" id="sm10">
				<li><a href="hw-dev-hw-dri-ro.htm#hd-ntfs3g">Scrierea pe partitii NTFS</a></li>
				<li><a href="hw-dev-hw-dri-ro.htm#nvidia-3d">nVidia 3d</a></li>
				<li><a href="hw-dev-hw-dri-ro.htm#ati-3d">ATI 3d</a></li>
				<li><a href="hw-dev-hw-dri-ro.htm#native-nv">Native nv</a></li>
				<li><a href="hw-dev-hw-dri-ro.htm#native-ati">Native ati</a></li>
				<li><a href="hw-dev-hw-dri-ro.htm#mon-res">Schimbarea rezolutiei si Monitoare</a></li>
				<li><a href="hw-dev-hw-dri-ro.htm#non-free">Hardware ce necesita drivere non-free </a></li>
			</ul>
		</li>
		<li  onmouseover="showHide( 12 );" onmouseout="startTime();" ><a href="wm-kde-ro.htm"> Managere in mod grafic</a>
			<ul class="sub-menu" id="sm12">
				<li><a href="wm-kde-ro.htm#desk-freeze">KDE Desktop se blocheaza</a></li>
				<li><a href="wm-kde-ro.htm#kde-login">Daca nu poti loga in KDE</a></li>
				<li><a href="wm-kde-ro.htm#ch-th">Schimbarea Temelor</a></li>
			</ul>
		</li>
		<li  onmouseover="showHide( 14 );" onmouseout="startTime();" ><a href="lamp-apache-ro.htm">Setul LAMP din sidux </a>
			<ul class="sub-menu" id="sm14">
				<li><a href="lamp-apache-ro.htm#serv-apache"> Setul LAMP din sidux</a></li>
				<li><a href="lamp-apache-ro.htm#serv-ftp">Clienti FTP </a></li>
				<li><a href="lamp-apache-ro.htm#serv-sec">Protocoale de Securitate</a></li>
				<li><a href="lamp-apache-ro.htm#serv-ssl">SSL</a></li>
				<li><a href="lamp-sql-ro.htm#serv-mysql">Setarea MySQL </a></li>
				<li><a href="lamp-ppp-ro.htm#serv-php">PHP in Apache</a></li>
			</ul>
		</li>
		<li  onmouseover="showHide( 3 );" onmouseout="startTime();" ><a href="internet-connecting-ro.htm">Internet si Networking</a>
			<ul class="sub-menu" id="sm3">
				<li><a href="ntp-server-ro.htm#ntp-server">Setarea Timeserver-ului </a></li>
				<li><a href="internet-connecting-ro.htm#firewalls">Mini-Firewall</a></li>
				<li><a href="samba-ro.htm#configure">Configurarea SAMBA (Windows)</a></li>
				<li><a href="samba-ro.htm#setup">Setarea Serverului Samba </a></li>
				<li><a href="ssh-ro.htm#ssh-fs">Montarea de la distanta SSH </a></li>
				<li><a href="ssh-ro.htm#ssh-x">Aplicatii X Window via SSH</a></li>
				<li><a href="ssh-ro.htm#ssh-f">GUI SSH cu Konqueror</a></li>
				<li><a href="ssh-ro.htm#ssh-w">SSH X-Forwarding de la un Windows-PC</a></li>
				<li><a href="ssh-ro.htm#ssh">SSH si Securitatea</a></li>
				<li><a href="internet-connecting-ro.htm#dial-mod">Modemuri 56k </a></li>
				<li><a href="internet-connecting-ro.htm#ndiswrapper">Activarea Ndiswrapper</a></li>
				<li><a href="internet-connecting-wpa-ro.htm#wpa">WIFI-WLAN</a></li>
				<li><a href="internet-connecting-ro.htm#internetsharing">Internet Sharing</a></li>
				<li><a href="internet-connecting-ro.htm#netcardconfig">Conectarea Online</a></li>
			</ul>
		</li>
		<li  onmouseover="showHide( 11 );" onmouseout="startTime();" ><a href="sys-admin-apt-ro.htm">Administrarea Sistemului</a>
			<ul class="sub-menu" id="sm11">
				<li><a href="sys-admin-apt-ro.htm#apt-cook">Ghid APT si Sources list</a></li>
				<li><a href="sys-admin-meta-ro.htm#meta-pack">Instalarea Meta-Pachetelor </a></li>
				<li><a href="sys-admin-apt-ro.htm#apt-install">Instalarea unui  pachet nou</a></li>
				<li><a href="sys-admin-apt-ro.htm#apt-delete">Stergerea unui pachet</a></li>
				<li><a href="sys-admin-apt-ro.htm#apt-upgrade">Upgrade-ul unui Sistem instalat</a></li>
				<li><a href="sys-admin-upgrade-ro.htm#live-cd-upgrade">Upgrade-ul folosind Live-CD</a></li>
				<li><a href="sys-admin-kern-upg-ro.htm#kern-upgrade">Upgrade-ul de kernel</a></li>
				<li><a href="sys-admin-rdiff-ro.htm#rdiff">Salvarile cu rdiff</a></li>
				<li><a href="sys-admin-rsync-ro.htm#rsync">Salvarile cu rsync</a></li>
				<li><a href="vir-rkits-ro.htm#virus-rkits">Scanerele AntiVirus si Rootkit </a></li>
				<li><a href="sys-admin-gen-ro.htm#start-services">Activarea serviciilor</a></li>
				<li><a href="sys-admin-gen-ro.htm#pw-lost">Parolele de root pierdute</a></li>
				<li><a href="sys-admin-gen-ro.htm#fonts">Fonturi </a></li>
				<li><a href="sys-admin-grub-bootman2-ro.htm#mbr-grub-boot">Suprascrierea sectorului de boot din MBR </a></li>
				<li><a href="sys-admin-grub-bootman2-ro.htm#boot-grub-floppy">Crearea unei dischete de Boot </a></li>
				<li><a href="sys-admin-grub-bootman2-ro.htm#remove-grub">Scoaterea programului grub din MBR</a></li>
				<li><a href="sys-admin-grub-bootman2-ro.htm#what-is-grub">Managerul de boot Grub </a></li>
			</ul>
		</li>
	</ul>
<!-- menu ends here --> </div>
<div id="main-page">
	<div class="divider" id="wpa">
		<h2 id="top-header">Moduri de Operare in wpasupplicant pentru Debian</h2>
                                  <p class="highlight-3">Due to the complexity of law, sidux will only provide dfsg-free software, <a href="hw-dev-hw-dri-en.htm#non-free">please check this link for additional information on non-free sources for firmware</a></p>

			<p>Pachetul wpasupplicant din Debian ofera doua (2) moduri de operare convenabile puternic integrate in miezul infrastructurii de networking ; ifupdown .</p>


		<h4>Subiectele Acoperite </h4>

<h6>1.  Specificul wpa_supplicant driver backend</h6>
          <p>* Tabelul driverelor suportate<br />
         * Recomandari Common Driver  </p>
<h6>2. Modul #1: Managed Mode</h6>
          <p>* Exemple<br />
          * Tabel de Optiuni<br />
          * Explicatii Importante despre Managed Mode<br />
          * Modul de Lucru </p>
<h6>3. Modul #2: Roaming Mode</h6>
          <p>* wpa_supplicant.conf<br />
          * /etc/network/interfaces<br />
          * Controlarea Demonului de Roaming cu wpa_action<br />
          * Ajustarea Setarii de Roaming <br />
          * Fisierul Log<br />
          * Folosirea Scriptului Extern de Mapping  (ex. guessnet)<br />
          * /etc/network/interfaces with external mapping</p> 
<h6>4. Troubleshooting</h6>
          <p>*  ssids ascunse</p>
<h6>5. Consideratii de Securitate</h6>
          <p>* Configurarea Permisiunilor Fisierelor </p> 

		<h3>1. Specificarea wpa_supplicant driver backend</h3>

			<p>Wext driver backend va fi folosit pentru toate interfetele care nu seteaza in mod explicit 'wpa-driver' ca tip de driver cerut pentru acel dispozitiv . Utilizatorilor ce folosesc kernel de Linux  2.4 sau  2.6 mai mic decat 2.6.14 li se va cere sa specifice tipul de  wpa-driver .</p>

	</div>	

	
		<h3>Tabelul driverelor suportate</h3>

			<p>Un sumar al driverelor suportate urmeaza :</p>

	<div>
		<table>
			<tbody>
				<tr>
					<th>Driver</th>
					<th>Description</th>
				</tr>
				<tr>
					<td>hostap</td>
					<td>Host AP driver (Intersil Prism2/2.5/3)</td>
				</tr>
				<tr>
					<td>madwifi</td>
					<td>MADWIFI 802.11 support (Atheros, etc.)</td>
				</tr>
				<tr>
					<td>atmel</td>
					<td>ATMEL AT76C5XXx (USB, PCMCIA)</td>
				</tr>
				<tr>
					<td>wext</td>
					<td>Linux wireless extensions (generic)</td>
				</tr>
				<tr>
					<td>ndiswrapper</td>
					<td> Linux ndiswrapper</td>
				</tr>
				<tr>
					<td>ipw</td>
					<td>Intel ipw2100/2200 driver</td>
				</tr>
				<tr>
					<td>wired</td>
					<td>wired Ethernet driver</td>
				</tr>
				<tr>
					<td>test</td>
					<td>test driver</td>
				</tr>
			</tbody>
		</table>
	</div>

	<div class="spacer05"></div>
		<h3>Recomandari Common Driver </h3>

			<p>Adaptoarele Intel Pro Wireless (ipw2100, ipw2200 and ipw3945) toate folosesc 'wext' backend , in afara de cazul in care kernelul este mai vechi de 2.6.14</p>

			<p>Madwifi suporta atat 'wext' cat si 'madwifi' driver backends. 'wext' este de preferat , totusi 'madwifi' e posibil sa lucreze mai bine in anumite circumstante .</p>

			<p>Ndiswrapper NU MAI SUPORTA 'ndiswrapper' driver backend ca in versiunea 1.16. De aceea , 'wext' trebuie folosit , in afara de cazul in care utilizati o versiune antica de ndiswrapper .</p>

			<p>Setati  tipul de driver din linia referitoare la interfata dispozitivului dumneavoastra(5) cu optiunea  'wpa-driver'  . De exemplu :</p>

<pre>
iface eth0 inet dhcp
	wpa-driver wext
	. . . . . more options
</pre>

			<h2>2. Modul #1: Managed Mode</h2>

			<p>Acest mod ofera posibilitatea sa stabiliti o conexiune via wpa_supplicant catre o retea cunoscuta . Este similar cu modul in care lucreaza pachetul wireless-tools . Fiecarui element cerut pentru stabilirea conexiunii via wpa_supplicant i se va atribui prefixul  'wpa-' si va fi urmat de valoarea ce va fi folosita pentru acel element .</p>

		<h6>Exemplu de fisier wpa.conf pentru Mode #1   - Exemplul 1.</h6>
<pre>Example of a Mode #1 wpa.conf file - Example 1.
NOTE: the 'wpa-psk' value is only valid if:

   1. It is a plaintext (ascii) string between 8 and 63 characters in length
   2. It is a hexadecimal string of 64 characters 

# Connect to access point of ssid 'NETBEER' with an encryption type of # WPA-PSK/WPA2-PSK. It assumes the driver will use the 'wext' driver backend # of wpa_supplicant because no wpa-driver option has been specified. # The passphrase is given as a ASCII (plaintext) string. DHCP is used to # obtain a network address.
#
iface wlan0 inet dhcp

        wpa-ssid NETBEER
        # plaintext passphrase
        wpa-psk PlainTextSecret

# Connect to access point of ssid 'homezone' with an encryption type of # WPA-PSK/WPA2-PSK, using the 'wext' driver backend of wpa_supplicant. # The psk is given as an encoded hexadecimal string. DHCP is used to obtain # a network address.
#
iface wlan0 inet dhcp

        wpa-driver wext
        wpa-ssid homezone
        # hexadecimal psk is encoded from a plaintext passphrase
        wpa-psk 000102030405060708090a0b0c0d0e0f101112131415161718191a1b1c1d1e1f

# Connect to access point of ssid 'HotSpot1' and bssid of '00:1a:2b:3c:4d:5e' # with an encryption type of WPA-PSK/WPA2-PSK, using the the 'madwifi' driver # backend of wpa_supplicant. The passphrase is given as a plaintext string. # A static network address assignment is used. #
iface ath0 inet static

        wpa-driver madwifi
        wpa-ssid HotSpot1
        wpa-bssid 00:1a:2b:3c:4d:5e
        # plaintext passphrase
        wpa-psk madhotspot
        wpa-key-mgmt WPA-PSK
        wpa-pairwise TKIP CCMP
        wpa-group TKIP CCMP
        wpa-proto WPA RSN
        # static ip settings
        address 192.168.0.100
        netmask 255.255.255.0
        network 192.168.0.0
        broadcast 192.168.0.255
        gateway 192.168.0.1

# User supplied wpa_supplicant.conf is used for eth1. All network information # is contained within the user supplied wpa_supplicant.conf. No wpa-driver type # is specified, so wext is used. DHCP is used to obtain a network address. #
iface eth1 inet dhcp

wpa-conf /path/to/wpa_supplicant.conf
</pre>


	<div class="divider" id="wpa1">
		<h2>Tabel de  Optiuni</h2>

			<p>O scurta enumerare de optiuni 'wpa-' ce pot fi folosite in liniile  /etc/network/interfaces pentru un dispozitiv wireless . Vezi sectiunea 'Explicatii Importante despre Managed Mode' pentru informatii despre valori  'wpa-'  valide si invalide .</p>

			<p class="highlight-2">NOTA : TOATE valorile sunt CASE SeNsITiVe</p>

<pre>
Element		Example Value		Description
=======         =============           ===========
wpa-ssid        plaintextstring         sets the ssid of your network
wpa-bssid       00:1a:2b:3c:4d:5e       the bssid of your AP
wpa-psk         0123456789......        your preshared wpa key. Use
                                        wpa_passphrase(8) to generate your psk
                                        from a passphrase and ssid pair
wpa-key-mgmt    NONE, WPA-PSK, WPA-EAP, list of accepted authenticated key
                IEEE8021X               management protocols
wpa-group       CCMP, TKIP, WEP104,     list of accepted group ciphers for WPA
                WEP40
wpa-pairwise    CCMP, TKIP, NONE        list of accepted pairwise ciphers for
                                        WPA
wpa-auth-alg    OPEN, SHARED, LEAP      list of allowed IEEE 802.11
                                        authentication algorithms
wpa-proto       WPA, RSN                list of accepted protocols
wpa-identity    myplaintextname         administrator provided username
                                        (EAP authentication)
wpa-password    myplaintextpassword     your password (EAP authentication)
wpa-scan-ssid   0 or 1                  toggles scanning of ssid with specific
                                        Probe Request frames
wpa-ap-scan     0 or 1 or 2             adjusts the scanning logic of
                                        wpa_supplicant

</pre>
			<p>Functionalitatea completa a wpa_cli(8) trebuie implementata . Orice lipseste este considerat   bug si ar trebui raportat ca atare . Patch-uri sunt intotdeauna bine venite .</p>


			<h2>Explicatii Importante despre Managed Mode</h2>

			<p>Aproape toate optiunile 'wpa-' cer ca cel putin un ssid sa fie specificat . Doar cateva optiuni au efect global . Acestea sunt : 'wpa-ap-scan' si 'wpa-preauthenticate'.</p>

			<p>Orice optiune 'wpa-' data pentru un dispozitiv in fisierul de interfete(5) este suficient pentru a pune in actiune demonul wpa_supplicant .</p>

			<p>Scriptul wpasupplicant ifupdown face presupuneri despre 'type' (tipul) intrarii care este valida pentru fiecare optiune . De exemplu , presupune ca anumite intrari sunt in plaintext si aseaza intrarea intre ghilimele inainte de a o pasa catre wpa_cli , care apoi adauga intrarea blocului de retea ce a fost creat via  wpa_supplicant ctrl_interface socket.</p>

			<p>Ruland manual ifup cu optiunea  '--verbose' va scoate la iveala toate comenzile folosite pentru a forma blocul de retea via wpa_cli. Daca volorile pe care le utilizati pentru orice optiune  wpa-*  in /etc/network/interfaces sunt intre ghilimele , atunci se va presupune ca sunt intrari de tipul "plaintext" sau "ascii" .</p>

			<p>Unele intrari se presupune ca sunt in hexazecimal (ex. wpa-wep-key*).  'type'  -tipul valorii din optiunea  wpa-psk , este determinata printr-o verificare simpla care este facuta pentru mai mult decat un caracter non hexadecimal  .</p>

			<h2>Modul de Lucru</h2>

			<p>Cum am mentionat mai devreme , fiecare element specific wpa_supplicant are prefixul 'wpa-'. Fiecare element este corelat unei proprietati wpa_supplicant descrise in  wpa_supplicant.conf(5) , wpa_supplicant(8) si wpa_cli(8) manpages .</p>

			<p>Oricum supplicant este lansat fara nici o configurare prealabila , si wpa_cli  face configurarea retelei din intrarile oferite de liniile  'wpa-*' . Initial , wpa_supplicant/wpa_cli nu seteaza direct proprietatile dispozitivului (precum setarea unui essid cu iwconfig , de exemplu) , ci mai degraba informeaza dispozitivul despre punctele de acces potrivite asocierii . Odata ce dispozitivul a scanat zona si a gasit toate punctele de acces potrivite si disponibile spre utilizare va seta aceste proprietati .</p>

			<p>Scriptul care face toata aceasta treaba este localizat la :</p>

<pre> /etc/wpa_supplicant/ifupdown.sh</pre>

			<p>este executat de run-parts , care in schimb este invocat de ifupdown in timpul fazelor 'pre-up', 'pre-down' si 'post-down' .</p>


			<p>In faza 'pre-up' , un demon wpa_supplicant este lansat urmat de o serie de comenzi wpa_cli  care seteaza o configuratie de retea in functie de optiunile 'wpa-' folosite in /etc/network/interfaces pentru dispozitivul fizic .</p>

			<p>daca este folosit wpa-roam , un demon wpa_cli este lansat in faza 'post-up' .</p>

			<p>In faza 'pre-down' , demonul wpa_cli este terminat daca exista .</p>

			<p>In faza 'post-down' , demonul wpa_supplicant este terminat .</p>

			<h2>3. Modul #2: Roaming Mode</h2>

			<p>Un mecanism de roaming simplistic dar suficient este oferit prin intermediul acestui pachet .Este de forma unui script activ wpa_cli  , /sbin/wpa_action , ce preia controlul asupra ifupdown odata activat . Paginile manpage pentru wpa_action(8) descriu in amanunt detaliile sale tehnice .</p>

			<p>Pentru a activa o interfata roaming adaptati liniile din urmatorul exemplu interfaces(5) :</p>

<pre>
iface eth1 inet manual
	wpa-driver wext
        wpa-roam /path/to/wpa_supplicant.conf
</pre>

			<p>Doi daemoni sunt lansati in exemplul de mai sus : wpa_supplicant si wpa_cli. este necesar sa specificati un fisier wpa_supplicant.conf . Un punct de plecare bun este acest exemplu de fisier de configurare :</p>

<pre>cp /usr/share/doc/wpasupplicant/examples/wpa_supplicant.conf.template \
        /etc/wpa_supplicant/wpa_supplicant.conf
</pre>


			<p>Va trebui sa editati fisierul de configurare si sa adaugati toate blocurile de retea pentru toate retelele cunoscute . Daca nu intelegeti despre ce e vorba aici incepeti sa cititi explicatiile din manpages pentru wpa_supplicant.conf(5) .</p>

			<p>Pentru fiecare retea puteti specifica o optiune speciala  'id_str' . Ea trebuie setata printr-un simplu sir text . Acest sir text formeaza baza profilului retelei ; se coreleaza la o interfata logica definita in fisierul interfaces(5) . Daca nicio optiune 'id_str' nu este data pentru retea , wpa_action va folosi  interfata logica 'default'  pentru intoarceri (fallback). Interfata fallback poate fi aleasa prin optiunea  'wpa-default-iface' .</p>

			<p>Ce inseamna toate astea ? Sa ilustram toate acestea printr-un exemplu luat din paginile manpage wpa_action(8) .</p>

		<h6>exemplu de wpa_supplicant.conf </h6>			
<pre>wpa_supplicant.conf example:
network={

        ssid="foo"
        # this id_str will notify /sbin/wpa_action to 'ifup uni'
        id_str="uni"
        key_mgmt=NONE
}

network={

        ssid="bar"
        # this id_str will notify /sbin/wpa_action to 'ifup home_static'
        id_str="home_static"
        psk=123456789...

}


network={

        ssid=""
        # no 'id_str' is given, /sbin/wpa_action will 'ifup default'
        key_mgmt=NONE

}
</pre>
</div>
	<div class="divider" id="wpa2">
		<h6>exemplu de /etc/network/interfaces </h6>
<pre>/etc/network/interfaces example:
# the roaming interface MUST use the manual inet method
# 'allow-hotplug' or 'auto' ensures the daemon starts automatically
allow-hotplug eth1
iface eth1 inet manual

        wpa-driver wext
        wpa-roam /etc/wpa_supplicant/wpa_supplicant.conf

 
# no id_str, 'default' is used as the fallback mapping target
iface default inet dhcp


# id_str="uni"
iface uni inet dhcp

# id_str="home_static"
iface home_static inet static

        address 192.168.0.20
        netmask 255.255.255.0
        network 192.168.0.0

        broadcast 192.168.0.255
        gateway 192.168.0.1
</pre>

			<p>O interfata logica este pornita prin ifup , si oprita prin ifdown , pentru ca  wpa_supplicant se asociaza si de-asociaza cu reteaua la care este conectata prin optiunea 'id_str' folosita in fisierul de configurare wpa_supplicant.conf .</p>

			<p>Un fisier log al actiunilor /sbin/wpa_action's este creat la /var/log/wpa_action.log , va rugam sa-l trimiteti cand raportati probleme .</p>

<h2>Controlarea Daemonului de Roaming cu wpa_action</h2>

			<p>Odata daemonul de roaming pornit , acesta preia controlul  ifupdown . Asta e ; wpa_cli initializeaza ifup cand wpa_supplicant a fost asociat cu succes unui punct de acces , si initializeaza ifdown cand conexiunea este pierduta sau terminata . Atat timp cat daemonul de roaming este activ , ifupdown nu trebuie controlat prin comenzi introduse manual , mai degraba sa fie activat  /sbin/wpa_action pentru a opri si reincarca daemonul de roaming . De exemplu pentru a opri daemonul de romaing pentru interfata 'eth1' :</p>

<pre>wpa_action eth1 stop</pre>


			<p>Cand este necesar sa faceti update daemonului de roaming cu detalii despre o noua retea acest lucru de poate face fara a-l opri . Editati fisierul wpa_supplicant.conf care este folosit de catre daemon cu detaliile noii retele , adaugati setarile de retea optionale corespunzatoare noii retele in  /etc/network/interfaces  (legate de 'id_str') si apoi 'reload'  daemonul asa :</p>

<pre>wpa_action eth1 reload</pre>

			<p>Pentru detaliile tehnice complete asupra ce poate face  wpa_action  cititi paginile  wpa_action(8) manpage .</p>

</div>
	<div class="divider" id="wpa3">
		<h2>Ajustarea Setarii de Roaming </h2>

			<p>Veti intalni situatii cand mai multe puncte de acces cunoscute sunt foarte aproape unele de altele . Puteti alege manual care este cel preferat cu  wpa_cli sau wpa_gui , sau puteti specifica prioritatea fiecarei retele . Aceasta este specificata cu optiunea 'priority' din fisierul wpa_supplicant.conf .</p>

</div>
	<div class="divider" id="wpa4">
		<h2>Fisierul Log</h2>

			<p>Intreaga activitate a daemonului de roaming va fi consemnata in  /var/log/wpa_action.log . Urmatoarele informatii vor fi consemnate :</p>

		<p>*time and date<br />
		*interface name and action event<br />
		*values of enviromental variables (WPA_ID, WPA_ID_STR, WPA_CTRL_DIR)<br />
		*ifupdown command executed<br />
		*wpa_cli status (based on WPA-PSK, network may display different info)<br />
		*bssid<br />
		*ssid<br />
		*id<br />
		*id_str<br />
		*pairwise_cipher<br />
		*group_cipher<br />
		*key_mgmt<br />
		*wpa_state<br />
		*ip_address</p>
	
	
</div>
	<div class="divider" id="wpa5">	
		<h2>Utilizarea Scripturilor Externe de Mapping  (ex. guessnet)</h2>

			<p>In plus fata de mapping intern al interfetei logice via 'id_str' , wpa_action poate lansa si scripturi externe de mapping . Un script de mapping trebuie sa intoarca numele interfetei logige ce va fi initializata . Orice script de mapping care lucreaza prin mecanismul de mapping ifupdowns  (vezi man interfaces) trebuie de asemeni sa lucreze si cand este lansat prin wpa_action.</p>

			<p>Pentru a lansa un script de mapping adaugati o linie 'wpa-mapping-script name-of-the-script'  in sectiunea interfaces ale dispozitivului fizic de roaming . (Va trebui sa specificati calea absoluta catre scriptul de mapping .)</p>


			<p>Continutul liniilor care incep cu wpa-map este trecut mai departe catre stdin din scriptul de mapping . Deoarece ifupdown permite doar o linie wpa-map puteti adauga orice numar la wpa-map pentru linii aditionale . De exemplu :</p>

<pre>
iface wlan0 inet manual
        wpa-driver wext
        wpa-roam /etc/wpa_supplicant/wpa_supplicant.conf
        wpa-mapping-script guessnet-ifupdown
        wpa-map0 home
        wpa-map1 work
        wpa-map2 school
        # ... additional wpa-mapX lines as required
</pre>
			<p>Implicit scriptul de mapping va fi folosit doar cand nici o valoare a optiunii 'id_str' nu este disponibila pentru reteaua curenta . Daca doriti sa dezactivati complet asocierile  'id_str' si sa utilizati doar un script de mapping extern folositi optiunea 'wpa-mapping-script-priority 1'  pentru a trece peste comportamentul implicit .</p>

			<p>Daca scriptul de mapping intoarce un sir gol , wpa_action va reveni la folosirea interfetei 'default' , in afara de cazul in care este definita o alternativa cu optiunea  'wpa-roam-default-iface' .</p>

			<p>Mai jos este oferit in exemplu avansat in care guessnet-ifupdown este folosit ca script extern de mapping .</p>

		<h6>exemplu de /etc/network/interfaces cu mapping extern</h6>
<pre>/etc/network/interfaces with external mapping example:
allow-hotplug wlan0
iface wlan0 inet manual

        wpa-driver wext
        wpa-roam /etc/wpa_supplicant/wpa_supplicant.conf
        wpa-roam-default-iface default-wparoam
        wpa-mapping-script guessnet-ifupdown
        wpa-map default: default-guessnet
        wpa-map0 home_static
        wpa-map1 work_static


# school can only be chosen via 'id_str' matching
iface school inet dhcp

        # resolvconf
        dns-nameservers 11.22.33.44 55.66.77.88

iface home_static inet static

        address 192.168.0.20
        netmask 255.255.255.0

        network 192.168.0.0
        broadcast 192.168.0.255
        gateway 192.168.0.1
        test peer address 192.168.0.1 mac 00:01:02:03:04:05


iface work_static inet static

        address 192.168.3.200
        netmask 255.255.255.0
        network 192.168.3.0
        broadcast 192.168.3.255

        gateway 192.168.3.1
        test peer address 192.168.3.1 mac 00:01:02:03:04:05

iface default-guessnet inet dhcp

iface default-wparoam inet dhcp
</pre>

			<p>In acest exemplu wpa_action va folosi guessnet pentru selectarea unei interfete logice corespunzatoare doar daca nici o optiune  'id_str' nu a fost furnizata in wpa_supplicant.conf pentru reteaua curenta .</p>

			<p>Liniile 'wpa-map'  specifica pentru  guessnet interfata logica ce trebuie testata precum si interfata implicita ce va fi folosita in cazul in care toate testele esueaza . Liniile 'test' ale fiecarei interfete logige sunt folosite de guessnet pentru a determina daca sunteti conectati la retea . De exemplu , guessnet va alege interfata logica 'home_static' daca exista un dispozitiv cu adresa  IP  192.168.0.1 si MAC  00:01:02:03:04:05 in reteaua curenta . Daca toate testele esueaza , interfata 'default-guessnet' va fi configurata .</p>


			<p>Va rugam cititi guessnet(8) manpage pentru mai multe informatii .</p>

			<h2>4. Troubleshooting</h2>

			<p>Pentru a depana conexiunea , problemele de asociere si autentificare , va sugeram sa porniti `wpa_cli -i &lt;interface&gt;` intr-o consola separata , inainte de a porni interfata . Folositi intai comanda  'level 0' pentru a primi toate mesajele de depanare . Apoi utilizati  `ifup --verbose &lt;interface&gt;` pentru a primi mesaje detaliate de la scriptul care porneste wpasupplicant.</p>

	<div class="divider" id="wpa6">
		<h2> ssids ascunse</h2>

			<p>Pentru relatii vedeti  #358137. Pentru a putea face asocierea cu procesele ssids ascunse va rugam incercati sa setati optiunea 'ap_scan=1' in sectiunea globala si  'scan_ssid=1' in sectiunea blocului de retea din fisierul  wpa_supplicant.conf . Daca folositi managed mode , puteti face acestea in liniile :</p>

<pre>
iface eth1 inet dhcp
wpa-conf managed
wpa-ap-scan 1
wpa-scan-ssid 1
# ... additional options for your setup
</pre>

			<p>Potrivit cu #368770 , procesul poate dura foarte mult cand e vorba de asocierea la retele securizate WEP  . In anumite cazuri , setind parametrul  'ap_scan=2' in fisierul de configurare , (sau folosind o linie 'wpa-ap-scan 2' , ceea ce este echivalent) poate ajuta foarte mult la realizarea mai rapida a asocierii .</p>

			<h2>5. Consideratii de Securitate </h2>

	<div class="divider" id="wpa7">
		<h2>Configurarea  Permisiunilor Fisierelor</h2>
			<p>Este important sa tineti PSK's si alte informatii delicate cu privire la setarile retelei dumneavoastra private , de aceea asigurati-va ca fisierele de configurare care contin asemenea date pot fi citite doar de proprietar . De exemplu :</p>

<pre>
chmod 0600 /etc/network/interfaces
# substitute the path of your wpa_supplicant.conf file
chmod 0600 /etc/wpa_supplicant/wpa_supplicant.conf
</pre>
			<p>Implicit , fisierul  /etc/network/interfaces poate fi citit de oricine , si de aceea nu este potrivit pentru a contine chei secrete si parole .</p>


	</div>
	<div class="spacer05"></div>
</div>
</div>
</div>
</body>
</html>
