<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
   "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="ro">
<head>
	<title>Manualul aptosid - Utilizare rdiff</title>
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
	<style type="text/css" media="all">@import url("../lib/css-js/content.css");</style>
        <style type="text/css" media="all">@import url("../lib/css-js/menu.css");</style>
        <style type="text/css" media="print">@import url("../lib/css-js/print.css");</style>
        <link rel ="shortcut icon" href="../lib/favicon/manual.ico" />
        <script type="text/javascript" src="../lib/css-js/menu2.js"></script>
        <!--[if lt IE 8]>
        <link rel="stylesheet" type="text/css" href="../lib/css-js/ie_5-7_override.css">
        <![endif]-->
        <!--[if lt IE 7]>
        <link rel="stylesheet" type="text/css" href="../lib/css-js/ie_5-6_override.css">
        <![endif]-->
</head>
<body>
<div id="menu"> <!-- menu starts here ro lang maintained by Dorin-->
<!--aptosid Operating System Manual menu-version-02.12.2011.08.12 -->
<!-- menu last updated by bluewater 2011.08.12 0814 hrs UTC -->
	<div id="menu-header">
	      <a href="http://aptosid.com/"><img src="../lib/logos/manual-aptosid-logo.png" title="La pagina aptosid.com forum-uri şi wiki" alt="aptosid.com logo" /></a>
	</div>
	<ul id="top-list">
		<li><a href="manual-search-ro.htm#search-on"> <img src="../lib/logos/manual-search-22x22.png" title="Caută în manual" alt="Caută" /> Caută Online sau Offline</a> </li>
	</ul>
	<div id="flags-2">
			<a href="../flag-index.html"><img src="../lib/logos/aptosid-lang-100x64.png" title="Alege altă limbă" alt="lang-switch" /></a>
	</div>
	<ul>
<li onmouseover="showHide( 1 );" onmouseout="startTime();" ><a href="welcome-ro.htm">Manualul SO aptosid</a>
			<ul class="sub-menu" id="sm1">
				<li><a href="welcome-ro.htm#welcome-gen">Manualul SO aptosid &#8658;</a>
					<ul class="sub2-menu" id="sm1a">
					  <li><a href="credits-ro.htm#cred-team">Credite</a></li>
					</ul>
					</li>
		<li><a href="welcome-ro.htm#how-to">Cum să utilizați acest manual &#8658;</a>
					<ul class="sub2-menu" id="sm1b">
					  <li><a href="welcome-ro.htm#how-to">Cum să utilizați acest manual</a></li>
					  <li><a href="welcome-ro.htm#table-contents">Cuprins</a></li>
					</ul>
					</li>
		<li><a href="help-ro.htm#help-gen">Cum primiți ajutor &#8658;</a>
					<ul class="sub2-menu" id="sm1c">
					  <li><a href="help-ro.htm#help-gen">De unde și cum primiți ajutor</a></li>
					  <li><a href="help-ro.htm#paste">IRC <i>!paste</i></a></li>
					</ul>
					</li>
		<li><a href="wel-quickstart-ro.htm#welcome-quick">Ghidul de pornire rapidă aptosid</a></li>
		</ul>
		</li>
<li  onmouseover="showHide( 2 );" onmouseout="startTime();" ><a href="cd-dl-burning-ro.htm">Conținutul ISO, Versiuni, Locații de Download  și Arderea CD/DVD</a>
			   <ul class="sub-menu" id="sm2">
				<li><a href="cd-content-ro.htm#cd-content">Conținutul ISO și cerințe de sistem &#8658;</a>
					<ul class="sub2-menu" id="sm2a">
					  <li><a href="sys-admin-release-ro.htm#rolling">Notele Versiunii</a></li>
					</ul>
					</li>
		    <li><a href="cd-dl-burning-ro.htm#download-aptosid">Locații aptosid, Descărcare și Ardere &#8658;</a>
				<ul class="sub2-menu" id="sm2b">
					  <li><a href="cd-dl-burning-ro.htm#md5">md5 Suma de control</a></li>
					  <li><a href="cd-dl-burning-ro.htm#burn-nero">Arderea în Windows</a></li>
					  <li><a href="cd-dl-burning-ro.htm#burn-linux">Arderea în Linux</a></li>
					  <li><a href="cd-no-gui-burn-ro.htm#burning-no-gui">script-ul <i>burniso</i></a></li>
					  <li><a href="cd-no-gui-burn-ro.htm#burn-no-gui-gen">Arderea fără GUI</a></li>
					  <li><a href="cd-dl-burning-ro.htm#download-aptosid">Locații de Descărcare aptosid</a></li>
					</ul>
					</li>
		      </ul>
		</li>
<li  onmouseover="showHide( 3 );" onmouseout="startTime();" ><a href="live-mode-ro.htm">Modul Live</a>
			<ul class="sub-menu" id="sm3">
				<li><a href="live-mode-ro.htm#rootpw">Parola de root pe aptosid-Live ISO</a></li>
				<li><a href="live-mode-ro.htm#live-cd-installsoft">Instalarea programelor în timpul rulării unui Live-ISO</a></li>
			</ul>
		</li>
<li  onmouseover="showHide( 4 );" onmouseout="startTime();" ><a href="term-konsole-ro.htm">Terminalul / Konsole</a>
			<ul class="sub-menu" id="sm4">
				<li><a href="term-konsole-ro.htm#term-kon"> Terminal / Konsole &#8658;</a>
					<ul class="sub2-menu" id="sm4a">
					  <li><a href="term-konsole-ro.htm#term-kon"> Terminal / Konsole</a></li>
					  <li><a href="term-konsole-ro.htm#colours"> Terminal - promt-uri colorate</a></li>
					  <li><a href="term-konsole-ro.htm#cli-help">Ajutor în Linia de Comandă</a></li>
					  <li><a href="help-ro.htm#init3-tools">Unelte bune de știut în modul text (tty) - <i>init 3</i></a></li>
					  <li><a href="term-konsole-ro.htm#term-cmds">Lista Comenzilor Linux în Terminal</a></li>
					</ul>
					</li>
			  <li><a href="term-konsole-ro.htm#sux"> sux / sudo</a></li>
		    </ul>
		</li>
<li  onmouseover="showHide( 5 );" onmouseout="startTime();" ><a href="cheatcodes-ro.htm">CheatCode-uri</a>
			<ul class="sub-menu" id="sm5">
				<li><a href="cheatcodes-ro.htm#cheatcodes">CheatCode-uri specifice aptosid în Live-ISO</a></li>
				<li><a href="cheatcodes-ro.htm#cheatcodes-linux">CheatCode-uri generice Linux</a></li>
				<li><a href="cheatcodes-vga-ro.htm#vga">Code-uri VGA</a></li>
			</ul>
		</li>
<li  onmouseover="showHide( 6 );" onmouseout="startTime();" ><a href="part-gparted-ro.htm">Partiționarea Hard Disk-ului - Tradițional, GPT și LVM</a>
		<ul class="sub-menu" id="sm6">
			 <li><a href="part-gparted-ro.htm#hd-ntfs3g">Scrierea pe partiții NTFS cu <i>ntfs-3g</i></a></li>
			<li><a href="part-lvm-ro.htm#part-lvm">Partiționarea pentru a folosi LVM - Logical Volume Manager</a></li>
			<li><a href="part-gparted-ro.htm#partition">Partiționarea cu GUI &#8658;</a>
					<ul class="sub2-menu" id="sm6a">
					  <li><a href="part-gparted-ro.htm#partition">Partiționarea HD cu GParted / KDE Partition Manager</a></li>
					  <li><a href="part-gparted-ro.htm#ntfs">Redimensionarea partițiilor NTFS cu GParted / KDE Partition Manager</a></li>
					</ul>
					</li>
		<li><a href="part-cfdisk-ro.htm#partition">Partiționarea cu CLI &#8658;</a>
					 <ul class="sub2-menu" id="sm6b">
					    <li><a href="part-cfdisk-ro.htm#partition">Partiționarea HD cu <i>cfdisk</i></a></li>
					    <li><a href="part-cfdisk-ro.htm#formating">Formatarea după partiționare cu <i>cfdisk</i></a></li>
					    <li><a href="part-gdisk-ro.htm#gdisk-6">Formatarea după partiționare cu <i>gdisk</i></a></li>
					    <li><a href="part-gdisk-ro.htm#gdisk-1">GPT - Partiționarea cu <i>gdisk</i></a></li>
					</ul>
					</li>
		<li><a href="part-size-examp-ro.htm#part-example">Partiționare - Sumar &#8658;</a>
					<ul class="sub2-menu" id="sm6c">
					  <li><a href="part-size-examp-ro.htm#part-example">Exemple de dimensiuni de Partiții</a></li>
					  <li><a href="part-uuid-ro.htm#uuid">UUID, Reconstruirea <i>fstab</i> și crearea unor noi puncte de mount-are</a></li>
					  <li><a href="part-cfdisk-ro.htm#disknames">Numirea pe scurt a Disk-urilor</a></li>
					</ul>
					</li>
		      </ul>
		</li>
<li  onmouseover="showHide( 7 );" onmouseout="startTime();" ><a href="hd-install-ro.htm">Opțiuni de Instalare - HD, USB, VM și Cryptroot</a>
		<ul class="sub-menu" id="sm7">
		  <li><a href="hd-install-ro.htm#Inst-prep">Pregătirea Instalării &#8658;</a>
					<ul class="sub2-menu" id="sm7a">
					  <li><a href="hd-install-ro.htm#Inst-prep">Pregătirea Instalării</a></li>
					  <li><a href="hd-install-ro.htm#Installation">Instalarea pe HD</a></li>
					  <li><a href="hd-install-ro.htm#first-hd-boot">Prima Boot-are</a></li>
					</ul>
					</li>
		<li><a href="hd-install-opts-ro.htm#fromiso">Boot-area <i>fromiso</i> &#8658;</a>
					<ul class="sub2-menu" id="sm7b">
					  <li><a href="hd-install-opts-ro.htm#fromiso">Boot-area <i>fromiso</i> - Introducere</a></li>
					  <li><a href="hd-install-opts-ro.htm#grub2-fromiso">Boot-area <i>fromiso</i> cu Grub 2</a></li>
					  <li><a href="hd-install-opts-ro.htm#fromiso-persist"><i>fromiso</i> și <i>persist</i></a></li>
					</ul>
					</li>
		<li><a href="hd-install-opts-ro.htm#usb-hd">Instalarea pe USB &#8658;</a>
					<ul class="sub2-menu" id="sm7c">
					  <li><a href="hd-install-opts-ro.htm#usb-hd">Instalarea pe un USB-HD - specific aptosid - <i>aptosid-on-stick</i></a></li>
					  <li><a href="hd-ins-opts-oos-ro.htm#raw-usb">Scrierea aptosid pe un USB/SSD stick cu orice sistem Linux, MS Windows sau Mac OS X</a></li>
					</ul>
					</li>
		  <li><a href="hd-install-crypt-ro.htm#install-crypt">Instalarea pe partiții criptate - <i>cryptroot</i></a></li>
		  <li><a href="nbdboot-ro.htm#nbd1">Boot-area aptosid din rețea</a></li>
		  <li><a href="hd-install-vmopts-ro.htm#vmopts">Instalarea în Mașini Virtuale</a></li>
		</ul>
		</li>
<li  onmouseover="showHide( 8 );" onmouseout="startTime();" ><a href="gpu-ro.htm">Plăci grafice, monitoare, Xorg,  &amp; drivere</a>
	<ul class="sub-menu" id="sm8">
		<li><a href="hw-dev-mon-ro.htm#mon-res">Rezoluția Ecranului și Monitoare &#8658;</a>
					<ul class="sub2-menu" id="sm8a">
					  <li><a href="hw-dev-mon-ro.htm#mon-res">Rezoluția Ecranului și Monitoare</a></li>
					  <li><a href="hw-dev-mon-ro.htm#xrandr">Monitoare Duale și <i>xrandr</i></a></li>
					  <li><a href="hw-dev-mon-ro.htm#mon-binary">Monitoare Duale (folosind binare)</a></li>
					</ul>
					</li>
		<li><a href="gpu-ro.htm#foss-xorg">GPU drivere &#8658;</a>
					<ul class="sub2-menu" id="sm8b">
					  <li><a href="gpu-ro.htm#ati-3d">AMD/ATI 3D -drivere</a></li>
					  <li><a href="gpu-ro.htm#intel">Intel 2D și 3D -drivere</a></li>
					  <li><a href="gpu-ro.htm#nvidia">Nvidia 3D -drivere</a></li>
					  <li><a href="gpu-ro.htm#foss-xorg">Open Source Xorg -drivere</a></li>
					</ul>
					</li>
			  <li><a href="nf-firm-ro.htm#fw-detect">Detectare Firmware - non-free </a></li>
			  <li><a href="nf-firm-ro.htm#non-free-firmware">Adăugarea non-free la Lista Surselor</a></li>
		</ul>
		</li>
<li  onmouseover="showHide( 9 );" onmouseout="startTime();" ><a href="wm-dm-ro.htm">Managere de Ferestre</a>
		    <ul class="sub-menu" id="sm9">
			  <li><a href="wm-dm-ro.htm">KDE și XFCE Managere de Ferestre &#8658;</a>
					  <ul class="sub2-menu" id="sm9a">
					    <li><a href="wm-dm-ro.htm#xfce-notes">Xfce aplicații utile</a></li>
					    <li><a href="wm-dm-ro.htm#install-add">KDE aplicații utile</a></li>
					    <li><a href="wm-dm-ro.htm#desk-freeze">Înghețarea Desktop-ului</a></li>
					    <li><a href="wm-dm-ro.htm#kde-login">KDE - nu mă pot loga</a></li>
					    <li><a href="wm-dm-ro.htm#ch-th">Schimbarea Aspectului</a></li>
					</ul>
					</li>
		      <li><a href="wm-dm-ro.htm#dm">Instalarea altor Managere de Ferestre (Display Managers)</a></li>
		</ul>
		</li>
<li  onmouseover="showHide( 11 );" onmouseout="startTime();" ><a href="inet-ceni-ro.htm">Conectarea la Internet, WiFi, LAN și Rețele</a>
		    <ul class="sub-menu" id="sm11">
			<li><a href="lamp-apache-ro.htm">Setul LAMP din aptosid &#8658;</a>
					<ul class="sub2-menu" id="sm11a">
					    <li><a href="lamp-apache-ro.htm#serv-apache">Setul LAMP din aptosid</a></li>
					    <li><a href="lamp-apache-ro.htm#serv-ftp">Clienți FTP</a></li>
					    <li><a href="lamp-apache-ro.htm#serv-sec">Protocoale de Securitate</a></li>
					    <li><a href="lamp-apache-ro.htm#serv-ssl">SSL</a></li>
					    <li><a href="lamp-sql-ro.htm#serv-mysql">Setarea MySQL</a></li>
					    <li><a href="lamp-ppp-ro.htm#serv-php">PHP în Apache</a></li>
					    <li><a href="ntp-server-ro.htm#ntp-server">Setarea Timeserver-ului</a></li>
					</ul>
					</li>
		<li><a href="tor-privoxy-ro.htm#tor">Firewall-uri și Intimitate &#8658;</a>
					<ul class="sub2-menu" id="sm11b">
					    <li><a href="tor-privoxy-ro.htm#tor">Tor</a></li>
					    <li><a href="tor-privoxy-ro.htm#privoxy">Privoxy</a></li>
					    <li><a href="inet-ceni-ro.htm#firewalls">Firewall-uri</a></li>
					</ul>
					</li>
		<li><a href="ssh-ro.htm#ssh-x">SSH și Samba &#8658;</a>
					<ul class="sub2-menu" id="sm11c">
						  <li><a href="samba-ro.htm#setup">Setarea Samba-Server</a></li>
						  <li><a href="samba-ro.htm#configure">Configurarea SAMBA (Windows)</a></li>
						  <li><a href="ssh-ro.htm#ssh-fs">SSH - Mount-area la distanță</a></li>
						  <li><a href="ssh-ro.htm#ssh-x">Aplicații X Window via SSH</a></li>
						  <li><a href="ssh-ro.htm#ssh-f">GUI SSH cu Konqueror</a></li>
						  <li><a href="ssh-ro.htm#ssh-w">SSH X-Forwarding de pe PC-uri Windows</a></li>
						  <li><a href="ssh-ro.htm#ssh">SSH și Securitate</a></li>
					</ul>
					</li>
		<li><a href="inet-ceni-ro.htm#netcardconfig">Conexiuni WIFI &#8658;</a>
						<ul class="sub2-menu" id="sm11d">
						    <li><a href="inet-ceni-ro.htm#netcardconfig">Conectarea Online - Ceni</a></li>
						    <li><a href="inet-wpagui-ro.htm#wpa-roaming-gui">WiFi - WPA_GUI</a></li>
						    <li><a href="inet-setup-ro.htm#net-set1">WiFi - Setarea WiFi Roaming</a></li>
						    <li><a href="inet-wpa-ro.htm#wpa">WiFi - wpasupplicant</a></li>
						    <li><a href="inet-ifplug-ro.htm#hotswitch">Schimbarea rețelei între WiFi și Cablu</a></li>
					</ul>
					</li>
		<li><a href="inet-ceni-ro.htm#netcardconfig">Conexiuni prin Cablu &#8658;</a>
						<ul class="sub2-menu" id="sm11e">
						    <li><a href="inet-ceni-ro.htm#dial-mod">Modem-uri 56k</a></li>
						    <li><a href="inet-ceni-ro.htm#netcardconfig">Conectarea Online - Ceni</a></li>
					</ul>
					</li>
				</ul>
			    </li>
<li  onmouseover="showHide( 12 );" onmouseout="startTime();" ><a href="sys-admin-apt-ro.htm">Managementul Pachetelor și dist-upgrade</a>
	<ul class="sub-menu" id="sm12">
		<li><a href="sys-admin-apt-ro.htm#apt-cook">APT - Utilizare și Listele Surselor &#8658;</a>
					<ul class="sub2-menu" id="sm12a">
					    <li><a href="sys-admin-apt-ro.htm#apt-cook">APT-Ghid de Utilizare și Listele Surselor</a></li>
					    <li><a href="sys-admin-apt-ro.htm#apt-install">Instalarea de pachete noi</a></li>
					    <li><a href="sys-admin-apt-ro.htm#apt-delete">Ștergerea unui pachet</a></li>
					    <li><a href="sys-admin-apt-ro.htm#apt-downgrade">Pachete în Hold și downgrading</a></li>
					    <li><a href="sys-admin-apt-ro.htm#apt-cache">Pachete - căutarea cu <i>apt-cache</i></a></li>
					    <li><a href="sys-admin-apt-ro.htm#gui-pacsea">Pachete - căutarea cu GUI</a></li>
					</ul>
				</li>
		<li><a href="sys-admin-kern-upg-ro.htm#kern-upgrade">Actualizarea kernel-ului &#8658;</a>
					<ul class="sub2-menu" id="sm12b">
					    <li><a href="sys-admin-kern-upg-ro.htm#kern-remove">Ștergerea Kernel-urilor</a></li>
					    <li><a href="sys-admin-kern-upg-ro.htm#kern-upgrade">Actualizarea kernel-ului</a></li>
					    <li><a href="sys-admin-kern-upg-ro.htm#dmakms">Instalarea dinamică a modulelor kernel cu <i>dmakms</i></a></li>
					</ul>
				</li>
		<li><a href="sys-admin-apt-ro.htm#apt-upgrade">Actualizarea unui Sistem Instalat - <i>dist-upgrade</i> - Introducere &#8658;</a>
					<ul class="sub2-menu" id="sm12c">
					    <li><a href="sys-admin-upgrade-ro.htm#live-cd-upgrade">Actualizarea cu Live-ISO</a></li>
					    <li><a href="sys-admin-apt-locarmirr-ro.htm#approx">Actualizarea <i>dist-upgrade</i> mai multor PC-uri din LAN</a></li>
					    <li><a href="sys-admin-apt-ro.htm#apt-upgrade">Actualizarea unui Sistem Instalat - <i>dist-upgrade</i> - Introducere</a></li>
					    <li><a href="sys-admin-apt-ro.htm#du-st">Actualizarea unui Sistem Instalat - <i>dist-upgrade</i> - Pașii</a></li>
					</ul>
				  </li>
			    </ul>
		</li>
<li  onmouseover="showHide( 13 );" onmouseout="startTime();" ><a href="sys-admin-gen-ro.htm">Administrarea Sistemului</a>
	<ul class="sub-menu" id="sm13">
		<li><a href="bios-freedos-ro.htm#bois-prep">Actualizarea BIOS-ului cu FreeDOS</a></li>
		<li><a href="vir-rkits-ro.htm#virus-rkits">Scanere de Viruși și Rootkit</a></li>
		<li><a href="hd-install-ro.htm#adduser">Adăugarea de Utilizatori și Parole &#8658;</a>
					<ul class="sub2-menu" id="sm13a">
					    <li><a href="hd-install-ro.htm#adduser">Adăugarea unui nou utilizator</a></li>
					    <li><a href="sys-admin-gen-ro.htm#pw-lost">Parolele de <i>root</i> pierdute, parole noi</a></li>
					</ul>
					</li>
		<li><a href="sys-admin-gen-ro.htm#start-services">Servicii și init runlevel-e &#8658;</a>
					<ul class="sub2-menu" id="sm13b">
					    <li><a href="sys-admin-gen-ro.htm#start-services">Servicii -activare/dezactivare</a></li>
					    <li><a href="sys-admin-gen-ro.htm#pkill">Omorârea unui serviciu sau proces</a></li>
					    <li><a href="sys-admin-gen-ro.htm#init">runlevel-e aptosid - init</a></li>
					</ul>
					</li>
		<li><a href="sys-admin-rsync-ro.htm#rsync">Copii de siguranță ale Sistemului &#8658;</a>
					  <ul class="sub2-menu" id="sm13c">
					    <li><a href="sys-admin-rdiff-ro.htm#rdiff">Back-Up cu <i>rdiff</i></a></li>
					    <li><a href="sys-admin-rsync-ro.htm#rsync">Back-Up cu <i>rsync</i></a></li>
					    <li><a href="home-ro.htm#home-bu">Mutarea /home</a></li>
					</ul>
					</li>
		<li><a href="sys-admin-gen-ro.htm#fonts">CUPS, Font-uri și Sunet &#8658;</a>
					  <ul class="sub2-menu" id="sm13d">
					     <li><a href="sys-admin-gen-ro.htm#fonts">Font-uri</a></li>
					     <li><a href="sys-admin-gen-ro.htm#cups">CUPS - Sistemul de Print-are</a></li>
					     <li><a href="sys-admin-gen-ro.htm#sound">Mixere de Sunet</a></li>
					</ul>
					</li>
		<li><a href="sys-admin-grub2-ro.htm#grub2">Grub2 &#8658;</a>
					  <ul class="sub2-menu" id="sm13f">
					    <li><a href="sys-admin-grub2-ro.htm#chroot">Grub2 - Recuperarea Grub cu <i>chroot</i></a></li>
					    <li><a href="sys-admin-grub2-ro.htm#mbr-over-grub2">Grub2 - bootsector-ul MBR Suprascris</a></li>
					    <li><a href="sys-admin-grub2-ro.htm#multi-os">Grub2 - Boot-area Duală și Multiplă</a></li>
					    <li><a href="sys-admin-grub2-ro.htm#grub1-grub2">Grub2 - Actualizarea de la Grub1</a></li>
					    <li><a href="sys-admin-grub2-ro.htm#grub2">Grub2 - Introducere</a></li>
					</ul>
					</li>
			</ul>
		</li>
	</ul>
<!-- menu ends here --> </div>
<div id="main-page">
	<div class="divider" id="rdiff">
			<h2 id="top-header">Salvările de Sistem cu <i>rdiff</i></h2>
				<p><i>rdiff-backup</i> este o unealtă folosită pentru a salva fişiere. (şi poate rula pe o varietate de porturi  *nix).</p>

				<p class="highlight-2">Rulaţi comenzile în consolă ca <i>root</i> dacă nu este specificat altfel</p>

				<p>*foarte bun pentru recuperarea de după <i>dist-upgrade</i> sau după actualizări de kernel nereuşite, etc (şi deasemeni pentru a restaura fişiere individuale).<br />
				*salvează doar ceea ce este schimbat ca şi <i>rsync</i>  (deci fiecare <i>backup</i> nu durează mult).<br />
				*ţine un jurnal al schimbărilor (ceea ce înseamnă că puteţi restaura fişiere pe care le-aţi şters acu` trei săptămâni!).<br />
				*face salvări în condiţii de securitate din reţea (folosind <i>ssh</i>).<br />
				*face salvarea unei partiţii întregi în timp ce este mount-ată (este uşor să programaţi o salvare automată...fără să faceţi de-mount-are).<br />
				*poate restaura totul în cazul în care discul devine inutilizabil şi trebuie să cumpăraţi altul.<br />
				*se autoconfigurează pentru a salva o reţea întreagă (în linux este perfect, în windows un pic mai dificil) şi este folosit în afaceri.<br />
				*este o aplicaţie controlată din linia de comandă, foarte potrivită pentru cei care preferă să facă <i>backup</i> automat (cum ar fi un script <i>bash</i> lansat prin intermediul <i>cron</i>).<br />
				*memorează şi se descurcă foarte bine cu apartenenţa fişierelor şi permisiunile acestora precum şi cu link-urile simbolice (şi toate lucrurile de acest gen) deci când veţi face restaurarea toate vor fi exact cum au fost înainte.</p>

			<h6>Ce veţi avea nevoie</h6>
				<p><i>rdiff-backup</i> ţine o copie completă (necompresată) a fişierelor pe care le salvaţi, deasemeni ţine un jurnal a ceea ce este salvat (<i>incremental backups</i>), asta înseamnă că spaţiul pe care se salvează va fi mai mare decât ceea ce este salvat. Dacă salvaţi 100 giga de spaţiu este posibil să aveţi nevoie de 120 giga pentru a salva (şi de preferat pe un hard separat !).</p>

			<h6>Setările care trebuiesc făcute</h6>
				<p>Să spunem că PC-ul dumneavoastră are următoarele:<br />
				* un hard de 100 giga ce este folosit (sda), cu partiţia <i>sda1</i> ca partiţie <i>root</i>, partiţia <i>sda5</i> pentru a stoca muzică şi alte fişiere şi partiţia <i>sda6</i> ca <i>swap</i>.<br />
				* un disc nefolosit de 200 giga (<i>sdb</i>) cu partiţia <i>sdb1</i> ... şi pe care o vom folosi pentru salvările noastre.<br />
				* adresa IP  192.168.0.1</p>

				<p>Primul lucru ce trebuie făcut este să instalăm <i>rdiff-backup</i>:</p>
<pre>
# apt-get install rdiff-backup
</pre>
				<p>Acum veţi putea să salvaţi orice director, dar aici presupunem că salvăm o întreagă partiţie<br />...vom salva partiţiile <i>sda1</i> şi <i>sda5</i> (nu şi <i>sda6</i>) iar pentru aceasta vom crea nişte directoare în care vom stoca datele:</p>
<pre>
# mkdir -p /media/sdb1/rdiff-backups/192.168.0.1/root
# mkdir -p /media/sdb1/rdiff-backups/192.168.0.1/sda5
</pre>
				<p>Trebuie ca adresa IP să fie specificată exact pentru că se poate salva şi o partiţie din alt calculator, iar la restaurare să ştie pe care calculator să o facă (vom vedea mai departe).</p>

			<h6>Salvarea</h6>

				<p><i>rdiff-backup</i> foloseşte sintaxa <span class="highlight-3">rdiff-backup source-dir dest-dir</span>.<br /><i>Notă:</i> întotdeauna specificaţi numele directorului, nu numele fişierelor.</p>

				<p>Pentru a face salvarea partiţiei <i>sda5</i>, rulaţi:</p>
<pre>
# rdiff-backup /media/sda5 /media/sdb1/rdiff-backups/192.168.0.1/sda5
</pre>
				<p>Iar pentru a salva partiţia <i>root</i>, rulaţi:</p>
<pre>
# rdiff-backup --exclude '/tmp/*' --exclude '/proc/*' --exclude '/sys/*' --exclude '/media/*/*' / /media/sdb1/rdiff-backups/192.168.0.1/root
</pre>
				<p>Orice eroare de genul <b>"AF_UNIX path too long"</b> poate fi ignorată.<br />Aceasta va dura ceva timp de vreme ce este prima oară când partiţia e salvată şi deci <i>rdiff-backup</i> va trebui să o scrie în întregime (nu numai diferenţele).<br />Observaţi că nu salvăm  <i>/tmp</i> deoarece acesta mereu se schimbă, şi nici  <i>/proc</i> sau  <i>/sys</i> din cauză că acestea nu conţin fişiere reale, şi deasemeni nu vom salva punctele de mount-are. Dacă am face salvarea punctului de mount-are am salva de fapt <i>sdb1</i> şi am intra într-o buclă infinită!. O altă cale este să salvaţi punctele de mount-are separat.</p>

				<p>Acum, motivul pentru care se foloseşte  <i>'/proc/*'</i> în loc de  <i>'/proc'</i> este că astfel ar fi salvat doar numele de director  <i>/proc</i>, şi ar fi ignorat tot ceea ce este în interiorul acestuia. La fel este valabil şi pentru <i>/tmp</i>, <i>/sys</i>, şi chiar pentru punctele de mount-are.</p>

				 <p>În acest fel, dacă vă veţi distruge partiţia <i>root</i> şi veţi apela la o restaurare completă numele directoarelor  <i>/tmp</i>,  <i>/proc</i>,  <i>/sys</i> şi numele punctelor de mount-are vor fi create (aşa cum ar trebui). Dacă <i>/tmp</i> nu există când <i>X</i> porneşte vi se va semnaliza. (Găsiţi mai multe în manual pentru opțiunile <i>--exclude</i> şi  <i>--include</i>).</p>

			<h6>Restaurarea directoarelor din salvările prealabile</h6>

				<p><i>rdiff-backup</i> foloseşte sintaxa:</p>
<pre>
rdiff-backup -r &lt;from-when&gt; &lt;source-dir&gt; &lt;dest-dir&gt;
</pre>
				<p>Dacă din greşeală aţi şters directorul  <i>/media/sda5/photos</i>, îl puteţi restaura executând:</p>
<pre>
# rdiff-backup -r now /media/sdb1/rdiff-backups/192.168.0.1/sda5/photos /media/sda5/photos
</pre>
				<p>Opţiunea  <i>"-r now"</i> înseamnă restaurarea din ultima salvare făcută.<br /> Dacă aţi făcut salvări periodice  (via <i>crontab</i>, să spunem) şi nu v-aţi dat seama că acel director cu fotografii lipseste până acum câteva zile veţi avea nevoie de o restaurare dintr-o salvare făcută acum câteva zile (şi nu  <i>"now"</i>, pentru că în ultima salvare făcută probabil acel director nu există). Sau poate că vreţi pur şi simplu să ajungeţi înapoi la o anumită versiune a unui program, ceva.</p>

				<p>Dacă doriţi să restauraţi la starea de acum trei zile folosiţi opţiunea  <i>"-r 3D"</i> ... dar, aşa cum este menţionat şi în manual, reţineţi:</p>

				<p class="highlight-1"><i>"3D"</i> se referă la exact 72 ore înainte de momentul prezent iar dacă nu există nici o salvare făcută la acel moment, <i>rdiff-backup</i> va restaura starea salvată anterior acestui moment. Ca în cazul de mai sus, de exemplu, dacă  <i>"3D"</i> este folosit şi există salvări făcute cu 2 şi cu 4 zile în urmă, acel director va fi restaurat aşa cum era el cu 4 zile în urmă (deci vă trebui să vă gândiţi bine înainte de a face restaurarea).</p>

				<p>Folosind următoarele comenzi veţi primi o listă cu data şi ora la care au fost făcute toate salvările pentru <i>sda5</i>:</p>
<pre>
# rdiff-backup -l /media/sdb1/rdiff-backups/192.168.0.1/sda5
</pre>
			<h5>Restaurarea partiţiilor</h5>

				<p>Puteţi deasemeni restaura partiţii întregi (puncte de mount-are), până la urmă un punct de mount-are este tot un director.</p>

				<p class="highlight-2">ATENŢIE!!!: Nu încercaţi să restauraţi partiţia <i>root</i> atât timp cât lucraţi de pe ea! Cu o singură comandă puteţi pierde toate fişierele de pe toate partiţiile, inclusiv salvările de pe un disc separat!! <i>rdiff-backup</i> face exact ce-i spuneţi să facă ... dacă salvarea pentru partiţia <i>root</i> are puncte de mount-are goale, programul  va şterge orice există în punctul de mount-are pentru a face să fie conform salvării existente.</p>

				<p>Pentru a restaura <i>sda5</i> din ultima salvare vom executa:</p>
<pre>
# rdiff-backup -r now /media/sdb1/rdiff-backups/192.168.0.1/sda5 /media/sda5
</pre>
			<h5>Restaurarea partiţiei <i>root</i></h5>

				<p>Pentru a restaura partiţia <i>root</i> nu este la fel de simplu. Nu restauraţi niciodată partiţia <i>root</i> atât timp cât este mount-ată (citiţi avertismentul de mai sus). Este foarte util să poţi restaura partiţia <i>root</i>, mai ales după o încercare nereuşită de actualizare sau de instalare a unui nou kernel (etc); veţi fi liniștiți știind că puteţi întoarce lucrurile aşa cum au fost şi toate acestea în doar 20 minute.</p>

				<p>O cale de a restaura partiţia <i>root</i> este să boot-aţi într-o partiţie linux neocupată, dacă aveţi una în computer. De acolo veţi putea restaura partiţia dorită, dacă nu este mount-ată ca <i>root</i>. După ce restauraţi partiţia puteţi porni de pe ea şi veţi vedea că este exact ca înainte ...exact! Aceasta nu este nicidecum cea mai uşoară metodă.</p>

				<p>O altă cale de a restaura partiţia <i>root</i> este să porniţi cu aptosid live-cd şi să faceţi restaurarea de acolo. <i>rdiff-backup</i> este inclus în aptosid.<br />În cazul în care versiunea aptosid live-cd pe care o aveţi nu include şi <i>rdiff</i>, puteţi folosi în linia de comandă a lui <i>grub</i> (Bootoptions, (Cheatcodes)) codul "unionfs" iar asta va însemna că veţi putea instala programe noi cât timp rulaţi de pe live-cd. Doar porniţi şi lansaţi următoarele comenzi:</p>
<pre>
$ sudo su
# wget -O /etc/apt/sources.list http://aptosid.com/files/misc/sources.list
# apt-get update
# apt-get install rdiff-backup
</pre>
				<h6>Acum vom face restaurarea:</h6>
<pre>
# mount /dev/sda1 /media/sda1
# mount /dev/sdb1 /media/sdb1
# rdiff-backup -r now /media/sdb1/rdiff-backups/192.168.0.1/root /media/sda1
</pre>

				<p><i>Notă :</i> În cazul în care aveţi un Live-CD care suportă <i>klik</i> puteţi instala <i>rdiff-backup</i> folosind <i>Klik</i> şi rulând:</p>
<pre>
$ sudo ~/.zAppRun ~/Desktop/rdiff-backup_0.13.4-5.cmg rdiff-backup -r now /media/sdb1/rdiff-backups/192.168.0.1/root /media/sda1
</pre>

				<p>Este recomandat ca toţi cei care fac salvarea partiţiei <i>root</i> (cu intenţia de a o restaura la nevoie) să facă un test al procesului de restaurare. Nimic nu este mai neplăcut decât să te gândeşti că totul va fi în regulă după restaurare şi aceasta să nu reuşească din cauza a ceva neaşteptat atunci când ai mai mare nevoie.</p>

							<p>Dacă hard disk-ul a fost schimbat sau reformatat, re-verificați UUID-urile, (sau Etichetele 'Labels'), în <span class="highlight-3">/boot/grub/menu.lst (grub-legacy) sau fișierele din /etc/grub.d (grub2)</span> și <span class="highlight-3">/etc/fstab</span>, apoi modificațile corespunzător. O metodă ușoară de a obține informațiile pentru a modifica fișierele <i>menu.lst</i> și <i>fstab</i>, la nevoie, este să executați ca <i>'root'</i>:</p>

<pre>
blkid
</pre>

			<h5>Salvarea partiţiilor din alte computere </h5>

				<p>Puteţi să salvaţi partiţiile altor computere în computerul local atâta vreme cât vă puteţi conecta <i>ssh</i> la acele computere (şi aveţi destul spaţiu pe hard disc). Serverul <i>ssh (sshd)</i> trebuie să ruleze pe computerul comandat. Acesta nu trebuie să fie neapărat în rețeaua locală, poate fi oriunde în lume.</p>

				<p>Să presupunem că PC-ul comandat are urmatoarele:<br />
				1) un hard de 100 giga (<i>sda</i>) în uz, cu următoarele,<br />
				2) <i>sda1</i> ca partiţie <i>root</i>,<br />
				3) <i>sda5</i> unde sunt stocate nişte fişiere temporare şi pe care nu dorim să le salvăm,<br />
				4) şi <i>sda6</i> ca partiţie <i>swap</i> şi adresa IP 192.168.0.2</p>

				<p><i>Notă :</i> două discuri de 100 giga de obicei nu pot fi salvate pe un disc de 200 giga folosind <i>rdiff-backup</i> (pentru că nu va mai fi loc şi pentru fişierele incrementale) dar, pentru că nu salvaţi şi partiţia <i>sda5</i> de pe computerul comandat (şi pentru că de obicei discurile nu sunt 100% pline, dar nu vă bazaţi pe asta) va trebui întotdeauna să calculaţi dacă aveţi destul spaţiu pentru <i>backup</i>. De fiecare dată când <i>rdiff-backup</i> face o alta salvare, el va crea încă un fişier incremental şi acesta va ocupa din ce în ce mai mult spaţiu.</p>

				<p>Puteţi specifica programului <i>rdiff-backup</i> să păstreze salvările doar din ultima lună (această comandă va fi detaliată mai târziu) şi aceasta va ocupa mai puţin spaţiu decât salvările unui an întreg. Bineînţeles, dacă veţi dori să păstraţi salvările de pe parcursul întregului an veţi avea nevoie de spațiu pe hard corespunzător mărimii fişierelor incrementale făcute de-a lungul întregului an.</p>

				<p>Va trebui mai întâi să instalaţi <i>rdiff-backup</i> pe computerul comandat (oricare computer căruia doriţi să-i faceţi salvări, inclusiv <i>server backup</i>, trebuie să aibă <i>rdiff-backup</i> instalat).</p>

				<p>Pentru a salva datele din computerul comandat în calculatorul local rulaţi în computerul local (cu adresa, să zicem 192.168.0.1):<br /> <span class="highlight-4">Fiţi atenţi la folosirea de două ori a semnului două puncte  :: </span></p>
<pre>
# mkdir /media/sdb1/rdiff-backups/192.168.0.2/root
# rdiff-backup --exclude '/tmp/*' --exclude '/proc/*' --exclude '/sys/*' --exclude '/media/*/*' 192.168.0.2::/ /media/sdb1/rdiff-backups/192.168.0.2/root
</pre>
				<p>Acum, dacă doriţi să restauraţi un director în computerul comandat, puteţi iniţia restaurarea atât din computerul local cât şi din cel comandat.</p>

				<p>În exemplul următor veţi restaura fişierul <i>/usr/local/games</i> în computerul comandat, iniţializând restaurarea tot din computerul comandat:</p>
<pre>
# rdiff-backup -r now 192.168.0.1::/media/sdb1/rdiff-backups/192.168.0.1/root/usr/local/games /usr/local/games
</pre>
				<p>În exemplul ce urmează veţi restaura directorul  <i>/usr/local/games</i> în computerul comandat, iniţializând restaurarea din computerul local:</p>
<pre>
# rdiff-backup -r now /media/sdb1/rdiff-backups/192.168.0.1/root/usr/local/games 192.168.0.2::/usr/local/games
</pre>
				<p>Folosiţi cam aceaşi sintaxă când restauraţi partiţia <i>root</i> de pe un live-cd (când computerul comandat a fost pornit de pe live-cd ...vedeţi mai sus).</p>

			<h5>Salvările automate :</h5>

				<p>Dacă vreţi să salvaţi partiţiile  altor computere în computerul local primul lucru ce trebuie făcut este să activaţi log-area <i>ssh</i> fără parolă folosind <i>ssh keys</i>.<br /> <span class="highlight-2">Reţineţi că acum vorbim despre log-area <i>ssh</i> ca <i>root</i> fără parolă. Acest lucru poate fi restricţionat în aşa fel încât numai comenzile <i>rdiff-backup</i>  să fie executate dar prezentarea acestei secţiuni este în afara subiectului nostru deocamdată.<br /> Adresaţi-vă la <a href="ssh-ro.htm#ssh-s">Configurarea SSH </a> </span>.<br /> Vom presupune că suntem în deplină siguranţă şi vom seta cel mai simplu mod de conectare <i>ssh</i> fără parolă.</p>

				<p>De pe PC-ul local executaţi următoarele:</p>
<pre>
# [ -f /root/.ssh/id_rsa ] || ssh-keygen -t rsa -f /root/.ssh/id_rsa
</pre>
				<p>Şi apăsaţi <i>Enter</i> de două ori pentru nicio parolă. Apoi faceţi:</p>
<pre>
# cat /root/.ssh/id_rsa.pub | ssh 192.168.0.2 'mkdir -p /root/.ssh;\<!--dunno if this is right-->
> cat - >>/root/.ssh/authorized_keys2'
</pre>
				<p>Vi se va cere parola de <i>root</i>.</p>

				<p>Acum vă puteţi loga prin <i>ssh</i> în computerul comandat fără să mai trebuiască să tastaţi parola şi se poate executa <i>rdiff-backup</i> în mod automat.</p>

				<p>Mai departe creaţi un script <i>bash</i> care să conţină toate comenzile <i>rdiff-backup</i>. Acest script va arăta cam aşa:</p>


<pre>
#!/bin/bash
RDIFF=/usr/bin/rdiff-backup
echo
echo "=======Backing up 192.168.0.1 root======="
${RDIFF} --ssh-no-compression --exclude '/tmp/*' --exclude '/proc/*' --exclude '/sys/*' --exclude '/media/*/*' /media/sdb1/rdiff-backups/192.168.0.1/root
echo "(and purge increments older than 1 month)"
${RDIFF} --remove-older-than 1M --force /media/sdb1/rdiff-backups/192.168.0.1/root
echo
echo "=======Backing up 192.168.0.1 mount sda5======="
${RDIFF} --ssh-no-compression --exclude /media/sda5/myjunk /media/sda5 /media/sdb1/rdiff-backups/192.168.0.1/sda5
echo "(and purge increments older than 1 months)"
${RDIFF} --remove-older-than 1M --force /media/sdb1/rdiff-backups/192.168.0.1/sda5
echo
echo "=======Backing up 192.168.0.2 root======="
${RDIFF} --ssh-no-compression --exclude '/tmp/*' --exclude '/proc/*' --exclude '/sys/*' --exclude '/media/*/*' --exclude '/mnt/*/*' 192.168.0.2::/media/sdb1/rdiff-backups/192.168.0.2/root
echo "(and purge increments older than 1 months)"
${RDIFF} --remove-older-than 1M --force /media/sdb1/rdiff-backups/192.168.0.2/root
</pre>


				<p>Numiţi acest script <i>"myrdiff-backups.bash"</i> şi salvaţi-l în <i>/usr/local/bin</i> din computerul local (serverul de backup) şi schimbaţi-l într-un executabil. Rulaţi scriptul şi asiguraţi-vă că funcţionează.</p>

				<p>În final puteţi seta <i>cron</i> să lanseze scriptul în fiecare seară la 8pm. Următoarea linie în <i>root's crontab</i> va face totul, deschideţi</p>
<pre>
# crontab -e
şi introduceţi următoarea linie
0 20 * * * /usr/local/bin/myrdiff-backups.bash
</pre>

			<div id="rev">Content last revised 14/08/2010 0100 UTC</div>
</div>
</div>
</body>
</html>
