<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
   "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="ro">
<head>
	<title>sidux Manuals - RSYNC</title>
	<meta http-equiv="content-type" content="text/html; charset=utf-8" />
	<style type="text/css" media="all">@import url("../lib/css-js/content.css");</style>
        <style type="text/css" media="all">@import url("../lib/css-js/menu.css");</style>
        <style type="text/css" media="print">@import url("../lib/css-js/print.css");</style>
        <link rel ="shortcut icon" href="../lib/favicon/manual.ico" />
        <script type="text/javascript" src="../lib/css-js/menu2.js"></script>
        <!--[if lt IE 8]>
        <link rel="stylesheet" type="text/css" href="../lib/css-js/ie_5-7_override.css">
        <![endif]-->
        <!--[if lt IE 7]>
        <link rel="stylesheet" type="text/css" href="../lib/css-js/ie_5-6_override.css">
        <![endif]-->
</head>
<body id="welcome">
<div id="menu"> <!-- menu starts here ro lang maintainer qq, Adriana-->
<!--Welcome to the  sidux-manual Operating System Manual version-01.76.2008.09.01 -->
<!-- menu last updated by bluewater 01/09/2008 1430 hrs UTC -->
<a href="http://sidux.com/"><img src="../lib/logos/sidux-logo.png" title="La pagina sidux.com forums şi wiki" alt="sidux.com logo" id="menu-header" /></a>
	<ul id="top-list">
		<li><a href="manual-search-ro.htm#search-on"> <img src="../lib/logos/kappfinder.png" title="Search Manual" alt="Search" /> Cautã Online Offline</a> </li>
		<li><a href="http://manual.sidux.com/meta-manual">Meta-Manualul sidux</a></li>
	</ul>
	<div id="flags-2">
			<a href="../flag-index.html"><img src="../lib/logos/sidux-language-64.png" title="Alege o altă limbă străină - Choose another language" alt="lang-switch" /></a>
	</div>
	<ul>
		<li  onmouseover="showHide( 1 );" onmouseout="startTime();" ><a href="welcome-ro.htm">Manualul SO sidux </a>
			<ul class="sub-menu" id="sm1">
				<li><a href="welcome-ro.htm#welcome-gen">Manualul SO sidux </a></li>
				<li><a href="welcome-ro.htm#how-to">Folosirea acestui manual</a></li>
				<li><a href="welcome-ro.htm#table-contents">Index</a></li>
				<li><a href="help-ro.htm#help-gen">De unde primiţi ajutor</a></li>
				<li><a href="help-ro.htm#paste">IRC !paste</a></li>
				<li><a href="credits-ro.htm#cred-team">Credite</a></li>
				<li><a href="wel-quickstart-ro.htm#welcome-quick">Ghidul de pornire rapida a lui sidux</a></li>
			</ul>
		</li>
		<li  onmouseover="showHide( 2 );" onmouseout="startTime();" ><a href="cd-content-ro.htm">Conţinutul CD-ului</a>
			<ul class="sub-menu" id="sm2">
				<li><a href="cd-content-ro.htm#cd-content">Conţinutul CD-ului</a></li>
			</ul>
		</li>
		<li  onmouseover="showHide( 3 );" onmouseout="startTime();" ><a href="cd-dl-burning-ro.htm">Descărcarea şi scrierea CD-ului</a>
			<ul class="sub-menu" id="sm3">
				<li><a href="cd-dl-burning-ro.htm#download-sidux">sidux Locaţii de Download, Descărcarea şi scrierea CD-ului</a></li>
				<li><a href="cd-dl-burning-ro.htm#md5">Verificarea cu suma de control md5 </a></li>
				<li><a href="cd-dl-burning-ro.htm#burn-nero">Scrierea în Windows</a></li>
				<li><a href="cd-dl-burning-ro.htm#burn-linux">Scrierea în Linux</a></li>
				<li><a href="cd-dl-burning-ro.htm#xdelta">Adăugirile xdelta (Patching)</a></li>
				<li><a href="cd-no-gui-burn-ro.htm">Scrierea CD-ului fără GUI (interfaţă grafică)</a></li>
			</ul>
		</li>
		<li  onmouseover="showHide( 4 );" onmouseout="startTime();" ><a href="live-mode-ro.htm">Modul "Live"</a>
			<ul class="sub-menu" id="sm4">
				<li><a href="live-mode-ro.htm#rootpw">Parola de root pe sidux-Live CD</a></li>
				<li><a href="live-mode-ro.htm#live-cd-installsoft">Instalarea de software în timpul lucrului de pe Live-CD</a></li>
				<li><a href="live-mode-ro.htm#ntfs-3g">Scrierea pe partiţii  NTFS cu ntfs-3g</a></li>
			</ul>
		</li>
		<li  onmouseover="showHide( 5 );" onmouseout="startTime();" ><a href="term-konsole-ro.htm">Terminalul /Konsola</a>
			<ul class="sub-menu" id="sm5">
				<li><a href="term-konsole-ro.htm#sux"> sux</a></li>
				<li><a href="term-konsole-ro.htm#term-kon"> Terminalul/Konsola</a></li>
				<li><a href="term-konsole-ro.htm#cli-help">Ajutor în Linia de Comandă</a></li>
				<li><a href="term-konsole-ro.htm#term-cmds">Lista Comenzilor în Terminalul Linux</a></li>
				<li><a href="term-konsole-ro.htm#shell-scripts">Instalarea Scripts.sh</a></li>
			</ul>
		</li>
		<li  onmouseover="showHide( 6 );" onmouseout="startTime();" ><a href="cheatcodes-ro.htm">CheatCodes</a>
			<ul class="sub-menu" id="sm6">
				<li><a href="cheatcodes-ro.htm#cheatcodes">cheatcode-uri specifice lui sidux (numai in Live-cd)</a></li>
				<li><a href="cheatcodes-ro.htm#cheatcodes-linux">Cheatcodes generice in Linux</a></li>
				<li><a href="cheatcodes-vga-ro.htm#vga"> Coduri VGA </a></li>
			</ul>
		</li>
		<li  onmouseover="showHide( 7 );" onmouseout="startTime();" ><a href="part-gparted-ro.htm">Partiţionarea Hard Discului</a>
			<ul class="sub-menu" id="sm7">
				<li><a href="part-gparted-ro.htm#partition">Partiţionarea Hard Discului folosind GParted</a></li>
				<li><a href="part-gparted-ro.htm#ntfs">Redimensionarea partiţiilor NTFS folosind GParted</a></li>
				<li><a href="part-uuid-ro.htm#uuid">UUID, Etichetarea Partiţiilor şi fstab</a></li>
				<li><a href="part-cfdisk-ro.htm#disknames">Numirea Discurilor pe scurt</a></li>
				<li><a href="part-cfdisk-ro.htm#partition">Partiţionarea Hard discului folosind cfdisk</a></li>
				<li><a href="part-cfdisk-ro.htm#formating">Formatarea după partiţionarea cu cfdisk</a></li>
				<li><a href="part-size-examp-ro.htm#part-example">Exemple de mărimi de Partiţii </a></li>
			</ul>
		</li>
		<li  onmouseover="showHide( 8 );" onmouseout="startTime();" ><a href="hd-install-ro.htm">Opţiuni de Instalare </a>
			<ul class="sub-menu" id="sm8">
				<li><a href="hd-install-ro.htm#Inst-prep">Pregătirea Instalării</a></li>
				<li><a href="hd-install-ro.htm#Installation">Instalarea pe  Hard Disc</a></li>
				<li><a href="hd-install-ro.htm#first-hd-boot">Prima Pornire</a></li>
				<li><a href="hd-install-opts-ro.htm#fromiso">Pornirea 'fromiso'</a></li>
				<li><a href="hd-install-opts-ro.htm#fromiso-persist">fromiso şi persist</a></li>
				<li><a href="hd-install-opts-ro.htm#usb-hd">Instalarea pe un USB-Hard Disc</a></li>
				<li><a href="hd-install-opts-ro.htm#vtbox">Instalarea prin VirtualBox</a></li>
				<li><a href="hd-install-opts-ro.htm#qemu">Instalarea prin QEMU</a></li>
			</ul>
		</li>
		<li  onmouseover="showHide( 9 );" onmouseout="startTime();" ><a href="hw-dev-hw-dri-ro.htm">Plăci Grafice, Dispozitive Hardware şi Drivere</a>
			<ul class="sub-menu" id="sm9">
				<li><a href="hw-dev-hw-dri-ro.htm#hd-ntfs3g">Scrierea pe partiţii  NTFS cu ntfs-3g</a></li>
				<li><a href="hw-dev-mon-ro.htm#mon-res">Schimbarea rezoluţiei şi Monitoare</a></li>
				<li><a href="hw-dev-mon-ro.htm#xrandr">Monitori Duali si xrandr</a></li>
				<li><a href="hw-dev-mon-ro.htm#mon-binary">Monitori duali (folosind binare)</a></li>
				<li><a href="hw-dev-hw-dri-ro.htm#non-free-3d">Drivere non-free , binare pentru Nvidia / ATI</a></li>
				<li><a href="hw-dev-hw-dri-ro.htm#native-nv-ati">Drivere Free xorg pentru  nVidia , ATI , Radeon , Intel</a></li>
				<li><a href="hw-dev-hw-dri-ro.htm#non-free">Hardware ce necesită drivere non-free </a></li>
			</ul>
		</li>
		<li  onmouseover="showHide( 10 );" onmouseout="startTime();" ><a href="wm-kde-ro.htm"> Managere în mod grafic - KDE</a>
			<ul class="sub-menu" id="sm10">
				<li><a href="wm-kde-ro.htm#desk-freeze">KDE Desktop se blochează</a></li>
				<li><a href="wm-kde-ro.htm#kde-login">Dacă nu poţi loga în KDE</a></li>
				<li><a href="wm-kde-ro.htm#ch-th">Schimbarea Temelor</a></li>
			</ul>
		</li>
		<li  onmouseover="showHide( 11 );" onmouseout="startTime();" ><a href="lamp-apache-ro.htm">Setul LAMP din sidux </a>
			<ul class="sub-menu" id="sm11">
				<li><a href="ntp-server-ro.htm#ntp-server">Setarea Timeserver-ului </a></li>
				<li><a href="lamp-apache-ro.htm#serv-apache"> Setul LAMP din sidux</a></li>
				<li><a href="lamp-apache-ro.htm#serv-ftp">Clienţi FTP </a></li>
				<li><a href="lamp-apache-ro.htm#serv-sec">Protocoale de Securitate</a></li>
				<li><a href="lamp-apache-ro.htm#serv-ssl">SSL</a></li>
				<li><a href="lamp-sql-ro.htm#serv-mysql">Setarea MySQL </a></li>
				<li><a href="lamp-ppp-ro.htm#serv-php">PHP în Apache</a></li>
			</ul>
		</li>
		<li  onmouseover="showHide( 12 );" onmouseout="startTime();" ><a href="internet-connecting-ro.htm">Internet şi Networking</a>
			<ul class="sub-menu" id="sm12">
				<li><a href="tor-privoxy-ro.htm#tor">Tor</a></li>
				<li><a href="tor-privoxy-ro.htm#privoxy">Privoxy</a></li>
				<li><a href="internet-connecting-ro.htm#firewalls">Firewalls</a></li>
				<li><a href="samba-ro.htm#configure">Configurarea SAMBA (Windows)</a></li>
				<li><a href="samba-ro.htm#setup">Setarea Serverului Samba </a></li>
				<li><a href="ssh-ro.htm#ssh-fs">Montarea de la distanţă SSH </a></li>
				<li><a href="ssh-ro.htm#ssh-x">Aplicaţii X Window via SSH</a></li>
				<li><a href="ssh-ro.htm#ssh-f">GUI SSH cu Konqueror</a></li>
				<li><a href="ssh-ro.htm#ssh-w">SSH X-Forwarding de la un Windows-PC</a></li>
				<li><a href="ssh-ro.htm#ssh">SSH şi Securitatea</a></li>
				<li><a href="internet-connecting-ro.htm#dial-mod">Modemuri 56k </a></li>
				<li><a href="internet-connecting-ndis-ro.htm#ndiswrapper-basic">Activarea Ndiswrapper</a></li>
				<li><a href="internet-connecting-ndis-ro.htm#ndiswrapper-advanced">Activarea Ndiswrapper -  Avansat</a></li>
				<li><a href="internet-connecting-wpagui-ro.htm#wpa-roaming-gui">WiFi - roaming WPA-GUI</a></li>
				<li><a href="internet-connecting-wpa-ro.htm#wpa-basic">WiFi - Basic setup guide</a></li>
				<li><a href="internet-connecting-wpa-ro.htm#wpa">WiFi - wpasupplicant</a></li>
				<li><a href="internet-connecting-ro.htm#netcardconfig">Conectarea Online - Ceni</a></li>
			</ul>
		</li>
		<li  onmouseover="showHide( 13 );" onmouseout="startTime();" ><a href="sys-admin-apt-ro.htm">Instalarea/Ştergerea  sau Downgrading de pachet</a>
			<ul class="sub-menu" id="sm13">
				<li><a href="sys-admin-apt-ro.htm#apt-cook">Ghid APT şi lista surselor</a></li>
				<li><a href="sys-admin-meta-ro.htm#meta-pack">Instalarea Meta-Pachetelor </a></li>
				<li><a href="sys-admin-meta-ro.htm#meta-proxy">Instalarea Meta sau proxies</a></li>
				<li><a href="sys-admin-apt-ro.htm#apt-install">Instalarea unui  pachet nou</a></li>
				<li><a href="sys-admin-apt-ro.htm#apt-delete">Ştergerea unui pachet</a></li>
				<li><a href="sys-admin-apt-ro.htm#apt-downgrade">Downgrading Hold de pachet</a></li>
				<li><a href="sys-admin-apt-ro.htm#apt-cache">Căutarea unui pachet cu apt-cache</a></li>
				<li><a href="sys-admin-apt-ro.htm#apt-kio">Căutarea unui pachet cu kio-apt</a></li>
				<li><a href="sys-admin-apt-ro.htm#apt-upgrade">Upgrade de Sistem instalat -  dist-upgrade</a></li>
			</ul>
		</li>
		<li  onmouseover="showHide( 14 );" onmouseout="startTime();" ><a href="smxi-ro.htm">Administrarea Sistemului</a>
			<ul class="sub-menu" id="sm14">
				<li><a href="smxi-ro.htm#smxi">Sintaxa Setului de Comenzi din smxi </a></li>
				<li><a href="siduxcc-ro.htm#siduxcc">Centrul de control sidux</a></li>
				<li><a href="sys-admin-apt-ro.htm#apt-upgrade">Upgrade de Sistem instalat -  dist-upgrade</a></li>
				<li><a href="sys-admin-upgrade-ro.htm#live-cd-upgrade">Upgrade-ul folosind Live-CD</a></li>
				<li><a href="sys-admin-kern-upg-ro.htm#kern-upgrade">Upgrade-ul de kernel</a></li>
				<li><a href="sys-admin-rdiff-ro.htm#rdiff">Salvările cu rdiff</a></li>
				<li><a href="sys-admin-rsync-ro.htm#rsync">Salvările cu rsync</a></li>
				<li><a href="vir-rkits-ro.htm#virus-rkits">Scanerele Antivirus şi Rootkit </a></li>
				<li><a href="sys-admin-gen-ro.htm#start-services">Services enable/disable</a></li>
				<li><a href="sys-admin-gen-ro.htm#pw-lost">Parolele de root pierdute</a></li>
				<li><a href="sys-admin-gen-ro.htm#fonts">Fonturi </a></li>
				<li><a href="sys-admin-gen-ro.htm#cups">CUPS</a></li>
				<li><a href="sys-admin-gen-ro.htm#init">sidux runlevels - init</a></li>
				<li><a href="sys-admin-grub-bootman2-ro.htm#mbr-grub-boot">Suprascrierea sectorului de boot din MBR </a></li>
				<li><a href="sys-admin-grub-bootman2-ro.htm#dual-boot">Booting Dual şi Multiplu </a></li>
				<li><a href="sys-admin-grub-bootman2-ro.htm#boot-grub-floppy">Crearea unei dischete de Boot </a></li>
				<li><a href="sys-admin-grub-bootman2-ro.htm#remove-grub">Scoaterea programului grub din MBR</a></li>
				<li><a href="sys-admin-grub-bootman2-ro.htm#what-is-grub">Managerul de boot Grub </a></li>
			</ul>
		</li>
	</ul>
<!-- menu ends here --> </div>
<div id="main-page">
	<div class="divider" id="rsync">
			<h2 id="top-header">Salvările cu rsync</h2>
				<p>Informaţiile ce urmează vă vor ajuta să înţelegeţi ceea ce rsync poate să facă şi vă vor oferi mici exemple de cod ce pot fi folosite în scripturile dumneavoastră de backup .</p>

				<p>rsync este un program foarte uşor de folosit ce poate salva atât fişiere cât şi directori foarte rapid . Aceasta este posibilă prin utilizarea unei rutine foarte inteligente care verifică schimbările care au fost făcute asupra fişierelor şi doar acele fişiere vor fi selectate pentru copiere . rsync deasemeni foloseşte un utilitar de compresare pentru a grăbi procesul de copiere  <span class=" highlight-3">(atât timp cât este setat explicit prin opţiunea -z )</span>. Explicaţia este foarte simplă :</p>

				<p>Programul rsync detectează fişierele şi folderele ce trebuiesc copiate datorită schimbării unuia sau mai multor atribute ale acestora (de exemplu data/ora ultimei modificări , sau mărimea fişierului), în ambele cazuri ceva nu mai este la fel ca la ultima salvare . Procesul de selectare este foarte rapid .</p>

				<p>După ce rsync a terminat alcătuirea listei de fişiere ce o va utiliza , copierea acestor fişiere schimbate va fi executată mult mai repede datorita rutinei de compresie folosită în timpul copierii .  rsync face compresarea înainte de a trimite către destinaţie şi decompresează "on the fly " la final .</p>

				<p>rsync poate copia fişiere de la :<br />
				* sistem local  la sistem local ,<br />
 				*  sistem local la sistem remote ,<br />
				* sistem remote  la sistem local .</p>
				<p>el foloseste fie clientul <a href="ssh-ro.htm">ssh</a> implicit , sau ruleaza un daemon rsync atât în sistemul sursă cât şi în cel destinaţie . Paginile man pages pentru rsync afirmă că , dacă dumneavoastră vă puteţi conecta ssh la un sistem , atunci şi rsync poate .</p>

				<p class="highlight-3">Singura limitare a programului rsync este ca el NU poate copia de pe un sistem remote în alt sistem remote . Dacă doriţi să realizaţi acest lucru , va trebui să copiaţi fişierele din unul din sistemele remote într-un sistem local şi apoi din sistemul local în celălalt sistem remote . Aceasta este limitarea  rsync.</p>

				<p>Pentru a oferi un exemplu , să spunem că avem trei sisteme ;</p>
<pre>
neo – sistemul local
morpheus – un sistem remote
trinity – un alt sistem remote
</pre>
				<p> Doriţi să folosiţi  rsync pentru a copia , sau sincroniza , folderele  /home/[user]/Data din toate cele trei sisteme între ele. Fiecare sistem este  “deţinut” de un anumit utilizator , cu alte cuvinte , doar un anumit utilizator foloseşte în mod special acel sistem , şi de aceea acel sistem trebuie folosit ca  “sursă” pentru celelalte două sisteme . Va trebui deasemeni să rulăm comanda rsync doar în computerul  “local” , care este  neo :</p>
<pre>
the main user of neo is cuddles,
the main user of morpheus is tartie, and
the main user of trinity is taylar.
</pre>
				<p>Deci , ceea ce doriţi dumneavoastră să faceţi este salvarea sau sincronizarea următoarelor :</p>

<pre>
neo's /home/cuddles/Data area to morpheus and trinity,
morpheus's /home/tartie/Data area to neo and trinity,
trinity's /home/taylar/Data area to neo and morpheus.
</pre>

				<p>Problema din rsync , şi anume că nu poate să copie dintr-un sistem remote în alt sistem remote , în exemplul de mai sus, va apărea când vom dori să salvăm din trinity în morpheus , sau din morpheus în trinity (atât sursa cât şi destinaţia sunt sisteme remote) , deci </p>

				
<pre>
neo --> morpheus – fine, thats local to remote
neo --> trinity – fine, thats local to remote
morpheus --> neo – fine, thats remote to local
trinity --> neo – fine, thats remote to local
morpheus --> trinity – remote to remote – won't work
trinity --> morpheus – remote to remote – won't work
</pre>
				<p>Pentru a rezolva această problemă trebuie să modificaţi schema rsync un pic . Ce urmează poate să rezolve situaţia ;</p>
<pre>
morpheus --> trinity – becomes: morpheus --> neo &amp; neo --> trinity
trinity --> morpheus – becomes: trinity --> neo &amp; neo --> morpheus
</pre>
				<p>Este un pas suplimentar , faţă de procesul dintr-un singur pas , dar dacă ţinem cont că fişierele trebuie să ajungă şi în neo deasemeni , asta înseamnă că doar am schimbat sursa lor dar nu şi rezultatul final . Asta înseamnă că salvările vor fi în regula şi nimic nu va lipsi .</p>

				<p class="highlight-3">Va trebui să ţineţi cont de această limitare din rsync când programaţi un proces de backup .</p>

				<h5>Utilizarea hostname cu hostname  în rsync.</h5>

				<p>Aşa cum am descris mai sus , folosind neo, morpheus , sau trinity ca o corespondenţa la adresa IP , este un mod curat şi uşor de a face lucrurile mult mai uşor de citit . Ca să faceţi posibilă folosirea acestor nume (hostnames) este simplu .</p>

				<p>Va trebui să editaţi fişierul  /etc/hosts şi să adăugaţi aceste nume ( hostnames) şi adresele IP cărora le sunt asociate . Iată o mica porţiune din liniile de început ale fişierului  /etc/hosts , care arată asocierile :</p>
<pre>
192.168.1.15	 neo
192.168.1.16	 morpheus
192.168.1.17	 trinity
</pre>
				<p>Prima linie de deasupra asociază Adresei IP 192.168.1.15 numele “neo” , a doua adresa -192.168.1.16 numelui “morpheus”, şi în ultima linie , adresa IP  192.168.1.17 numelui “trinity”. După adăugarea celor de deasupra şi salvarea lor în fişierul /etc/hosts veţi putea folosi aceste "nume" în loc de adresa IP , sau puteţi folosi în continuare Adresa IP . Ce face ca acest lucru să fie cu adevărat strălucitor este momentul când se schimbă o adresa IP a unuia dintre sisteme . Ca să dăm un exemplu despre aceasta , să spunem că neo îşi schimbă adresa IP  din 192.168.1.15  în 192.168.1.25 </p>

				<p>Dacă toate scripturile dumneavoastră folosesc adresa IP atunci va trebui să le găsiţi şi să schimbaţi în fiecare cu noua adresă .Pe de altă parte dacă scripturile folosesc "nume”, tot ce trebuie să faceţi este să schimbaţi linia din /etc/hosts , care să reflecte schimbarea şi toate scripturile vor funcţiona . Acesta va fi foarte folositor dacă aveţi multe scripturi care se conectează remote la alte sisteme , sau vice-versa . Metoda cu “name” face scripturile mult mai uşor de citit şi urmărit pentru ca nu folosiţi adresa IP ci dimpotrivă un nume mai uşor de recunoscut ce este asociat unei adrese IP .</p>

				<h4>rsync , şi cele doua moduri în care poate fi utilizat .</h4>

				<p>Un mod este să  <b>“împingi”</b> fişierele către o ţinta , iar celalalt mod este de a le <b>“trage”</b> dintr-o sursă . Fiecare metoda are avantaje şi dezavantaje . Hai să privim fiecare metodă (pentru acest exemplu vom presupune că unul din sisteme este local iar celălalt este un sistem remote . În acest fel veţi înţelege mai bine terminologia ) .</p>

				<p><b>“împinge”</b> - sistemul local are folderele şi fişierele sursa în el iar locaţia ţintă este pe un sistem remote . Comanda rsync este rulată pe sistemul local  şi “împinge” fişierele în sistemul ţintă .</p>

				<p>Avantaje :<br />
				* Puteţi avea mai multe sisteme care să-şi salveze fişierele într-un sistem ţintă .<br />
				* Procesul de backup este împărţit între sisteme , nu doar un singur sistem este solicitat .<br />
				* Dacă un sistem este mai rapid ca altul ,va termina procesul de salvare mai repede şi-l veţi putea utiliza pentru a executa alte sarcini .</p>

				<p>Dezavantaje :<br />
				* Dacă folosiţi un script şi faceţi o programare cu cron , aceasta va necesita să faceţi update şi să schimbaţi în fiecare sistem schema de salvare automată precum şi să faceţi update la toate versiunile de script  existente .<br />
				* Procesul de backup nu poate verifica dacă sistemul ţintă are partiţia destinaţie montată şi va face salvarea pe nimic în sistemul ţintă .</p>

				<p><b>“trage”</b> - sistemul remote conţine folderele şi fişierele ce trebuiesc salvate iar destinatia este în computerul local . Comanda rsync este rulata în sistemul local şi “trage” fişierele din sistemul sursa .</p>

				<p>Avantaje :<br />
				* Unul din sisteme va fi serverul şi va controla procesele de backup din toate  sistemele .  Backup centralizat .<br />
				* Dacă utilizaţi un script el va fi conţinut doar într-un sistem şi va fi doar unul singur , făcând upgradeul şi modificările mult mai uşoare . Deasemeni va trebui să controlezi un singur fişier crontab pentru a programa execuţia scriptului .<br />
				* Scriptul va putea verifica , şi monta la nevoie , partiţia destinaţie .</p>

				<h6>Sintaxa pentru rsync , aşa cum se găseşte în man pages :</h6>
<pre>
       rsync [OPTION]... SRC [SRC]... DEST

       rsync [OPTION]... SRC [SRC]... [USER@]HOST:DEST

       rsync [OPTION]... SRC [SRC]... [USER@]HOST::DEST

       rsync [OPTION]... SRC [SRC]... rsync://[USER@]HOST[:PORT]/DEST

       rsync [OPTION]... SRC

       rsync [OPTION]... [USER@]HOST:SRC [DEST]

       rsync [OPTION]... [USER@]HOST::SRC [DEST]

       rsync [OPTION]... rsync://[USER@]HOST[:PORT]/SRC [DEST]
</pre>
				<h5>Exemple de lucru cu comanda rsync :</h5>
<pre>
rsync -agEvz --delete-after --exclude=”*~” morpheus:/home/tartie /media/hda7/SysBackups/morpheus/home
</pre>
				<p>Să privim mai de aproape anumite parţi ale comenzii :</p>
<pre>
the source path/file is: morpheus:/home/tartie
and the target is: /media/hda7/SysBackups/morpheus/home
</pre>
				<p>totul din  /home/tartie... va fi salvat în  /media/hda7/SysBackups/morpheus/home care va arăta aşa :</p>
<pre>
/media/hda7/SysBackups/morpheus/home/tartie...
</pre>
				<p>Ţineţi cont , singurul motiv pentru care  /tartie este conţinut în  /home este pentru ca acolo este indicată ŢINTA   şi NICICUM  SURSA .  “Sursa”  doar selectează de unde vin fişierele , nu şi unde se vor duce .  “ţinta” este cea care spune programului rsync unde să salveze fişierele pe care le ia din “sursa”. Să luam următorul exemplu :</p>
<pre>
rsync [...] /home/user/data/files /media/hda7/SysBackups/neo
</pre>
				<p>În comanda de mai sus , doar  folderul sursă , cu tot ce conţine el , se va găsi în folderul  /neo – şi nu /media/hda7/SysBackups/neo/home/user/data/files</p>

				<p>Nu uitaţi să ţineţi cont de aceasta când creaţi comenzile de backup cu rsync .</p>

				<h5>Explicarea opţiunilor :</h5>
<pre>
-a is used for archive mode. From the man page, it explains this option as “in simple terms, a way to backup recursively, and to preserve 'almost' everything”. It does mention that this format does not preserve hardlinks due to the complexity of processing. The -a option is stated as being equivalent to the following: -rlptgoD which means this:
  -r = recursive – process sub-folders and files found in our “source” location.
  -l = links – when symlinks are encountered, recreate them on the target location.
  -p = permissions – tells rsync to set target permissions the same as source.
  -t = times – tells rsync to set target times the same as source.
  -q = quiet – tells rsync to keep its output minimal, though we add a level of verbose with the command -v right after this. To make the process complete “quiet”, remove the “v” in the above command.
  -o = owner – tells rsync that if it's run as root, set the target files owner the same as source.
-D = this is equivalent to using these two commands: --devices --specials
 --devices = causes rsync to transfer character and block device files to
the remote system to recreate these devices. Unfortunately, if you do not
also include --super in the same command, this has no effect.
 --specials = causes rsync to transfer special files such as named sockets
and fifos.
-g is used to preserve “group” of the source file to the target.
-E is used to preserve “executable” of the source file to the target.
-v is used to increase the verbosity that is displayed. After we are sure we are backing up what we want, the “v” can be removed. I have left it in, because I run this process from a cron job, and prefer to “see” what it did. I leave it up to the individual to decide.
-z is used to compress the data it needs to “transfer” or copy, this makes the copy process take less time, because the data being transferred is smaller in size than its real size.
--delete-after = target files/folders that are no longer on the source are
deleted after transfer, not before. This “after” is used in case of problems
or a crash, and the “delete” is used to keep target files that no longer
exist on source system from hanging around and not cleaned up on our target
location.
--exclude = a pattern used to exclude files or folders with. In the
example, --exclude=“*~” would exclude ANY and ALL files or folders ending
with the “~” character from being backed up. Only one pattern can be supplied
with the --exclude option, so if more than one is needed, you need to supply
additional exclude lines on the command line.
</pre>
				<p>Aditional , alte cateva optiuni folositoare ale comenzii :</p>
<pre>
-c – which will add another level of checks into the source being compared to the target after the copy process, but it adds more time to the copy process, and rsync already does comparisons of the source and target files during its processing, so this option was not included for the simple fact it slows the complete process down, and is only a form of redundancy, which is not needed.
--super – which, as the man page describes it, the receiver, or target system,
will attempt super-user activities
--dry-run – which will show what would have been transferred. This is kind of
like using the -s option with apt-get install, or apt-get dist-upgrade.
</pre>
				<p>The remainder of our command is the source file/folder, and then our target folder location.</p>

				<h5>Exemple de comenzi :</h5>
<pre>
rsync -agEvz --delete-after --exclude=”*~” morpheus:/home/tartie /media/hda7/SysBackups/morpheus/home
</pre>
				<p>Această comandă va salva toate fişierele şi orice folder aflat în  /home/tartie în sistemul cu numele  “morpheus”, şi va plasa totul iîn folderul  /media/hda7/SysBackups/morpheus/home  – păstrând structura arbore din folderul  tartie intactă .</p>
<pre>
rsync -agEvz --delete-after --exclude=”*~” /home/tartie neo:/media/hda7/SysBackups/morpheus/home
</pre>
				<p>Aceasta comandă este reversul comenzii anterioare , ea va “împinge” folderul  /home/tartie şi întreg conţinutul său în sistemul numit în acelaşi folder  – reţineţi că un sistem este considerat remote când are semnul “ : ” (două puncte) în faţa căii .</p>
<pre>
rsync -agEvz --delete-after --exclude=”*~” /home/cuddles /media/hda7/SysBackups/neo/home
</pre>
				<p>Aceasta comandă face un backup din computerul local în computerul local , observaţi că semnul două puncte nu este asezat nici la sursă nici la destinaţie . Va fi salvat  folderul  /home/cuddles în acelaşi sistem la locaţia  /media/hda7/SysBackups/neo/home .</p>

				<p>Să vedem cum arată o comanda rsync cu mai multe opţiuni exclude :</p>
<pre>
rsync -agEvz --delete-after --exclude=”*~” --exclude=”*.c” --exclude=”*.o” "/*" /media/hda7/SysBackups/neo
</pre>
				<p>Comanda de mai sus va salva TOTUL din rădăcina unui sistem local ,foldere şi fişiere, şi le va plasa în locaţia  /media/hda7/SysBackups/neo – doar că acum vor fi excluse toate folderele sau fişierele ale caror nume se termină în  “~”, sau “.c” , sau în “.o”</p>

				<p class="highlight-2">Mai jos este o comandă care mai mult ca sigur va da un mesaj de eroare şi care trebuie evitată de câte ori e posibil . Este exemplul unei comenzi rsync de pe un sistem remote pe un alt sistem remote :</p>
<pre>
rsync -agEvz --delete-after --exclude=”*~” morpheus:/home/tartie trinity:/home
</pre>
				<p class="highlight-2">Cum am menţionat şi mai devreme în acest document aceasta este  limitarea programului rsync .</p>

				<p>Un ultim exemplu al unei comenzi , să vedem cum arată comanda rsync da la un sistem remote la unul local dacă vom inlocui “numele sistemului ” cu adresa IP .</p>

				<p>Prima comandă este metoda cu “nume”  , iar cea dea doua este exact aceaşi comandă dar folosind adresele IP </p>
<pre>
rsync -agEvz --delete-after --exclude=”*~” morpheus:/home/tartie /media/hda7/SysBackups/morpheus/home
</pre>
<pre>
rsync -agEvz --delete-after --exclude=”*~” 192.168.1.16:/home/tartie /media/hda7/SysBackups/morpheus/home
</pre>
				<p>Cum am spus şi mai devreme , nu este obligatoriu să folosiţi metoda cu "nume" , dar în primul exemplu puteţi citi conţinutul comenzii mult mai uşor decât în al doilea .</p>

				<p>Acum ar trebui să puteţi concepe o comandă simplă fie din exemplele date fie prin a ajusta comenzile arătate în aşa fel încât să obţineţi ceea ce aveţi nevoie .</p>
	</div>
			<div id="rev">Page last revised 15/05/2007 1030 UTC</div>


</div>
</body>
</html>
