<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
   "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
	<title>aptosid руководство - Опции инсталляций на VM</title>
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
	<style type="text/css" media="all">@import url("../lib/css-js/content.css");</style>
        <style type="text/css" media="all">@import url("../lib/css-js/menu.css");</style>
        <style type="text/css" media="print">@import url("../lib/css-js/print.css");</style>
        <link rel ="shortcut icon" href="../lib/favicon/manual.ico" />
        <script type="text/javascript" src="../lib/css-js/menu2.js"></script>
        <!--[if lt IE 8]>
        <link rel="stylesheet" type="text/css" href="../lib/css-js/ie_5-7_override.css">
        <![endif]-->
        <!--[if lt IE 7]>
        <link rel="stylesheet" type="text/css" href="../lib/css-js/ie_5-6_override.css">
        <![endif]-->
</head>
<body>
<!-- Last translation revision by bluewater 22/04/2009 1350hrs UTC -->
<div id="menu"> <!-- menu starts here ru language maintained by RoEn -->
<!--aptosid Operating System Manual menu-version-00.01.2010.09.17 -->
<!-- menu last updated by bluewater 2010.09.17 0730 hrs UTC -->
	<div id="menu-header">
	      <a href="http://aptosid.com/"><img src="../lib/logos/manual-aptosid-logo.png" title="Главная страница aptosid.com, форума и вики" alt="aptosid.com logo" /></a>
	</div>
	<ul id="top-list">
		<li><a href="manual-search-ru.htm#search-on"><img src="../lib/logos/manual-search-22x22.png" title="Пойск в руководстве" alt="Search" /> Варианты пойска</a> </li>
		<!--<li><a href="http://manual.aptosid.com/meta-manual">Обзор ПО рекомендованного сообществом aptosid</a></li>-->
	</ul>
	<div id="flags-2">
			<a href="../flag-index.html"><img src="../lib/logos/aptosid-lang-100x64.png" title="Выбор языка - Choose another language" alt="Переключение языка" /></a>
	</div>
	<ul>
<li onmouseover="showHide( 1 );" onmouseout="startTime();" ><a href="welcome-ru.htm">Руководство aptosid</a>
			<ul class="sub-menu" id="sm1">
				<li><a href="welcome-ru.htm#welcome-gen">Добро пожаловать! &#8658;</a>
					<ul class="sub2-menu" id="sm1a">
					  <li><a href="credits-ru.htm#cred-team">Благодарности</a></li>
					</ul>
					</li>
		<li><a href="welcome-ru.htm#how-to">Об использовании &#8658;</a>
					<ul class="sub2-menu" id="sm1b">
					  <li><a href="welcome-ru.htm#how-to">Об использовании</a></li>
					  <li><a href="welcome-ru.htm#table-contents">Содержание</a></li>
					</ul>
					</li>
		<li><a href="help-ru.htm#help-gen">Где получить помощь &#8658;</a>
					<ul class="sub2-menu" id="sm1c">
					  <li><a href="help-ru.htm#help-gen">Где получить помощь</a></li>
					  <li><a href="help-ru.htm#paste">IRC !paste</a></li>
					</ul>
					</li>
		<li><a href="wel-quickstart-ru.htm#welcome-quick">Краткое руководство aptosid</a></li>
		</ul>
		</li>
<li  onmouseover="showHide( 2 );" onmouseout="startTime();" ><a href="cd-dl-burning-ru.htm">Содержание ISO-образа, выпуски, список зеркал и запись</a>
			   <ul class="sub-menu" id="sm2">
				<li><a href="cd-content-ru.htm#cd-content">Содержание ISO-образа и системные требования &#8658;</a>
					<ul class="sub2-menu" id="sm2a">
					  <li><a href="sys-admin-release-ru.htm#rolling">Замечания</a></li>
					</ul>
					</li>
		    <li><a href="cd-dl-burning-ru.htm#download-aptosid">Скачивание ISO-образа, список зеркал и запись &#8658;</a>
				<ul class="sub2-menu" id="sm2b">
					  <li><a href="cd-dl-burning-ru.htm#md5">Проверка ISO-образа с md5</a></li>
					  <li><a href="cd-dl-burning-ru.htm#burn-nero">Запись ISO-образа в Windows</a></li>
					  <li><a href="cd-dl-burning-ru.htm#burn-linux">Запись ISO-образа в Linux</a></li>
					  <li><a href="cd-no-gui-burn-ru.htm#burning-no-gui">Скрипт burniso</a></li>
					  <li><a href="cd-no-gui-burn-ru.htm#burn-no-gui-gen">Запись ISO-образа в консоли</a></li>
					  <li><a href="cd-dl-burning-ru.htm#download-aptosid">Список зеркал</a></li>
					</ul>
					</li>
		      </ul>
		</li>
<li  onmouseover="showHide( 3 );" onmouseout="startTime();" ><a href="live-mode-ru.htm">Режим ISO-образа</a>
			<ul class="sub-menu" id="sm3">
				<li><a href="live-mode-ru.htm#rootpw">Пароль root на ISO-образе</a></li>
				<li><a href="live-mode-ru.htm#live-cd-installsoft">Установка ПО на ISO-образе</a></li>
			</ul>
		</li>
<li  onmouseover="showHide( 4 );" onmouseout="startTime();" ><a href="term-konsole-ru.htm">Терминал и оболочка</a>
			<ul class="sub-menu" id="sm4">
				<li><a href="term-konsole-ru.htm#term-kon">Терминал и оболочка &#8658;</a>
					<ul class="sub2-menu" id="sm4a">
					  <li><a href="term-konsole-ru.htm#term-kon">Терминал и оболочка</a></li>
					  <li><a href="term-konsole-ru.htm#cli-help">Помощь в терминале</a></li>
					  <li><a href="help-ru.htm#init3-tools">Полезные инструменты в текстовом режиме (tty) - init 3</a></li>
					  <li><a href="term-konsole-ru.htm#term-cmds">Команды в терминале</a></li>
					</ul>
					</li>
			  <li><a href="term-konsole-ru.htm#sux">Команда: sux/sudo</a></li>
		    </ul>
		</li>
<li  onmouseover="showHide( 5 );" onmouseout="startTime();" ><a href="cheatcodes-ru.htm">Чит-коды</a>
			<ul class="sub-menu" id="sm5">
				<li><a href="cheatcodes-ru.htm#cheatcodes">Особые для aptosid ISO-образа чит-коды</a></li>
				<li><a href="cheatcodes-ru.htm#cheatcodes-linux">Общие для параметров ядра чит-коды</a></li>
				<li><a href="cheatcodes-vga-ru.htm#vga">Общие для видеокарты коды</a></li>
			</ul>
		</li>
<li  onmouseover="showHide( 6 );" onmouseout="startTime();" ><a href="part-gparted-ru.htm">Разметка диска</a>
		<ul class="sub-menu" id="sm6">
			<li><a href="part-gparted-ru.htm#hd-ntfs3g">Запись на раздел NTFS с ntfs-3g</a></li>
			<li><a href="part-gparted-ru.htm#partition">Разметка диска с интерфесом &#8658;</a>
					<ul class="sub2-menu" id="sm6a">
					  <li><a href="part-gparted-ru.htm#partition">Разметка диска с gparted/KDE Partition Manager:  GParted/KDE Partition Manager</a></li>
					  <li><a href="part-gparted-ru.htm#ntfs">Разделы NTFS с gparted/KDE Partition Manager</a></li>
					</ul>
					</li>
		<li><a href="part-cfdisk-ru.htm#partition">Примеры разметки диска в консоли &#8658;</a>
					 <ul class="sub2-menu" id="sm6b">
					    <li><a href="part-cfdisk-ru.htm#partition">Разметка диска с cfdisk</a></li>
					    <li><a href="part-cfdisk-ru.htm#formating">Форматирование разделов с cfdisk</a></li>
					</ul>
					</li>
		<li><a href="part-size-examp-ru.htm#part-example">Разметка диска - обзор &#8658;</a>
					<ul class="sub2-menu" id="sm6c">
					  <li><a href="part-size-examp-ru.htm#part-example">Примеры разметки диска</a></li>
					  <li><a href="part-uuid-ru.htm#uuid">UUID и метки раздела в fstab </a></li>
					  <li><a href="part-cfdisk-ru.htm#disknames">Имена жестких дисков</a></li>
					</ul>
					</li>
		      </ul>
		</li>
<li  onmouseover="showHide( 7 );" onmouseout="startTime();" ><a href="hd-install-ru.htm">Установка aptosid - HD, USB, VM</a>
		<ul class="sub-menu" id="sm7">
		  <li><a href="hd-install-ru.htm#Inst-prep">Подготовка установки &#8658;</a>
					<ul class="sub2-menu" id="sm7a">
					  <li><a href="hd-install-ru.htm#Inst-prep">Подготовка установки</a></li>
					  <li><a href="hd-install-ru.htm#Installation">Инсталляция на HD</a></li>
					  <li><a href="hd-install-ru.htm#first-hd-boot">Первая загрузка</a></li>
					</ul>
					</li>
		<li><a href="hd-install-opts-ru.htm#fromiso">Загрузка 'fromiso' &#8658;</a>
					<ul class="sub2-menu" id="sm7b">
					  <li><a href="hd-install-opts-ru.htm#fromiso">Загрузка 'fromiso' - обзор</a></li>
					  <li><a href="hd-install-opts-ru.htm#fromiso-grub-leg">Загрузка 'fromiso' с grub 1</a></li>
					  <li><a href="hd-install-opts-ru.htm#grub2-fromiso">Загрузка 'fromiso' с grub 2</a></li>
					  <li><a href="hd-install-opts-ru.htm#fromiso-persist">Способы 'fromiso' и 'persist'</a></li>
					</ul>
					</li>
		<li><a href="hd-install-opts-ru.htm#usb-hd">Инсталляция на USB &#8658;</a>
					<ul class="sub2-menu" id="sm7c">
					  <li><a href="hd-install-opts-ru.htm#usb-hd">Инсталляция на USB-HD - способ aptosid -  aptosid-на-флешки</a></li>
					  <li><a href="hd-ins-opts-oos-ru.htm#raw-usb">Запись aptosid на USB/SSD устройство с помощью другого Linux, MS Windows или Mac OS</a></li>
					</ul>
					</li>
		  <li><a href="nbdboot-ru.htm#nbd1">Загрузка aptosid по сети</a></li>
		  <li><a href="hd-install-vmopts-ru.htm#vmopts">Опции инсталляций на VM (Virtual Machine)</a></li>
		</ul>
		</li>
<li  onmouseover="showHide( 8 );" onmouseout="startTime();" ><a href="hw-dev-hw-dri-ru.htm">Оборудование в Xorg и разные драйверы</a>
	<ul class="sub-menu" id="sm8">
		<li><a href="hw-dev-mon-ru.htm#mon-res">Разрешение экрана и мониторы  &#8658;</a>
					<ul class="sub2-menu" id="sm8a">
					  <li><a href="hw-dev-mon-ru.htm#mon-res">Разрешение экрана и мониторы</a></li>
					  <li><a href="hw-dev-mon-ru.htm#xrandr">Двойные экраны и xrandr</a></li>
					  <li><a href="hw-dev-mon-ru.htm#mon-binary">Двойные экраны (используя двоичные файлы)</a></li>
					</ul>
					</li>
		<li><a href="hw-dev-hw-dri-ru.htm#non-free-3d">Несвободные драйверы для видеокарт &#8658;</a>
					<ul class="sub2-menu" id="sm8b">
					  <li><a href="hw-dev-hw-dri-ru.htm#non-free-3d">Несвободные драйверы для Nvidia в xorg.conf</a></li>
					  <li><a href="hw-dev-hw-dri-ru.htm#non-free-3d-2">Несвободные драйверы для ATI, Radeon и других</a></li>
					</ul>
					</li>
			  <li><a href="hw-dev-hw-dri-ru.htm#non-free-firmware">Аппаратное, нуждающееся в несвободной микропрограмме</a></li>
			  <li><a href="hw-dev-hw-dri-ru.htm#non-free">Добавление 'non-free' в файл sources.list</a></li>
			  <li><a href="hw-dev-hw-dri-ru.htm#native-nv-ati">Свободные драйверы xorg для NVIDIA, ATI, Radeon и Intel в xorg.conf</a></li>
		</ul>
		</li>
<li  onmouseover="showHide( 9 );" onmouseout="startTime();" ><a href="wm-kde-ru.htm">Оконные менеджеры</a>
		    <ul class="sub-menu" id="sm9">
			  <li><a href="wm-kde-ru.htm">Оконные менеджеры &#8658;</a>
					  <ul class="sub2-menu" id="sm9a">
					    <li><a href="wm-xfce-ru.htm#xfce-notes">Полезные инструменты для xfce</a></li>
					    <li><a href="wm-kde-ru.htm#install-add">Полезные инструменты для KDE</a></li>
					    <li><a href="wm-kde-ru.htm#desk-freeze">Рабочий стол зависает</a></li>
					    <li><a href="wm-kde-ru.htm#kde-login">Проблемы входа в KDE</a></li>
					    <li><a href="wm-kde-ru.htm#ch-th">Управление темами</a></li>
					</ul>
					</li>
		      <li><a href="wm-kde-ru.htm#dm">Дисплейные менеджеры - dm</a></li>
		</ul>
		</li>
<li  onmouseover="showHide( 11 );" onmouseout="startTime();" ><a href="internet-connecting-ru.htm">Интернет и локальная сеть</a>
		    <ul class="sub-menu" id="sm11">
			<li><a href="lamp-apache-ru.htm">Мета-пакет LAMP &#8658;</a>
					<ul class="sub2-menu" id="sm11a">
					    <li><a href="lamp-apache-ru.htm#serv-apache">Мета-пакет LAMP</a></li>
					    <li><a href="lamp-apache-ru.htm#serv-ftp">Клиенты FTP</a></li>
					    <li><a href="lamp-apache-ru.htm#serv-sec">Защищенные протоколы</a></li>
					    <li><a href="lamp-apache-ru.htm#serv-ssl">SSL</a></li>
					    <li><a href="lamp-sql-ru.htm#serv-mysql">Настройка MySQL</a></li>
					    <li><a href="lamp-ppp-ru.htm#serv-php">PHP в apache</a></li>
					    <li><a href="ntp-server-ru.htm#ntp-server">Сервер времени</a></li>
					</ul>
					</li>
		<li><a href="tor-privoxy-ru.htm#tor">Брандмауэры и веб-прокси &#8658;</a>
					<ul class="sub2-menu" id="sm11b">
					    <li><a href="tor-privoxy-ru.htm#tor">Маршрутизатор tor</a></li>
					    <li><a href="tor-privoxy-ru.htm#privoxy">Веб-прокси privoxy</a></li>
					    <li><a href="internet-connecting-ru.htm#firewalls">Брандмауэры</a></li>
					</ul>
					</li>
		<li><a href="ssh-ru.htm#ssh-x">Samba и ssh &#8658;</a>
					<ul class="sub2-menu" id="sm11c">
						  <li><a href="samba-ru.htm#setup">Сервер samba</a></li>
						  <li><a href="samba-ru.htm#configure">Интеграции samba в сеть Windows</a></li>
						  <li><a href="ssh-ru.htm#ssh-fs">Удаленное монтирование с ssh</a></li>
						  <li><a href="ssh-ru.htm#ssh-x">Приложения X-Windows с ssh</a></li>
						  <li><a href="ssh-ru.htm#ssh-f">интерфейс ssh и Konqueror</a></li>
						  <li><a href="ssh-ru.htm#ssh-w">ssh X-Forwarding с Windows-PC</a></li>
						  <li><a href="ssh-ru.htm#ssh">Безопасность с ssh</a></li>
					</ul>
					</li>
		<li><a href="internet-connecting-ru.htm#netcardconfig">Связи с WiFi &#8658;</a>
						<ul class="sub2-menu" id="sm11d">
						    <li><a href="internet-connecting-ru.htm#netcardconfig">Настройка сетевых карт с ceni</a></li>
						    <li><a href="inet-wpagui-ru.htm#wpa-roaming-gui">Графическая программа wpa_gui для Wifi</a></li>
						    <li><a href="inet-setup-ru.htm#net-set1">Роуминг с WiFi</a></li>
						    <li><a href="internet-connecting-wpa-ru.htm#wpa">WiFi - wpasupplicant</a></li>
						    <li><a href="inet-ifplug-ru.htm#hotswitch">Переключение сети между WiFi и проводной связей</a></li>
					</ul>
					</li>
		<li><a href="internet-connecting-ru.htm#netcardconfig">Проводная связь &#8658;</a>
						<ul class="sub2-menu" id="sm11e">
						    <li><a href="internet-connecting-ru.htm#dial-mod">56килобитовые модемы</a></li>
						    <li><a href="internet-connecting-ru.htm#netcardconfig">Настройка сетевых карт с ceni</a></li>
					</ul>
					</li>
				</ul>
			    </li>
<li  onmouseover="showHide( 12 );" onmouseout="startTime();" ><a href="sys-admin-apt-ru.htm">Управление пакетами и обновление системы с dist-upgrade</a>
	<ul class="sub-menu" id="sm12">
		<li><a href="sys-admin-apt-ru.htm#apt-cook">APT и репозитории &#8658;</a>
					<ul class="sub2-menu" id="sm12a">
					    <li><a href="sys-admin-apt-ru.htm#apt-cook">APT и репозитории</a></li>
					    <li><a href="sys-admin-apt-ru.htm#apt-install">Установка нового пакета</a></li>
					    <li><a href="sys-admin-apt-ru.htm#apt-delete">Удаление пакета</a></li>
					    <li><a href="sys-admin-apt-ru.htm#apt-downgrade">Понижение версии с hold</a></li>
					    <li><a href="sys-admin-apt-ru.htm#apt-cache">Поиск информации о пакете с apt-cache</a></li>
					    <li><a href="sys-admin-apt-ru.htm#gui-pacsea">Графическая поисковая программа</a></li>
					</ul>
				</li>
		<li><a href="sys-admin-kern-upg-ru.htm#kern-upgrade">Обновление ядра &#8658;</a>
					<ul class="sub2-menu" id="sm12b">
					    <li><a href="sys-admin-kern-upg-ru.htm#kern-remove">Удаление ядра</a></li>
					    <li><a href="sys-admin-kern-upg-ru.htm#kern-upgrade">Обновление ядра</a></li>
					    <li><a href="sys-admin-kern-upg-ru.htm#dmakms">Динамическая инсталляция модулей ядра с dmakms</a></li>
					</ul>
				</li>
		<li><a href="sys-admin-apt-ru.htm#apt-upgrade">Обновления системы с dist-upgrade - краткий обзор &#8658;</a>
					<ul class="sub2-menu" id="sm12c">
					    <li><a href="sys-admin-upgrade-ru.htm#live-cd-upgrade">Обновление с ISO-образа</a></li>
					    <li><a href="sys-admin-apt-locarmirr-ru.htm#approx">Обновление нескольких компьютеров в локальной сети</a></li>
					    <li><a href="sys-admin-apt-ru.htm#apt-upgrade">Краткий обзор oбновления системы с dist-upgrade</a></li>
					    <li><a href="sys-admin-apt-ru.htm#du-st">Шаги обновления системы с dist-upgrade</a></li>
					</ul>
				  </li>
			    </ul>
		</li>
<li  onmouseover="showHide( 13 );" onmouseout="startTime();" ><a href="sys-admin-gen-ru.htm">Системное администрирование</a>
	<ul class="sub-menu" id="sm13">
		<li><a href="bios-freedos-ru.htm#bois-prep">Обновление BIOS с FreeDOS</a></li>
		<li><a href="vir-rkits-ru.htm#virus-rkits">Сканер безопасности</a></li>
		<li><a href="hd-install-ru.htm#adduser">Новый пользователь и пароли &#8658;</a>
					<ul class="sub2-menu" id="sm13a">
					    <li><a href="hd-install-ru.htm#adduser">Добавление нового пользователя</a></li>
					    <li><a href="sys-admin-gen-ru.htm#pw-lost">Восстановление root-пароля</a></li>
					</ul>
					</li>
		<li><a href="sys-admin-gen-ru.htm#start-services">Службы и режимы загрузки &#8658;</a>
					<ul class="sub2-menu" id="sm13b">
					    <li><a href="sys-admin-gen-ru.htm#start-services">Выбор служб</a></li>
					    <li><a href="sys-admin-gen-ru.htm#init">Режимы загрузки init в aptosid</a></li>
					</ul>
					</li>
		<li><a href="sys-admin-rsync-ru.htm#rsync">Резервирование системы &#8658;</a>
					  <ul class="sub2-menu" id="sm13c">
					    <li><a href="sys-admin-rdiff-ru.htm#rdiff">Резервирование с rdiff</a></li>
					    <li><a href="sys-admin-rsync-ru.htm#rsync">Резервирование с rsync</a></li>
					    <li><a href="home-ru.htm#home-bu">Перемещение /home</a></li>
					</ul>
					</li>
		<li><a href="sys-admin-gen-ru.htm#fonts">Cups, шрифты и звук &#8658;</a>
					  <ul class="sub2-menu" id="sm13d">
					     <li><a href="sys-admin-gen-ru.htm#fonts">Шрифты</a></li>
					     <li><a href="sys-admin-gen-ru.htm#cups">Сервер cups</a></li>
					     <li><a href="sys-admin-gen-ru.htm#sound">Звуковые микшеры</a></li>
					</ul>
					</li>
		<li><a href="sys-admin-grub-bootman2-ru.htm#mbr-grub-boot">Grub1 (устаревшая) &#8658;</a>
					  <ul class="sub2-menu" id="sm13e">
					    <li><a href="sys-admin-grub-bootman2-ru.htm#boot-grub-floppy">Загрузочная дискета</a></li>
					    <li><a href="sys-admin-grub-bootman2-ru.htm#mbr-grub-boot">Grub1 - Удаление из MBR</a></li>
					    <li><a href="sys-admin-grub-bootman2-ru.htm#dual-boot">Grub1 - Двойная и мультизагрузка</a></li>
					    <li><a href="sys-admin-grub-bootman2-ru.htm#what-is-grub">Менеджер загрузки grub</a></li>
					    <li><a href="sys-admin-grub-bootman2-ru.htm#remove-grub">Удаление grub из MBR</a></li>
					</ul>
					</li>
		<li><a href="sys-admin-grub2-ru.htm#grub2">Grub2 &#8658;</a>
					  <ul class="sub2-menu" id="sm13f">
					    <li><a href="sys-admin-grub-bootman2-ru.htm#boot-grub-floppy">Загрузочная дискета</a></li>
					    <li><a href="sys-admin-grub2-ru.htm#chroot">Grub2 - Восстановление grub с chroot</a></li>
					    <li><a href="sys-admin-grub2-ru.htm#mbr-over-grub2">Grub2 - Удаление из MBR</a></li>
					    <li><a href="sys-admin-grub2-ru.htm#multi-os">Grub2 - Двойная и мультизагрузка</a></li>
					    <li><a href="sys-admin-grub2-ru.htm#grub1-grub2">Grub2 - Обновление с grub1</a></li>
					    <li><a href="sys-admin-grub2-ru.htm#grub2">Grub2 - Краткий обзор</a></li>
					</ul>
					</li>
			</ul>
		</li>
	</ul>
<!-- menu ends here --> </div>
<div id="main-page">
		<div class="divider" id="vmopts">
				<h2 id="top-header">Опции виртуальных машин</h2>

						<ul>
							<li><a href="hd-install-vmopts-ru.htm#kvm">KVM для Intel VT или AMD-V</a></li>
							<li><a href="hd-install-vmopts-ru.htm#vbox">Virtualbox</a></li>
							<li><a href="hd-install-vmopts-ru.htm#qemu">QEMU</a></li>

						</ul>
		      </div>
		      <div class="divider" id="kvm">
				<h2>Загрузка и установка aptosid на виртуальную машину KVM</h2>
							<p>KVM представляет собой полное решение для виртуализации Linux на x86 аппаратных содержащие расширений (Intel VT или AMD-V).</p>

				      <h3>Предпосылки</h3>

							<p>To ascertain whether your hardware supports KVM, ensure that KVM is enabled in the BIOS (in some cases on an Intel VT or AMD-V system it may not evident as to where the switch is, therefore assume that it is in a KVM state). The way to check is in a console run:</p>
<pre>
cat /proc/cpuinfo | egrep --color=always 'vmx|smx'
</pre>
							<p>If you see <span class="highlight-3">smx</span> or <span class="highlight-3">vmx</span> in the cpu flags field, your system supports KVM. (Otherwise go back to the BIOS if you believe it is supported and check again, else search the internet as to where in the BIOS menus KVM 'enable' could be hiding).</p>

							<p>Should your BIOS not support KVM refer to <a href="hd-install-vmopts-ru.htm#vbox">Virtualbox</a>
							 or <a href="hd-install-vmopts-ru.htm#qemu">QEMU</a></p>

							<p>To install and run KVM, firstly ensure that Virtualbox modules are not loaded, (--purge them is the best option), then depending on your chipset:</p>

							<p>Для <span class="highlight-3">vmx</span>:</p>
<pre>
apt-get install qemu-kvm qemu-utils
modprobe kvm_intel
</pre>
							<p>Для <span class="highlight-3">smx</span>:</p>
<pre>
apt-get install qemu-kvm qemu-utils
modprobe kvm_amd
</pre>
							 <p>Another option is reboot as the qemu-kvm initscripts will take care of loading the modules.</p>

					  <h4>Использование KVM для загрузки aptosid-*.iso</h4>

							<p><span class="highlight-2">В качестве пользователя:</span></p>
<pre>
$ kvm -net nic,model=virtio -net user -soundhw ac97 -m 512 -monitor stdio -cdrom &lt;aptosid.iso&gt;
</pre>

				<h5>Установка aptosid*.ISO-образa в KVM-образе</h5>
							<p>First create a hard disk image, (this image will be minimal and only grow as required due to qcow2 compression ratios):</p>
<pre>
$ qemu-img create -f qcow2 aptosid-2010-*-.img 12G
</pre>

							<p>Boot the aptosid-*.iso with the following parameters to enable KVM to recognise that there is an QEMU hard disk image available:</p>
<pre>
$ kvm -net nic,model=virtio -net user -soundhw ac97 -m 512 -monitor stdio -cdrom &lt;/path/to/aptosid.iso&gt; -boot d &lt;/path/to/aptosid-20xx-*-.img&gt;
</pre>

							<p>Once the cdrom has booted up click on the aptosid installer icon to activate the installer, (or use the menu), click on the Partitioning tab and you should see on the left hand side a box that has a disk ready for partitioning and formatting, most likely noted as <span class="highlight-3"> /dev/sda</span>. Underneath that are the options for partitioning, choose gparted or partitionmanager. Whilst the KDE partionmanager has a  different layout to gparted, which used in the following example, it is just as intuitive to work with.</p>

	<div class="screenshot"><img src="../lib/images-common/images-vm/kvm-gparted02.png" title="gparted kvm hard disk naming" alt="gparted kvm hard disk naming" /></div>
	<div class="spacer02"></div>

							<p>In the Gparted menu you can confirm that Gparted sees the image with <span class="highlight-3">View>Device Information</span> which should state it is a <span class="highlight-3">ATA QEMU Harddisk</span> and most likely noted as <span class="highlight-3"> /dev/sda</span>,(in this example), as this will be crucial when moving back to the installer and choosing where to put Grub, as it needs to go to <span class="highlight-3"> /dev/sda</span>.</p>

							<p>Next, in the <span class="highlight-3">Partition</span> menu choose <span class="highlight-3"> Device>Create Partiton Table</span> and create the partition table. </p>

							<p>Then format the partition table with ext4 and also include a swap of 2 gig. The formatting will take time so be patient.</p>

							<p>After formatting has completed, click OK to be returned to the installer and proceed as if you are performing a standard install, (again, be patient). <span class="highlight-2">Note: Install the Grub to /dev/sda</span>.</p>

							<p>You now have a aptosid-*-VM ready for use:</p>

<pre>
$ kvm -net nic,model=virtio -net user -soundhw ac97 -m 512 -monitor stdio -drive if=virtio,boot=on,file=&lt;absolute/path/to/aptosid-20xx-*.img&gt;
</pre>

							<p>If the guest does not support virtio, or you do not specify an absolute path,  use:</p>
<pre>
$ kvm -net nic,model=virtio -net user -soundhw ac97 -m 512 -monitor stdio -hda &lt;/path/to/aptosid-20xx-*.img&gt;
</pre>
							<p>See also:</p>
<pre>
$ man kvm
</pre>
				<h5>Managing your KVM virtual machine installations</h5>
<pre>
apt-get install aqemu
</pre>
							<p>When using AQEMU ensure that you choose the KVM mode from the drop down box for 'Emulator Type' in the 'General' tab. (Documentation for AQEMU is basically non existent, therefore a few 'trials by error' will be required to figure out the easy to use GUI, however a good start is to use first use the 'VM' menu followed by the 'General' tab.</p>

	</div>
	<div class="divider" id="vbox">
		<h2>Загрузка и установка aptosid на виртуальную машину VirtualBox</h2>
							<p>Шаги:</p>
						<ul>
 							<li>1. Создайте виртуальный жесткий диск средствами VirtualBox</li>
 							<li>2. Осуществите загрузку VirtualBox с ISO-образа </li>
 							<li>3. Произведите инсталляцию на созданный жесткий диск</li>
						</ul>

				<h4>Требования</h4>
							<p><span class="highlight-3">Рекомендуемое ОЗУ: 1 Гб -</span> Идеально 512 Мб для гостевой ОС и 512 Мб для базового хоста. (допустим и меньший обьем, но с потерей производительности).</p>

							<p><span class="highlight-3">Обьем жесткого диска:</span> Сам по себе VirtualBox занимает незначительные обьемы (типичная инсталляция - около 30 Мб на жестком диске), но виртуальная машина для собственных данных потребует гораздо большего пространства на жестком диске. Так для инсталляции MS Windows XP (TM), например, Вам потребуется использовать до нескольких GB дискового пространства. Чтобы иметь aptosid в VirtualBox, Вы должны распределить 5 ГБ имисжа плюс swap расдел.</p>

				<h3>Установка:</h3>

<pre>
apt-get update
apt-get install virtualbox-ose-qt virtualbox-ose-source dmakms module-assistant
</pre>
							<p>Затем подготовитe модуля::</p>
<pre>
m-a prepare
m-a a-i virtualbox-ose-source
</pre>
							<p>Then activate Dynamic Module-Assistant Kernel Module Support for virtualbox, so that the next time the Linux kernel is updated a virtualbox module is prepared for it too, without manual intervention. To do that, add <span class="highlight-3">virtualbox-ose-source</span> to the <span class="highlight-3">/etc/default/dmakms </span>configuration file. </p>
<pre>
mcedit /etc/default/dmakms
virtualbox-ose-source
</pre>

							<p>Then reboot the computer.</p>

							<p><a href="sys-admin-kern-upg-ru.htm#dmakms">This is essential reading on dmakms</a></p>

					<h3>Инсталляция aptosid в виртуальную машину</h3>
							<p>С помощью проводника (wizard) virtualbox создайте новую виртуальную машину для aptosid, а далее пользуйтесь инструкцией для обычной установки aptosid.</p>

							<p><a href="http://www.virtualbox.org/">VirtualBox имеет полноценную помошь в формате .pdf, которую Вы можете загрузить.</a> </p>

	</div>
	<div class="divider" id="qemu">
		<h2>Загрузка и установка aptosid на виртуальную машину QEMU</h2>

		<ul>
 			<li>1. Создание виртуального жесткого диска (ISO) для qemu</li>
 			<li>2. Загрузка ISO с qemu</li>
 			<li>3. Инсталляция</li>

		</ul>

							<p>Графическая программа qtemu помогает Вам настроить QEMU:</p>
<pre>
apt-get install qtemu
</pre>

 				<h4>Создание виртуальных жестких дисков (ISO)</h4>

							<p>Чтобы qemu работал, он нуждается в имидже жестких дисков. Это файл, который несет содержание эмулируемого жесткого диска.</p>

							<p>Используют команду:</p>
<pre>
qemu-img create -f qcow aptosid.qcow 3G
</pre>
							<p>Этим создается файл образа с именем "aptosid.qcow". Параметр "3G" указывает величину диска, в данном случае 3 ГБ. Суффикс М используется для мегабайт (например "256M"). Не беспокоитесь о величине диска - формат qcow архивирует образ, так что неиспользованное место не прибавляется к величине файла.</p>


			<h4>Инсталляция операционной системы</h4>

							<p>Теперь в первый раз запускается эмулятор. Обратите внимание: Eсли щелкнуть мышью в пределах окна qemu произойдет захват указателя. Для освобождения используется комбинация клавиш Ctrl+Alt.</p>

							<p>При необходимости в загрузочной дискете, qemu запускается таким образом:</p>
<pre>
qemu -floppy aptosid.iso -net nic -net user -m 512 -boot d aptosid.qcow
</pre>
							<p>Для загрузки с CD, qemu запускается таким образом:</p>
<pre>
qemu -cdrom aptosid.iso -net nic -net user -m 512 -boot d aptosid.qcow
</pre>
							<p>Теперь можно инсталлировать aptosid&nbsp;как на реальный жесткий диск.</p>


			<h4>Применение системы</h4>

							<p>Запуск инсталлированной системы:</p>
<pre>
qemu [hd_image]
</pre>
							<p>Хорошей идеей является применение т.н. "многослойных образов" (overlay images). Таким образом, образ должен создается только один раз, а  все изменения qemu сохраняет вне этого образа. Cистема становится более стабильной, кроме того появляется возможность просто возвратится к предыдущему состоянию инсталляции.</p>

							<p>Для создания "многослойного образа" (overlay image), вводят:</p>
<pre>
qemu-img create -b [[base''image]] -f qcow [[overlay''image]]
</pre>
							<p>Теперь образ жестких дисков заменяет базовый образ (base_image), в нашем случае aptosid.qcow, и qemu можно запускать следующим способом:</p>
<pre>
qemu [overlay_image]
</pre>
							<p>Оригинальный образ остается неприкосновенным. Однако необходимо обратить внимание на то, что этот базовый образ не может ни переименовываться, ни перемещаться, так как оверлей нуждается&nbsp;в точном, абсолютном пути базового образа.</p>


			<h4>Использование физического раздела как первоначального раздела образа жестких дисков.</h4>

							<p>Иногда хотелось бы использовать системный раздел из qemu (например, как настоящую, так и виртуальную инсталляцию qemu запускать с данного раздела как root). Это возможно посредством Software-RAID в линейном режиме (для этого необходим модуль ядра linear.ko) и устройство Loopback: При этом фокус состоит в том, что Master Boot Record (MBR) ставят динамично в начале реального раздела, который должен встраиваться в qemu образа Raw Disk.</p>

							<p>Предположим, имеют простой, не включенный раздел /dev/sdaN с файловой системой, который должен стать частью образа жестких дисков qemu. Сперва создают маленький файл, который должен содержать MBR:</p>
<pre>
dd if=/dev/zero of=/path/to/mbr count=32
</pre>
							<p>Этим создаётся файл размером 16 KB (32 * 512 bytes). Важно не создавать этот файл слишком маленьким (даже если MBR нуждается только в одном блоке размером 512 байтов), так как Chunk-Size программного RAID устройства будет тем меньше, чем меньше этот файл, и это окажет влияние на производительность. Затем можно присоединить к файлу MBR устройство Loopback:</p>
<pre>
losetup -f /path/to/mbr
</pre>
							<p>Мы исходим из того, что устройство называется /dev/loop0, так как еще никакого иного Loopback не существует. Следующий шаг - это объединение&nbsp;"merged" образа с MBR + /dev/sdaN при использовании Software-RAIDS:</p>
<pre>
 modprobe linear
 mdadm --build --verbose /dev/md0 --chunk=16 --level=linear --raid-devices=2 /dev/loop0 /dev/sdaN
</pre>
							<p>Созданый таким образом /dev/md0 используется как qemu-Raw-Diskimage (устанавливаемые права доступа должны позволять эмулятору его использовать). Последний (и несколько щекотливый) шаг - это конфигурация жестких дисков (геометрия диска и таблицы разделов), так чтобы совпадали исходная точка первоначального раздела в MBR с одним из /dev/sdaN в пределах/dev/md0 (смещение точно 16 * 512 = 16 384 Байт в этом примере). Для этого используется fdisk на машине Host, а не на эмуляторе: он не всегда позволяет провести округление в килобайтах(как 31.5 KБ в предшествовавшем разделе), и выдаваемое значение, как следствие, не может быть обработано Software-RAIDs. Поэтому на компьютере хоста выполняем:</p>
<pre>
 fdisk /dev/md0
</pre>
							<p>Создается соответствующим образом первоначальный раздел /dev/sdaN и командой 's' (Sector) в меню 'x' (эксперт)подбирают размер, до тех пор, пока первый цилиндр (где начинается&nbsp;первый раздел) точно подойдет к величине MBR. Наконец, с 'w' (write) результат заносится в файл. Теперь имеется в наличии раздел, который непосредственно может включаться как машиной Host так и имиджем жестких дисков qemu:</p>
<pre>
 qemu -hdc /dev/md0 [...]
</pre>
							<p>Конечно, можно использовать любой загрузчик для образа жестких дисков с qemu, который поддерживается оригинальным разделом, содержащим необходимые приложения, &nbsp;/boot/sdaN.</p>



			<h4>Модуль QEMU Accelerator</h4>

							<p>Разработчики qemu создали дополнительный модуль ядра, чтобы qemu мог набирать скорость почти до уровня реальной системы. Загрузить этот модуль можно так:</p>
<pre>
major=0
</pre>
							<p>одновременно автоматизируется установка необходимого устройства /dev/kqemu. Следующая команда является необходимой:</p>
<pre>
echo "options kqemu major=0" &gt;&gt; /etc/modprobe.conf
</pre>
							<p>для активизации модуля kqemu при каждой загрузке.</p>

<pre>
qemu [...] -kernel-kqemu
</pre>
							<p>Описаные действия позволяют достичь полной виртуализации и значительного повышения скорости  работы виртуальной системы.</p>

			<h4>Активизация qemu:</h4>
<pre>
qemu -cdrom /tmp/pkg/aptosid-debug.iso -net nic -net user -m 512
</pre>
							<p><a href="http://www.nongnu.org/qemu/user-doc.html">Официальная документация проекта QEMU</a>.</p>
							<p><a href="http://wiki.archlinux.org/index.php/Qemu">Несколько разделов руководства QEMU были использованы для руководства aptosid на базе GNU Free Documentation License 1.2 и приспособлены для руководства aptosid. Перевод на русский язык произведен группой aptosid.</a> </p>


</div>
<div id="rev">Page last revised 03/10/2010 0255 UTC</div>

</div>
</body>
</html>
