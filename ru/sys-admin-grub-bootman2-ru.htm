<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
   "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="ru">
<head>
	<title>Руководство sidux - grub-ru</title>
	<meta http-equiv="content-type" content="text/html; charset=UTF-8" />
	<style type="text/css" media="all">@import url("../lib/css-js/content.css");</style>
        <style type="text/css" media="all">@import url("../lib/css-js/menu.css");</style>
        <style type="text/css" media="print">@import url("../lib/css-js/print.css");</style>
        <link rel ="shortcut icon" href="../lib/favicon/manual.ico" />
        <script type="text/javascript" src="../lib/css-js/menu2.js"></script>
        <!--[if lt IE 8]>
        <link rel="stylesheet" type="text/css" href="../lib/css-js/ie_5-7_override.css">
        <![endif]-->
        <!--[if lt IE 7]>
        <link rel="stylesheet" type="text/css" href="../lib/css-js/ie_5-6_override.css">
        <![endif]-->
</head>
<body id="sys-admin">
<div id="menu"><!-- menu starts here -->
<!--Welcome to the Official sidux-manual version  01.15-2007-06-16  ru language maintained by RoEn and koslow-->
<!-- menu last updated by bluewater 16/06/2007 1500rs AEST 16/06/2007 0500hrs UTC -->
<img src="../lib/logos/sidux-logo.png" alt="logo" id="menu-header" />
	<ul id="top-list">
		<li><a href="http://sidux.com/">Назад к основному меню sidux</a></li>
	</ul>
	<div id="flags-2">
			<a href="../flag-index.html"><img src="../lib/logos/sidux-lang-50.png" title="Выбирайте Ваш язык" alt="Переключение языка" /></a>
	</div>
	<ul>
		<li  onmouseover="showHide( 1 );" onmouseout="startTime();" ><a href="welcome-ru.htm">Добро пожаловать в руководство sidux</a>
			<ul class="sub-menu" id="sm1">
				<li><a href="welcome-ru.htm#welcome-gen">Официальное руководство</a></li>
				<li><a href="welcome-ru.htm#how-to">Как пользоваться этим руководством?</a></li>
				<li><a href="welcome-ru.htm#table-contents">Индекс</a></li>
				<li><a href="help-ru.htm#help-gen">Где найти помощь?</a></li>
				<li><a href="credits-ru.htm#cred-team">Благодарности</a></li>
			</ul>
		</li>
		<li  onmouseover="showHide( 2 );" onmouseout="startTime();" ><a href="cd-content-ru.htm">Содержание LiveCD</a>
			<ul class="sub-menu" id="sm2">
				<li><a href="cd-content-ru.htm#cd-content">Содержание LiveCD</a></li>
			</ul>
		</li>
		<li  onmouseover="showHide( 6 );" onmouseout="startTime();" ><a href="cd-dl-burning-ru.htm">Cкачать и записать ISO-образ</a>
			<ul class="sub-menu" id="sm6">
				<li><a href="cd-dl-burning-ru.htm#download-sidux">Cкачать и записать ISO-образ</a></li>
				<li><a href="cd-dl-burning-ru.htm#md5">Проверка ISO-образа с md5</a></li>
				<li><a href="cd-dl-burning-ru.htm#burn-nero">Записка ISO-образа под Windows</a></li>
				<li><a href="cd-dl-burning-ru.htm#burn-linux">Записка ISO-образа под Linux</a></li>
				<li><a href="cd-dl-burning-ru.htm#xdelta">Xdelta-патчи</a></li>
				<li><a href="cd-no-gui-burn-ru.htm#burning-no-gui">Записка ISO-образа без графической интерфейса</a></li>
			</ul>
		</li>
		<li  onmouseover="showHide( 4 );" onmouseout="startTime();" ><a href="live-mode-ru.htm">Режим LiveCD</a>
			<ul class="sub-menu" id="sm4">
				<li><a href="live-mode-ru.htm#rootpw">Пароль root на LiveCD</a></li>
				<li><a href="live-mode-ru.htm#live-cd-installsoft">Установка ПО в режиме LiveCD</a></li>
				<li><a href="live-mode-ru.htm#ntfs-3g">Запись на NTFS в режиме LiveCD</a></li>
			</ul>
		</li>
		<li  onmouseover="showHide( 9 );" onmouseout="startTime();" ><a href="term-konsole-ru.htm">Терминал/оболочка</a>
			<ul class="sub-menu" id="sm9">
				<li><a href="term-konsole-ru.htm#term-kon">Терминал/оболочка</a></li>
				<li><a href="term-konsole-ru.htm#cli-help">Помощь при использовании оболочки</a></li>
				<li><a href="term-konsole-ru.htm#term-cmds">Linux Terminal Commands</a></li>
				<li><a href="term-konsole-ru.htm#shell-scripts">Установка скриптов в терминале</a></li>
			</ul>
		</li>
		<li  onmouseover="showHide( 7 );" onmouseout="startTime();" ><a href="cheatcodes-ru.htm">Применение cheat кодов при загрузке</a>
			<ul class="sub-menu" id="sm7">
				<li><a href="cheatcodes-ru.htm#cheatcodes">Загрузочные коды</a></li>
				<li><a href="cheatcodes-vga-ru.htm#vga">Коды для видеоадаптера</a></li>
			</ul>
		</li>
		<li  onmouseover="showHide( 5 );" onmouseout="startTime();" ><a href="part-gparted-ru.htm">Разделение жесткого диска</a>
			<ul class="sub-menu" id="sm5">
				<li><a href="part-gparted-ru.htm#partition">Разделение с помошью gparted</a></li>
				<li><a href="part-gparted-ru.htm#ntfs">Изменение размера NTFS-разделов с gparted</a></li>
				<li><a href="part-uuid-ru.htm#uuid">UUID, названия жестких дисков и скрипт fstab</a></li>
				<li><a href="part-cfdisk-ru.htm#partition">Разделение с cfdisk</a></li>
				<li><a href="part-cfdisk-ru.htm#formating">Форматирование с cfdisk</a></li>
				<li><a href="part-size-examp-ru.htm#part-example">Размеры разделa: примеры</a></li>
			</ul>
		</li>
		<li  onmouseover="showHide( 8 );" onmouseout="startTime();" ><a href="hd-install-ru.htm">Способы установки</a>
			<ul class="sub-menu" id="sm8">
				<li><a href="hd-install-ru.htm#Inst-prep">Подготовка установки</a></li>
				<li><a href="hd-install-ru.htm#Installation">Установка на жесткий диск</a></li>
				<li><a href="hd-install-ru.htm#first-hd-boot">Первоначальная загрузка с жесткого диска</a></li>
				<li><a href="hd-install-opts-ru.htm#fromiso">Загрузка с ISO-образа 'fromiso'</a></li>
				<li><a href="hd-install-opts-ru.htm#usb-hd">Установка на USB-диск</a></li>
				<li><a href="hd-install-opts-ru.htm#qemu">Установка через qemu</a></li>
			</ul>
		</li>
		<li  onmouseover="showHide( 10 );" onmouseout="startTime();" ><a href="hw-dev-hw-dri-ru.htm">Видеоадаптеры, оборудование и модулы</a>
			<ul class="sub-menu" id="sm10">
				<li><a href="hw-dev-hw-dri-ru.htm#hd-ntfs3g">Запись на NTFS в режиме LiveCD</a></li>
				<li><a href="hw-dev-hw-dri-ru.htm#mon-res">Разрешение и экран монитора</a></li>
				<li><a href="hw-dev-hw-dri-ru.htm#non-free-3d">Binary, non-free drivers for: Nvidia / ATI</a></li>
				<li><a href="hw-dev-hw-dri-ru.htm#native-nv-ati">Free xorg drivers for nVidia, ATI, Radeon, Intel</a></li>
				<li><a href="hw-dev-hw-dri-ru.htm#non-free">Оборудование с коммерческими требованиями фирм</a></li>
			</ul>
		</li>
		<li  onmouseover="showHide( 12 );" onmouseout="startTime();" ><a href="wm-kde-ru.htm">Менеджер окон</a>
			<ul class="sub-menu" id="sm12">
				<li><a href="wm-kde-ru.htm#desk-freeze">Рабочий стол KDE зависает</a></li>
				<li><a href="wm-kde-ru.htm#kde-login">Проблемы при входе в KDE</a></li>
				<li><a href="wm-kde-ru.htm#ch-th">Смена тем</a></li>
			</ul>
		</li>
		<li  onmouseover="showHide( 14 );" onmouseout="startTime();" ><a href="lamp-apache-ru.htm">Сюита-пакет LAMP</a>
			<ul class="sub-menu" id="sm14">
				<li><a href="lamp-apache-ru.htm#serv-apache">Пакет LAMP в sidux</a></li>
				<li><a href="lamp-apache-ru.htm#serv-ftp">Клиенты FTP</a></li>
				<li><a href="lamp-apache-ru.htm#serv-sec">Надежные протоколы</a></li>
				<li><a href="lamp-apache-ru.htm#serv-ssl">SSL</a></li>
				<li><a href="lamp-sql-ru.htm#serv-mysql">Установка пакет MySQL</a></li>
				<li><a href="lamp-ppp-ru.htm#serv-php">Применение PHP в Apache</a></li>
			</ul>
		</li>
		<li  onmouseover="showHide( 15 );" onmouseout="startTime();" ><a href="sys-admin-apt-ru.htm">Neue Pakete installieren und Pakete löschen</a>
			<ul class="sub-menu" id="sm15">
				<li><a href="sys-admin-apt-ru.htm#apt-cook">Короткое руководство по apt</a></li>
				<li><a href="sys-admin-meta-ru.htm#meta-pack">Установка мета-пакетов</a></li>
				<li><a href="sys-admin-meta-ru.htm#meta-proxy">Установка Meta-пакеов и прохи</a></li>
				<li><a href="sys-admin-apt-ru.htm#apt-install">Установка новых пакетов</a></li>
				<li><a href="sys-admin-apt-ru.htm#apt-delete">Удаление пакетов</a></li>
				<li><a href="sys-admin-apt-ru.htm#apt-downgrade">Downgraden eines Pakets</a></li>
			</ul>
		</li>
		<li  onmouseover="showHide( 11 );" onmouseout="startTime();" ><a href="sys-admin-apt-ru.htm">Системная администрация</a>
			<ul class="sub-menu" id="sm11">
				<li><a href="sys-admin-apt-ru.htm#apt-upgrade">Обновление инсталлированной системы</a></li>
				<li><a href="sys-admin-upgrade-ru.htm#live-cd-upgrade">Системное обновление с LiveCD</a></li>
				<li><a href="sys-admin-kern-upg-ru.htm#kern-upgrade">Обновление ядра</a></li>
				<li><a href="sys-admin-rdiff-ru.htm#rdiff">backup с rdiff</a></li>
				<li><a href="sys-admin-rsync-ru.htm#rsync">backup с rsync</a></li>
				<li><a href="vir-rkits-ru.htm#virus-rkits">Антивирус-программы и сканеры rootkit</a></li>
				<li><a href="sys-admin-gen-ru.htm#start-services">Запуск служб в sidux</a></li>
				<li><a href="sys-admin-gen-ru.htm#pw-lost">Забытый пароль root</a></li>
				<li><a href="sys-admin-gen-ru.htm#fonts">Виды шрифтов</a></li>
				<li><a href="sys-admin-grub-bootman2-ru.htm#mbr-grub-boot">Загрузочный сектор переписан</a></li>
				<li><a href="sys-admin-grub-bootman2-ru.htm#dual-boot">Dual and Multibooting</a></li>
				<li><a href="sys-admin-grub-bootman2-ru.htm#boot-grub-floppy">Создание загрузочной дискеты</a></li>
				<li><a href="sys-admin-grub-bootman2-ru.htm#remove-grub">Удаление grub с загрузочного сектора</a></li>
				<li><a href="sys-admin-grub-bootman2-ru.htm#what-is-grub">Grub - системный загрузчик</a></li>
			</ul>
		</li>
		<li  onmouseover="showHide( 3 );" onmouseout="startTime();" ><a href="internet-connecting-ru.htm">Интернет и локальная сеть</a>
			<ul class="sub-menu" id="sm3">
				<li><a href="ntp-server-ru.htm#ntp-server">Установка сервера NTP</a></li>
				<li><a href="tor-privoxy-ru.htm#tor">Tor</a></li>
				<li><a href="tor-privoxy-ru.htm#privoxy">Privoxy</a></li>
				<li><a href="internet-connecting-ru.htm#firewalls">Мини-брандмауэр</a></li>
				<li><a href="ssh-ru.htm#ssh-fs">Подключение к удаленному компьютеру через ssh</a></li>
				<li><a href="ssh-ru.htm#ssh-x">Применение программ в X-Windows через ssh</a></li>
				<li><a href="ssh-ru.htm#ssh-f">Графическое применение с konqueror и ssh</a></li>
				<li><a href="ssh-ru.htm#ssh-w">Поддержка графической оболочки на базе X через ssh</a></li>
				<li><a href="ssh-ru.htm#ssh">Безопасность и ssh</a></li>
				<li><a href="samba-ru.htm#configure">Использованиe папок в Windows через samba</a></li>
				<li><a href="samba-ru.htm#setup">Установка сервера samba</a></li>
				<li><a href="internet-connecting-ru.htm#dial-mod">56kбит-модемы</a></li>
				<li><a href="internet-connecting-ru.htm#ndiswrapper">Ndiswrapper</a></li>
				<li><a href="internet-connecting-wpa-ru.htm#wpa">Беспроводная локальная сеть WLAN</a></li>
				<li><a href="internet-connecting-ru.htm#internetsharing">Совместное использование интернета</a></li>
				<li><a href="internet-connecting-ru.htm#netcardconfig">Интернет и локальная сеть</a></li>
			</ul>
		</li>
	</ul>
<!-- menu ends here --> </div>
<div id="main-page">
	<div class="divider" id="mbr-grub-boot">
		<h2 id="top-header">Windows переписал мой загрузочный сектор. Как я могу теперь восстановить grub ?</h2>

		<p>В дальнейшем мы исходим из того, что на компьютере имеется 2 диска. На первом диске инсталлирован Windows, а на одном из разделов второго диска установлен sidux, например на hdb5.</p>

		<p>Загружаемся с Live-CD. Открываем терминал и становимся root'ом(суперпользователем) с помощью команды:</p>
<pre>
sudo su
</pre>

		<p>Монтируем раздел на котором установлен sidux, в нашем примере hdb5</p>
		<pre>mount /media/hdb5</pre>
		<p>Затем записываем grub в MBR (загрузочный сектор) первого диска:</p>

		<pre>grub-install --recheck --no-floppy --root-directory=/media/hdb5 /dev/hda</pre>
		
	</div>
	<div class="spacer05"></div>
	<div class="divider" id="boot-grub-floppy">
		<h2>Создание загрузочной дискеты</h2>

		<p>Во время процесса установки sidux на жесткий диск можно создать загрузочную дискету.  Здесь описанно, как это можно сделать задним числом.  Для этого нужно провести следующие шаги:</p>

		<p>1. Форматировать дискету</p>
		<pre>fdformat /dev/fd0</pre>

		<p>2.Создать файловую систему на дискете (желательно использовать ext2? или vfat)</p>
		<pre>mkfs -t ext2 -c /dev/fd0u1440 or mkfs.vfat /dev/fd0u1440</pre>

		<p>3. Монтировать дискету</p>
		<pre># mount /dev/fd0 /floppy</pre>

		<p>4. Создать структуру каталога на дискете</p>
		<pre>mkdir -p /floppy/boot/grub</pre>

		<p>5. Скопировать необходимые файлы на дискету</p>
<pre>cp /boot/grub/stage1 /floppy/boot/grub
cp /boot/grub/stage2 /floppy/boot/grub</pre>

		<p>6. Чтобы при загрузки компа с дискеты запустился sidux с правильного раздела, надо сделать следующее:</p>

		<p>7. Скопировать файл menu.lst на загрузочную дискету, файл который при установке sidux'а был записан в каталог /boot на sidux разделе</p>
		<pre>cp /boot/grub/menu.lst /floppy/boot/grub/menu.lst</pre>

		<p>8. Размонтировать дискету</p>
		<pre>umount /dev/fd0</pre>

		<p>9. Запустить grub, чтобы закончить конфигурацию. Для этого вводим:Hier gibst Du folgendes ein:</p>
		<pre>grub grub&gt; root (fd0) grub&gt; setup (fd0) grub&gt; quit</pre>

		<p>Таким образом мы создали загрузочный системный диск, с которого можно надежно загрузить sidux.</p>
		<p>Чтобы создать дискету под LiveCD, процедура немного отличается. 
 Например, sidux установлен на разделе /dev/hda5, тогда вместо шага 7 надо провести следущее: </p>

		<p>10. Монтировать sidux раздел</p>
		<pre>mount /dev/hda5 /media/hda5</pre>

		<p>11. Скопировать файл menu.lst на загрузочную дискету, файл который при установке sidux'а был записан в каталог /boot на sidux разделе</p>
		<pre>cp /mnt/hda5/boot/grub/menu.lst /floppy/boot/grub/menu.lst</pre>

		<p>12. Размонтировать sidux раздел</p>
		<pre>umount /dev/hda5</pre>
		<p>Далее: шаги 8 и 9 как и в первом случае.</p>
	</div>
	<div class="divider" id="remove-grub">
		<h2>Удаление grub с загрузочного сектора</h2>

		<p>Введите как root (суперадминистратор)</p>
		<pre>lilo -M /dev/hda -s /dev/null</pre>

		<p>в консоль:</p>
	</div>
	<div class="divider" id="what-is-grub">
		<h2>Менеджер загрузки grub</h2>

		<h3>Введение</h3>

		<p>grub - это менеджер загрузки, который может загружать операционные системы с различных разделов. grub не зависит от блочных списков (blocklists), используемых для поиска файлов, необходимых для запуска системы. Менеджер загрузки поддерживает большое число файловых систем: ext2?, ext3?, reiserfs... (Linux), Fat32, Fat16 (Windows), UFS (BSD), Minix и многие другие.</p>

		<p>grub использует расширения BIOS (таким образом может загружать системы с разделов, расположенных даллее 8 Гб) и не имеет ограничения на 1024 цилиндра. Для Grub не имеет значения, где находится физически ядро загружаемой ОС, ему достаточно знать раздел и путь к файлам ядра (или их символическим ссылкам). После изменения конфигурации (т.е файла menu.lst) нет необходимости в вызове программы (как в случае с lilo) - новые настройки будут автоматически восприняты при следующей загрузке.</p>

                <p>sidux использует Grub при загрузке компьютера с LiveCD. Как стандартный загрузчик при работе с жесткого диска използьуется также grub Однако, grub без каких-либо проблем может быть установлен и позже. Для установки grub в MBR необходимo из оболочки root выполнить команду.</p>

		<pre>grub-install --root-directory=/media/hdaX /dev/hdY</pre>

		<p>/media/hdaX -  это раздел, смонтированный с правами на запись, на котором в директории <i>/boot/grub</i> будут размещены файлы (stage2, stage1_5xxx).<br /> Файл конфигурации menu.lst должен находиться в этой директории. /dev/hdY - это диск в MBR которого должен быть записан код запуска, обычно это /dev/hda.</p>

		<h3>Обозначения дисков и имена устройств</h3>

		<p>grub не делает различия между SCSI-и IDE жесткими дисками. (hd0) - всегда первый жесткий диск, который является первым в последовательности загрузки устанавливающейся в BIOS), независимо от того является ли он IDE или SCSI. Несколько необычен метод нумерации разделов, принятый в grub: первый раздел на первом жестком диске обозначается как (hd0,0). Первичные разделы нумеруются от 0 до 3, а логические разделы от 4 и далее.</p>

		<table>
			<tbody>
				<tr>
					<th><b>Grub</b></th>
					<th><b>Linux</b></th>
					<th><b>Label</b></th>
				</tr>
				<tr>
					<td>(fd0)</td>
					<td>/dev/fd0</td>
					<td>дискета (под Windows)</td>
				</tr>
				<tr>
					<td>(hda0)</td>
					<td>/dev/hda</td>
					<td>первый жёсткый диск</td>	
				</tr>
				<tr>
					<td>(hd0,0)</td>
					<td>/dev/hda1</td>
					<td>первое разделение на первом жёстком диске</td>	
				</tr>
				<tr>
					<td>(hd0,5)</td>
					<td>/dev/hda6</td>
					<td>разширенное разделение на первом жёстком диске auf hd 1</td>	
				</tr>
			</tbody>
		</table>
	<div class="spacer05"></div>
		<p>Все обозначения устройств в grub берутся в скобки ( ). Тем не менее, следует обратить внимание на запись параметров, передаваемых ядру. В противоположность grub параметры ядра должны быть записаны в обычном для Linux виде. В следующем примере обе записи указывают на один и тот же раздел, а именно на четвертый раздел первого диска. Первая запись в стиле grub, а вторая в виде, типичном для Linux:</p>
		<pre>root (hd0,3)
		kernel /boot/vmlinuz root=/dev/hda4</pre>

		<h3>Командный режим (grub-shell)</h3>

		<p>Одним из особенно приятных свойств grub является наличие командного режима. Для входа в этот режим необходимо нажать клавишу "<b>c</b>" чтобы запустить оболочку grub. В этом режиме имеется возможность, даже при наличии испорченного файла menu.lst, находить и загружать различные системы и файлы (например ядро).</p>

		<p>Для того, чтобы иметь возможность немного попрактиковаться можно при загруженном sidux запустить grub из оболочки root с помощью команды <span># grub</span>. В командном режиме grub можно получить справку о всех доступных командах. Для этого нужно выполнить инструкцию "<b>help</b>". Подробную информацию о каждой команде можно получить выполнив "<b>help &lt;команда&gt;</b>". Выйти из командного режима grub можно с помощью инструкции <b>quit</b>". Большой помощью является тот факт, что в оболочке grub клавиша табуляции (Tab) работает так же как и в оболочке Linux, т.е. команды, имена дисков, разделов и файлов могут быть автоматически дополнены ее нажатием.</p>

		<p>grub дает возможность определить и наити даже перед началом загрузки местонахождение ядра и файл initrd, по команде <b>find</b>", например grub выдает при</p>
		<pre>find /boot/vmlinuz</pre>

		<p>список разделов, на которых в директории <i>/boot</i> находится файл ядра <i>vmlinuz</i>:</p>
		<pre>(hd0,3) (hd1,0)</pre>

		<p>С помощью команды "<b>geometry</b>" можно выяснить параметры интересующего раздела. Например на запрос:</p>
		<pre>geometry (hd0)</pre>

		<p>показывается следующее:</p>
		<pre>"drive 0x80: C/H/S = 3648/255/63, The number of sectors = 58605120, /dev/hda Partition num: 0,
		Filesystem type is fat, partition type 0xb Partition num: 1,
		Filesystem type is fat, partition type 0xb Partition num: 2,
		Filesystem type is fat, partition type 0xc Partition num: 4,
		Filesystem type is ext2fs, partition type 0x83 Partition num: 5,
		Filesystem type unknown, partition type 0x82 Partition num: 6,
		Filesystem type is fat, partition type 0xb"
		</pre>
		<p>После того как ядро и, возможно, имеющийся <i>initrd</i> (или <i>miniroot.gz</i>) найдены, можно начать загрузку командой <b>boot</b>.</p>


		<h3>Режим редактирования</h3>

		<p>Этот режим позволяет изменять пункты в <i>menu.lst</i> в процессе загрузки. Эта возможность существует даже тогда, когда grub загружается с LiveCD и файл menu.lst защищен от записи. Для входа в этот режим следует нажать <b>ESC</b>клавишу, затем для подтверждения <b>Return</b> клавишу и, наконец, "e" клавишу. После этого параметры будут дописаны в конец строки. Перемещение в строке осуществляется с помощью клавиш курсора.</p>


		<h3>menu.lst (примеры)</h3>

		<p>Строки с коментариями начинают с символа "#" и не мешают процессу загрузки, т.о. они могут быть оставленны в файле menu.lst.</p>

<pre># примеры содержания: /boot/grub/menu.lst
################################################
# setkey меняет раскладку клавиатуры на немецкую
setkey y z
setkey z y
setkey Y Z
setkey Z Y
setkey equal parenright
setkey parenright parenleft
setkey parenleft asterisk
setkey doublequote at
setkey plus bracketright
setkey minus slash
setkey slash ampersand
setkey ampersand percent
setkey percent caret
setkey underscore question
setkey question underscore
setkey semicolon less
setkey less numbersign
setkey numbersign backslash
setkey colon greater
setkey greater bar
setkey asterisk braceright
# Установка времени задержки перед началом автоматической загрузки в секундах.
# В течение этого времени можно нажать "e" или "c" для входа в соответствующий режим (редактирования или командный).
timeout 30
# Установка системы, которая будет загружена по умолчанию по истечении таймаута
default 0
# Запоминание последнего загруженного раздела, если в заголовке стоит "savedefault"
#default saved
# Загружается в том случае, если загрузка была прерванна из-за ошибки
fallback 1
# Установка цвета шрифта и фона
# Шрифт: мигающий красный; Фон: синий
# Пункт 1 (выбор по умолчанию 0) и загружает, например, Windows 98
#################
title Windows 98 (partition 1 on disk 1)
rootnoverify (hd0,0)
makeactive
chainloader +1
# Пункт 2 (выбор по умолчанию 1) и загружает, например, Windows 2000
#################
title Windows 2000 (partition 2 o?n disk 1)
rootnoverify (hd0,1)
makeaktive
chainloader
/bootsect.dos
# Пункт 3 (выбор по умолчанию 2) и загружает SuSE
##################
title Suse-Linux
root (hd1,5)
kernel /boot/vmlinuz
root=/dev/hdb6 read-only
# возможны и другие параметры, например:
# kernel /boot/vmlinuz root=/dev/hdb6 single kernel /boot/vmlinuz root=/dev/hdb6 vga=ask
# Пункт 4 (выбор по умолчанию 3) и загружает Debian
##################
title GNU/Debian (first extended partition o?n disk 2)
root (hd1,4)
kernel /boot/vmlinuz
root=/dev/hdb5 read-only
#  Пункт 5 (выбор по умолчанию 4) и загружает DOS
##################
title DOS (partition 3 o?n disk 1)
root (hd0,2)
makeactive chainloader +1
# Пункт 6 (выбор по умолчанию 5) и загружает систему с дискеты
title floppy
chainloader (fd0)+1
</pre>

	</div>
	<div class="divider" id="dual-boot">
			<h2>Dual and Multiple Booting</h2>

			<p>To enable multiple grub OS booting is very simple with the use of chainloading. If for example you want to run a MS Windows (TM)  and Debian etch OS along with a sidux  'fromiso' installation , you will need to customise grub a bit, Therefore  edit the file <span class="highlight-3">/boot/grub/menu.lst </span>and add the following lines after the <span class="highlight-3">### END DEBIAN AUTOMAGIC KERNELS LIST</span>:</p>


<pre>
### MS Windows XP (TM)
title Windows 2K/XP/2003 (hda1)
chainloader (hd0,0)+1

### Debian etch
title Debian etch
kernel (hd0,3)debian/vmlinuz root=/dev/hda4 ro (or whatever)
initrd (hd0,3)/debian/miniroot.gz (or (whatever)

### ISO boot
title sidux 32bit from ISO
kernel (hd0,5)/sidux/vmlinuz boot=fll quiet vga=791 fromiso=/sidux/sidux.iso
initrd (hd0,5)/sidux/miniroot.gz
</pre>

		<p>Некоторые люди хотят/вынужденны иметь несколько инсталляций Windows на компьютере. Однако, системы этого семейства всегда запускают с 1-го диска. Таким образом, необходимо один из разделов скрыть, а другой активировать. Последующие команды должны быть введены в командную строку grub и, в случае успеха, добавлены в menu.lst. Сделать это следует для каждого Windows-раздела. Не забудьте о резервном копировании! ;-)</p>

<pre>hide (hd0,0) # скрыть 1-й раздел на 1-ом диске
unhide (hd0,1) # показать 2-й раздел на 1-ом диске
rootnoverify (hd0,1) # сделать 2-й раздел на 1-ом диске к корневой файловой системе
makeactive # активировать 2-й раздел на 1-ом диске
chainloader +1 # показывает на 1-й сектор стартового раздела
boot # загружает операционную систему</pre>

		<p>Для того чтобы загрузить вторую Windows со второго диска, надо виртуально поменять местами диски 1 и 2. Таким образом для Windows будет симулироваться первый диск:</p>
<pre>map (hd0) (hd1)
map (hd1) (hd0)
</pre>


		<h3>Возможные трудности</h3>

		<p>Хотя grub не имеет ограничения на 1024-цилиндрa и может загружать системы, расположенные далее, тем не менее файл /boot/grub/stage2 должен быть доступен посредством базовой системы ввода-вывода BIOS (должен быть расположен до 1024 цилиндра).  Файл stage2 не может быть перемещен после инсталляции (например, программа defrag может попытаться это сделать), , т.к. в этом случае данные, записанные во время установки Grub теряют свою актуальность. Кроме того, разумно так же защитить файл stage2 от записи. Для этого, находясь в директории grub, выполнить следующие команды:</p>
<pre>Dos: attrib +r +s stage2
LINUX: # chmod a -w ./stage2
</pre>


		<h3>Вы заинтересовались?</h3>

		<p>..тогда создай или скачай из интернета <a href="http://sidux.com/files/misc/grubboot.zip">имидж дискет с grub</a> (ca. 580 Кб) и попробуйте! На дискете также установленны функционирующая версия FreeDOS и редактор. Если удалить письменную защиту дискеты, то можно редактировать menu.lst на дискете. Содержание этого файла можно изменить по желанию.</p>

		<p>Кроме того, болeе можно узнать в <a href="http://www.gnu.org/software/grub/grub-faq.de.html">официальных ЧАВО к grub</a>.</p>

		<p>Если имеется поддержанную сетевую карту, Linux может загрузить по сети. Соответствующий <a href="http://os.inf.tu-dresden.de/%7Efm3/grub.html">Загрузочный диск может быть получен здесь</a> (одинако, со старшей версией grub).</p>
		
	</div>
			<div id="rev">Содержание, последнее пересмотрено UTC 03/03/2007 </div>
</div>
</body>
</html>
