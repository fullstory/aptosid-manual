<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
   "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="ru" lang="ru">
<head>
	<title>Руководство aptosid  - grub2</title>
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
	<style type="text/css" media="all">@import url("../lib/css-js/content.css");</style>
	<style type="text/css" media="all">@import url("../lib/css-js/menu.css");</style>
	<style type="text/css" media="print">@import url("../lib/css-js/print.css");</style>
        <link rel ="shortcut icon" href="../lib/favicon/manual.ico" />
        <script type="text/javascript" src="../lib/css-js/menu2.js"></script>
        <!--[if lt IE 8]>
        <link rel="stylesheet" type="text/css" href="../lib/css-js/ie_5-7_override.css">
        <![endif]-->
        <!--[if lt IE 7]>
        <link rel="stylesheet" type="text/css" href="../lib/css-js/ie_5-6_override.css">
        <![endif]-->
</head>
<body>
<!-- Last translation revision by polix 30/12/2011 1350hrs UTC -->
<!--htdig_noindex--><div id="menu"> <!-- menu starts here - ru language maintained by RoEn -->
<!--aptosid Operating System Manual menu-version-02.15.2013.01.10 -->
<!-- menu last updated by bluewater 2013.01.10 0910 hrs UTC -->
<ul>
<li></li>
<li><a></a></li>
</ul>
	<div id="menu-header">
	      <a href="http://aptosid.com/"><img src="../lib/logos/manual-aptosid-logo.png" title="Главная страница aptosid.com, форума и вики" alt="aptosid.com logo" /></a>
	</div>
	<ul id="top-list">
		<li><a href="manual-search-ru.htm#search-on"><img src="../lib/logos/manual-search-22x22.png" title="Поиск в руководстве" alt="Search" /> Варианты поиска</a> </li>
	</ul>
	<div id="flags-2">
			<a href="../flag-index.html"><img src="../lib/logos/aptosid-lang-100x64.png" title="Выбор языка - Choose another language CZ, DA, DE, EN, ES, FR, IT, JA, NL, PL, PT, RO, RU, UK" alt="Переключение языка CZ, DA, DE, EN, ES, FR, IT, JA, NL, PL, PT, RO, RU, UK" /></a>
	</div>
	<ul>
<li onmouseover="showHide( 1 );" onmouseout="startTime();" ><a href="welcome-ru.htm">Руководство aptosid</a>
			<ul class="sub-menu" id="sm1">
				<li><a href="welcome-ru.htm#welcome-gen">Добро пожаловать! &#8658;</a>
					<ul class="sub2-menu" id="sm1a">
					  <li><a href="credits-ru.htm#cred-team">Благодарности</a></li>
					</ul>
					</li>
		<li><a href="welcome-ru.htm#how-to">Об использовании &#8658;</a>
					<ul class="sub2-menu" id="sm1b">
					  <li><a href="welcome-ru.htm#how-to">Об использовании</a></li>
					  <li><a href="welcome-ru.htm#table-contents">Содержание</a></li>
					</ul>
					</li>
		<li><a href="help-ru.htm#help-gen">Получение помощи &#8658;</a>
					<ul class="sub2-menu" id="sm1c">
					  <li><a href="help-ru.htm#help-gen">Где получить помощь</a></li>
					  <li><a href="help-ru.htm#paste">IRC !paste</a></li>
					</ul>
					</li>
		<li><a href="wel-quickstart-ru.htm#welcome-quick">Краткое руководство aptosid</a></li>
		</ul>
		</li>
<li  onmouseover="showHide( 2 );" onmouseout="startTime();" ><a href="cd-dl-burning-ru.htm">Содержание ISO-образа, выпуски, список зеркал и запись</a>
			   <ul class="sub-menu" id="sm2">
				<li><a href="cd-content-ru.htm#cd-content">Содержание ISO-образа и системные требования &#8658;</a>
					<ul class="sub2-menu" id="sm2a">
					  <li><a href="sys-admin-release-ru.htm#rolling">Замечания к релизу</a></li>
					</ul>
					</li>
		    <li><a href="cd-dl-burning-ru.htm#download-aptosid">Список зеркал, скачивание ISO-образа и запись &#8658;</a>
				<ul class="sub2-menu" id="sm2b">
					  <li><a href="cd-dl-burning-ru.htm#md5">Проверка ISO-образа с md5</a></li>
					  <li><a href="cd-dl-burning-ru.htm#burn-nero">Запись ISO-образа в Windows</a></li>
					  <li><a href="cd-dl-burning-ru.htm#burn-linux">Запись ISO-образа в Linux</a></li>
					  <li><a href="cd-no-gui-burn-ru.htm#burning-no-gui">Скрипт burniso</a></li>
					  <li><a href="cd-no-gui-burn-ru.htm#burn-no-gui-gen">Запись ISO-образа в консоли</a></li>
					  <li><a href="cd-dl-burning-ru.htm#download-aptosid">Список зеркал</a></li>
					</ul>
					</li>
		      </ul>
		</li>
<li  onmouseover="showHide( 3 );" onmouseout="startTime();" ><a href="live-mode-ru.htm">Режим ISO-образа</a>
			<ul class="sub-menu" id="sm3">
				<li><a href="live-mode-ru.htm#rootpw">Пароль root на ISO-образе</a></li>
				<li><a href="live-mode-ru.htm#live-cd-installsoft">Установка ПО на ISO-образе</a></li>
			</ul>
		</li>
<li  onmouseover="showHide( 4 );" onmouseout="startTime();" ><a href="term-konsole-ru.htm">Терминал и оболочка</a>
			<ul class="sub-menu" id="sm4">
				<li><a href="term-konsole-ru.htm#term-kon">Терминал и оболочка &#8658;</a>
					<ul class="sub2-menu" id="sm4a">
					  <li><a href="term-konsole-ru.htm#term-kon">Терминал и оболочка</a></li>
					  <li><a href="term-konsole-ru.htm#colours"> Цветная подсказка в терминале</a></li>
					  <li><a href="term-konsole-ru.htm#cli-help">Помощь в терминале</a></li>
					  <li><a href="help-ru.htm#init3-tools">Полезные инструменты в текстовом режиме (tty) - init 3</a></li>
					  <li><a href="term-konsole-ru.htm#term-cmds">Команды в терминале</a></li>
					</ul>
					</li>
			  <li><a href="term-konsole-ru.htm#sux">Команда: sux/sudo</a></li>
		    </ul>
		</li>
<li  onmouseover="showHide( 5 );" onmouseout="startTime();" ><a href="cheatcodes-ru.htm">Чит-коды</a>
			<ul class="sub-menu" id="sm5">
				<li><a href="cheatcodes-ru.htm#cheatcodes">Особые для ISO-образа aptosid чит-коды</a></li>
				<li><a href="cheatcodes-ru.htm#cheatcodes-linux">Общие для параметров ядра чит-коды</a></li>
				<li><a href="cheatcodes-vga-ru.htm#vga">Общие для видеокарты коды</a></li>
			</ul>
		</li>
<li  onmouseover="showHide( 6 );" onmouseout="startTime();" ><a href="part-gparted-ru.htm">Разбиение жесткого диска - по старому, GPT и LVM</a>
		<ul class="sub-menu" id="sm6">
			<li><a href="part-gparted-ru.htm#hd-ntfs3g">Запись на раздел NTFS с ntfs-3g</a></li>
			<li><a href="part-lvm-ru.htm#part-lvm">Разметка с использованием LVM - Logical Volume Manager</a></li>
			<li><a href="part-gparted-ru.htm#partition">Разметка диска с интерфесом &#8658;</a>
					<ul class="sub2-menu" id="sm6a">
					  <li><a href="part-gparted-ru.htm#partition">Разметка диска с gparted/KDE Partition Manager</a></li>
					  <li><a href="part-gparted-ru.htm#ntfs">Разделы NTFS с gparted/KDE Partition Manager</a></li>
					</ul>
					</li>
		<li><a href="part-cfdisk-ru.htm#partition">Примеры разметки диска в консоли &#8658;</a>
					 <ul class="sub2-menu" id="sm6b">
					    <li><a href="part-cfdisk-ru.htm#partition">Разметка диска с cfdisk</a></li>
					    <li><a href="part-cfdisk-ru.htm#formating">Форматирование разделов с cfdisk</a></li>
					    <li><a href="part-gdisk-ru.htm#gdisk-6">Форматирование после разметки с gdisk</a></li>
					    <li><a href="part-gdisk-ru.htm#gdisk-1">Разбиение по GPT с gdisk</a></li>
					</ul>
					</li>
		<li><a href="part-size-examp-ru.htm#part-example">Разметка диска - обзор &#8658;</a>
					<ul class="sub2-menu" id="sm6c">
					  <li><a href="part-size-examp-ru.htm#part-example">Примеры разметки диска</a></li>
					  <li><a href="part-uuid-ru.htm#uuid">UUID, восстанавление fstab и создание новых точек монтирования</a></li>
					  <li><a href="part-cfdisk-ru.htm#disknames">Имена жестких дисков</a></li>
					</ul>
					</li>
		      </ul>
		</li>
<li  onmouseover="showHide( 7 );" onmouseout="startTime();" ><a href="hd-install-ru.htm">Установка aptosid на HD, USB, UEFI, VM и шифрованные разделы</a>
		<ul class="sub-menu" id="sm7">
		  <li><a href="hd-install-ru.htm#Inst-prep">Подготовка установки &#8658;</a>
					<ul class="sub2-menu" id="sm7a">
					  <li><a href="hd-install-ru.htm#Inst-prep">Подготовка установки</a></li>
					  <li><a href="hd-install-ru.htm#Installation">Инсталляция на HD</a></li>
					  <li><a href="hd-install-ru.htm#first-hd-boot">Первая загрузка</a></li>
					</ul>
					</li>
		<li><a href="hd-install-opts-ru.htm#fromiso">Загрузка 'fromiso' &#8658;</a>
					<ul class="sub2-menu" id="sm7b">
					  <li><a href="hd-install-opts-ru.htm#fromiso">Загрузка 'fromiso' - обзор</a></li>
					  <li><a href="hd-install-opts-ru.htm#grub2-fromiso">Загрузка 'fromiso' с grub 2</a></li>
					  <li><a href="hd-install-opts-ru.htm#fromiso-persist">Способы 'fromiso' и 'persist'</a></li>
					</ul>
					</li>
		<li><a href="hd-install-opts-ru.htm#usb-hd">Инсталляция на USB &#8658;</a>
					<ul class="sub2-menu" id="sm7c">
					  <li><a href="hd-install-opts-ru.htm#usb-hd">Инсталляция на USB-HD - способ aptosid -  aptosid-на-флешки</a></li>
					  <li><a href="hd-ins-opts-oos-ru.htm#raw-usb">Запись aptosid на USB/SSD с помощью другого Linux, MS Windows или Mac OS</a></li>
					</ul>
					</li>
		  <li><a href="hd-install-ru.htm#efi">UEFI Booting</a></li>
		  <li><a href="hd-install-crypt-ru.htm#install-crypt">Установка на шифрованные разделы - cryptroot</a></li>
		  <li><a href="nbdboot-ru.htm#nbd1">Загрузка aptosid по сети</a></li>
		  <li><a href="hd-install-vmopts-ru.htm#vmopts">Опции инсталляций на VM (Virtual Machine)</a></li>
		</ul>
		</li>
<li  onmouseover="showHide( 8 );" onmouseout="startTime();" ><a href="gpu-ru.htm">Оборудование в Xorg и разные драйверы</a>
	<ul class="sub-menu" id="sm8">
		<li><a href="hw-dev-mon-ru.htm#mon-res">Разрешение экрана и мониторы  &#8658;</a>
					<ul class="sub2-menu" id="sm8a">
					  <li><a href="hw-dev-mon-ru.htm#mon-res">Разрешение экрана и мониторы</a></li>
					  <li><a href="hw-dev-mon-ru.htm#xrandr">Двойные экраны и xrandr</a></li>
					  <li><a href="hw-dev-mon-ru.htm#mon-binary">Двойные экраны (используя двоичные файлы)</a></li>
					</ul>
					</li>
		<li><a href="gpu-ru.htm#foss-xorg">Микропрограммное обеспечение GPU &#8658;</a>
					<ul class="sub2-menu" id="sm8b">
					  <li><a href="gpu-ru.htm#ati-3d">AMD/ATI 3D драйверы</a></li>
					  <li><a href="gpu-ru.htm#intel">Intel 2D и 3D драйверы</a></li>
					  <li><a href="gpu-ru.htm#nvidia">Nvidia 3D драйверы</a></li>
					  <li><a href="gpu-ru.htm#foss-xorg">Свободные Xorg-драйверы</a></li>
					</ul>
					</li>
			  <li><a href="nf-firm-ru.htm#fw-detect">Определение несвободного микропрограммного обеспечения - non-free </a></li>
			  <li><a href="nf-firm-ru.htm#non-free-firmware">Добавление non-free в список источников</a></li>
		</ul>
		</li>
<li  onmouseover="showHide( 9 );" onmouseout="startTime();" ><a href="wm-dm-ru.htm">Оконные менеджеры</a>
		    <ul class="sub-menu" id="sm9">
			  <li><a href="wm-dm-ru.htm">Оконные менеджеры KDE и Xfce&#8658;</a>
					  <ul class="sub2-menu" id="sm9a">
					    <li><a href="wm-dm-ru.htm#xfce-notes">Полезные инструменты для Xfce</a></li>
					    <li><a href="wm-dm-ru.htm#install-add">Полезные инструменты для KDE</a></li>
					    <li><a href="wm-dm-ru.htm#desk-freeze">Рабочий стол зависает</a></li>
					    <li><a href="wm-dm-ru.htm#kde-login">Проблемы входа в KDE</a></li>
					    <li><a href="wm-dm-ru.htm#ch-th">Управление темами</a></li>
					</ul>
					</li>
		      <li><a href="wm-dm-ru.htm#dm">Установква дополнительных дисплейных менеджеров</a></li>
		</ul>
		</li>
<li  onmouseover="showHide( 11 );" onmouseout="startTime();" ><a href="inet-ceni-ru.htm">Интернет, Wifi и локальная сеть</a>
		    <ul class="sub-menu" id="sm11">
			<li><a href="lamp-apache-ru.htm">Мета-пакет LAMP &#8658;</a>
					<ul class="sub2-menu" id="sm11a">
					    <li><a href="lamp-apache-ru.htm#serv-apache">Мета-пакет LAMP</a></li>
					    <li><a href="lamp-apache-ru.htm#serv-ftp">Клиенты FTP</a></li>
					    <li><a href="lamp-apache-ru.htm#serv-sec">Защищенные протоколы</a></li>
					    <li><a href="lamp-apache-ru.htm#serv-ssl">SSL</a></li>
					    <li><a href="lamp-sql-ru.htm#serv-mysql">Настройка MySQL</a></li>
					    <li><a href="lamp-ppp-ru.htm#serv-php">PHP в apache</a></li>
					    <li><a href="ntp-server-ru.htm#ntp-server">Установка сервера времени</a></li>
					</ul>
					</li>
		<li><a href="tor-privoxy-ru.htm#tor">Брандмауэры и веб-прокси &#8658;</a>
					<ul class="sub2-menu" id="sm11b">
					    <li><a href="tor-privoxy-ru.htm#tor">Маршрутизатор tor</a></li>
					    <li><a href="tor-privoxy-ru.htm#privoxy">Веб-прокси privoxy</a></li>
					    <li><a href="inet-ceni-ru.htm#firewalls">Брандмауэры</a></li>
					</ul>
					</li>
		<li><a href="ssh-ru.htm#ssh-x">Samba и ssh &#8658;</a>
					<ul class="sub2-menu" id="sm11c">
						  <li><a href="samba-ru.htm#setup">Сервер samba</a></li>
						  <li><a href="samba-ru.htm#configure">Интеграции samba в сеть Windows</a></li>
						  <li><a href="ssh-ru.htm#ssh-fs">Удаленное монтирование с ssh</a></li>
						  <li><a href="ssh-ru.htm#ssh-x">Приложения X-Windows с ssh</a></li>
						  <li><a href="ssh-ru.htm#ssh-f">Интерфейс ssh и Konqueror</a></li>
						  <li><a href="ssh-ru.htm#ssh-w">ssh X-forwarding с Windows-компом</a></li>
						  <li><a href="ssh-ru.htm#ssh">Безопасность с ssh</a></li>
					</ul>
					</li>
		<li><a href="inet-ceni-ru.htm#netcardconfig">Связи с WiFi &#8658;</a>
						<ul class="sub2-menu" id="sm11d">
						    <li><a href="inet-ceni-ru.htm#netcardconfig">Настройка сетевых карт с ceni</a></li>
						    <li><a href="inet-wpagui-ru.htm#wpa-roaming-gui">Графическoe ппиложение wpa_gui для WiFi</a></li>
						    <li><a href="inet-setup-ru.htm#net-set1">Роуминг с WiFi</a></li>
						    <li><a href="inet-wpa-ru.htm#wpa">WiFi - wpasupplicant</a></li>
						    <li><a href="inet-ifplug-ru.htm#hotswitch">Переключение сети между WiFi и проводной связью</a></li>
					</ul>
					</li>
		<li><a href="inet-ceni-ru.htm#netcardconfig">Проводная связь &#8658;</a>
						<ul class="sub2-menu" id="sm11e">
						    <li><a href="inet-ceni-ru.htm#dial-mod">56килобитовые модемы</a></li>
						    <li><a href="inet-ceni-ru.htm#netcardconfig">Настройка сетевых карт с ceni</a></li>
					</ul>
					</li>
		<li><a href="nf-firm-ru.htm#fw-detect">Определение несвободного микропрограммного обеспечения - non-free </a></li>
		<li><a href="nf-firm-ru.htm#non-free-firmware">Добавление non-free в список источников</a></li>			
				</ul>
			    </li>
<li  onmouseover="showHide( 12 );" onmouseout="startTime();" ><a href="sys-admin-apt-ru.htm">Управление пакетами и обновление системы с dist-upgrade</a>
	<ul class="sub-menu" id="sm12">
		<li><a href="sys-admin-apt-ru.htm#apt-cook">apt и репозитории &#8658;</a>
					<ul class="sub2-menu" id="sm12a">
					    <li><a href="sys-admin-apt-ru.htm#apt-cook">apt и репозитории</a></li>
					    <li><a href="sys-admin-apt-ru.htm#apt-install">Установка нового пакета</a></li>
					    <li><a href="sys-admin-apt-ru.htm#apt-delete">Удаление пакета</a></li>
					    <li><a href="sys-admin-apt-ru.htm#apt-downgrade">Понижение версии с hold</a></li>
					    <li><a href="sys-admin-apt-ru.htm#apt-cache">Поиск пакетной иформации с apt-cache</a></li>
					    <li><a href="sys-admin-apt-ru.htm#gui-pacsea">Графическая поисковая программа</a></li>
					</ul>
				</li>
		<li><a href="sys-admin-kern-upg-ru.htm#kern-upgrade">Обновление ядра &#8658;</a>
					<ul class="sub2-menu" id="sm12b">
					    <li><a href="sys-admin-kern-upg-ru.htm#kern-remove">Удаление ядра</a></li>
					    <li><a href="sys-admin-kern-upg-ru.htm#kern-upgrade">Обновление ядра</a></li>
					    <li><a href="sys-admin-kern-upg-ru.htm#dmakms">Динамическая инсталляция модулей ядра с dmakms</a></li>
					</ul>
				</li>
		<li><a href="sys-admin-apt-ru.htm#apt-upgrade">Обновления системы с dist-upgrade - Краткий обзор &#8658;</a>
					<ul class="sub2-menu" id="sm12c">
					    <li><a href="sys-admin-upgrade-ru.htm#live-cd-upgrade">Обновление с ISO-образа</a></li>
					    <li><a href="sys-admin-apt-locarmirr-ru.htm#approx">Обновление нескольких компьютеров в локальной сети</a></li>
					    <li><a href="sys-admin-apt-ru.htm#apt-upgrade">Краткий обзор oбновления системы с dist-upgrade</a></li>
					    <li><a href="sys-admin-apt-ru.htm#du-st">Шаги обновления системы с dist-upgrade</a></li>
					</ul>
				  </li>
			    </ul>
		</li>
<li  onmouseover="showHide( 13 );" onmouseout="startTime();" ><a href="sys-admin-gen-ru.htm">Системное администрирование</a>
	<ul class="sub-menu" id="sm13">
		<li><a href="bios-freedos-ru.htm#bois-prep">Обновление BIOS с FreeDOS</a></li>
		<li><a href="vir-rkits-ru.htm#virus-rkits">Сканер безопасности</a></li>
		<li><a href="hd-install-ru.htm#adduser">Новый пользователь и пароли &#8658;</a>
					<ul class="sub2-menu" id="sm13a">
					    <li><a href="hd-install-ru.htm#adduser">Добавление нового пользователя</a></li>
					    <li><a href="sys-admin-gen-ru.htm#pw-lost">Восстановление root-пароля</a></li>
					</ul>
					</li>
		<li><a href="sys-admin-gen-ru.htm#start-services">Службы и режимы загрузки &#8658;</a>
					<ul class="sub2-menu" id="sm13b">
					    <li><a href="sys-admin-gen-ru.htm#start-services">Выбор служб</a></li>
					    <li><a href="sys-admin-gen-ru.htm#pkill">Завершениe службы или процесса</a></li>
					    <li><a href="sys-admin-gen-ru.htm#init">Режимы загрузки init в aptosid</a></li>
					</ul>
					</li>
		<li><a href="sys-admin-rsync-ru.htm#rsync">Резервирование системы &#8658;</a>
					  <ul class="sub2-menu" id="sm13c">
					    <li><a href="sys-admin-rdiff-ru.htm#rdiff">Резервирование с rdiff</a></li>
					    <li><a href="sys-admin-rsync-ru.htm#rsync">Резервирование с rsync</a></li>
					    <li><a href="home-ru.htm#home-bu">Перемещение /home</a></li>
					</ul>
					</li>
		<li><a href="sys-admin-gen-ru.htm#fonts">Cups, шрифты и звук &#8658;</a>
					  <ul class="sub2-menu" id="sm13d">
					     <li><a href="sys-admin-gen-ru.htm#fonts">Шрифты</a></li>
					     <li><a href="sys-admin-gen-ru.htm#cups">Сервер cups</a></li>
					     <li><a href="sys-admin-gen-ru.htm#sound">Звуковые микшеры</a></li>
					</ul>
					</li>
		<li><a href="sys-admin-grub2-ru.htm#grub2">Grub2 &#8658;</a>
					  <ul class="sub2-menu" id="sm13f">
					    <li><a href="sys-admin-grub2-ru.htm#chroot">Grub2 - Восстановление grub с chroot</a></li>
					    <li><a href="sys-admin-grub2-ru.htm#mbr-over-grub2">Grub2 - Удаление из MBR</a></li>
					    <li><a href="sys-admin-grub2-ru.htm#multi-os">Grub2 - Двойная и мультизагрузка</a></li>
					    <li><a href="sys-admin-grub2-ru.htm#grub1-grub2">Grub2 - Обновление с grub1</a></li>
					    <li><a href="sys-admin-grub2-ru.htm#grub2">Grub2 - Краткий обзор</a></li>
					</ul>
				  </li>
			    </ul>
		</li>
<li><a></a></li>
</ul>

<div id="menu-header-5">
<a href="http://aptosid.com/index.php?module=Content&amp;func=view&amp;pid=8"><img src="../lib/logos/aptosid_donate_75.png" title="Donate" alt="Donate" /></a>
</div>

<ul>
<li  onmouseover="showHide( 15 );" onmouseout="startTime();" ><a href="http://adfarm1.adition.com/click?sid=399467&amp;ts=[timestamp]">Наш спонсор webtropia.com</a>
		</li>
</ul>

<div id="menu-header-4">
<a href="http://webtropia.com"><img src="http://manual.aptosid.com/lib/logos/webtropia-logo.png" title="aptosid размещен на сервере webtropia.com" alt="aptosid размещен на сервере webtropia.com" /></a>
</div>

<ul>
<li><a></a></li>
</ul>

<!-- menu-en ends here --> </div><!--/htdig_noindex-->
<div id="main-page">
		<div class="divider" id="grub2">
			<h2 id="top-header">grub2</h2>
				<h6>Резюме основных различий при переходе от grub1 (Hыне известный как grub-legacy) на grub2:</h6>

					<ul>
						  	<li><span class="highlight-3">Файл menu.lst больше не существует.</span></li>

							<li>Файл <span class="highlight-3">grub.cfg</span> управляет теперь grub-экраном.</li>

							<li>grub.cfg автоматически создается скриптами в каталоге <span class="highlight-3"> /etc/grub.d</span>.</li>

							<li>Обозначение разделов также изменяется. Нумерация разделов начинается с 1, а не с 0. (Нумерация дисководов начинаются дальше с 0):
<pre>
Linux      grub1     grub2
/dev/sda1  (hd0,0)   (hd0,1)
/dev/sda2  (hd0,1)   (hd0,2)
/dev/sda3  (hd0,2)   (hd0,3)

/dev/sdb1  (hd1,0)   (hd1,1)
/dev/sdb2  (hd1,1)   (hd1,2)
/dev/sdb3  (hd1,2)   (hd1,3)
</pre>
							</li>

							<li>Стансы в grub.cfg сформулированы несколько иначе по сравнению с  menu.lst. Стансы с menu.lst (grub1) не могут копироваться непосредственно в  grub.cfg (grub2). <span class="highlight-2">Ни в коем случае  не вносите изменений и не меняйте что-либо в файле grub.cfg вручную. </span></li>

					 </ul>
		</div>
		<div class="divider" id="grub2-files">
					  <h4>Конфигурационный файл grub2 по умолчанию</h4>
							<p>Файл <span class="highlight-3">/etc/default/grub</span> содержит переменные параметры настройки grub2. Например, тайм-аут, основные настройки меню, параметры ядра, включая графический интерфейс grub и т.д.</p>

					 <h4>Скрипты grub2</h4>
							<p><span class="highlight-3"> /etc/grub.d</span> управляет объектным файлом <span class="highlight-3"> grub.cfg</span>, который находится в <span class="highlight-3"> /boot/grub/</span>.</p>

							<p><span class="highlight-2">Файл grub.cfg никогда не может изменяться вручную. </span>Все изменения должны произойти в скриптах файлов в  <span class="highlight-3"> /etc/grub.d</span>. os-prober должен обрабатывать 90% всех случаев:</p>
<pre>
00_header:
05_debian_theme: Sets background, text colors, themes
10_hurd: Locates Hurd kernels
10_linux: Locates Linux kernels based on results of the lsb_release command.
20_memtest86+: If the file /boot/memtest86+.bin exists, it is included in the boot menu.
30_os-prober: Searches for Linux and other OS's on all partitions; includes them in the boot menu.
40_custom: A template for adding custom boot menu entries for other Operating Systems.
60_fll-fromiso: A template for adding custom boot menu entries for fromiso to a USB-stick/SSD-card.
<span class="highlight-2">60_fll-fromiso is not to be altered use /etc/default/grub2-fll-fromiso
Прочитайте <a href="hd-install-opts-ru.htm#grub2-fromiso">Booting 'fromiso' with grub2</a></span>
</pre>
							<p>После того как Вы сделали изменения, grub.cfg должен их знать. После обновления ядра aptosid автоматически проводятся актуализация grub. Изменения, которые проводились вручную, требуют этой команды:</p>

<pre>
update-grub
</pre>

							<p><span class="highlight-3">Debian-пакет grub2 настолько хорошо устроен, что производимые вручную изменения редко требуються.</span></p>
		</div>
		<div class="divider" id="grub1-grub2">
				<h2>Обновление с grub1 на grub2</h2>
							<p><span class="highlight-2">Мы рекомендуем перейти на grub2 и полностью удалить grub1</span>. Вы должны знать, что Bы можете все испортить, так что будьте очень осторожны.</p>

						<h6>Шаг 1: </h6>
							<p>Убедитесь в том, что Ваша система обновлена​​ <span class="highlight-3">dist-upgrade на уровне загрузки init3. </span></p>
<pre>
apt-get update
Ctrl+alt+F1
init 3
apt-get dist-upgrade
init 5 &amp;&amp; exit
</pre>
						<h6>Шаг 2:</h6>
							<p>Удалите полностью grub1:</p>
<pre>
rm -rf /boot/grub
apt-get purge grub-gfxboot
</pre>
							<p>В результате чего, программы <span class="highlight-3">fll-iso2usb*, grub-gfxboot* и install-usb-gui* </span> будут тоже удалены. Введите <span class="highlight-3">Y</span> для подтверждения.</p>

						<h6>Шаг 3:</h6>

<pre>
apt-get install grub2 os-prober
</pre>

<div class="screenshot"><img src="../lib/images-common/images-grub2/grub2-2.png" title="grub2" alt="grub2" /></div>
							<p>Нажмите кнопкy TAB на вашей клавиатуре для перехода на OK</p>

<div class="screenshot"><img src="../lib/images-common/images-grub2/grub2-3.png" title="grub2" alt="grub2" /></div>
							<p>Нажмите кнопкy TAB на вашей клавиатуре для перехода на OK</p>

<div class="screenshot"><img src="../lib/images-common/images-grub2/grub2-convert-1.png" title="grub2-conversion 1" alt="grub2-conversion 1" /></div>

							<p>Используйте стрелки клавиатуры и пробел, чтобы поставить <span class="highlight-3">* (asterisk) </span> чтобы выбрать то, чтобы grub2 начал записывать MBR на жестком диске. <i>(В данном примере для установки на диск, USB)</i>.</p>

						<h6>Шаг 4:</h6>
<pre>
update-grub
</pre>


						<h6>Шаг 5:</h6>
<pre>
apt-get install install-usb-gui fll-iso2usb
</pre>

						<h6>Шаг 6:</h6>
							<p>Перезагрузите компьютер. После этого, grub-меню (menu.cfg) показывает ядра и список операционных систем, например это:</p>
<div class="screenshot"><img src="../lib/images-common/images-grub2/grub2-os-list.jpg" title="grub2-OS list" alt="grub2-OS list" /></div>

							<p>Если возникли проблемы, прочитайте внимательно эту главу <a href="sys-admin-grub2-ru.htm#chroot">Восстановление grub с помощью chroot</a>.</p>

				  <h3>Редактирование Grub2-параметpов загрузки через на экран</h3>
<div class="screenshot"><img src="../lib/images-common/images-grub2/grub2-e-1.JPG" title="grub2-Edit" alt="grub2-Edit" /></div>
							<p>В случае необходимости, времено изменить параметры загрузки для ядра, перечислив в Grub, нажмите клавишу '<span class="highlight-2">e</span>', чтобы редактировать опции ядра. Используйте клавиши направления для выбопа ядра, которого должно редактироваться. Еще в режиме редактирования компьютер с новыми опциями перезапускается с '<span class="highlight-3">Ctrl+x</span>'.</p>

							<p>Например, чтобы перейти непосредственно на уровень загрузки 3, добавьте <span class="highlight-3">3</span> в конце строки <span class="highlight-3">linux /boot/vmlinuz</span>.</p>

							<p>Ваши изменения, сделанные в режиме редактирования, не являются постоянными. Для постоянных изменений, соответствующих файлах конфигурации должны настраиваться. Смотрите также в главу <a href="sys-admin-grub2-ru.htm#grub2-files">Конфигурационные файлы grub2</a>.</p>

	      </div>
		<div class="divider" id="multi-os">
				<h2>Двойная и мильтизагрузка с помощью grub2</h2>

							<p>
							
							Grub2 имеет модульную конфигурацию, и, следовательно, позволяет простую команду, чтобы найти вновь установленных операционных систем, которые автоматически интегрируются в файл menu.cfg.Основные команды:
							
							Grub2 имеет модульную конфигурацию, что позволяет с помощью простой команды, искать все вновь установленные операционные системы. И если она найдена, оно старается, автоматически интегрируются в файл menu.cfg. Запустите с командой:</p>
<pre>
update-grub
</pre>
							<p>Если Вам нужно добавить пользовательские записи в menu.cfg, или если 30_os-prober не в состоянии написать chainloader-меню в grub.cfg,  дополнения могут проводиться с помощью текстового редактора в файле <span class="highlight-3"> /etc/grub.d/40_custom</span>.</p>

							<p>Примеры для файла конфигурации 40_custom:</p>
<pre>
menuentry "second mbr"{
set root=(hd1)
chainloader +1
}
</pre>

<pre>
menuentry "second partition"{
set root=(hd0,2)
chainloader +1
}
</pre>
							<p>После изменения файла выполните:</p>
<pre>
update-grub
</pre>
							<p>Если Вы видете сообщение об ошибке, что Grub не признается на диске это значит что нужно восстановить devicemap.</p>

							<p><span class="highlight-3">Убедитесь, что при установке другой операционной системе, Grub не записываются в MBR, а в раздел новой операционной системы:</span></p>
<pre>
grub-mkdevicemap --no-floppy
update-grub
</pre>
							<p>Предупреждение можно спокойно игнорировать.</p>

							<p>
							
							В случае ошибки обновление перезаписывает, наверно, MBR. Как исправлять, прочитайте в главе <a href="sys-admin-grub2-ru.htm#mbr-over-grub2">grub2 - MBR перезаписано</a>.</p>
</div>
	<div class="divider" id="mbr-over-grub2">

				<h2>Перезапись grub2 в MBR с жёсткого диска:</h2>

<pre>
/usr/sbin/grub-install --recheck --no-floppy /dev/sda
</pre>
							<p>Вполне возможно, что Вы должны выполнить эту команду несколько раз, пока grub "убежден" в том, что это действительно должно быть делать.</p>

				<h2>MBR, переписывано Windows - MBR поврежден - восстановление grub2</h2>
				
							<p><span class="highlight-2">Примечание: Для восстановления загрузчика grub2 Вы должны иметь aptosid*.iso, моложе чем 2009-04 (moros). </span> <a href="sys-admin-grub2-ru.htm#chroot">Альтернативно Вы можете использовать chroot с каждым live.iso.</a>.</p>

							<p>Чтобы переписать grub2 в MBR и/или восстановить в целом grub2, Вам нужно запустить <span class="highlight-3">aptosid.iso</span>:</p>
						<ol>
							<li>Для выявления и подтверждения раздела жесткого диска (например: [h,s] d [a..] X) на все последующие действия необходимы привилегии администратора, поэтому, введите:
<pre>
$ sux
</pre>
							</li>
							<li>С правами root напишите в консоли::
<pre>
fdisk -l
cat /etc/fstab
</pre>
							Таким образом, Вы получаете правильные названия разделов.
							</li>
							<li>
							После того, что Вы определили правильный раздел, создайте точки монтирования:
<pre>
mkdir -p /media/[hdxx,sdxx,diskx]
</pre>
							</li>
							<li>Смонтируйте раздел::
<pre>
mount /dev/xdxx /media/xdxx
</pre>
							</li>

							<li>Теперь переписывайте grub в MBR первого жёсткого диска:
<pre>
/usr/sbin/grub-install --recheck --no-floppy --root-directory=/media/xdxx /dev/sda
</pre>
							</li>
						</ol>
	      </div>
		<div class="divider" id="chroot">
		      <h2>Использование изолированной среды для восстановления поврежденной или перезаписанной grub в MBR</h2>

							<p>Чтобы восстановить grub в случае его повреждения или перезаписи grub в MBR создаётся <span class="highlight-3">chroot</span> в (изолированной) среде. <span class="highlight-3">Таким образом, любой ISO-образ можно использовать. С помощью chroot среды можно манипулировать инсталляцию жестких дисков так,  что желаемая версия grub смогла бы восстанавливать: grub1 (grub-legacy) или grub2.</span></p>

							<p>Загрузите aptosid Live-ISO который подходит для вашей системы (32 или 64 бит на CD, DVD, на USB-флешке или на карте SSD) и откройте терминал. Введите <span class="highlight-3">sux</span> и нажмите 'Enter', чтобы добавить root-привилегии..</p>

							<p>Используйте команду <span class="highlight-3">fdisk -l или blkid</span>, чтобы узнать, какой раздел является разделом загрузки, и, чтобы найти правильные названия разделов. Если Вам лучше нравится применить GUI, тогда используйте <span class="highlight-3">gparted</span>:</p>
<pre>
blkid
</pre>
							<p>Проверьте, идентичны ли элементы в файле fstab с изданием от blkid:</p>
<pre>
cat /etc/fstab
</pre>
							<p>Предположим, что Ваша корневая файловая система находится на <span class="highlight-3">/dev/sda2</span></p>
<pre>
mkdir /mnt/aptosid-chroot
mount /dev/sda2 /mnt/aptosid-chroot
</pre>

							<p>Следующим образом, Вам нужно смонтировать /proc, /run, /dev и /sys :</p>
<pre>
mount --bind /proc /mnt/aptosid-chroot/proc
mount --bind /run /mnt/aptosid-chroot/run
mount --bind /sys /mnt/aptosid-chroot/sys
mount --bind /dev /mnt/aptosid-chroot/dev
mount --bind /dev/pts /mnt/aptosid-chroot/dev/pts
</pre>
							<p>Если Вы загрузите с системного раздела EFI вам также нужно смонтировать его. Предположим что это /dev/sda1:</p>
<pre>
mount /dev/sda1 /mnt/aptosid-chroot/boot/efi
</pre>

							<p>Ваша chroot-среда теперь установлена и доступ к неё с командой:</p>
<pre>
chroot /mnt/aptosid-chroot /bin/bash
</pre>

							<p>Теперь Вы можете использовать файлы в локальном кэше apt или изменять нужные файлы для загрузки. В следующем примере grub переписывается в MBR.</p>

							<p><span class="highlight-3">Восстановление grub2</span></p>
<pre>
apt-get install --reinstall grub-pc
</pre>
							<p>Чтобы убедиться в том, что grub был установлен на правильном устройстве или на правильном разделе, выполните эту команду:</p>
<pre>
dpkg-reconfigure grub-pc
</pre>
							<p><span class="highlight-3">Перезапись grub2 EFI</span></p>
<pre>
apt-get install --reinstall grub-efi-amd64
</pre>
							<p><span class="highlight-3">Восстановление grub1 (grub-legacy)</span></p>
<pre>
apt-get install --reinstall grub-legacy
</pre>
							<p>Следуйте инструкциям на экране.</p>

							<p>С этой командой chroot среда снова освобождается:</p>
<pre>
Ctrl+d
</pre>
							<p>Перезагрузите компьютер.</p>





	</div>
	<div id="rev">Содержание, последний раз пересмотрено 21/10/2011 0330 UTC</div>

</div>
</body>
</html>
